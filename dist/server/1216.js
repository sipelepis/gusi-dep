"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=1216,exports.ids=[1216],exports.modules={31216:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{RequestCopyModule:()=>RequestCopyModule});var common=__webpack_require__(10210),shared_module=__webpack_require__(66004),router=__webpack_require__(37895),item_request_data_service=__webpack_require__(12102),operators=__webpack_require__(63281),core=__webpack_require__(70074);class RequestCopyResolver{constructor(itemRequestDataService){this.itemRequestDataService=itemRequestDataService}resolve(route,state){return this.itemRequestDataService.findById(route.params.token).pipe((0,operators.hC)())}}__name(RequestCopyResolver,"RequestCopyResolver"),RequestCopyResolver.\u0275fac=__name(function(t){return new(t||RequestCopyResolver)(core.LFG(item_request_data_service.a))},"RequestCopyResolver_Factory"),RequestCopyResolver.\u0275prov=core.Yz7({token:RequestCopyResolver,factory:RequestCopyResolver.\u0275fac});var cjs_operators=__webpack_require__(5796),auth_service=__webpack_require__(28709),url_combiner=__webpack_require__(69810),app_routing_paths=__webpack_require__(61562);function getRequestCopyRoute(token){return new url_combiner.R((0,app_routing_paths.vv)(),token).toString()}__name(getRequestCopyRoute,"getRequestCopyRoute");function getRequestCopyDenyRoute(token){return new url_combiner.R(getRequestCopyRoute(token),"deny").toString()}__name(getRequestCopyDenyRoute,"getRequestCopyDenyRoute");function getRequestCopyGrantRoute(token){return new url_combiner.R(getRequestCopyRoute(token),"grant").toString()}__name(getRequestCopyGrantRoute,"getRequestCopyGrantRoute");var item_data_service=__webpack_require__(89551),dso_name_service=__webpack_require__(53043),item_page_routing_paths=__webpack_require__(96007),authorized_operators=__webpack_require__(59846),var_directive=__webpack_require__(41633),themed_loading_component=__webpack_require__(76924),ngx_translate_core=__webpack_require__(47241);const _c0=__name(function(a0,a1){return{url:a0,name:a1}},"_c0");function GrantDenyRequestCopyComponent_div_0_div_4_div_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div"),core._UZ(1,"p",5),core.ALo(2,"translate"),core.ALo(3,"async"),core.ALo(4,"async"),core.TgZ(5,"p"),core._uU(6),core.ALo(7,"translate"),core.qZA(),core.TgZ(8,"div",6)(9,"a",7),core.ALo(10,"async"),core.ALo(11,"translate"),core._uU(12),core.ALo(13,"translate"),core.qZA(),core.TgZ(14,"a",8),core.ALo(15,"async"),core.ALo(16,"translate"),core._uU(17),core.ALo(18,"translate"),core.qZA()()()),2&rf){const ctx_r4=core.oxw(3);core.xp6(1),core.Q6J("innerHTML",core.xi3(2,8,"grant-deny-request-copy.intro1",core.WLB(29,_c0,core.lcZ(3,11,ctx_r4.itemUrl$),core.lcZ(4,13,ctx_r4.itemName$))),core.oJD),core.xp6(5),core.Oqu(core.lcZ(7,15,"grant-deny-request-copy.intro2")),core.xp6(3),core.s9C("title",core.lcZ(11,19,"grant-deny-request-copy.grant")),core.Q6J("routerLink",core.lcZ(10,17,ctx_r4.grantRoute$)),core.xp6(3),core.hij(" ",core.lcZ(13,21,"grant-deny-request-copy.grant")," "),core.xp6(2),core.s9C("title",core.lcZ(16,25,"grant-deny-request-copy.deny")),core.Q6J("routerLink",core.lcZ(15,23,ctx_r4.denyRoute$)),core.xp6(3),core.hij(" ",core.lcZ(18,27,"grant-deny-request-copy.deny")," ")}}function GrantDenyRequestCopyComponent_div_0_div_4_div_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",9)(1,"p"),core._uU(2),core.ALo(3,"translate"),core.qZA(),core.TgZ(4,"p",10)(5,"a",11),core._uU(6),core.ALo(7,"translate"),core.qZA()()()),2&rf&&(core.xp6(2),core.Oqu(core.lcZ(3,2,"grant-deny-request-copy.processed")),core.xp6(4),core.Oqu(core.lcZ(7,4,"grant-deny-request-copy.home-page")))}function GrantDenyRequestCopyComponent_div_0_div_4_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div"),core.YNc(1,GrantDenyRequestCopyComponent_div_0_div_4_div_1_Template,19,32,"div",3),core.YNc(2,GrantDenyRequestCopyComponent_div_0_div_4_div_2_Template,8,6,"div",4),core.qZA()),2&rf){const itemRequestRD_r1=core.oxw().ngVar;core.xp6(1),core.Q6J("ngIf",!itemRequestRD_r1.payload.decisionDate),core.xp6(1),core.Q6J("ngIf",itemRequestRD_r1.payload.decisionDate)}}function GrantDenyRequestCopyComponent_div_0_ds_themed_loading_5_Template(rf,ctx){1&rf&&core._UZ(0,"ds-themed-loading")}function GrantDenyRequestCopyComponent_div_0_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",1)(1,"h3",2),core._uU(2),core.ALo(3,"translate"),core.qZA(),core.YNc(4,GrantDenyRequestCopyComponent_div_0_div_4_Template,3,2,"div",3),core.YNc(5,GrantDenyRequestCopyComponent_div_0_ds_themed_loading_5_Template,1,0,"ds-themed-loading",3),core.qZA()),2&rf){const itemRequestRD_r1=ctx.ngVar;core.xp6(2),core.Oqu(core.lcZ(3,3,"grant-deny-request-copy.header")),core.xp6(2),core.Q6J("ngIf",itemRequestRD_r1&&itemRequestRD_r1.hasSucceeded),core.xp6(1),core.Q6J("ngIf",!itemRequestRD_r1||(null==itemRequestRD_r1?null:itemRequestRD_r1.isLoading))}}__name(GrantDenyRequestCopyComponent_div_0_div_4_div_1_Template,"GrantDenyRequestCopyComponent_div_0_div_4_div_1_Template"),__name(GrantDenyRequestCopyComponent_div_0_div_4_div_2_Template,"GrantDenyRequestCopyComponent_div_0_div_4_div_2_Template"),__name(GrantDenyRequestCopyComponent_div_0_div_4_Template,"GrantDenyRequestCopyComponent_div_0_div_4_Template"),__name(GrantDenyRequestCopyComponent_div_0_ds_themed_loading_5_Template,"GrantDenyRequestCopyComponent_div_0_ds_themed_loading_5_Template"),__name(GrantDenyRequestCopyComponent_div_0_Template,"GrantDenyRequestCopyComponent_div_0_Template");class GrantDenyRequestCopyComponent{constructor(router2,route,authService,itemDataService,nameService){this.router=router2,this.route=route,this.authService=authService,this.itemDataService=itemDataService,this.nameService=nameService}ngOnInit(){this.itemRequestRD$=this.route.data.pipe((0,cjs_operators.UI)(data=>data.request),(0,operators.hC)(),(0,authorized_operators.Gh)(this.router,this.authService)),this.itemRD$=this.itemRequestRD$.pipe((0,operators.Gp)(),(0,cjs_operators.wt)(itemRequest=>this.itemDataService.findById(itemRequest.itemId))),this.itemName$=this.itemRD$.pipe((0,operators.Gp)(),(0,cjs_operators.UI)(item=>this.nameService.getName(item))),this.itemUrl$=this.itemRD$.pipe((0,operators.Gp)(),(0,cjs_operators.UI)(item=>(0,item_page_routing_paths.Tt)(item))),this.denyRoute$=this.itemRequestRD$.pipe((0,operators.Gp)(),(0,cjs_operators.UI)(itemRequest=>getRequestCopyDenyRoute(itemRequest.token))),this.grantRoute$=this.itemRequestRD$.pipe((0,operators.Gp)(),(0,cjs_operators.UI)(itemRequest=>getRequestCopyGrantRoute(itemRequest.token)))}}__name(GrantDenyRequestCopyComponent,"GrantDenyRequestCopyComponent"),GrantDenyRequestCopyComponent.\u0275fac=__name(function(t){return new(t||GrantDenyRequestCopyComponent)(core.Y36(router.F0),core.Y36(router.gz),core.Y36(auth_service.e8),core.Y36(item_data_service.S),core.Y36(dso_name_service._))},"GrantDenyRequestCopyComponent_Factory"),GrantDenyRequestCopyComponent.\u0275cmp=core.Xpm({type:GrantDenyRequestCopyComponent,selectors:[["ds-grant-deny-request-copy"]],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],[1,"mb-4"],[4,"ngIf"],["class","processed-message",4,"ngIf"],[3,"innerHTML"],[1,"btn-group"],[1,"btn","btn-outline-primary",3,"routerLink","title"],[1,"btn","btn-outline-danger",3,"routerLink","title"],[1,"processed-message"],[1,"text-center"],["routerLink","/home",1,"btn","btn-primary"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,GrantDenyRequestCopyComponent_div_0_Template,6,5,"div",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngVar",core.lcZ(1,1,ctx.itemRequestRD$))},"GrantDenyRequestCopyComponent_Template"),directives:[var_directive.g,common.O5,router.yS,themed_loading_component.Z],pipes:[common.Ov,ngx_translate_core.X$],styles:[""]});var cjs=__webpack_require__(39942),empty_util=__webpack_require__(25839),notifications_service=__webpack_require__(16228);class RequestCopyEmail{constructor(subject,message){this.subject=subject,this.message=message}}__name(RequestCopyEmail,"RequestCopyEmail");var fesm2015_forms=__webpack_require__(45028);function EmailRequestCopyComponent_div_6_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",11),core._uU(1),core.ALo(2,"translate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"grant-deny-request-copy.email.subject.empty")," "))}function EmailRequestCopyComponent_div_12_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",11),core._uU(1),core.ALo(2,"translate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"grant-deny-request-copy.email.message.empty")," "))}__name(EmailRequestCopyComponent_div_6_Template,"EmailRequestCopyComponent_div_6_Template"),__name(EmailRequestCopyComponent_div_12_Template,"EmailRequestCopyComponent_div_12_Template");const email_request_copy_component_c0=__name(function(a0){return{"is-invalid":a0}},"email_request_copy_component_c0");class EmailRequestCopyComponent{constructor(location){this.location=location,this.send=new core.vpe}submit(){this.send.emit(new RequestCopyEmail(this.subject,this.message))}return(){this.location.back()}}function DenyRequestCopyComponent_div_0_div_4_Template(rf,ctx){if(1&rf){const _r5=core.EpF();core.TgZ(0,"div")(1,"p"),core._uU(2),core.ALo(3,"translate"),core.qZA(),core.TgZ(4,"ds-email-request-copy",4),core.NdJ("send",__name(function($event){return core.CHM(_r5),core.oxw(2).deny($event)},"DenyRequestCopyComponent_div_0_div_4_Template_ds_email_request_copy_send_4_listener")),core.ALo(5,"async"),core.ALo(6,"async"),core.qZA()()}if(2&rf){const ctx_r2=core.oxw(2);core.xp6(2),core.Oqu(core.lcZ(3,3,"deny-request-copy.intro")),core.xp6(2),core.Q6J("subject",core.lcZ(5,5,ctx_r2.subject$))("message",core.lcZ(6,7,ctx_r2.message$))}}function DenyRequestCopyComponent_div_0_ds_themed_loading_5_Template(rf,ctx){1&rf&&core._UZ(0,"ds-themed-loading")}function DenyRequestCopyComponent_div_0_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",1)(1,"h3",2),core._uU(2),core.ALo(3,"translate"),core.qZA(),core.YNc(4,DenyRequestCopyComponent_div_0_div_4_Template,7,9,"div",3),core.YNc(5,DenyRequestCopyComponent_div_0_ds_themed_loading_5_Template,1,0,"ds-themed-loading",3),core.qZA()),2&rf){const itemRequestRD_r1=ctx.ngVar;core.xp6(2),core.Oqu(core.lcZ(3,3,"deny-request-copy.header")),core.xp6(2),core.Q6J("ngIf",itemRequestRD_r1&&itemRequestRD_r1.hasSucceeded),core.xp6(1),core.Q6J("ngIf",!itemRequestRD_r1||(null==itemRequestRD_r1?null:itemRequestRD_r1.isLoading))}}__name(EmailRequestCopyComponent,"EmailRequestCopyComponent"),EmailRequestCopyComponent.\u0275fac=__name(function(t){return new(t||EmailRequestCopyComponent)(core.Y36(common.Ye))},"EmailRequestCopyComponent_Factory"),EmailRequestCopyComponent.\u0275cmp=core.Xpm({type:EmailRequestCopyComponent,selectors:[["ds-email-request-copy"]],inputs:{subject:"subject",message:"message"},outputs:{send:"send"},ngContentSelectors:["*"],decls:25,vars:29,consts:[[1,"form-group"],["for","subject"],["type","text","id","subject","name","subject",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["class","invalid-feedback",4,"ngIf"],["for","message"],["id","message","rows","8","name","message",1,"form-control",3,"ngClass","ngModel","ngModelChange"],[1,"d-flex","flex-row-reverse"],[1,"btn","btn-primary",3,"disabled","title","click"],[1,"fas","fa-envelope"],[1,"btn","btn-outline-secondary","mr-1",3,"title","click"],[1,"fas","fa-arrow-left"],[1,"invalid-feedback"]],template:__name(function(rf,ctx){1&rf&&(core.F$t(),core.TgZ(0,"form")(1,"div",0)(2,"label",1),core._uU(3),core.ALo(4,"translate"),core.qZA(),core.TgZ(5,"input",2),core.NdJ("ngModelChange",__name(function($event){return ctx.subject=$event},"EmailRequestCopyComponent_Template_input_ngModelChange_5_listener")),core.qZA(),core.YNc(6,EmailRequestCopyComponent_div_6_Template,3,3,"div",3),core.qZA(),core.TgZ(7,"div",0)(8,"label",4),core._uU(9),core.ALo(10,"translate"),core.qZA(),core.TgZ(11,"textarea",5),core.NdJ("ngModelChange",__name(function($event){return ctx.message=$event},"EmailRequestCopyComponent_Template_textarea_ngModelChange_11_listener")),core.qZA(),core.YNc(12,EmailRequestCopyComponent_div_12_Template,3,3,"div",3),core.qZA(),core.Hsn(13),core.TgZ(14,"div",6)(15,"button",7),core.NdJ("click",__name(function(){return ctx.submit()},"EmailRequestCopyComponent_Template_button_click_15_listener")),core.ALo(16,"translate"),core._UZ(17,"i",8),core._uU(18),core.ALo(19,"translate"),core.qZA(),core.TgZ(20,"button",9),core.NdJ("click",__name(function(){return ctx.return()},"EmailRequestCopyComponent_Template_button_click_20_listener")),core.ALo(21,"translate"),core._UZ(22,"i",10),core._uU(23),core.ALo(24,"translate"),core.qZA()()()),2&rf&&(core.xp6(3),core.Oqu(core.lcZ(4,13,"grant-deny-request-copy.email.subject")),core.xp6(2),core.Q6J("ngClass",core.VKq(25,email_request_copy_component_c0,!ctx.subject||0===ctx.subject.length))("ngModel",ctx.subject),core.xp6(1),core.Q6J("ngIf",!ctx.subject||0===ctx.subject.length),core.xp6(3),core.Oqu(core.lcZ(10,15,"grant-deny-request-copy.email.message")),core.xp6(2),core.Q6J("ngClass",core.VKq(27,email_request_copy_component_c0,!ctx.message||0===ctx.message.length))("ngModel",ctx.message),core.xp6(1),core.Q6J("ngIf",!ctx.message||0===ctx.message.length),core.xp6(3),core.s9C("title",core.lcZ(16,17,"grant-deny-request-copy.email.send")),core.Q6J("disabled",!ctx.message||0===ctx.message.length||!ctx.subject||0===ctx.subject.length),core.xp6(3),core.hij(" ",core.lcZ(19,19,"grant-deny-request-copy.email.send")," "),core.xp6(2),core.s9C("title",core.lcZ(21,21,"grant-deny-request-copy.email.back")),core.xp6(3),core.hij(" ",core.lcZ(24,23,"grant-deny-request-copy.email.back")," "))},"EmailRequestCopyComponent_Template"),directives:[fesm2015_forms._Y,fesm2015_forms.JL,fesm2015_forms.F,fesm2015_forms.Fj,common.mk,fesm2015_forms.JJ,fesm2015_forms.On,common.O5],pipes:[ngx_translate_core.X$],styles:[""]}),__name(DenyRequestCopyComponent_div_0_div_4_Template,"DenyRequestCopyComponent_div_0_div_4_Template"),__name(DenyRequestCopyComponent_div_0_ds_themed_loading_5_Template,"DenyRequestCopyComponent_div_0_ds_themed_loading_5_Template"),__name(DenyRequestCopyComponent_div_0_Template,"DenyRequestCopyComponent_div_0_Template");class DenyRequestCopyComponent{constructor(router2,route,authService,translateService,itemDataService,nameService,itemRequestService,notificationsService){this.router=router2,this.route=route,this.authService=authService,this.translateService=translateService,this.itemDataService=itemDataService,this.nameService=nameService,this.itemRequestService=itemRequestService,this.notificationsService=notificationsService}ngOnInit(){this.itemRequestRD$=this.route.data.pipe((0,cjs_operators.UI)(data=>data.request),(0,operators.hC)(),(0,authorized_operators.Gh)(this.router,this.authService));const msgParams$=(0,cjs.combineLatest)(this.itemRequestRD$.pipe((0,operators.Gp)()),this.authService.getAuthenticatedUserFromStore()).pipe((0,cjs_operators.wt)(([itemRequest,user])=>this.itemDataService.findById(itemRequest.itemId).pipe((0,operators.Gp)(),(0,cjs_operators.UI)(item=>{const uri=item.firstMetadataValue("dc.identifier.uri");return Object.assign({recipientName:itemRequest.requestName,itemUrl:(0,empty_util.UE)(uri)?uri:item.handle,itemName:this.nameService.getName(item),authorName:user.name,authorEmail:user.email})}))));this.subject$=this.translateService.get("deny-request-copy.email.subject"),this.message$=msgParams$.pipe((0,cjs_operators.wt)(params=>this.translateService.get("deny-request-copy.email.message",params)))}deny(email){this.itemRequestRD$.pipe((0,operators.Gp)(),(0,cjs_operators.wt)(itemRequest=>this.itemRequestService.deny(itemRequest.token,email)),(0,operators.hC)()).subscribe(rd=>{rd.hasSucceeded?(this.notificationsService.success(this.translateService.get("deny-request-copy.success")),this.router.navigateByUrl("/")):this.notificationsService.error(this.translateService.get("deny-request-copy.error"),rd.errorMessage)})}}function GrantRequestCopyComponent_div_0_div_4_Template(rf,ctx){if(1&rf){const _r5=core.EpF();core.TgZ(0,"div")(1,"p"),core._uU(2),core.ALo(3,"translate"),core.qZA(),core.TgZ(4,"ds-email-request-copy",4),core.NdJ("send",__name(function($event){return core.CHM(_r5),core.oxw(2).grant($event)},"GrantRequestCopyComponent_div_0_div_4_Template_ds_email_request_copy_send_4_listener")),core.ALo(5,"async"),core.ALo(6,"async"),core.TgZ(7,"p"),core._uU(8),core.ALo(9,"translate"),core.qZA(),core.TgZ(10,"form",5)(11,"div",6)(12,"input",7),core.NdJ("ngModelChange",__name(function($event){core.CHM(_r5);return core.oxw(2).suggestOpenAccess=$event},"GrantRequestCopyComponent_div_0_div_4_Template_input_ngModelChange_12_listener")),core.qZA(),core.TgZ(13,"label",8),core._uU(14),core.ALo(15,"translate"),core.qZA()()()()()}if(2&rf){const ctx_r2=core.oxw(2);core.xp6(2),core.Oqu(core.lcZ(3,6,"grant-request-copy.intro")),core.xp6(2),core.Q6J("subject",core.lcZ(5,8,ctx_r2.subject$))("message",core.lcZ(6,10,ctx_r2.message$)),core.xp6(4),core.Oqu(core.lcZ(9,12,"grant-deny-request-copy.email.permissions.info")),core.xp6(4),core.Q6J("ngModel",ctx_r2.suggestOpenAccess),core.xp6(2),core.Oqu(core.lcZ(15,14,"grant-deny-request-copy.email.permissions.label"))}}function GrantRequestCopyComponent_div_0_ds_themed_loading_5_Template(rf,ctx){1&rf&&core._UZ(0,"ds-themed-loading")}function GrantRequestCopyComponent_div_0_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",1)(1,"h3",2),core._uU(2),core.ALo(3,"translate"),core.qZA(),core.YNc(4,GrantRequestCopyComponent_div_0_div_4_Template,16,16,"div",3),core.YNc(5,GrantRequestCopyComponent_div_0_ds_themed_loading_5_Template,1,0,"ds-themed-loading",3),core.qZA()),2&rf){const itemRequestRD_r1=ctx.ngVar;core.xp6(2),core.Oqu(core.lcZ(3,3,"grant-request-copy.header")),core.xp6(2),core.Q6J("ngIf",itemRequestRD_r1&&itemRequestRD_r1.hasSucceeded),core.xp6(1),core.Q6J("ngIf",!itemRequestRD_r1||(null==itemRequestRD_r1?null:itemRequestRD_r1.isLoading))}}__name(DenyRequestCopyComponent,"DenyRequestCopyComponent"),DenyRequestCopyComponent.\u0275fac=__name(function(t){return new(t||DenyRequestCopyComponent)(core.Y36(router.F0),core.Y36(router.gz),core.Y36(auth_service.e8),core.Y36(ngx_translate_core.sK),core.Y36(item_data_service.S),core.Y36(dso_name_service._),core.Y36(item_request_data_service.a),core.Y36(notifications_service.T))},"DenyRequestCopyComponent_Factory"),DenyRequestCopyComponent.\u0275cmp=core.Xpm({type:DenyRequestCopyComponent,selectors:[["ds-deny-request-copy"]],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],[1,"mb-4"],[4,"ngIf"],[3,"subject","message","send"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,DenyRequestCopyComponent_div_0_Template,6,5,"div",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngVar",core.lcZ(1,1,ctx.itemRequestRD$))},"DenyRequestCopyComponent_Template"),directives:[var_directive.g,common.O5,EmailRequestCopyComponent,themed_loading_component.Z],pipes:[common.Ov,ngx_translate_core.X$],styles:[""]}),__name(GrantRequestCopyComponent_div_0_div_4_Template,"GrantRequestCopyComponent_div_0_div_4_Template"),__name(GrantRequestCopyComponent_div_0_ds_themed_loading_5_Template,"GrantRequestCopyComponent_div_0_ds_themed_loading_5_Template"),__name(GrantRequestCopyComponent_div_0_Template,"GrantRequestCopyComponent_div_0_Template");class GrantRequestCopyComponent{constructor(router2,route,authService,translateService,itemDataService,nameService,itemRequestService,notificationsService){this.router=router2,this.route=route,this.authService=authService,this.translateService=translateService,this.itemDataService=itemDataService,this.nameService=nameService,this.itemRequestService=itemRequestService,this.notificationsService=notificationsService,this.suggestOpenAccess=!1}ngOnInit(){this.itemRequestRD$=this.route.data.pipe((0,cjs_operators.UI)(data=>data.request),(0,operators.hC)(),(0,authorized_operators.Gh)(this.router,this.authService));const msgParams$=(0,cjs.combineLatest)(this.itemRequestRD$.pipe((0,operators.Gp)()),this.authService.getAuthenticatedUserFromStore()).pipe((0,cjs_operators.wt)(([itemRequest,user])=>this.itemDataService.findById(itemRequest.itemId).pipe((0,operators.Gp)(),(0,cjs_operators.UI)(item=>{const uri=item.firstMetadataValue("dc.identifier.uri");return Object.assign({recipientName:itemRequest.requestName,itemUrl:(0,empty_util.UE)(uri)?uri:item.handle,itemName:this.nameService.getName(item),authorName:user.name,authorEmail:user.email})}))));this.subject$=this.translateService.get("grant-request-copy.email.subject"),this.message$=msgParams$.pipe((0,cjs_operators.wt)(params=>this.translateService.get("grant-request-copy.email.message",params)))}grant(email){this.itemRequestRD$.pipe((0,operators.Gp)(),(0,cjs_operators.wt)(itemRequest=>this.itemRequestService.grant(itemRequest.token,email,this.suggestOpenAccess)),(0,operators.hC)()).subscribe(rd=>{rd.hasSucceeded?(this.notificationsService.success(this.translateService.get("grant-request-copy.success")),this.router.navigateByUrl("/")):this.notificationsService.error(this.translateService.get("grant-request-copy.error"),rd.errorMessage)})}}__name(GrantRequestCopyComponent,"GrantRequestCopyComponent"),GrantRequestCopyComponent.\u0275fac=__name(function(t){return new(t||GrantRequestCopyComponent)(core.Y36(router.F0),core.Y36(router.gz),core.Y36(auth_service.e8),core.Y36(ngx_translate_core.sK),core.Y36(item_data_service.S),core.Y36(dso_name_service._),core.Y36(item_request_data_service.a),core.Y36(notifications_service.T))},"GrantRequestCopyComponent_Factory"),GrantRequestCopyComponent.\u0275cmp=core.Xpm({type:GrantRequestCopyComponent,selectors:[["ds-grant-request-copy"]],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],[1,"mb-4"],[4,"ngIf"],[3,"subject","message","send"],[1,"mb-3"],[1,"form-check"],["type","checkbox","value","","id","permissions","name","permissions",1,"form-check-input",3,"ngModel","ngModelChange"],["for","permissions",1,"form-check-label"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,GrantRequestCopyComponent_div_0_Template,6,5,"div",0),core.ALo(1,"async")),2&rf&&core.Q6J("ngVar",core.lcZ(1,1,ctx.itemRequestRD$))},"GrantRequestCopyComponent_Template"),directives:[var_directive.g,common.O5,EmailRequestCopyComponent,fesm2015_forms._Y,fesm2015_forms.JL,fesm2015_forms.F,fesm2015_forms.Wl,fesm2015_forms.JJ,fesm2015_forms.On,themed_loading_component.Z],pipes:[common.Ov,ngx_translate_core.X$],styles:[""]});class RequestCopyRoutingModule{}__name(RequestCopyRoutingModule,"RequestCopyRoutingModule"),RequestCopyRoutingModule.\u0275fac=__name(function(t){return new(t||RequestCopyRoutingModule)},"RequestCopyRoutingModule_Factory"),RequestCopyRoutingModule.\u0275mod=core.oAB({type:RequestCopyRoutingModule}),RequestCopyRoutingModule.\u0275inj=core.cJS({providers:[RequestCopyResolver,GrantDenyRequestCopyComponent],imports:[[router.Bz.forChild([{path:":token",resolve:{request:RequestCopyResolver},children:[{path:"",component:GrantDenyRequestCopyComponent},{path:"deny",component:DenyRequestCopyComponent},{path:"grant",component:GrantRequestCopyComponent}]}])]]});class RequestCopyModule{}__name(RequestCopyModule,"RequestCopyModule"),RequestCopyModule.\u0275fac=__name(function(t){return new(t||RequestCopyModule)},"RequestCopyModule_Factory"),RequestCopyModule.\u0275mod=core.oAB({type:RequestCopyModule}),RequestCopyModule.\u0275inj=core.cJS({providers:[],imports:[[common.ez,shared_module.m,RequestCopyRoutingModule]]})}};