var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=1116,exports.ids=[1116],exports.modules={53995:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{K:()=>JsonPatchOperationPathCombiner});var _shared_empty_util__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(25839),_url_combiner_url_combiner__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(69810);class JsonPatchOperationPathCombiner extends _url_combiner_url_combiner__WEBPACK_IMPORTED_MODULE_0__.R{constructor(rootElement,...subRootElements){super(rootElement,...subRootElements),this._rootElement=rootElement,this._subRootElement=subRootElements.join("/")}get rootElement(){return this._rootElement}get subRootElement(){return this._subRootElement}getPath(fragment){(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_1__.pT)(fragment)&&Array.isArray(fragment)&&(fragment=fragment.join("/"));let path="/"+this.toString();return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_1__.pT)(fragment)&&(path+="/"+fragment),{rootElement:this._rootElement,subRootElement:this._subRootElement,path}}}__name(JsonPatchOperationPathCombiner,"JsonPatchOperationPathCombiner")},94650:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{m:()=>SubmissionObjectResolver});var _shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8183),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5796),_shared_operators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(63281),_data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(65651),_angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(70074),_ngrx_store__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(93179);class SubmissionObjectResolver{constructor(dataService,store){this.dataService=dataService,this.store=store}resolve(route,state){return this.dataService.findById(route.params.id,!0,!1,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_2__.l)("item")).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_0__.hC)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.wt)(wfiRD=>wfiRD.payload.item),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_0__.hC)())}}__name(SubmissionObjectResolver,"SubmissionObjectResolver"),SubmissionObjectResolver.\u0275fac=__name(function(t){return new(t||SubmissionObjectResolver)(_angular_core__WEBPACK_IMPORTED_MODULE_4__.LFG(_data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_1__.t),_angular_core__WEBPACK_IMPORTED_MODULE_4__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_5__.yh))},"SubmissionObjectResolver_Factory"),SubmissionObjectResolver.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_4__.Yz7({token:SubmissionObjectResolver,factory:SubmissionObjectResolver.\u0275fac})},3751:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SubmissionEditComponent:()=>SubmissionEditComponent});var rxjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(39942),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(5796),_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(25839),_submission_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(83653),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(16228),_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(63281),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(89551),_core_submission_submission_json_patch_operations_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(65702),_utils_parseSectionErrors__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(60516),_angular_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(70074),_angular_router__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(37895),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(47241),_form_submission_form_component__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(25748);class SubmissionEditComponent{constructor(changeDetectorRef,notificationsService,route,router,itemDataService,submissionService,translate,submissionJsonPatchOperationsService){this.changeDetectorRef=changeDetectorRef,this.notificationsService=notificationsService,this.route=route,this.router=router,this.itemDataService=itemDataService,this.submissionService=submissionService,this.translate=translate,this.submissionJsonPatchOperationsService=submissionJsonPatchOperationsService,this.subs=[],this.itemLink$=new rxjs__WEBPACK_IMPORTED_MODULE_6__.BehaviorSubject(void 0)}ngOnInit(){this.subs.push(this.route.paramMap.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.wt)(params=>this.submissionService.retrieveSubmission(params.get("id"))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.hX)(submissionObjectRD=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.K0)(submissionObjectRD))).subscribe(submissionObjectRD=>{if(submissionObjectRD.hasSucceeded)if((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.xb)(submissionObjectRD.payload))this.notificationsService.info(null,this.translate.get("submission.general.cannot_submit")),this.router.navigate(["/mydspace"]);else{const{errors}=submissionObjectRD.payload;this.submissionErrors=(0,_utils_parseSectionErrors__WEBPACK_IMPORTED_MODULE_9__.Z)(errors),this.submissionId=submissionObjectRD.payload.id.toString(),this.collectionId=submissionObjectRD.payload.collection.id,this.selfUrl=submissionObjectRD.payload._links.self.href,this.sections=submissionObjectRD.payload.sections,this.itemLink$.next(submissionObjectRD.payload._links.item.href),this.item=submissionObjectRD.payload.item,this.submissionDefinition=submissionObjectRD.payload.submissionDefinition}else 404===submissionObjectRD.statusCode&&this.router.navigate(["/404"],{skipLocationChange:!0})}),this.itemLink$.pipe((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.iy)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.wt)(itemLink=>this.itemDataService.findByHref(itemLink)),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.g1)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.bh)(300)).subscribe(itemRd=>{this.item=itemRd.payload,this.changeDetectorRef.detectChanges()}))}ngOnDestroy(){this.subs.filter(sub=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.Uh)(sub)).forEach(sub=>sub.unsubscribe()),this.submissionJsonPatchOperationsService.deletePendingJsonPatchOperations()}}__name(SubmissionEditComponent,"SubmissionEditComponent"),SubmissionEditComponent.\u0275fac=__name(function(t){return new(t||SubmissionEditComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_10__.sBO),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y36(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_1__.T),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_11__.gz),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_11__.F0),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y36(_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_3__.S),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y36(_submission_service__WEBPACK_IMPORTED_MODULE_0__.b),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y36(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__.sK),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Y36(_core_submission_submission_json_patch_operations_service__WEBPACK_IMPORTED_MODULE_4__.E))},"SubmissionEditComponent_Factory"),SubmissionEditComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_10__.Xpm({type:SubmissionEditComponent,selectors:[["ds-submission-edit"]],decls:2,vars:7,consts:[[1,"submission-submit-container"],[3,"collectionId","sections","selfUrl","submissionDefinition","submissionErrors","item","submissionId"]],template:__name(function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_10__.TgZ(0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_10__._UZ(1,"ds-submission-form",1),_angular_core__WEBPACK_IMPORTED_MODULE_10__.qZA()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_10__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_10__.Q6J("collectionId",ctx.collectionId)("sections",ctx.sections)("selfUrl",ctx.selfUrl)("submissionDefinition",ctx.submissionDefinition)("submissionErrors",ctx.submissionErrors)("item",ctx.item)("submissionId",ctx.submissionId))},"SubmissionEditComponent_Template"),directives:[_form_submission_form_component__WEBPACK_IMPORTED_MODULE_5__.G],styles:[""]})},14530:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{I:()=>ThemedSubmissionEditComponent});var _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(46533),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(70074);function ThemedSubmissionEditComponent_ng_template_0_Template(rf,ctx){}__name(ThemedSubmissionEditComponent_ng_template_0_Template,"ThemedSubmissionEditComponent_ng_template_0_Template");class ThemedSubmissionEditComponent extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_0__.F{getComponentName(){return"SubmissionEditComponent"}importThemedComponent(themeName){return __webpack_require__(8377)(`./${themeName}/app/submission/edit/submission-edit.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,3751))}}__name(ThemedSubmissionEditComponent,"ThemedSubmissionEditComponent"),ThemedSubmissionEditComponent.\u0275fac=function(){let \u0275ThemedSubmissionEditComponent_BaseFactory;return __name(function(t){return(\u0275ThemedSubmissionEditComponent_BaseFactory||(\u0275ThemedSubmissionEditComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_1__.n5z(ThemedSubmissionEditComponent)))(t||ThemedSubmissionEditComponent)},"ThemedSubmissionEditComponent_Factory")}(),ThemedSubmissionEditComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Xpm({type:ThemedSubmissionEditComponent,selectors:[["ds-themed-submission-edit"]],features:[_angular_core__WEBPACK_IMPORTED_MODULE_1__.qOj],decls:2,vars:0,consts:[["vcr",""]],template:__name(function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.YNc(0,ThemedSubmissionEditComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.W1O)},"ThemedSubmissionEditComponent_Template"),encapsulation:2})},51769:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{z:()=>SubmissionFormCollectionComponent});var _angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(70074),rxjs__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(39942),rxjs_operators__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(5796),_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(25839),_core_json_patch_builder_json_patch_operation_path_combiner__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(53995),_core_json_patch_builder_json_patch_operations_builder__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(26704),_submission_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(83653),_core_submission_submission_json_patch_operations_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(65702),_core_data_collection_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(64508),_shared_collection_dropdown_collection_dropdown_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(60380),_sections_sections_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(85848),_core_shared_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(63281),_sections_sections_type__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(52738),_angular_common__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(10210),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(63742),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(47241);function SubmissionFormCollectionComponent_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(0,"div",2)(1,"div",3)(2,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_8__._uU(3),_angular_core__WEBPACK_IMPORTED_MODULE_8__.ALo(4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(5,"div",5)(6,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_8__._uU(7),_angular_core__WEBPACK_IMPORTED_MODULE_8__.ALo(8,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA()()()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_8__.lcZ(4,2,"submission.sections.general.collection")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_8__.lcZ(8,4,ctx_r0.selectedCollectionName$))}}function SubmissionFormCollectionComponent_div_3_span_8_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_8__._UZ(1,"i",13),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA())}function SubmissionFormCollectionComponent_div_3_span_10_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_8__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.ALo(2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA()),2&rf){const ctx_r4=_angular_core__WEBPACK_IMPORTED_MODULE_8__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_8__.lcZ(2,1,ctx_r4.selectedCollectionName$))}}function SubmissionFormCollectionComponent_div_3_Template(rf,ctx){if(1&rf){const _r6=_angular_core__WEBPACK_IMPORTED_MODULE_8__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(0,"div",6,7),_angular_core__WEBPACK_IMPORTED_MODULE_8__.NdJ("openChange",__name(function($event){return _angular_core__WEBPACK_IMPORTED_MODULE_8__.CHM(_r6),_angular_core__WEBPACK_IMPORTED_MODULE_8__.oxw().toggled($event)},"SubmissionFormCollectionComponent_div_3_Template_div_openChange_0_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(2,"div",3)(3,"span",8),_angular_core__WEBPACK_IMPORTED_MODULE_8__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_8__.ALo(5,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(6,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_8__.NdJ("blur",__name(function(){return _angular_core__WEBPACK_IMPORTED_MODULE_8__.CHM(_r6),_angular_core__WEBPACK_IMPORTED_MODULE_8__.oxw().onClose()},"SubmissionFormCollectionComponent_div_3_Template_button_blur_6_listener"))("click",__name(function(){return _angular_core__WEBPACK_IMPORTED_MODULE_8__.CHM(_r6),_angular_core__WEBPACK_IMPORTED_MODULE_8__.oxw().onClose()},"SubmissionFormCollectionComponent_div_3_Template_button_click_6_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.ALo(7,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.YNc(8,SubmissionFormCollectionComponent_div_3_span_8_Template,2,0,"span",10),_angular_core__WEBPACK_IMPORTED_MODULE_8__.ALo(9,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.YNc(10,SubmissionFormCollectionComponent_div_3_span_10_Template,3,3,"span",10),_angular_core__WEBPACK_IMPORTED_MODULE_8__.ALo(11,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(12,"div",11)(13,"ds-collection-dropdown",12),_angular_core__WEBPACK_IMPORTED_MODULE_8__.NdJ("selectionChange",__name(function($event){return _angular_core__WEBPACK_IMPORTED_MODULE_8__.CHM(_r6),_angular_core__WEBPACK_IMPORTED_MODULE_8__.oxw().onSelect($event)},"SubmissionFormCollectionComponent_div_3_Template_ds_collection_dropdown_selectionChange_13_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA()()()}if(2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_8__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_8__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_8__.lcZ(5,4,"submission.sections.general.collection")," "),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Q6J("disabled",_angular_core__WEBPACK_IMPORTED_MODULE_8__.lcZ(7,6,ctx_r1.processingChange$)),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Q6J("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_8__.lcZ(9,8,ctx_r1.processingChange$)),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Q6J("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_8__.lcZ(11,10,ctx_r1.processingChange$))}}__name(SubmissionFormCollectionComponent_div_1_Template,"SubmissionFormCollectionComponent_div_1_Template"),__name(SubmissionFormCollectionComponent_div_3_span_8_Template,"SubmissionFormCollectionComponent_div_3_span_8_Template"),__name(SubmissionFormCollectionComponent_div_3_span_10_Template,"SubmissionFormCollectionComponent_div_3_span_10_Template"),__name(SubmissionFormCollectionComponent_div_3_Template,"SubmissionFormCollectionComponent_div_3_Template");class SubmissionFormCollectionComponent{constructor(cdr,collectionDataService,operationsBuilder,operationsService,submissionService,sectionsService){this.cdr=cdr,this.collectionDataService=collectionDataService,this.operationsBuilder=operationsBuilder,this.operationsService=operationsService,this.submissionService=submissionService,this.sectionsService=sectionsService,this.collectionChange=new _angular_core__WEBPACK_IMPORTED_MODULE_8__.vpe,this.processingChange$=new rxjs__WEBPACK_IMPORTED_MODULE_9__.BehaviorSubject(!1),this.subs=[]}ngOnChanges(changes){(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.Uh)(changes.currentCollectionId)&&(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.Uh)(changes.currentCollectionId.currentValue)&&(this.selectedCollectionId=this.currentCollectionId,this.selectedCollectionName$=this.collectionDataService.findById(this.currentCollectionId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.sE)(collectionRD=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.UE)(collectionRD.payload)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.UI)(collectionRD=>collectionRD.payload.name)))}ngOnInit(){this.pathCombiner=new _core_json_patch_builder_json_patch_operation_path_combiner__WEBPACK_IMPORTED_MODULE_12__.K("sections","collection"),this.available$=this.sectionsService.isSectionTypeAvailable(this.submissionId,_sections_sections_type__WEBPACK_IMPORTED_MODULE_7__.i.collection)}ngOnDestroy(){this.subs.filter(sub=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.Uh)(sub)).forEach(sub=>sub.unsubscribe())}onSelect(event){this.processingChange$.next(!0),this.operationsBuilder.replace(this.pathCombiner.getPath(),event.collection.id,!0),this.subs.push(this.operationsService.jsonPatchByResourceID(this.submissionService.getSubmissionObjectLinkName(),this.submissionId,"sections","collection").pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.zg)(submissionObject=>this.submissionService.retrieveSubmission(submissionObject[0].id).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_6__.Gp)()))).subscribe(submissionObject=>{this.selectedCollectionId=event.collection.id,this.selectedCollectionName$=(0,rxjs__WEBPACK_IMPORTED_MODULE_9__.of)(event.collection.name),this.collectionChange.emit(submissionObject),this.submissionService.changeSubmissionCollection(this.submissionId,event.collection.id),this.processingChange$.next(!1),this.cdr.detectChanges()}))}onClose(){this.collectionDropdown.reset()}toggled(isOpen){isOpen||this.collectionDropdown.reset()}}__name(SubmissionFormCollectionComponent,"SubmissionFormCollectionComponent"),SubmissionFormCollectionComponent.\u0275fac=__name(function(t){return new(t||SubmissionFormCollectionComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_8__.sBO),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y36(_core_data_collection_data_service__WEBPACK_IMPORTED_MODULE_3__.W),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y36(_core_json_patch_builder_json_patch_operations_builder__WEBPACK_IMPORTED_MODULE_0__.w),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y36(_core_submission_submission_json_patch_operations_service__WEBPACK_IMPORTED_MODULE_2__.E),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y36(_submission_service__WEBPACK_IMPORTED_MODULE_1__.b),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y36(_sections_sections_service__WEBPACK_IMPORTED_MODULE_5__.J))},"SubmissionFormCollectionComponent_Factory"),SubmissionFormCollectionComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_8__.Xpm({type:SubmissionFormCollectionComponent,selectors:[["ds-submission-form-collection"]],viewQuery:__name(function(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_8__.Gf(_shared_collection_dropdown_collection_dropdown_component__WEBPACK_IMPORTED_MODULE_4__.H,5),2&rf){let _t;_angular_core__WEBPACK_IMPORTED_MODULE_8__.iGM(_t=_angular_core__WEBPACK_IMPORTED_MODULE_8__.CRH())&&(ctx.collectionDropdown=_t.first)}},"SubmissionFormCollectionComponent_Query"),inputs:{currentCollectionId:"currentCollectionId",currentDefinition:"currentDefinition",submissionId:"submissionId"},outputs:{collectionChange:"collectionChange"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_8__.TTD],decls:5,vars:6,consts:[["class","input-group mb-3",4,"ngIf"],["ngbDropdown","","class","btn-group input-group",3,"openChange",4,"ngIf"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"input-group-append"],["ngbDropdown","",1,"btn-group","input-group",3,"openChange"],["collectionControls","ngbDropdown"],["id","collectionControlsMenuLabel",1,"input-group-text"],["aria-describedby","collectionControlsMenuLabel","id","collectionControlsMenuButton","ngbDropdownToggle","",1,"btn","btn-outline-primary",3,"disabled","blur","click"],[4,"ngIf"],["ngbDropdownMenu","","id","collectionControlsDropdownMenu","aria-labelledby","collectionControlsMenuButton",1,"dropdown-menu"],[3,"selectionChange"],[1,"fas","fa-circle-notch","fa-spin"]],template:__name(function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.YNc(1,SubmissionFormCollectionComponent_div_1_Template,9,6,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_8__.ALo(2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.YNc(3,SubmissionFormCollectionComponent_div_3_Template,14,12,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.ALo(4,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Q6J("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_8__.lcZ(2,2,ctx.available$)),_angular_core__WEBPACK_IMPORTED_MODULE_8__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Q6J("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_8__.lcZ(4,4,ctx.available$)))},"SubmissionFormCollectionComponent_Template"),directives:[_angular_common__WEBPACK_IMPORTED_MODULE_13__.O5,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_14__.jt,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_14__.iD,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_14__.Vi,_shared_collection_dropdown_collection_dropdown_component__WEBPACK_IMPORTED_MODULE_4__.H],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_13__.Ov,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_15__.X$],styles:[".scrollable-menu[_ngcontent-%COMP%]{height:auto;max-height:var(--ds-dropdown-menu-max-height);overflow-x:hidden}.collection-item[_ngcontent-%COMP%]{border-bottom:var(--bs-dropdown-border-width) solid var(--bs-dropdown-border-color)}#collectionControlsDropdownMenu[_ngcontent-%COMP%]{left:0!important}#collectionControlsDropdownMenu[_ngcontent-%COMP%]{outline:0;box-shadow:var(--bs-btn-focus-box-shadow)}"]})},17996:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{z:()=>SubmissionFormFooterComponent});var rxjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(39942),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(5796),_core_submission_submission_rest_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(13172),_submission_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(83653),_core_submission_submission_scope_type__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(12286),_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(25839),_angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(70074),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(63742),_angular_common__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(10210),_shared_utils_browser_only_pipe__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(86481),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(47241);function SubmissionFormFooterComponent_div_0_button_2_Template(rf,ctx){if(1&rf){const _r9=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"button",13),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",__name(function($event){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(_r9);const ctx_r8=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(2),_r1=_angular_core__WEBPACK_IMPORTED_MODULE_4__.MAs(2);return $event.preventDefault(),ctx_r8.confirmDiscard(_r1)},"SubmissionFormFooterComponent_div_0_button_2_Template_button_click_0_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(1,"dsBrowserOnly"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(4,"i",14),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(5),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(6,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()}if(2&rf){const ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("disabled",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(2,5,ctx_r3.processingSaveStatus)||_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(3,7,ctx_r3.processingDepositStatus)),_angular_core__WEBPACK_IMPORTED_MODULE_4__.uIk("data-test",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(1,3,"discard")),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(6,9,"submission.general.discard.submit")," ")}}function SubmissionFormFooterComponent_div_0_span_5_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(1,"i",15),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(3,1,"submission.general.info.saved")," "))}function SubmissionFormFooterComponent_div_0_span_9_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(1,"i",16),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(3,1,"submission.general.info.pending-changes")," "))}function SubmissionFormFooterComponent_div_0_div_13_div_2_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",20),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(1,"Saving..."),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_4__.Udp("width","100%")}function SubmissionFormFooterComponent_div_0_div_13_div_4_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",20),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(1,"Depositing..."),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_4__.Udp("width","100%")}function SubmissionFormFooterComponent_div_0_div_13_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",17)(1,"div",18),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(2,SubmissionFormFooterComponent_div_0_div_13_div_2_Template,2,2,"div",19),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(4,SubmissionFormFooterComponent_div_0_div_13_div_4_Template,2,2,"div",19),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()),2&rf){const ctx_r6=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(3,2,ctx_r6.processingSaveStatus)),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(5,4,ctx_r6.processingDepositStatus))}}function SubmissionFormFooterComponent_div_0_button_35_Template(rf,ctx){if(1&rf){const _r13=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"button",21),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",__name(function($event){return _angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(_r13),_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(2).deposit($event)},"SubmissionFormFooterComponent_div_0_button_35_Template_button_click_0_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(1,"dsBrowserOnly"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(4,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(5,"i",22),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(7,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()}if(2&rf){const ctx_r7=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("disabled",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(2,5,ctx_r7.processingSaveStatus)||_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(3,7,ctx_r7.processingDepositStatus)),_angular_core__WEBPACK_IMPORTED_MODULE_4__.uIk("data-test",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(1,3,"deposit")),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(7,9,"submission.general.deposit"),"")}}function SubmissionFormFooterComponent_div_0_Template(rf,ctx){if(1&rf){const _r15=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",2)(1,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(2,SubmissionFormFooterComponent_div_0_button_2_Template,7,11,"button",4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(4,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(5,SubmissionFormFooterComponent_div_0_span_5_Template,4,3,"span",6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(6,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(7,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(8,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(9,SubmissionFormFooterComponent_div_0_span_9_Template,4,3,"span",6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(10,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(11,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(12,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(13,SubmissionFormFooterComponent_div_0_div_13_Template,6,6,"div",7),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(14,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(15,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(16,"div",8)(17,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",__name(function($event){return _angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(_r15),_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw().save($event)},"SubmissionFormFooterComponent_div_0_Template_button_click_17_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(18,"dsBrowserOnly"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(19,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(20,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(21,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(22,"i",10),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(23),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(24,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(25,"button",11),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",__name(function($event){return _angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(_r15),_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw().saveLater($event)},"SubmissionFormFooterComponent_div_0_Template_button_click_25_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(26,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(27,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(28,"dsBrowserOnly"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(29,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(30,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(31,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(32,"i",10),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(33),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(34,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(35,SubmissionFormFooterComponent_div_0_button_35_Template,8,11,"button",12),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(36,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()}if(2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(3,15,ctx_r0.showDepositAndDiscard)),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(6,17,ctx_r0.hasUnsavedModification)&&!_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(7,19,ctx_r0.processingSaveStatus)&&!_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(8,21,ctx_r0.processingDepositStatus)),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(10,23,ctx_r0.hasUnsavedModification)&&!_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(11,25,ctx_r0.processingSaveStatus)&&!_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(12,27,ctx_r0.processingDepositStatus)),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(14,29,ctx_r0.processingSaveStatus)||_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(15,31,ctx_r0.processingDepositStatus)),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("disabled",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(19,35,ctx_r0.processingSaveStatus)||!_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(20,37,ctx_r0.hasUnsavedModification)),_angular_core__WEBPACK_IMPORTED_MODULE_4__.uIk("data-test",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(18,33,"save")),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(24,39,"submission.general.save"),""),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ekj("btn-primary",!_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(26,41,ctx_r0.showDepositAndDiscard))("btn-secondary",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(27,43,ctx_r0.showDepositAndDiscard)),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("disabled",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(29,47,ctx_r0.processingSaveStatus)||_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(30,49,ctx_r0.processingDepositStatus)),_angular_core__WEBPACK_IMPORTED_MODULE_4__.uIk("data-test",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(28,45,"save-for-later")),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(8),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(34,51,"submission.general.save-later"),""),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(36,53,ctx_r0.showDepositAndDiscard))}}function SubmissionFormFooterComponent_ng_template_1_Template(rf,ctx){if(1&rf){const _r20=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",23)(1,"h4",24),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(4,"button",25),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",__name(function(){return _angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(_r20).dismiss("cancel")},"SubmissionFormFooterComponent_ng_template_1_Template_button_click_4_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(5,"span",26),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(6,"\xd7"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(7,"div",27)(8,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(9),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(10,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(11,"div",28)(12,"button",29),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",__name(function(){return _angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(_r20).close("cancel")},"SubmissionFormFooterComponent_ng_template_1_Template_button_click_12_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(13),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(14,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(15,"button",30),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",__name(function(){return _angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(_r20).close("ok")},"SubmissionFormFooterComponent_ng_template_1_Template_button_click_15_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(16),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(17,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()}2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(3,4,"submission.general.discard.confirm.title")),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(7),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(10,6,"submission.general.discard.confirm.info")),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(14,8,"submission.general.discard.confirm.cancel")),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(17,10,"submission.general.discard.confirm.submit")))}__name(SubmissionFormFooterComponent_div_0_button_2_Template,"SubmissionFormFooterComponent_div_0_button_2_Template"),__name(SubmissionFormFooterComponent_div_0_span_5_Template,"SubmissionFormFooterComponent_div_0_span_5_Template"),__name(SubmissionFormFooterComponent_div_0_span_9_Template,"SubmissionFormFooterComponent_div_0_span_9_Template"),__name(SubmissionFormFooterComponent_div_0_div_13_div_2_Template,"SubmissionFormFooterComponent_div_0_div_13_div_2_Template"),__name(SubmissionFormFooterComponent_div_0_div_13_div_4_Template,"SubmissionFormFooterComponent_div_0_div_13_div_4_Template"),__name(SubmissionFormFooterComponent_div_0_div_13_Template,"SubmissionFormFooterComponent_div_0_div_13_Template"),__name(SubmissionFormFooterComponent_div_0_button_35_Template,"SubmissionFormFooterComponent_div_0_button_35_Template"),__name(SubmissionFormFooterComponent_div_0_Template,"SubmissionFormFooterComponent_div_0_Template"),__name(SubmissionFormFooterComponent_ng_template_1_Template,"SubmissionFormFooterComponent_ng_template_1_Template");class SubmissionFormFooterComponent{constructor(modalService,restService,submissionService){this.modalService=modalService,this.restService=restService,this.submissionService=submissionService,this.submissionIsInvalid=(0,rxjs__WEBPACK_IMPORTED_MODULE_5__.of)(!0)}ngOnChanges(changes){(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.UE)(this.submissionId)&&(this.submissionIsInvalid=this.submissionService.getSubmissionStatus(this.submissionId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.UI)(isValid=>!1===isValid)),this.processingSaveStatus=this.submissionService.getSubmissionSaveProcessingStatus(this.submissionId),this.processingDepositStatus=this.submissionService.getSubmissionDepositProcessingStatus(this.submissionId),this.showDepositAndDiscard=(0,rxjs__WEBPACK_IMPORTED_MODULE_5__.of)(this.submissionService.getSubmissionScope()===_core_submission_submission_scope_type__WEBPACK_IMPORTED_MODULE_2__.S.WorkspaceItem),this.hasUnsavedModification=this.submissionService.hasUnsavedModification())}save(event){this.submissionService.dispatchSave(this.submissionId,!0)}saveLater(event){this.submissionService.dispatchSaveForLater(this.submissionId)}deposit(event){this.submissionService.dispatchDeposit(this.submissionId)}confirmDiscard(content){this.modalService.open(content).result.then(result=>{"ok"===result&&this.submissionService.dispatchDiscard(this.submissionId)})}}__name(SubmissionFormFooterComponent,"SubmissionFormFooterComponent"),SubmissionFormFooterComponent.\u0275fac=__name(function(t){return new(t||SubmissionFormFooterComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y36(_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_8__.FF),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y36(_core_submission_submission_rest_service__WEBPACK_IMPORTED_MODULE_0__.F),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y36(_submission_service__WEBPACK_IMPORTED_MODULE_1__.b))},"SubmissionFormFooterComponent_Factory"),SubmissionFormFooterComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_4__.Xpm({type:SubmissionFormFooterComponent,selectors:[["ds-submission-form-footer"]],inputs:{submissionId:"submissionId"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_4__.TTD],decls:3,vars:1,consts:[["class","row",4,"ngIf"],["content",""],[1,"row"],[1,"col"],["type","button","id","discard","class","btn btn-danger",3,"disabled","click",4,"ngIf"],[1,"col","text-right","d-flex","justify-content-end","align-items-center"],[4,"ngIf"],["class","col d-flex justify-content-end align-items-center",4,"ngIf"],[1,"ml-2","space-children-mr"],["type","button","id","save",1,"btn","btn-secondary",3,"disabled","click"],[1,"fas","fa-save"],["type","button","id","saveForLater",1,"btn",3,"disabled","click"],["type","button","id","deposit","class","btn btn-success",3,"disabled","click",4,"ngIf"],["type","button","id","discard",1,"btn","btn-danger",3,"disabled","click"],[1,"fas","fa-trash"],[1,"fas","fa-check-circle"],[1,"fas","fa-exclamation-circle"],[1,"col","d-flex","justify-content-end","align-items-center"],[1,"progress","w-75"],["class","progress-bar progress-bar-striped progress-bar-animated bg-info","role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",3,"width",4,"ngIf"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated","bg-info"],["type","button","id","deposit",1,"btn","btn-success",3,"disabled","click"],[1,"fas","fa-plus"],[1,"modal-header"],[1,"modal-title","text-danger"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer","space-children-mr"],["type","button","id","discard_cancel",1,"btn","btn-secondary",3,"click"],["type","button","id","discard_submit",1,"btn","btn-danger",3,"click"]],template:__name(function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(0,SubmissionFormFooterComponent_div_0_Template,37,55,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(1,SubmissionFormFooterComponent_ng_template_1_Template,18,12,"ng-template",null,1,_angular_core__WEBPACK_IMPORTED_MODULE_4__.W1O)),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!!ctx.submissionId)},"SubmissionFormFooterComponent_Template"),directives:[_angular_common__WEBPACK_IMPORTED_MODULE_9__.O5],pipes:[_shared_utils_browser_only_pipe__WEBPACK_IMPORTED_MODULE_3__.g,_angular_common__WEBPACK_IMPORTED_MODULE_9__.Ov,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.X$],styles:[""]})},29959:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>SubmissionFormSectionAddComponent});var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5796),_sections_sections_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(85848),_shared_host_window_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(90016),_submission_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(83653),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(70074),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(63742),_angular_common__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(10210),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(47241);function SubmissionFormSectionAddComponent_button_10_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(0,"button",7),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.ALo(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_3__.lcZ(2,1,"submission.sections.general.no-sections")," "))}function SubmissionFormSectionAddComponent_button_12_Template(rf,ctx){if(1&rf){const _r5=_angular_core__WEBPACK_IMPORTED_MODULE_3__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(0,"button",8),_angular_core__WEBPACK_IMPORTED_MODULE_3__.NdJ("click",__name(function(){const listItem_r3=_angular_core__WEBPACK_IMPORTED_MODULE_3__.CHM(_r5).$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_3__.oxw().addSection(listItem_r3.id)},"SubmissionFormSectionAddComponent_button_12_Template_button_click_0_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.ALo(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()}if(2&rf){const listItem_r3=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_3__.lcZ(2,1,"submission.sections."+listItem_r3.header)," ")}}__name(SubmissionFormSectionAddComponent_button_10_Template,"SubmissionFormSectionAddComponent_button_10_Template"),__name(SubmissionFormSectionAddComponent_button_12_Template,"SubmissionFormSectionAddComponent_button_12_Template");const _c0=__name(function(a0){return{"w-100":a0}},"_c0");class SubmissionFormSectionAddComponent{constructor(sectionService,submissionService,windowService){this.sectionService=sectionService,this.submissionService=submissionService,this.windowService=windowService}ngOnInit(){this.sectionList$=this.submissionService.getDisabledSectionsList(this.submissionId),this.hasSections$=this.sectionList$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.UI)(list=>list.length>0))}addSection(sectionId){this.sectionService.addSection(this.submissionId,sectionId)}}__name(SubmissionFormSectionAddComponent,"SubmissionFormSectionAddComponent"),SubmissionFormSectionAddComponent.\u0275fac=__name(function(t){return new(t||SubmissionFormSectionAddComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Y36(_sections_sections_service__WEBPACK_IMPORTED_MODULE_0__.J),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Y36(_submission_service__WEBPACK_IMPORTED_MODULE_2__.b),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Y36(_shared_host_window_service__WEBPACK_IMPORTED_MODULE_1__.I))},"SubmissionFormSectionAddComponent_Factory"),SubmissionFormSectionAddComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_3__.Xpm({type:SubmissionFormSectionAddComponent,selectors:[["ds-submission-form-section-add"]],inputs:{collectionId:"collectionId",submissionId:"submissionId"},decls:14,vars:25,consts:[["ngbDropdown","","placement","bottom-right",1,"d-inline-block",3,"ngClass"],["sectionAdd","ngbDropdown"],["id","sectionControls","ngbDropdownToggle","",1,"btn","btn-outline-primary","dropdown-toggle",3,"disabled","ngClass"],["aria-hidden","true",1,"fa","fa-plus"],["ngbDropdownMenu","","aria-labelledby","sectionControls",1,"sections-dropdown-menu",3,"ngClass"],["class","dropdown-item disabled",4,"ngIf"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"dropdown-item","disabled"],[1,"dropdown-item",3,"click"]],template:__name(function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(0,"div",0,1)(2,"button",2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.ALo(3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.ALo(4,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_3__._uU(5),_angular_core__WEBPACK_IMPORTED_MODULE_3__.ALo(6,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_3__._UZ(7,"i",3),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(8,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_3__.ALo(9,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.YNc(10,SubmissionFormSectionAddComponent_button_10_Template,3,3,"button",5),_angular_core__WEBPACK_IMPORTED_MODULE_3__.ALo(11,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.YNc(12,SubmissionFormSectionAddComponent_button_12_Template,3,3,"button",6),_angular_core__WEBPACK_IMPORTED_MODULE_3__.ALo(13,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_3__.VKq(19,_c0,ctx.windowService.isXs())),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("disabled",!_angular_core__WEBPACK_IMPORTED_MODULE_3__.lcZ(3,7,ctx.hasSections$))("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_3__.VKq(21,_c0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.lcZ(4,9,ctx.windowService.isXs()))),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_3__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_3__.lcZ(6,11,"submission.sections.general.add-more")," "),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_3__.VKq(23,_c0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.lcZ(9,13,ctx.windowService.isXs()))),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_3__.lcZ(11,15,ctx.hasSections$)),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("ngForOf",_angular_core__WEBPACK_IMPORTED_MODULE_3__.lcZ(13,17,ctx.sectionList$)))},"SubmissionFormSectionAddComponent_Template"),directives:[_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__.jt,_angular_common__WEBPACK_IMPORTED_MODULE_6__.mk,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__.iD,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_5__.Vi,_angular_common__WEBPACK_IMPORTED_MODULE_6__.O5,_angular_common__WEBPACK_IMPORTED_MODULE_6__.sg],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_6__.Ov,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__.X$],styles:[".dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.sections-dropdown-menu[_ngcontent-%COMP%]{z-index:var(--ds-submission-header-z-index)}"]})},25748:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{G:()=>SubmissionFormComponent});var rxjs__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(39942),rxjs_operators__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(5796),_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(28709),_core_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__(38540),__webpack_require__(19339)),_shared_empty_util__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(25839),_shared_uploader_uploader_options_model__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(46316),_submission_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(83653),_sections_sections_type__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__(27899),__webpack_require__(52738)),_sections_sections_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(85848),_angular_core__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(70074),_angular_common__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(10210),_submission_upload_files_submission_upload_files_component__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(79560),_collection_submission_form_collection_component__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(51769),_section_add_submission_form_section_add_component__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(29959),_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(76924),_sections_container_section_container_component__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(38103),_footer_submission_form_footer_component__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(17996);function SubmissionFormComponent_div_1_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_14__.TgZ(0,"div",12),_angular_core__WEBPACK_IMPORTED_MODULE_14__._UZ(1,"ds-submission-upload-files",13)(2,"div",14),_angular_core__WEBPACK_IMPORTED_MODULE_14__.qZA()),2&rf){const ctx_r4=_angular_core__WEBPACK_IMPORTED_MODULE_14__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_14__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_14__.Q6J("submissionId",ctx_r4.submissionId)("collectionId",ctx_r4.collectionId)("uploadFilesOptions",ctx_r4.uploadFilesOptions)}}function SubmissionFormComponent_div_1_Template(rf,ctx){if(1&rf){const _r6=_angular_core__WEBPACK_IMPORTED_MODULE_14__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_14__.TgZ(0,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_14__.YNc(1,SubmissionFormComponent_div_1_div_1_Template,3,3,"div",7),_angular_core__WEBPACK_IMPORTED_MODULE_14__.ALo(2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_14__.TgZ(3,"div",8)(4,"ds-submission-form-collection",9),_angular_core__WEBPACK_IMPORTED_MODULE_14__.NdJ("collectionChange",__name(function($event){return _angular_core__WEBPACK_IMPORTED_MODULE_14__.CHM(_r6),_angular_core__WEBPACK_IMPORTED_MODULE_14__.oxw().onCollectionChange($event)},"SubmissionFormComponent_div_1_Template_ds_submission_form_collection_collectionChange_4_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_14__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_14__.TgZ(5,"div",10),_angular_core__WEBPACK_IMPORTED_MODULE_14__._UZ(6,"ds-submission-form-section-add",11),_angular_core__WEBPACK_IMPORTED_MODULE_14__.qZA()()}if(2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_14__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_14__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_14__.Q6J("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_14__.lcZ(2,6,ctx_r0.uploadEnabled$)),_angular_core__WEBPACK_IMPORTED_MODULE_14__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_14__.Q6J("currentCollectionId",ctx_r0.collectionId)("currentDefinition",ctx_r0.definitionId)("submissionId",ctx_r0.submissionId),_angular_core__WEBPACK_IMPORTED_MODULE_14__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_14__.Q6J("collectionId",ctx_r0.collectionId)("submissionId",ctx_r0.submissionId)}}function SubmissionFormComponent_ds_themed_loading_4_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_14__._UZ(0,"ds-themed-loading",15)}function SubmissionFormComponent_ng_container_6_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_14__.ynx(0),_angular_core__WEBPACK_IMPORTED_MODULE_14__._UZ(1,"ds-submission-section-container",16),_angular_core__WEBPACK_IMPORTED_MODULE_14__.BQk()),2&rf){const object_r7=ctx.$implicit,ctx_r2=_angular_core__WEBPACK_IMPORTED_MODULE_14__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_14__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_14__.Q6J("collectionId",ctx_r2.collectionId)("submissionId",ctx_r2.submissionId)("sectionData",object_r7)}}function SubmissionFormComponent_div_8_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_14__.TgZ(0,"div",17),_angular_core__WEBPACK_IMPORTED_MODULE_14__._UZ(1,"ds-submission-form-footer",18),_angular_core__WEBPACK_IMPORTED_MODULE_14__.qZA()),2&rf){const ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_14__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_14__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_14__.Q6J("submissionId",ctx_r3.submissionId)}}__name(SubmissionFormComponent_div_1_div_1_Template,"SubmissionFormComponent_div_1_div_1_Template"),__name(SubmissionFormComponent_div_1_Template,"SubmissionFormComponent_div_1_Template"),__name(SubmissionFormComponent_ds_themed_loading_4_Template,"SubmissionFormComponent_ds_themed_loading_4_Template"),__name(SubmissionFormComponent_ng_container_6_Template,"SubmissionFormComponent_ng_container_6_Template"),__name(SubmissionFormComponent_div_8_Template,"SubmissionFormComponent_div_8_Template");class SubmissionFormComponent{constructor(authService,changeDetectorRef,halService,submissionService,sectionsService){this.authService=authService,this.changeDetectorRef=changeDetectorRef,this.halService=halService,this.submissionService=submissionService,this.sectionsService=sectionsService,this.loading=(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.of)(!0),this.uploadFilesOptions=new _shared_uploader_uploader_options_model__WEBPACK_IMPORTED_MODULE_3__.n,this.subs=[],this.isActive=!0}ngOnChanges(changes){changes.collectionId&&this.collectionId&&changes.submissionId&&this.submissionId&&(this.isActive=!0,this.submissionSections=this.submissionService.getSubmissionObject(this.submissionId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.hX)(()=>this.isActive),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.UI)(submission=>submission.isLoading),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.UI)(isLoading=>isLoading),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.xb)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.wt)(isLoading=>isLoading?(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.of)([]):this.getSectionsList())),this.uploadEnabled$=this.sectionsService.isSectionTypeAvailable(this.submissionId,_sections_sections_type__WEBPACK_IMPORTED_MODULE_6__.i.Upload),this.loading=this.submissionService.getSubmissionObject(this.submissionId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.hX)(()=>this.isActive),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.UI)(submission=>submission.isLoading),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.UI)(isLoading=>isLoading),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.xb)()),this.subs.push(this.halService.getEndpoint(this.submissionService.getSubmissionObjectLinkName()).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.hX)(href=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_17__.UE)(href)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.xb)()).subscribe(endpointURL=>{this.uploadFilesOptions.authToken=this.authService.buildAuthHeader(),this.uploadFilesOptions.url=endpointURL.concat(`/${this.submissionId}`),this.definitionId=this.submissionDefinition.name,this.submissionService.dispatchInit(this.collectionId,this.submissionId,this.selfUrl,this.submissionDefinition,this.sections,this.item,this.submissionErrors),this.changeDetectorRef.detectChanges()})),this.submissionService.startAutoSave(this.submissionId))}ngOnDestroy(){this.isActive=!1,this.submissionService.stopAutoSave(),this.submissionService.resetAllSubmissionObjects(),this.subs.filter(subscription=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_17__.Uh)(subscription)).forEach(subscription=>subscription.unsubscribe())}onCollectionChange(submissionObject){this.collectionId=submissionObject.collection.id,this.definitionId!==submissionObject.submissionDefinition.name?(this.sections=submissionObject.sections,this.submissionDefinition=submissionObject.submissionDefinition,this.definitionId=this.submissionDefinition.name,this.submissionService.resetSubmissionObject(this.collectionId,this.submissionId,submissionObject._links.self.href,this.submissionDefinition,this.sections,this.item)):this.changeDetectorRef.detectChanges()}isLoading(){return this.loading}getSectionsList(){return this.submissionService.getSubmissionSections(this.submissionId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.hX)(sections=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_17__.UE)(sections)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.UI)(sections=>sections))}}__name(SubmissionFormComponent,"SubmissionFormComponent"),SubmissionFormComponent.\u0275fac=__name(function(t){return new(t||SubmissionFormComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_14__.Y36(_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_0__.e8),_angular_core__WEBPACK_IMPORTED_MODULE_14__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_14__.sBO),_angular_core__WEBPACK_IMPORTED_MODULE_14__.Y36(_core_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_2__.q),_angular_core__WEBPACK_IMPORTED_MODULE_14__.Y36(_submission_service__WEBPACK_IMPORTED_MODULE_4__.b),_angular_core__WEBPACK_IMPORTED_MODULE_14__.Y36(_sections_sections_service__WEBPACK_IMPORTED_MODULE_7__.J))},"SubmissionFormComponent_Factory"),SubmissionFormComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_14__.Xpm({type:SubmissionFormComponent,selectors:[["ds-submission-form"]],inputs:{collectionId:"collectionId",item:"item",sections:"sections",submissionErrors:"submissionErrors",selfUrl:"selfUrl",submissionDefinition:"submissionDefinition",submissionId:"submissionId"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_14__.TTD],decls:10,vars:12,consts:[[1,"container-fluid"],["class","submission-form-header mb-3 d-flex flex-wrap position-sticky",4,"ngIf"],[1,"submission-form-content"],["message","Loading...",4,"ngIf"],[4,"ngFor","ngForOf"],["class","submission-form-footer mt-3 mb-3 position-sticky",4,"ngIf"],[1,"submission-form-header","mb-3","d-flex","flex-wrap","position-sticky"],["class","w-100",4,"ngIf"],[1,"submission-form-header-item","mb-3","mb-sm-0","flex-sm-grow-1","flex-md-grow-0"],[3,"currentCollectionId","currentDefinition","submissionId","collectionChange"],[1,"submission-form-header-item","text-right"],[3,"collectionId","submissionId"],[1,"w-100"],[3,"submissionId","collectionId","uploadFilesOptions"],[1,"clearfix"],["message","Loading..."],[3,"collectionId","submissionId","sectionData"],[1,"submission-form-footer","mt-3","mb-3","position-sticky"],[3,"submissionId"]],template:__name(function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_14__.TgZ(0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_14__.YNc(1,SubmissionFormComponent_div_1_Template,7,8,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_14__.ALo(2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_14__.TgZ(3,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_14__.YNc(4,SubmissionFormComponent_ds_themed_loading_4_Template,1,0,"ds-themed-loading",3),_angular_core__WEBPACK_IMPORTED_MODULE_14__.ALo(5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_14__.YNc(6,SubmissionFormComponent_ng_container_6_Template,2,3,"ng-container",4),_angular_core__WEBPACK_IMPORTED_MODULE_14__.ALo(7,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_14__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_14__.YNc(8,SubmissionFormComponent_div_8_Template,2,1,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_14__.ALo(9,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_14__.qZA()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_14__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_14__.Q6J("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_14__.lcZ(2,4,ctx.isLoading())),_angular_core__WEBPACK_IMPORTED_MODULE_14__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_14__.Q6J("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_14__.lcZ(5,6,ctx.isLoading())),_angular_core__WEBPACK_IMPORTED_MODULE_14__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_14__.Q6J("ngForOf",_angular_core__WEBPACK_IMPORTED_MODULE_14__.lcZ(7,8,ctx.submissionSections)),_angular_core__WEBPACK_IMPORTED_MODULE_14__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_14__.Q6J("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_14__.lcZ(9,10,ctx.isLoading())))},"SubmissionFormComponent_Template"),directives:[_angular_common__WEBPACK_IMPORTED_MODULE_18__.O5,_submission_upload_files_submission_upload_files_component__WEBPACK_IMPORTED_MODULE_8__.h,_collection_submission_form_collection_component__WEBPACK_IMPORTED_MODULE_9__.z,_section_add_submission_form_section_add_component__WEBPACK_IMPORTED_MODULE_10__.i,_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_11__.Z,_angular_common__WEBPACK_IMPORTED_MODULE_18__.sg,_sections_container_section_container_component__WEBPACK_IMPORTED_MODULE_12__.y,_footer_submission_form_footer_component__WEBPACK_IMPORTED_MODULE_13__.z],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_18__.Ov],styles:[".submission-form-header[_ngcontent-%COMP%]{background-color:#fffffff7;padding:calc(var(--bs-spacer) / 2) 0 calc(var(--bs-spacer) / 2) 0;top:0;z-index:var(--ds-submission-header-z-index)}.submission-form-header-item[_ngcontent-%COMP%]{flex-grow:1}.submission-form-footer[_ngcontent-%COMP%]{border-radius:var(--bs-card-border-radius);bottom:0;background-color:var(--bs-gray-400);padding:calc(var(--bs-spacer) / 2);z-index:var(--ds-submission-footer-z-index)}.btn-link-focus[_ngcontent-%COMP%]{font-weight:400;color:#066;text-decoration:none}.btn-link-focus[_ngcontent-%COMP%]:hover{color:#001a1a;text-decoration:underline}.btn-link-focus[_ngcontent-%COMP%]:disabled, .btn-link-focus.disabled[_ngcontent-%COMP%]{color:#6c757d;pointer-events:none}.btn-link-focus[_ngcontent-%COMP%]:focus, .btn-link-focus.focus[_ngcontent-%COMP%]{text-decoration:underline}"]})},79560:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{h:()=>SubmissionUploadFilesComponent});var rxjs__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(39942),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(5796),_sections_sections_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(85848),_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(25839),_core_submission_submission_response_parsing_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(96937),_submission_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(83653),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(16228),_utils_parseSectionErrors__WEBPACK_IMPORTED_MODULE_11__=(__webpack_require__(46316),__webpack_require__(60516)),_core_submission_submission_json_patch_operations_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(65702),_sections_sections_type__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(52738),_angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(70074),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(47241),_angular_common__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(10210),_shared_uploader_uploader_component__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(53858);function SubmissionUploadFilesComponent_ds_uploader_0_Template(rf,ctx){if(1&rf){const _r2=_angular_core__WEBPACK_IMPORTED_MODULE_8__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_8__.TgZ(0,"ds-uploader",1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.NdJ("onCompleteItem",__name(function($event){return _angular_core__WEBPACK_IMPORTED_MODULE_8__.CHM(_r2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.oxw().onCompleteItem($event)},"SubmissionUploadFilesComponent_ds_uploader_0_Template_ds_uploader_onCompleteItem_0_listener"))("onUploadError",__name(function(){return _angular_core__WEBPACK_IMPORTED_MODULE_8__.CHM(_r2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.oxw().onUploadError()},"SubmissionUploadFilesComponent_ds_uploader_0_Template_ds_uploader_onUploadError_0_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.qZA()}if(2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_8__.Q6J("dropMsg",ctx_r0.dropMsg)("dropOverDocumentMsg",ctx_r0.dropOverDocumentMsg)("enableDragOverDocument",ctx_r0.enableDragOverDocument)("onBeforeUpload",ctx_r0.onBeforeUpload)("uploadFilesOptions",ctx_r0.uploadFilesOptions)}}__name(SubmissionUploadFilesComponent_ds_uploader_0_Template,"SubmissionUploadFilesComponent_ds_uploader_0_Template");class SubmissionUploadFilesComponent{constructor(notificationsService,operationsService,sectionService,submissionService,translate){this.notificationsService=notificationsService,this.operationsService=operationsService,this.sectionService=sectionService,this.submissionService=submissionService,this.translate=translate,this.enableDragOverDocument=!0,this.dropOverDocumentMsg="submission.sections.upload.drop-message",this.dropMsg="submission.sections.upload.drop-message",this.subs=[],this.uploadEnabled=(0,rxjs__WEBPACK_IMPORTED_MODULE_9__.of)(!1),this.onBeforeUpload=()=>{const sub=this.operationsService.jsonPatchByResourceType(this.submissionService.getSubmissionObjectLinkName(),this.submissionId,"sections").subscribe();return this.subs.push(sub),sub}}ngOnChanges(){this.uploadEnabled=this.sectionService.isSectionTypeAvailable(this.submissionId,_sections_sections_type__WEBPACK_IMPORTED_MODULE_6__.i.Upload)}onCompleteItem(workspaceitem){this.subs.push(this.uploadEnabled.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.Ps)()).subscribe(isUploadEnabled=>{if(isUploadEnabled){const{sections}=workspaceitem,{errors}=workspaceitem,errorsList=(0,_utils_parseSectionErrors__WEBPACK_IMPORTED_MODULE_11__.Z)(errors);sections&&(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__.UE)(sections)&&Object.keys(sections).forEach(sectionId=>{const sectionData=(0,_core_submission_submission_response_parsing_service__WEBPACK_IMPORTED_MODULE_1__.Vv)(sections[sectionId]),sectionErrors=errorsList[sectionId];this.sectionService.isSectionType(this.submissionId,sectionId,_sections_sections_type__WEBPACK_IMPORTED_MODULE_6__.i.Upload).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.qn)(1)).subscribe(isUpload=>{isUpload&&((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__.xb)(sectionErrors)?this.notificationsService.success(null,this.translate.get("submission.sections.upload.upload-successful")):this.notificationsService.error(null,this.translate.get("submission.sections.upload.upload-failed")))}),this.sectionService.updateSectionData(this.submissionId,sectionId,sectionData,sectionErrors,sectionErrors)})}}))}onUploadError(){this.notificationsService.error(null,this.translate.get("submission.sections.upload.upload-failed"))}ngOnDestroy(){this.subs.filter(subscription=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__.Uh)(subscription)).forEach(subscription=>subscription.unsubscribe())}}__name(SubmissionUploadFilesComponent,"SubmissionUploadFilesComponent"),SubmissionUploadFilesComponent.\u0275fac=__name(function(t){return new(t||SubmissionUploadFilesComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y36(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_3__.T),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y36(_core_submission_submission_json_patch_operations_service__WEBPACK_IMPORTED_MODULE_5__.E),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y36(_sections_sections_service__WEBPACK_IMPORTED_MODULE_0__.J),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y36(_submission_service__WEBPACK_IMPORTED_MODULE_2__.b),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y36(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__.sK))},"SubmissionUploadFilesComponent_Factory"),SubmissionUploadFilesComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_8__.Xpm({type:SubmissionUploadFilesComponent,selectors:[["ds-submission-upload-files"]],inputs:{collectionId:"collectionId",submissionId:"submissionId",uploadFilesOptions:"uploadFilesOptions"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_8__.TTD],decls:1,vars:1,consts:[[3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","onBeforeUpload","uploadFilesOptions","onCompleteItem","onUploadError",4,"ngIf"],[3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","onBeforeUpload","uploadFilesOptions","onCompleteItem","onUploadError"]],template:__name(function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_8__.YNc(0,SubmissionUploadFilesComponent_ds_uploader_0_Template,1,5,"ds-uploader",0),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_8__.Q6J("ngIf",ctx.uploadFilesOptions.url)},"SubmissionUploadFilesComponent_Template"),directives:[_angular_common__WEBPACK_IMPORTED_MODULE_14__.O5,_shared_uploader_uploader_component__WEBPACK_IMPORTED_MODULE_7__.B],encapsulation:2})},54877:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{v:()=>SubmissionImportExternalPreviewComponent});__webpack_require__(7634);var _core_shared_metadata_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(59874),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5796),_submission_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(83653),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(16228),_import_external_collection_submission_import_external_collection_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(54475),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(70074),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(63742),_angular_router__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(37895),_angular_common__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(10210),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(47241);function SubmissionImportExternalPreviewComponent_div_17_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",5)(1,"div",6)(2,"strong"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(5,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()()),2&rf){const metadata_r1=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_5__.lcZ(4,2,"item.preview."+metadata_r1.key)),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(metadata_r1.value.value)}}__name(SubmissionImportExternalPreviewComponent_div_17_Template,"SubmissionImportExternalPreviewComponent_div_17_Template");class SubmissionImportExternalPreviewComponent{constructor(activeModal,submissionService,modalService,router,notificationService){this.activeModal=activeModal,this.submissionService=submissionService,this.modalService=modalService,this.router=router,this.notificationService=notificationService}ngOnInit(){this.metadataList=[],Object.keys(this.externalSourceEntry.metadata).forEach(key=>{this.metadataList.push({key,value:_core_shared_metadata_utils__WEBPACK_IMPORTED_MODULE_1__.S.first(this.externalSourceEntry.metadata,key)})})}closeMetadataModal(){this.activeModal.dismiss(!1)}import(){this.modalRef=this.modalService.open(_import_external_collection_submission_import_external_collection_component__WEBPACK_IMPORTED_MODULE_4__.L,{size:"lg"}),this.modalRef.componentInstance.entityType=this.labelPrefix,this.closeMetadataModal(),this.modalRef.componentInstance.selectedEvent.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.zg)(collectionListEntry=>this.submissionService.createSubmissionFromExternalSource(this.externalSourceEntry._links.self.href,collectionListEntry.collection.id))).subscribe(submissionObjects=>{let isValid=!1;1===submissionObjects.length&&null!==submissionObjects[0]&&(isValid=!0,this.router.navigateByUrl("/workspaceitems/"+submissionObjects[0].id+"/edit")),isValid||this.notificationService.error("submission.import-external.preview.error.import.title","submission.import-external.preview.error.import.body"),this.modalRef.close()})}}__name(SubmissionImportExternalPreviewComponent,"SubmissionImportExternalPreviewComponent"),SubmissionImportExternalPreviewComponent.\u0275fac=__name(function(t){return new(t||SubmissionImportExternalPreviewComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y36(_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_7__.Kz),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y36(_submission_service__WEBPACK_IMPORTED_MODULE_2__.b),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y36(_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_7__.FF),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_8__.F0),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y36(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_3__.T))},"SubmissionImportExternalPreviewComponent_Factory"),SubmissionImportExternalPreviewComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_5__.Xpm({type:SubmissionImportExternalPreviewComponent,selectors:[["ds-submission-import-external-preview"]],inputs:{externalSourceEntry:"externalSourceEntry"},decls:27,vars:10,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"container"],[1,"row"],[1,"col-md-12"],["class","row",4,"ngFor","ngForOf"],[1,"col-md-12","text-right"],["role","button",1,"btn","btn-success",3,"click"],["aria-hidden","true",1,"fa","fa-file-import"]],template:__name(function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",0)(1,"h2"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(4,"button",1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",__name(function(){return ctx.closeMetadataModal()},"SubmissionImportExternalPreviewComponent_Template_button_click_4_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(5,"span",2),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(6,"\xd7"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(7,"div",3)(8,"div",4)(9,"div",5)(10,"div",6)(11,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(12),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(13,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(14,"div",5)(15,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(16,"hr"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(17,SubmissionImportExternalPreviewComponent_div_17_Template,7,4,"div",7),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(18,"div",5)(19,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(20,"hr"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(21,"div",5)(22,"div",8)(23,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",__name(function(){return ctx.import()},"SubmissionImportExternalPreviewComponent_Template_button_click_23_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(24,"i",10),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(25),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(26,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()()()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_5__.lcZ(3,4,"submission.import-external.preview.title."+ctx.labelPrefix)),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(10),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_5__.lcZ(13,6,"submission.import-external.preview.subtitle")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngForOf",ctx.metadataList),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(8),_angular_core__WEBPACK_IMPORTED_MODULE_5__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_5__.lcZ(26,8,"submission.import-external.preview.button.import")," "))},"SubmissionImportExternalPreviewComponent_Template"),directives:[_angular_common__WEBPACK_IMPORTED_MODULE_9__.sg],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.X$],styles:[".close[_ngcontent-%COMP%]:focus{outline:none!important}"]})},76202:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{p:()=>SubmissionImportExternalSearchbarComponent});var _angular_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(70074),rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(39942),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(5796),_core_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(68862),_core_data_external_source_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(17390),_core_data_paginated_list_model__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(73535),_core_shared_page_info_model__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(45419),_shared_remote_data_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(65639),_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(63281),_shared_host_window_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(90016),_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(25839),_core_data_find_list_options_model__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(30292),_angular_common__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(10210),_angular_forms__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(45028),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(63742),ngx_infinite_scroll__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(98179),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(47241);function SubmissionImportExternalSearchbarComponent_div_0_Template(rf,ctx){if(1&rf){const _r5=_angular_core__WEBPACK_IMPORTED_MODULE_7__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_7__.TgZ(0,"div",10)(1,"input",11),_angular_core__WEBPACK_IMPORTED_MODULE_7__.NdJ("keyup.enter",__name(function(){_angular_core__WEBPACK_IMPORTED_MODULE_7__.CHM(_r5);const ctx_r4=_angular_core__WEBPACK_IMPORTED_MODULE_7__.oxw();return""===ctx_r4.searchString?null:ctx_r4.search()},"SubmissionImportExternalSearchbarComponent_div_0_Template_input_keyup_enter_1_listener"))("ngModelChange",__name(function($event){_angular_core__WEBPACK_IMPORTED_MODULE_7__.CHM(_r5);return _angular_core__WEBPACK_IMPORTED_MODULE_7__.oxw().searchString=$event},"SubmissionImportExternalSearchbarComponent_div_0_Template_input_ngModelChange_1_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_7__.ALo(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_7__.qZA()()}if(2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_7__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_7__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_7__.s9C("placeholder",_angular_core__WEBPACK_IMPORTED_MODULE_7__.lcZ(2,2,"submission.import-external.search.placeholder")),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Q6J("ngModel",ctx_r0.searchString)}}function SubmissionImportExternalSearchbarComponent_input_3_Template(rf,ctx){if(1&rf){const _r8=_angular_core__WEBPACK_IMPORTED_MODULE_7__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_7__.TgZ(0,"input",11),_angular_core__WEBPACK_IMPORTED_MODULE_7__.NdJ("keyup.enter",__name(function(){_angular_core__WEBPACK_IMPORTED_MODULE_7__.CHM(_r8);const ctx_r7=_angular_core__WEBPACK_IMPORTED_MODULE_7__.oxw();return""===ctx_r7.searchString?null:ctx_r7.search()},"SubmissionImportExternalSearchbarComponent_input_3_Template_input_keyup_enter_0_listener"))("ngModelChange",__name(function($event){_angular_core__WEBPACK_IMPORTED_MODULE_7__.CHM(_r8);return _angular_core__WEBPACK_IMPORTED_MODULE_7__.oxw().searchString=$event},"SubmissionImportExternalSearchbarComponent_input_3_Template_input_ngModelChange_0_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_7__.ALo(1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_7__.qZA()}if(2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_7__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_7__.s9C("placeholder",_angular_core__WEBPACK_IMPORTED_MODULE_7__.lcZ(1,2,"submission.import-external.search.placeholder")),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Q6J("ngModel",ctx_r1.searchString)}}function SubmissionImportExternalSearchbarComponent_button_13_Template(rf,ctx){if(1&rf){const _r12=_angular_core__WEBPACK_IMPORTED_MODULE_7__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_7__.TgZ(0,"button",12),_angular_core__WEBPACK_IMPORTED_MODULE_7__.NdJ("click",__name(function(){const source_r10=_angular_core__WEBPACK_IMPORTED_MODULE_7__.CHM(_r12).$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_7__.oxw().makeSourceSelection(source_r10)},"SubmissionImportExternalSearchbarComponent_button_13_Template_button_click_0_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_7__.ALo(1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_7__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_7__.ALo(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_7__.qZA()}if(2&rf){const source_r10=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_7__.s9C("title",_angular_core__WEBPACK_IMPORTED_MODULE_7__.lcZ(1,2,"submission.import-external.source."+(null==source_r10?null:source_r10.name))),_angular_core__WEBPACK_IMPORTED_MODULE_7__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_7__.lcZ(3,4,"submission.import-external.source."+(null==source_r10?null:source_r10.name)))}}function SubmissionImportExternalSearchbarComponent_div_14_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_7__.TgZ(0,"div",13)(1,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_7__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_7__.ALo(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_7__.qZA()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_7__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_7__.lcZ(3,1,"submission.import-external.source.loading")))}__name(SubmissionImportExternalSearchbarComponent_div_0_Template,"SubmissionImportExternalSearchbarComponent_div_0_Template"),__name(SubmissionImportExternalSearchbarComponent_input_3_Template,"SubmissionImportExternalSearchbarComponent_input_3_Template"),__name(SubmissionImportExternalSearchbarComponent_button_13_Template,"SubmissionImportExternalSearchbarComponent_button_13_Template"),__name(SubmissionImportExternalSearchbarComponent_div_14_Template,"SubmissionImportExternalSearchbarComponent_div_14_Template");const _c0=__name(function(a0){return{"input-group-append":a0}},"_c0");class SubmissionImportExternalSearchbarComponent{constructor(externalService,cdr,windowService){this.externalService=externalService,this.cdr=cdr,this.windowService=windowService,this.sourceListLoading=!1,this.externalSourceData=new _angular_core__WEBPACK_IMPORTED_MODULE_7__.vpe}ngOnInit(){this.selectedElement={id:"",name:"loading"},this.searchString="",this.sourceList=[],this.findListOptions=Object.assign({},new _core_data_find_list_options_model__WEBPACK_IMPORTED_MODULE_8__.R,{elementsPerPage:5,currentPage:1,searchParams:[new _core_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_9__.g("entityType",this.initExternalSourceData.entity)]}),this.externalService.searchBy("findByEntityType",this.findListOptions).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.KQ)(()=>{const pageInfo=new _core_shared_page_info_model__WEBPACK_IMPORTED_MODULE_2__.S,paginatedList=(0,_core_data_paginated_list_model__WEBPACK_IMPORTED_MODULE_1__.b)(pageInfo,[]),paginatedListRD=(0,_shared_remote_data_utils__WEBPACK_IMPORTED_MODULE_3__.AC)(paginatedList);return(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(paginatedListRD)}),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.Gp)()).subscribe(externalSource=>{externalSource.page.forEach(element=>{this.sourceList.push({id:element.id,name:element.name}),this.initExternalSourceData.sourceId===element.id&&(this.selectedElement={id:element.id,name:element.name},this.searchString=this.initExternalSourceData.query)}),""===this.selectedElement.id&&(this.selectedElement=this.sourceList[0]),this.pageInfo=externalSource.pageInfo,this.cdr.detectChanges()}),this.isXsOrSm$=this.windowService.isXsOrSm()}makeSourceSelection(source){this.selectedElement=source}onScroll(){!this.sourceListLoading&&this.pageInfo.currentPage+1<=this.pageInfo.totalPages&&(this.sourceListLoading=!0,this.findListOptions=Object.assign({},new _core_data_find_list_options_model__WEBPACK_IMPORTED_MODULE_8__.R,{elementsPerPage:5,currentPage:this.findListOptions.currentPage+1,searchParams:[new _core_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_9__.g("entityType",this.initExternalSourceData.entity)]}),this.externalService.searchBy("findByEntityType",this.findListOptions).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.KQ)(()=>{const pageInfo=new _core_shared_page_info_model__WEBPACK_IMPORTED_MODULE_2__.S,paginatedList=(0,_core_data_paginated_list_model__WEBPACK_IMPORTED_MODULE_1__.b)(pageInfo,[]),paginatedListRD=(0,_shared_remote_data_utils__WEBPACK_IMPORTED_MODULE_3__.AC)(paginatedList);return(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(paginatedListRD)}),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.xw)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.bw)(()=>this.sourceListLoading=!1)).subscribe(externalSource=>{externalSource.payload.page.forEach(element=>{this.sourceList.push({id:element.id,name:element.name})}),this.pageInfo=externalSource.payload.pageInfo,this.cdr.detectChanges()}))}search(){this.externalSourceData.emit({entity:this.initExternalSourceData.entity,sourceId:this.selectedElement.id,query:this.searchString})}ngOnDestroy(){(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__.Uh)(this.sub)&&this.sub.unsubscribe()}}__name(SubmissionImportExternalSearchbarComponent,"SubmissionImportExternalSearchbarComponent"),SubmissionImportExternalSearchbarComponent.\u0275fac=__name(function(t){return new(t||SubmissionImportExternalSearchbarComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_7__.Y36(_core_data_external_source_data_service__WEBPACK_IMPORTED_MODULE_0__.G),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_7__.sBO),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Y36(_shared_host_window_service__WEBPACK_IMPORTED_MODULE_5__.I))},"SubmissionImportExternalSearchbarComponent_Factory"),SubmissionImportExternalSearchbarComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_7__.Xpm({type:SubmissionImportExternalSearchbarComponent,selectors:[["ds-submission-import-external-searchbar"]],inputs:{initExternalSourceData:"initExternalSourceData"},outputs:{externalSourceData:"externalSourceData"},decls:20,vars:31,consts:[["class","input-group mb-2",4,"ngIf"],[1,"input-group","mb-5"],["type","text","class","form-control","aria-label","","aria-describedby","",3,"ngModel","placeholder","keyup.enter","ngModelChange",4,"ngIf"],["ngbDropdown","","role","group","aria-label","",3,"ngClass"],["ngbDropdownToggle","",1,"btn","btn-outline-secondary","w-fx",3,"title"],["ngbDropdownMenu","","aria-haspopup","true","aria-expanded","false","aria-labelledby","scrollableDropdownMenuButton",1,"dropdown-menu","scrollable-dropdown-menu","w-100"],["aria-labelledby","scrollableDropdownMenuButton","infiniteScroll","",1,"scrollable-menu",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["ngbDropdownItem","","class","dropdown-item text-truncate",3,"title","click",4,"ngFor","ngForOf"],["ngbDropdownItem","","class","scrollable-dropdown-loading text-center",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"title","disabled","click"],[1,"input-group","mb-2"],["type","text","aria-label","","aria-describedby","",1,"form-control",3,"ngModel","placeholder","keyup.enter","ngModelChange"],["ngbDropdownItem","",1,"dropdown-item","text-truncate",3,"title","click"],["ngbDropdownItem","",1,"scrollable-dropdown-loading","text-center"]],template:__name(function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_7__.YNc(0,SubmissionImportExternalSearchbarComponent_div_0_Template,3,4,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_7__.ALo(1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_7__.TgZ(2,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_7__.YNc(3,SubmissionImportExternalSearchbarComponent_input_3_Template,2,4,"input",2),_angular_core__WEBPACK_IMPORTED_MODULE_7__.ALo(4,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_7__.TgZ(5,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_7__.ALo(6,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_7__.TgZ(7,"button",4),_angular_core__WEBPACK_IMPORTED_MODULE_7__.ALo(8,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_7__._uU(9),_angular_core__WEBPACK_IMPORTED_MODULE_7__.ALo(10,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_7__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_7__.TgZ(11,"div",5)(12,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_7__.NdJ("scrolled",__name(function(){return ctx.onScroll()},"SubmissionImportExternalSearchbarComponent_Template_div_scrolled_12_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_7__.YNc(13,SubmissionImportExternalSearchbarComponent_button_13_Template,4,6,"button",7),_angular_core__WEBPACK_IMPORTED_MODULE_7__.YNc(14,SubmissionImportExternalSearchbarComponent_div_14_Template,4,3,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_7__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_7__.TgZ(15,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_7__.NdJ("click",__name(function(){return ctx.search()},"SubmissionImportExternalSearchbarComponent_Template_button_click_15_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_7__.ALo(16,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_7__.ALo(17,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_7__._uU(18),_angular_core__WEBPACK_IMPORTED_MODULE_7__.ALo(19,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_7__.qZA()()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_7__.Q6J("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_7__.lcZ(1,13,ctx.isXsOrSm$)),_angular_core__WEBPACK_IMPORTED_MODULE_7__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Q6J("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_7__.lcZ(4,15,ctx.isXsOrSm$)),_angular_core__WEBPACK_IMPORTED_MODULE_7__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Q6J("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_7__.VKq(29,_c0,!_angular_core__WEBPACK_IMPORTED_MODULE_7__.lcZ(6,17,ctx.isXsOrSm$))),_angular_core__WEBPACK_IMPORTED_MODULE_7__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_7__.s9C("title",_angular_core__WEBPACK_IMPORTED_MODULE_7__.lcZ(8,19,"submission.import-external.search.source.hint")),_angular_core__WEBPACK_IMPORTED_MODULE_7__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_7__.lcZ(10,21,"submission.import-external.source."+(null==ctx.selectedElement?null:ctx.selectedElement.name))),_angular_core__WEBPACK_IMPORTED_MODULE_7__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",50)("scrollWindow",!1),_angular_core__WEBPACK_IMPORTED_MODULE_7__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Q6J("ngForOf",ctx.sourceList),_angular_core__WEBPACK_IMPORTED_MODULE_7__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Q6J("ngIf",ctx.sourceListLoading),_angular_core__WEBPACK_IMPORTED_MODULE_7__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Q6J("title",""===ctx.searchString?_angular_core__WEBPACK_IMPORTED_MODULE_7__.lcZ(16,23,"submission.import-external.search.button.hint"):_angular_core__WEBPACK_IMPORTED_MODULE_7__.lcZ(17,25,"submission.import-external.search.button"))("disabled",""===ctx.searchString),_angular_core__WEBPACK_IMPORTED_MODULE_7__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_7__.lcZ(19,27,"submission.import-external.search.button")))},"SubmissionImportExternalSearchbarComponent_Template"),directives:[_angular_common__WEBPACK_IMPORTED_MODULE_13__.O5,_angular_forms__WEBPACK_IMPORTED_MODULE_14__.Fj,_angular_forms__WEBPACK_IMPORTED_MODULE_14__.JJ,_angular_forms__WEBPACK_IMPORTED_MODULE_14__.On,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_15__.jt,_angular_common__WEBPACK_IMPORTED_MODULE_13__.mk,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_15__.iD,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_15__.Vi,ngx_infinite_scroll__WEBPACK_IMPORTED_MODULE_6__.R,_angular_common__WEBPACK_IMPORTED_MODULE_13__.sg,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_15__.TH],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_13__.Ov,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_16__.X$],styles:[".input-group-append[_ngcontent-%COMP%]:last-child > .btn[_ngcontent-%COMP%]:not(:last-child):not(.dropdown-toggle){margin-left:-1px;border-radius:0 .25rem .25rem 0}.input-group-append[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{border-radius:0}.w-fx[_ngcontent-%COMP%]{min-width:200px}.scrollable-menu[_ngcontent-%COMP%]{height:auto;max-height:calc(var(--ds-dropdown-menu-max-height) / 2);overflow-x:hidden}.scrollable-dropdown-loading[_ngcontent-%COMP%]{height:calc(var(--bs-spacer) * 2)!important}.scrollable-dropdown-loading[_ngcontent-%COMP%]{background-color:var(--bs-primary);color:#fff;line-height:calc(var(--bs-spacer) * 2);position:sticky;bottom:0}"]})},51063:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SubmissionImportExternalComponent:()=>SubmissionImportExternalComponent});var rxjs__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(39942),rxjs_operators__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(5796),_core_data_external_source_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(17390),_core_data_paginated_list_model__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(73535),_core_shared_search_search_configuration_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6574),_core_shared_context_model__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10364),_shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(98865),_core_services_route_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(43685),_shared_remote_data_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(65639),_import_external_preview_submission_import_external_preview_component__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(54877),_shared_animations_fade__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(95033),_core_shared_page_info_model__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(45419),_shared_empty_util__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(25839),_core_shared_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(63281),_core_shared_item_relationships_item_type_resource_type__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(60508),_angular_core__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(70074),_angular_router__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(37895),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(63742),_import_external_searchbar_submission_import_external_searchbar_component__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(76202),_angular_common__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(10210),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(41633),_shared_object_collection_object_collection_component__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(64285),_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(76924),_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(7519),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(47241);function SubmissionImportExternalComponent_div_7_div_1_ng_container_1_h3_1_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.TgZ(0,"h3"),_angular_core__WEBPACK_IMPORTED_MODULE_17__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.ALo(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.qZA()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_17__.lcZ(2,1,"submission.sections.describe.relationship-lookup.selection-tab.title")))}__name(SubmissionImportExternalComponent_div_7_div_1_ng_container_1_h3_1_Template,"SubmissionImportExternalComponent_div_7_div_1_ng_container_1_h3_1_Template");const _c0=__name(function(a0,a1){return{repeatable:a0,listId:a1}},"_c0");function SubmissionImportExternalComponent_div_7_div_1_ng_container_1_ds_viewable_collection_2_Template(rf,ctx){if(1&rf){const _r11=_angular_core__WEBPACK_IMPORTED_MODULE_17__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_17__.TgZ(0,"ds-viewable-collection",15),_angular_core__WEBPACK_IMPORTED_MODULE_17__.NdJ("importObject",__name(function($event){return _angular_core__WEBPACK_IMPORTED_MODULE_17__.CHM(_r11),_angular_core__WEBPACK_IMPORTED_MODULE_17__.oxw(4).import($event)},"SubmissionImportExternalComponent_div_7_div_1_ng_container_1_ds_viewable_collection_2_Template_ds_viewable_collection_importObject_0_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_17__.qZA()}if(2&rf){const entriesRD_r4=_angular_core__WEBPACK_IMPORTED_MODULE_17__.oxw().ngVar,ctx_r6=_angular_core__WEBPACK_IMPORTED_MODULE_17__.oxw(3);_angular_core__WEBPACK_IMPORTED_MODULE_17__.Q6J("@fadeIn",void 0)("objects",entriesRD_r4)("selectionConfig",_angular_core__WEBPACK_IMPORTED_MODULE_17__.WLB(8,_c0,ctx_r6.repeatable,ctx_r6.listId))("config",ctx_r6.initialPagination)("hideGear",!0)("context",ctx_r6.context)("importable",!0)("importConfig",ctx_r6.importConfig)}}function SubmissionImportExternalComponent_div_7_div_1_ng_container_1_ds_themed_loading_4_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__._UZ(0,"ds-themed-loading",16),_angular_core__WEBPACK_IMPORTED_MODULE_17__.ALo(1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_17__.s9C("message",_angular_core__WEBPACK_IMPORTED_MODULE_17__.lcZ(1,1,"loading.search-results"))}function SubmissionImportExternalComponent_div_7_div_1_ng_container_1_div_6_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.TgZ(0,"div",17)(1,"ds-alert",18),_angular_core__WEBPACK_IMPORTED_MODULE_17__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.ALo(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.qZA()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Q6J("type","alert-info"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_17__.lcZ(3,2,"search.results.empty")))}function SubmissionImportExternalComponent_div_7_div_1_ng_container_1_div_8_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.TgZ(0,"div",19)(1,"ds-alert",18),_angular_core__WEBPACK_IMPORTED_MODULE_17__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.ALo(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.qZA()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Q6J("type","alert-info"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_17__.lcZ(3,2,"search.results.response.500")))}function SubmissionImportExternalComponent_div_7_div_1_ng_container_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.ynx(0),_angular_core__WEBPACK_IMPORTED_MODULE_17__.YNc(1,SubmissionImportExternalComponent_div_7_div_1_ng_container_1_h3_1_Template,3,3,"h3",10),_angular_core__WEBPACK_IMPORTED_MODULE_17__.YNc(2,SubmissionImportExternalComponent_div_7_div_1_ng_container_1_ds_viewable_collection_2_Template,1,11,"ds-viewable-collection",11),_angular_core__WEBPACK_IMPORTED_MODULE_17__.ALo(3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.YNc(4,SubmissionImportExternalComponent_div_7_div_1_ng_container_1_ds_themed_loading_4_Template,2,3,"ds-themed-loading",12),_angular_core__WEBPACK_IMPORTED_MODULE_17__.ALo(5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.YNc(6,SubmissionImportExternalComponent_div_7_div_1_ng_container_1_div_6_Template,4,4,"div",13),_angular_core__WEBPACK_IMPORTED_MODULE_17__.ALo(7,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.YNc(8,SubmissionImportExternalComponent_div_7_div_1_ng_container_1_div_8_Template,4,4,"div",14),_angular_core__WEBPACK_IMPORTED_MODULE_17__.ALo(9,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.BQk()),2&rf){const entriesRD_r4=ctx.ngVar,ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_17__.oxw(3);_angular_core__WEBPACK_IMPORTED_MODULE_17__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Q6J("ngIf",entriesRD_r4&&0!==(null==entriesRD_r4||null==entriesRD_r4.payload||null==entriesRD_r4.payload.page?null:entriesRD_r4.payload.page.length)),_angular_core__WEBPACK_IMPORTED_MODULE_17__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Q6J("ngIf",(null==entriesRD_r4?null:entriesRD_r4.hasSucceeded)&&!_angular_core__WEBPACK_IMPORTED_MODULE_17__.lcZ(3,5,ctx_r3.isLoading$)&&(null==entriesRD_r4||null==entriesRD_r4.payload||null==entriesRD_r4.payload.page?null:entriesRD_r4.payload.page.length)>0),_angular_core__WEBPACK_IMPORTED_MODULE_17__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Q6J("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_17__.lcZ(5,7,ctx_r3.isLoading$)),_angular_core__WEBPACK_IMPORTED_MODULE_17__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Q6J("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_17__.lcZ(7,9,ctx_r3.isLoading$)&&0===(null==entriesRD_r4||null==entriesRD_r4.payload||null==entriesRD_r4.payload.page?null:entriesRD_r4.payload.page.length)),_angular_core__WEBPACK_IMPORTED_MODULE_17__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Q6J("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_17__.lcZ(9,11,ctx_r3.isLoading$)&&500===entriesRD_r4.statusCode)}}function SubmissionImportExternalComponent_div_7_div_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.TgZ(0,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.YNc(1,SubmissionImportExternalComponent_div_7_div_1_ng_container_1_Template,10,13,"ng-container",9),_angular_core__WEBPACK_IMPORTED_MODULE_17__.ALo(2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.qZA()),2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_17__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_17__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Q6J("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_17__.lcZ(2,1,ctx_r1.entriesRD$))}}function SubmissionImportExternalComponent_div_7_div_2_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.TgZ(0,"div",2)(1,"ds-alert",18)(2,"p",20),_angular_core__WEBPACK_IMPORTED_MODULE_17__._uU(3),_angular_core__WEBPACK_IMPORTED_MODULE_17__.ALo(4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.qZA()()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Q6J("type","alert-info"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_17__.lcZ(4,2,"submission.import-external.page.hint")))}function SubmissionImportExternalComponent_div_7_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.TgZ(0,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.YNc(1,SubmissionImportExternalComponent_div_7_div_1_Template,3,3,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_17__.YNc(2,SubmissionImportExternalComponent_div_7_div_2_Template,5,4,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_17__.qZA()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_17__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_17__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Q6J("ngIf",""!==ctx_r0.reload$.value.sourceId),_angular_core__WEBPACK_IMPORTED_MODULE_17__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Q6J("ngIf",""===ctx_r0.reload$.value.sourceId)}}__name(SubmissionImportExternalComponent_div_7_div_1_ng_container_1_ds_viewable_collection_2_Template,"SubmissionImportExternalComponent_div_7_div_1_ng_container_1_ds_viewable_collection_2_Template"),__name(SubmissionImportExternalComponent_div_7_div_1_ng_container_1_ds_themed_loading_4_Template,"SubmissionImportExternalComponent_div_7_div_1_ng_container_1_ds_themed_loading_4_Template"),__name(SubmissionImportExternalComponent_div_7_div_1_ng_container_1_div_6_Template,"SubmissionImportExternalComponent_div_7_div_1_ng_container_1_div_6_Template"),__name(SubmissionImportExternalComponent_div_7_div_1_ng_container_1_div_8_Template,"SubmissionImportExternalComponent_div_7_div_1_ng_container_1_div_8_Template"),__name(SubmissionImportExternalComponent_div_7_div_1_ng_container_1_Template,"SubmissionImportExternalComponent_div_7_div_1_ng_container_1_Template"),__name(SubmissionImportExternalComponent_div_7_div_1_Template,"SubmissionImportExternalComponent_div_7_div_1_Template"),__name(SubmissionImportExternalComponent_div_7_div_2_Template,"SubmissionImportExternalComponent_div_7_div_2_Template"),__name(SubmissionImportExternalComponent_div_7_Template,"SubmissionImportExternalComponent_div_7_Template");const _c1=__name(function(){return["/mydspace"]},"_c1");class SubmissionImportExternalComponent{constructor(searchConfigService,externalService,routeService,router,modalService){this.searchConfigService=searchConfigService,this.externalService=externalService,this.routeService=routeService,this.router=router,this.modalService=modalService,this.entriesRD$=new rxjs__WEBPACK_IMPORTED_MODULE_18__.BehaviorSubject(null),this.isLoading$=new rxjs__WEBPACK_IMPORTED_MODULE_18__.BehaviorSubject(!1),this.reload$=new rxjs__WEBPACK_IMPORTED_MODULE_18__.BehaviorSubject({entity:"",query:"",sourceId:""}),this.initialPagination=Object.assign(new _shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_4__.r,{id:"spc",pageSize:10}),this.subs=[]}ngOnInit(){this.listId="list-submission-external-sources",this.context=_core_shared_context_model__WEBPACK_IMPORTED_MODULE_3__._.EntitySearchModalWithNameVariants,this.repeatable=!1,this.routeData={entity:"",sourceId:"",query:""},this.importConfig={buttonLabel:"submission.sections.describe.relationship-lookup.external-source.import-button-title."+this.label},this.entriesRD$=new rxjs__WEBPACK_IMPORTED_MODULE_18__.BehaviorSubject((0,_shared_remote_data_utils__WEBPACK_IMPORTED_MODULE_6__.AC)((0,_core_data_paginated_list_model__WEBPACK_IMPORTED_MODULE_1__.b)(new _core_shared_page_info_model__WEBPACK_IMPORTED_MODULE_9__.S,[]))),this.isLoading$=new rxjs__WEBPACK_IMPORTED_MODULE_18__.BehaviorSubject(!1),this.subs.push((0,rxjs__WEBPACK_IMPORTED_MODULE_18__.combineLatest)([this.routeService.getQueryParameterValue("entity"),this.routeService.getQueryParameterValue("sourceId"),this.routeService.getQueryParameterValue("query")]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.qn)(1)).subscribe(([entity,sourceId,query])=>{this.reload$.next({entity:entity||_core_shared_item_relationships_item_type_resource_type__WEBPACK_IMPORTED_MODULE_11__.N,query,sourceId}),this.selectLabel(entity),this.retrieveExternalSources()}))}getExternalSourceData(event){this.router.navigate([],{queryParams:event,replaceUrl:!0}).then(()=>{this.reload$.next(event),this.retrieveExternalSources()})}import(entry){this.modalRef=this.modalService.open(_import_external_preview_submission_import_external_preview_component__WEBPACK_IMPORTED_MODULE_7__.v,{size:"lg"});const modalComp=this.modalRef.componentInstance;modalComp.externalSourceEntry=entry,modalComp.labelPrefix=this.label}ngOnDestroy(){this.subs.filter(sub=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_20__.Uh)(sub)).forEach(sub=>sub.unsubscribe()),(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_20__.Uh)(this.retrieveExternalSourcesSub)&&this.retrieveExternalSourcesSub.unsubscribe()}retrieveExternalSources(){(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_20__.Uh)(this.retrieveExternalSourcesSub)&&this.retrieveExternalSourcesSub.unsubscribe(),this.retrieveExternalSourcesSub=this.reload$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.hX)(sourceQueryObject=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_20__.UE)(sourceQueryObject.sourceId)&&(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_20__.UE)(sourceQueryObject.query)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.wt)(sourceQueryObject=>{const query=sourceQueryObject.query;return this.routeData=sourceQueryObject,this.searchConfigService.paginatedSearchOptions.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.bw)(()=>this.isLoading$.next(!0)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.hX)(searchOptions=>searchOptions.query===query),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.zg)(searchOptions=>this.externalService.getExternalSourceEntries(this.routeData.sourceId,searchOptions).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_10__.sJ)())))})).subscribe(rdData=>{this.entriesRD$.next(rdData),this.isLoading$.next(!1)})}selectLabel(entity){this.label=entity,this.importConfig={buttonLabel:"submission.sections.describe.relationship-lookup.external-source.import-button-title."+this.label}}}__name(SubmissionImportExternalComponent,"SubmissionImportExternalComponent"),SubmissionImportExternalComponent.\u0275fac=__name(function(t){return new(t||SubmissionImportExternalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y36(_core_shared_search_search_configuration_service__WEBPACK_IMPORTED_MODULE_2__.U),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y36(_core_data_external_source_data_service__WEBPACK_IMPORTED_MODULE_0__.G),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y36(_core_services_route_service__WEBPACK_IMPORTED_MODULE_5__.MZ),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_21__.F0),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y36(_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_22__.FF))},"SubmissionImportExternalComponent_Factory"),SubmissionImportExternalComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_17__.Xpm({type:SubmissionImportExternalComponent,selectors:[["ds-submission-import-external"]],decls:15,vars:10,consts:[[1,"container"],[1,"row"],[1,"col-md-12"],["id","header",1,"pb-2"],[3,"initExternalSourceData","externalSourceData"],["class","row",4,"ngIf"],["role","button",1,"btn","btn-outline-secondary",3,"routerLink"],["aria-hidden","true",1,"fa","fa-chevron-left"],["class","col-md-12",4,"ngIf"],[4,"ngVar"],[4,"ngIf"],[3,"objects","selectionConfig","config","hideGear","context","importable","importConfig","importObject",4,"ngIf"],[3,"message",4,"ngIf"],["data-test","empty-external-entry-list",4,"ngIf"],["data-test","empty-external-error-500",4,"ngIf"],[3,"objects","selectionConfig","config","hideGear","context","importable","importConfig","importObject"],[3,"message"],["data-test","empty-external-entry-list"],[3,"type"],["data-test","empty-external-error-500"],[1,"lead","mb-0"]],template:__name(function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),_angular_core__WEBPACK_IMPORTED_MODULE_17__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_17__.ALo(5,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.TgZ(6,"ds-submission-import-external-searchbar",4),_angular_core__WEBPACK_IMPORTED_MODULE_17__.NdJ("externalSourceData",__name(function($event){return ctx.getExternalSourceData($event)},"SubmissionImportExternalComponent_Template_ds_submission_import_external_searchbar_externalSourceData_6_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_17__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.YNc(7,SubmissionImportExternalComponent_div_7_Template,3,2,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.TgZ(8,"div",1)(9,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_17__._UZ(10,"hr"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.TgZ(11,"a",6),_angular_core__WEBPACK_IMPORTED_MODULE_17__._UZ(12,"i",7),_angular_core__WEBPACK_IMPORTED_MODULE_17__._uU(13),_angular_core__WEBPACK_IMPORTED_MODULE_17__.ALo(14,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.qZA()()()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_17__.lcZ(5,5,"submission.import-external.title"+(ctx.label?"."+ctx.label:""))),_angular_core__WEBPACK_IMPORTED_MODULE_17__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Q6J("initExternalSourceData",ctx.reload$.value),_angular_core__WEBPACK_IMPORTED_MODULE_17__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Q6J("ngIf",ctx.reload$.value.entity),_angular_core__WEBPACK_IMPORTED_MODULE_17__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Q6J("routerLink",_angular_core__WEBPACK_IMPORTED_MODULE_17__.DdM(9,_c1)),_angular_core__WEBPACK_IMPORTED_MODULE_17__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_17__.lcZ(14,7,"submission.import-external.back-to-my-dspace")," "))},"SubmissionImportExternalComponent_Template"),directives:[_import_external_searchbar_submission_import_external_searchbar_component__WEBPACK_IMPORTED_MODULE_12__.p,_angular_common__WEBPACK_IMPORTED_MODULE_23__.O5,_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_13__.g,_shared_object_collection_object_collection_component__WEBPACK_IMPORTED_MODULE_14__.c,_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_15__.Z,_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_16__.w,_angular_router__WEBPACK_IMPORTED_MODULE_21__.yS],pipes:[_ngx_translate_core__WEBPACK_IMPORTED_MODULE_24__.X$,_angular_common__WEBPACK_IMPORTED_MODULE_23__.Ov],styles:[""],data:{animation:[_shared_animations_fade__WEBPACK_IMPORTED_MODULE_8__.Ji]}})},22992:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>ThemedSubmissionImportExternalComponent});var _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(46533),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(70074);function ThemedSubmissionImportExternalComponent_ng_template_0_Template(rf,ctx){}__name(ThemedSubmissionImportExternalComponent_ng_template_0_Template,"ThemedSubmissionImportExternalComponent_ng_template_0_Template");class ThemedSubmissionImportExternalComponent extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_0__.F{getComponentName(){return"SubmissionImportExternalComponent"}importThemedComponent(themeName){return __webpack_require__(43714)(`./${themeName}/app/submission/import-external/submission-import-external.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,51063))}}__name(ThemedSubmissionImportExternalComponent,"ThemedSubmissionImportExternalComponent"),ThemedSubmissionImportExternalComponent.\u0275fac=function(){let \u0275ThemedSubmissionImportExternalComponent_BaseFactory;return __name(function(t){return(\u0275ThemedSubmissionImportExternalComponent_BaseFactory||(\u0275ThemedSubmissionImportExternalComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_1__.n5z(ThemedSubmissionImportExternalComponent)))(t||ThemedSubmissionImportExternalComponent)},"ThemedSubmissionImportExternalComponent_Factory")}(),ThemedSubmissionImportExternalComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Xpm({type:ThemedSubmissionImportExternalComponent,selectors:[["ds-themed-submission-import-external"]],features:[_angular_core__WEBPACK_IMPORTED_MODULE_1__.qOj],decls:2,vars:0,consts:[["vcr",""]],template:__name(function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.YNc(0,ThemedSubmissionImportExternalComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.W1O)},"ThemedSubmissionImportExternalComponent_Template"),encapsulation:2})},38103:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{y:()=>SubmissionSectionContainerComponent});var _angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(70074),_sections_directive__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(31768),_sections_decorator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(18738),_shared_alert_aletr_type__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(338),_angular_common__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10210),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(63742),_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7519),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(47241);const _c0=["sectionRef"];function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_4_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(0,"i",18),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(2,"translate")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.s9C("title",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(1,2,"submission.sections.status.warnings.title")),_angular_core__WEBPACK_IMPORTED_MODULE_4__.uIk("aria-label",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(2,4,"submission.sections.status.warnings.aria")))}function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_6_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(0,"i",19),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(2,"translate")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.s9C("title",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(1,2,"submission.sections.status.errors.title")),_angular_core__WEBPACK_IMPORTED_MODULE_4__.uIk("aria-label",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(2,4,"submission.sections.status.errors.aria")))}function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_7_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(0,"i",20),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(2,"translate")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.s9C("title",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(1,2,"submission.sections.status.valid.title")),_angular_core__WEBPACK_IMPORTED_MODULE_4__.uIk("aria-label",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(2,4,"submission.sections.status.valid.aria")))}function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_9_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(0,"i",21),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(2,"translate")),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.s9C("title",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(1,2,"submission.sections.status.info.title")),_angular_core__WEBPACK_IMPORTED_MODULE_4__.uIk("aria-label",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(2,4,"submission.sections.status.info.aria")))}__name(SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_4_Template,"SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_4_Template"),__name(SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_6_Template,"SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_6_Template"),__name(SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_7_Template,"SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_7_Template"),__name(SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_9_Template,"SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_9_Template");const _c1=__name(function(a0){return{"text-white":a0}},"_c1");function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_span_14_Template(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(0,"span",22),2&rf){_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(3);const _r0=_angular_core__WEBPACK_IMPORTED_MODULE_4__.MAs(1);_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_4__.VKq(1,_c1,_r0.isInfo()))}}function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_span_15_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(0,"span",23)}function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_a_16_Template(rf,ctx){if(1&rf){const _r13=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"a",24),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",__name(function($event){return _angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(_r13),_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(3).removeSection($event)},"SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_a_16_Template_a_click_0_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(1,"i",25),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()}}__name(SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_span_14_Template,"SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_span_14_Template"),__name(SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_span_15_Template,"SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_span_15_Template"),__name(SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_a_16_Template,"SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_a_16_Template");const _c2=__name(function(a0){return{sectionHeader:a0}},"_c2");function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"span",8),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(3,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(4,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_4_Template,3,6,"i",10),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(6,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_6_Template,3,6,"i",11),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(7,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_7_Template,3,6,"i",12),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(8,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(9,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_i_9_Template,3,6,"i",13),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(10,"a",14),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(11,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(12,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(13,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(14,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_span_14_Template,1,3,"span",15),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(15,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_span_15_Template,1,0,"span",16),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(16,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_a_16_Template,2,0,"a",17),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()),2&rf){const ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(2),_r0=_angular_core__WEBPACK_IMPORTED_MODULE_4__.MAs(1);_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_4__.VKq(24,_c1,_r0.isInfo())),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(2,11,"submission.sections."+ctx_r3.sectionData.header)),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(5,13,_r0.isValid())&&!_r0.hasErrors()&&!_r0.isInfo()),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",_r0.hasErrors()&&!_r0.isInfo()),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(8,15,_r0.isValid())&&!_r0.hasErrors()&&!_r0.isInfo()),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",_r0.isInfo()),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("title",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(13,22,_r0.isOpen()?"submission.sections.toggle.close":"submission.sections.toggle.open")),_angular_core__WEBPACK_IMPORTED_MODULE_4__.uIk("aria-label",_angular_core__WEBPACK_IMPORTED_MODULE_4__.xi3(11,17,_r0.isOpen()?"submission.sections.toggle.aria.close":"submission.sections.toggle.aria.open",_angular_core__WEBPACK_IMPORTED_MODULE_4__.VKq(26,_c2,_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(12,20,"submission.sections."+ctx_r3.sectionData.header)))),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",_r0.isOpen()),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!_r0.isOpen()),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!_r0.isMandatory())}}function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_div_0_ds_alert_1_Template(rf,ctx){if(1&rf){const _r20=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"ds-alert",31),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("close",__name(function(){const i_r18=_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(_r20).index;return _angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.MAs(1).removeError(i_r18)},"SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_div_0_ds_alert_1_Template_ds_alert_close_0_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()}if(2&rf){const error_r17=ctx.$implicit,ctx_r16=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(4);_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("content",error_r17)("dismissible",!0)("type",ctx_r16.AlertTypeEnum.Error)}}function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_div_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",29),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(1,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_div_0_ds_alert_1_Template,1,3,"ds-alert",30),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()),2&rf){const ctx_r14=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(3),_r0=_angular_core__WEBPACK_IMPORTED_MODULE_4__.MAs(1);_angular_core__WEBPACK_IMPORTED_MODULE_4__.MGl("id","sectionGenericError_",ctx_r14.sectionData.id,""),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngForOf",_r0.getErrors())}}function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_ng_container_2_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_4__.GkF(0)}function SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_Template(rf,ctx){if(1&rf){const _r22=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(0,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_div_0_Template,2,2,"div",26),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(1,"div",27),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",__name(function($event){return _angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(_r22),_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.MAs(1).setFocus($event)},"SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_Template_div_click_1_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(2,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_ng_container_2_Template,1,0,"ng-container",28),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()}if(2&rf){const ctx_r4=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(2),_r0=_angular_core__WEBPACK_IMPORTED_MODULE_4__.MAs(1);_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",_r0.hasGenericErrors()),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.MGl("id","sectionContent_",ctx_r4.sectionData.id,""),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngComponentOutlet",ctx_r4.getSectionContent())("ngComponentOutletInjector",ctx_r4.objectInjector)}}function SubmissionSectionContainerComponent_ngb_accordion_2_Template(rf,ctx){if(1&rf){const _r24=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"ngb-accordion",3,4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("panelChange",__name(function($event){return _angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(_r24),_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.MAs(1).sectionChange($event)},"SubmissionSectionContainerComponent_ngb_accordion_2_Template_ngb_accordion_panelChange_0_listener")),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(2,"ngb-panel",5),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(3,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_Template,17,28,"ng-template",6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(4,SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_Template,3,4,"ng-template",7),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()}if(2&rf){const ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(),_r0=_angular_core__WEBPACK_IMPORTED_MODULE_4__.MAs(1);_angular_core__WEBPACK_IMPORTED_MODULE_4__.s9C("activeIds",ctx_r1.sectionData.id),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("destroyOnHide",!1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.s9C("id",ctx_r1.sectionData.id),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("type",_r0.isInfo()?"info":"")}}__name(SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_Template,"SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_3_Template"),__name(SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_div_0_ds_alert_1_Template,"SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_div_0_ds_alert_1_Template"),__name(SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_div_0_Template,"SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_div_0_Template"),__name(SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_ng_container_2_Template,"SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_ng_container_2_Template"),__name(SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_Template,"SubmissionSectionContainerComponent_ngb_accordion_2_ng_template_4_Template"),__name(SubmissionSectionContainerComponent_ngb_accordion_2_Template,"SubmissionSectionContainerComponent_ngb_accordion_2_Template");const _c3=__name(function(a0){return{"section-focus":a0}},"_c3");class SubmissionSectionContainerComponent{constructor(injector){this.injector=injector,this.AlertTypeEnum=_shared_alert_aletr_type__WEBPACK_IMPORTED_MODULE_2__.N}ngOnInit(){this.objectInjector=_angular_core__WEBPACK_IMPORTED_MODULE_4__.zs3.create({providers:[{provide:"collectionIdProvider",useFactory:()=>this.collectionId,deps:[]},{provide:"sectionDataProvider",useFactory:()=>this.sectionData,deps:[]},{provide:"submissionIdProvider",useFactory:()=>this.submissionId,deps:[]}],parent:this.injector})}removeSection(event){event.preventDefault(),event.stopPropagation(),this.sectionRef.removeSection(this.submissionId,this.sectionData.id)}getSectionContent(){return(0,_sections_decorator__WEBPACK_IMPORTED_MODULE_1__.A)(this.sectionData.sectionType)}}__name(SubmissionSectionContainerComponent,"SubmissionSectionContainerComponent"),SubmissionSectionContainerComponent.\u0275fac=__name(function(t){return new(t||SubmissionSectionContainerComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_4__.zs3))},"SubmissionSectionContainerComponent_Factory"),SubmissionSectionContainerComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_4__.Xpm({type:SubmissionSectionContainerComponent,selectors:[["ds-submission-section-container"]],viewQuery:__name(function(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_4__.Gf(_c0,5),2&rf){let _t;_angular_core__WEBPACK_IMPORTED_MODULE_4__.iGM(_t=_angular_core__WEBPACK_IMPORTED_MODULE_4__.CRH())&&(ctx.sectionRef=_t.first)}},"SubmissionSectionContainerComponent_Query"),inputs:{collectionId:"collectionId",sectionData:"sectionData",submissionId:"submissionId"},decls:4,vars:11,consts:[["dsSection","",3,"ngClass","mandatory","submissionId","sectionType","sectionId"],["sectionRef","sectionRef"],[3,"activeIds","destroyOnHide","panelChange",4,"ngIf"],[3,"activeIds","destroyOnHide","panelChange"],["acc","ngbAccordion"],[3,"id","type"],["ngbPanelTitle",""],["ngbPanelContent",""],["tabindex","0",1,"float-left","section-title",3,"ngClass"],[1,"d-inline-block","float-right"],["class","fas fa-exclamation-circle text-warning mr-3","role","img",3,"title",4,"ngIf"],["class","fas fa-exclamation-circle text-danger mr-3","role","img",3,"title",4,"ngIf"],["class","fas fa-check-circle text-success mr-3","role","img",3,"title",4,"ngIf"],["class","fas fa-info-circle mr-3 text-white","role","img",3,"title",4,"ngIf"],["tabindex","0","role","button",1,"close",3,"title"],["class","fas fa-chevron-up fa-fw",3,"ngClass",4,"ngIf"],["class","fas fa-chevron-down fa-fw",4,"ngIf"],["href","javascript:void(0);","class","close mr-3",3,"click",4,"ngIf"],["role","img",1,"fas","fa-exclamation-circle","text-warning","mr-3",3,"title"],["role","img",1,"fas","fa-exclamation-circle","text-danger","mr-3",3,"title"],["role","img",1,"fas","fa-check-circle","text-success","mr-3",3,"title"],["role","img",1,"fas","fa-info-circle","mr-3","text-white",3,"title"],[1,"fas","fa-chevron-up","fa-fw",3,"ngClass"],[1,"fas","fa-chevron-down","fa-fw"],["href","javascript:void(0);",1,"close","mr-3",3,"click"],["aria-hidden","true","tabindex","0",1,"fas","fa-trash-o"],[3,"id",4,"ngIf"],[3,"id","click"],[4,"ngComponentOutlet","ngComponentOutletInjector"],[3,"id"],[3,"content","dismissible","type","close",4,"ngFor","ngForOf"],[3,"content","dismissible","type","close"]],template:__name(function(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",0,1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(2,SubmissionSectionContainerComponent_ngb_accordion_2_Template,5,4,"ngb-accordion",2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()),2&rf){const _r0=_angular_core__WEBPACK_IMPORTED_MODULE_4__.MAs(1);_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_4__.VKq(9,_c3,_r0.isSectionActive()))("mandatory",ctx.sectionData.mandatory)("submissionId",ctx.submissionId)("sectionType",ctx.sectionData.sectionType)("sectionId",ctx.sectionData.id),_angular_core__WEBPACK_IMPORTED_MODULE_4__.uIk("id","section_"+ctx.sectionData.id),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(3,7,_r0.isEnabled()))}},"SubmissionSectionContainerComponent_Template"),directives:[_sections_directive__WEBPACK_IMPORTED_MODULE_0__.y,_angular_common__WEBPACK_IMPORTED_MODULE_5__.mk,_angular_common__WEBPACK_IMPORTED_MODULE_5__.O5,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_6__.gY,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_6__.Gk,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_6__.Cu,_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_6__.gW,_angular_common__WEBPACK_IMPORTED_MODULE_5__.sg,_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_3__.w,_angular_common__WEBPACK_IMPORTED_MODULE_5__.$G],pipes:[_angular_common__WEBPACK_IMPORTED_MODULE_5__.Ov,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__.X$],styles:["[_nghost-%COMP%]     .card{margin-bottom:var(--ds-submission-sections-margin-bottom);overflow:unset}.section-focus[_ngcontent-%COMP%]{border-radius:var(--bs-border-radius);box-shadow:var(--bs-btn-focus-box-shadow)}[_nghost-%COMP%]     .card:first-of-type{border-bottom:var(--bs-card-border-width) solid var(--bs-card-border-color)!important;border-bottom-left-radius:var(--bs-card-border-radius)!important;border-bottom-right-radius:var(--bs-card-border-radius)!important}[_nghost-%COMP%]     .card-header button{box-shadow:none!important}[_nghost-%COMP%]     .card-header button{width:100%}"]})},18738:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>rendersSectionType,E:()=>renderSectionFor});const submissionSectionsMap=new Map;function renderSectionFor(sectionType){return __name(function(objectElement){!objectElement||submissionSectionsMap.set(sectionType,objectElement)},"decorator")}function rendersSectionType(sectionType){return submissionSectionsMap.get(sectionType)}__name(renderSectionFor,"renderSectionFor"),__name(rendersSectionType,"rendersSectionType")},31768:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{y:()=>SectionsDirective});var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5796),lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(61001),_sections_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(85848),_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(25839),_utils_parseSectionErrorPaths__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(66660),_submission_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(83653),_angular_core__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__(52738),__webpack_require__(70074));class SectionsDirective{constructor(changeDetectorRef,submissionService,sectionService){this.changeDetectorRef=changeDetectorRef,this.submissionService=submissionService,this.sectionService=sectionService,this.mandatory=!0,this.genericSectionErrors=[],this.allSectionErrors=[],this.active=!0,this.sectionState=this.mandatory,this.subs=[]}ngOnInit(){this.valid=this.sectionService.isSectionValid(this.submissionId,this.sectionId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.UI)(valid=>(valid&&this.resetErrors(),valid))),this.subs.push(this.sectionService.getShownSectionErrors(this.submissionId,this.sectionId,this.sectionType).subscribe(errors=>{(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.UE)(errors)?errors.forEach(errorItem=>{(0,_utils_parseSectionErrorPaths__WEBPACK_IMPORTED_MODULE_6__.Z)(errorItem.path).forEach(error=>{error.fieldId?this.allSectionErrors.push(errorItem.message):this.genericSectionErrors=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.uniq)(this.genericSectionErrors.concat(errorItem.message))})}):this.resetErrors()}),this.submissionService.getActiveSectionId(this.submissionId).subscribe(activeSectionId=>{const previousActive=this.active;this.active=activeSectionId===this.sectionId,previousActive!==this.active&&(this.changeDetectorRef.detectChanges(),!this.active&&(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.K0)(activeSectionId)&&this.submissionService.dispatchSave(this.submissionId))})),this.enabled=this.sectionService.isSectionEnabled(this.submissionId,this.sectionId)}ngOnDestroy(){this.subs.filter(subscription=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.Uh)(subscription)).forEach(subscription=>subscription.unsubscribe())}sectionChange(event){this.sectionState=event.nextState}isOpen(){return this.sectionState}isMandatory(){return this.mandatory}isSectionActive(){return this.active}isEnabled(){return this.enabled}isValid(){return this.valid}removeSection(submissionId,sectionId){this.sectionService.removeSection(submissionId,sectionId)}hasGenericErrors(){return this.genericSectionErrors&&this.genericSectionErrors.length>0}hasErrors(){return this.genericSectionErrors&&this.genericSectionErrors.length>0||this.allSectionErrors&&this.allSectionErrors.length>0}getErrors(){return this.genericSectionErrors}setFocus(event){this.active||this.submissionService.setActiveSection(this.submissionId,this.sectionId)}isInfo(){return this.sectionService.getIsInformational(this.sectionType)}removeError(index){this.genericSectionErrors.splice(index)}resetErrors(){(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.UE)(this.genericSectionErrors)&&this.sectionService.dispatchRemoveSectionErrors(this.submissionId,this.sectionId),this.genericSectionErrors=[],this.allSectionErrors=[]}}__name(SectionsDirective,"SectionsDirective"),SectionsDirective.\u0275fac=__name(function(t){return new(t||SectionsDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_7__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_7__.sBO),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Y36(_submission_service__WEBPACK_IMPORTED_MODULE_2__.b),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Y36(_sections_service__WEBPACK_IMPORTED_MODULE_1__.J))},"SectionsDirective_Factory"),SectionsDirective.\u0275dir=_angular_core__WEBPACK_IMPORTED_MODULE_7__.lG2({type:SectionsDirective,selectors:[["","dsSection",""]],inputs:{mandatory:"mandatory",sectionId:"sectionId",sectionType:"sectionType",submissionId:"submissionId"},exportAs:["sectionRef"]})},85848:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{J:()=>SectionsService});var rxjs__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(39942),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5796),lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(61001),_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(25839),_objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(91219),_selectors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(36219),_core_submission_submission_scope_type__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(12286),_utils_parseSectionErrorPaths__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(66660),_shared_form_form_actions__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(78487),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(16228),_submission_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(83653),_sections_type__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(52738),_core_submission_submission_response_parsing_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(96937),_ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(65737),_shared_form_form_service__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(86727),_core_json_patch_builder_json_patch_operation_path_combiner__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(53995),_angular_core__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(70074),_nicky_lenaers_ngx_scroll_to__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(40654),_ngrx_store__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(93179),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(47241);class SectionsService{constructor(formService,notificationsService,scrollToService,submissionService,store,translate){this.formService=formService,this.notificationsService=notificationsService,this.scrollToService=scrollToService,this.submissionService=submissionService,this.store=store,this.translate=translate}checkSectionErrors(submissionId,sectionId,formId,currentErrors,prevErrors=[]){if((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.xb)(currentErrors))this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_1__.QC(submissionId,sectionId)),this.store.dispatch(new _shared_form_form_actions__WEBPACK_IMPORTED_MODULE_4__.y5(formId));else if(!(0,lodash__WEBPACK_IMPORTED_MODULE_0__.isEqual)(currentErrors,prevErrors)){const dispatchedErrors=[];currentErrors.forEach(error=>{(0,_utils_parseSectionErrorPaths__WEBPACK_IMPORTED_MODULE_11__.Z)(error.path).forEach(path=>{path.fieldId&&(this.formService.addError(formId,path.fieldId,path.fieldIndex,error.message),dispatchedErrors.push(path.fieldId))})}),prevErrors.forEach(error=>{(0,_utils_parseSectionErrorPaths__WEBPACK_IMPORTED_MODULE_11__.Z)(error.path).forEach(path=>{path.fieldId&&(dispatchedErrors.includes(path.fieldId)||this.formService.removeError(formId,path.fieldId,path.fieldIndex))})})}}dispatchRemoveSectionErrors(submissionId,sectionId){this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_1__.QC(submissionId,sectionId))}dispatchSetSectionFormId(submissionId,sectionId,formId){this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_1__.re(submissionId,sectionId,formId))}getSectionData(submissionId,sectionId,sectionType){return this.store.select((0,_selectors__WEBPACK_IMPORTED_MODULE_2__.y5)(submissionId,sectionId)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.UI)(sectionData=>sectionType===_sections_type__WEBPACK_IMPORTED_MODULE_7__.i.SubmissionForm?(0,_core_submission_submission_response_parsing_service__WEBPACK_IMPORTED_MODULE_8__.Vv)(sectionData):sectionData),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.xb)())}getShownSectionErrors(submissionId,sectionId,sectionType){let errorsState$;return errorsState$=sectionType!==_sections_type__WEBPACK_IMPORTED_MODULE_7__.i.SubmissionForm?this.getSectionErrors(submissionId,sectionId):this.getSectionState(submissionId,sectionId,sectionType).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.zg)(state=>this.formService.getFormErrors(state.formId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.UI)(formErrors=>{const pathCombiner=new _core_json_patch_builder_json_patch_operation_path_combiner__WEBPACK_IMPORTED_MODULE_13__.K("sections",sectionId),sectionErrors=formErrors.map(error=>({path:pathCombiner.getPath(error.fieldId.replace(/\_/g,".")).path,message:error.message})).filter(sectionError=>-1===(0,lodash__WEBPACK_IMPORTED_MODULE_0__.findIndex)(state.errorsToShow,{path:sectionError.path}));return[...state.errorsToShow,...sectionErrors]})))),errorsState$}getSectionErrors(submissionId,sectionId){return this.store.select((0,_selectors__WEBPACK_IMPORTED_MODULE_2__.Mb)(submissionId,sectionId)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.xb)())}getSectionServerErrors(submissionId,sectionId){return this.store.select((0,_selectors__WEBPACK_IMPORTED_MODULE_2__.fh)(submissionId,sectionId)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.xb)())}getSectionState(submissionId,sectionId,sectionType){return this.store.select((0,_selectors__WEBPACK_IMPORTED_MODULE_2__.gd)(submissionId,sectionId)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.hX)(sectionObj=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.Uh)(sectionObj)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.UI)(sectionObj=>sectionObj),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.UI)(sectionState=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.Uh)(sectionState.data)&&sectionType===_sections_type__WEBPACK_IMPORTED_MODULE_7__.i.SubmissionForm?Object.assign({},sectionState,{data:(0,_core_submission_submission_response_parsing_service__WEBPACK_IMPORTED_MODULE_8__.Vv)(sectionState.data)}):sectionState),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.xb)())}isSectionValid(submissionId,sectionId){return this.store.select((0,_selectors__WEBPACK_IMPORTED_MODULE_2__.gd)(submissionId,sectionId)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.hX)(sectionObj=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.Uh)(sectionObj)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.UI)(sectionObj=>sectionObj.isValid),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.xb)())}isSectionActive(submissionId,sectionId){return this.submissionService.getActiveSectionId(submissionId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.UI)(activeSectionId=>sectionId===activeSectionId),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.xb)())}isSectionEnabled(submissionId,sectionId){return this.store.select((0,_selectors__WEBPACK_IMPORTED_MODULE_2__.gd)(submissionId,sectionId)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.hX)(sectionObj=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.Uh)(sectionObj)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.UI)(sectionObj=>sectionObj.enabled),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.xb)())}isSectionReadOnly(submissionId,sectionId,submissionScope){return this.store.select((0,_selectors__WEBPACK_IMPORTED_MODULE_2__.gd)(submissionId,sectionId)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.hX)(sectionObj=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.Uh)(sectionObj)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.UI)(sectionObj=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.UE)(sectionObj.visibility)&&"READONLY"===sectionObj.visibility.other&&submissionScope!==_core_submission_submission_scope_type__WEBPACK_IMPORTED_MODULE_3__.S.WorkspaceItem),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.xb)())}isSectionAvailable(submissionId,sectionId){return this.store.select((0,_selectors__WEBPACK_IMPORTED_MODULE_2__.ak)(submissionId)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.hX)(submissionState=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.pT)(submissionState)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.UI)(submissionState=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.pT)(submissionState.sections)&&(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.pT)(submissionState.sections[sectionId])),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.xb)())}isSectionTypeAvailable(submissionId,sectionType){return this.store.select((0,_selectors__WEBPACK_IMPORTED_MODULE_2__.ak)(submissionId)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.hX)(submissionState=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.pT)(submissionState)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.UI)(submissionState=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.pT)(submissionState.sections)&&(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.pT)((0,lodash__WEBPACK_IMPORTED_MODULE_0__.findKey)(submissionState.sections,{sectionType}))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.xb)())}isSectionType(submissionId,sectionId,sectionType){return this.store.select((0,_selectors__WEBPACK_IMPORTED_MODULE_2__.ak)(submissionId)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.hX)(submissionState=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.pT)(submissionState)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.UI)(submissionState=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.pT)(submissionState.sections)&&(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.pT)(submissionState.sections[sectionId])&&submissionState.sections[sectionId].sectionType===sectionType),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.xb)())}addSection(submissionId,sectionId){this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_1__.gn(submissionId,sectionId));const config={target:sectionId,offset:-70};this.scrollToService.scrollTo(config)}removeSection(submissionId,sectionId){this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_1__.s0(submissionId,sectionId))}updateSectionData(submissionId,sectionId,data,errorsToShow=[],serverValidationErrors=[],metadata){if((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.UE)(data)){const isAvailable$=this.isSectionAvailable(submissionId,sectionId),isEnabled$=this.isSectionEnabled(submissionId,sectionId);(0,rxjs__WEBPACK_IMPORTED_MODULE_14__.combineLatest)(isAvailable$,isEnabled$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.qn)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.hX)(([available,enabled])=>available)).subscribe(([available,enabled])=>{this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_1__.z6(submissionId,sectionId,data,errorsToShow,serverValidationErrors,metadata))})}}setSectionError(submissionId,sectionId,error){this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_1__.uO(submissionId,sectionId,error))}setSectionStatus(submissionId,sectionId,status){this.store.dispatch(new _objects_submission_objects_actions__WEBPACK_IMPORTED_MODULE_1__.hx(submissionId,sectionId,status))}computeSectionConfiguredMetadata(formConfig){const metadata=[],rawData="string"==typeof formConfig?JSON.parse(formConfig,_ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_15__.WMN):formConfig;return rawData.rows&&!(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.xb)(rawData.rows)&&rawData.rows.forEach(currentRow=>{currentRow.fields&&!(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.xb)(currentRow.fields)&&currentRow.fields.forEach(field=>{field.selectableMetadata&&!(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.xb)(field.selectableMetadata)&&field.selectableMetadata.forEach(selectableMetadata=>{metadata.includes(selectableMetadata.metadata)||metadata.push(selectableMetadata.metadata)})})}),metadata}getIsInformational(sectionType){return sectionType===_sections_type__WEBPACK_IMPORTED_MODULE_7__.i.SherpaPolicies}}__name(SectionsService,"SectionsService"),SectionsService.\u0275fac=__name(function(t){return new(t||SectionsService)(_angular_core__WEBPACK_IMPORTED_MODULE_16__.LFG(_shared_form_form_service__WEBPACK_IMPORTED_MODULE_9__.o),_angular_core__WEBPACK_IMPORTED_MODULE_16__.LFG(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_5__.T),_angular_core__WEBPACK_IMPORTED_MODULE_16__.LFG(_nicky_lenaers_ngx_scroll_to__WEBPACK_IMPORTED_MODULE_17__.ij),_angular_core__WEBPACK_IMPORTED_MODULE_16__.LFG(_submission_service__WEBPACK_IMPORTED_MODULE_6__.b),_angular_core__WEBPACK_IMPORTED_MODULE_16__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_18__.yh),_angular_core__WEBPACK_IMPORTED_MODULE_16__.LFG(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_19__.sK))},"SectionsService_Factory"),SectionsService.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_16__.Yz7({token:SectionsService,factory:SectionsService.\u0275fac})},10685:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{o:()=>SubmissionModule});var core_module=__webpack_require__(32102),shared_module=__webpack_require__(66004),tslib_es6=__webpack_require__(70655),core=__webpack_require__(70074),cjs=__webpack_require__(39942),operators=__webpack_require__(5796),ngx_translate_core=__webpack_require__(47241),lodash=__webpack_require__(61001),form_builder_service=__webpack_require__(24656),form_component=__webpack_require__(61792),form_service=__webpack_require__(86727),empty_util=__webpack_require__(25839);class SectionModelComponent{constructor(injectedCollectionId,injectedSectionData,injectedSubmissionId){this.injectedCollectionId=injectedCollectionId,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.collectionId=injectedCollectionId,this.sectionData=injectedSectionData,this.submissionId=injectedSubmissionId}ngOnInit(){this.onSectionInit(),this.updateSectionStatus()}updateSectionStatus(){this.sectionStatusSub=this.getSectionStatus().pipe((0,operators.hX)(sectionStatus=>(0,empty_util.pT)(sectionStatus)),(0,operators.O4)(!0)).subscribe(sectionStatus=>{this.sectionService.setSectionStatus(this.submissionId,this.sectionData.id,sectionStatus)})}ngOnDestroy(){(0,empty_util.Uh)(this.sectionStatusSub)&&this.sectionStatusSub.unsubscribe(),this.onSectionDestroy()}}__name(SectionModelComponent,"SectionModelComponent"),SectionModelComponent.\u0275fac=__name(function(t){return new(t||SectionModelComponent)(core.Y36("collectionIdProvider"),core.Y36("sectionDataProvider"),core.Y36("submissionIdProvider"))},"SectionModelComponent_Factory"),SectionModelComponent.\u0275cmp=core.Xpm({type:SectionModelComponent,selectors:[["ds-section-model"]],decls:0,vars:0,template:__name(function(rf,ctx){},"SectionModelComponent_Template"),encapsulation:2});var submission_forms_config_data_service=__webpack_require__(47924),json_patch_operation_path_combiner=__webpack_require__(53995);class FormFieldPreviousValueObject{constructor(path=null,value=null){this._path=path,this._value=value}get path(){return this._path}set path(path){this._path=path}get value(){return this._value}set value(value){this._value=value}delete(){this._value=null,this._path=null}isPathEqual(path){return this._path&&(0,lodash.isEqual)(this._path,path)}}__name(FormFieldPreviousValueObject,"FormFieldPreviousValueObject");var sections_decorator=__webpack_require__(18738),sections_type=__webpack_require__(52738),submission_service=__webpack_require__(83653),section_form_operations_service=__webpack_require__(42820),notifications_service=__webpack_require__(16228),sections_service=__webpack_require__(85848),object_util=__webpack_require__(92466),workspaceitem_model=__webpack_require__(46845),shared_operators=__webpack_require__(63281),submission_object_data_service=__webpack_require__(66358),object_cache_service=__webpack_require__(50939),request_service=__webpack_require__(37958),follow_link_config_model=__webpack_require__(8183),environment=__webpack_require__(57017),submission_scope_type=__webpack_require__(12286),workflowitem_model=__webpack_require__(41527),common=__webpack_require__(10210),themed_loading_component=__webpack_require__(76924);const _c0=["formRef"];function SubmissionSectionFormComponent_ds_themed_loading_0_Template(rf,ctx){1&rf&&core._UZ(0,"ds-themed-loading",2)}function SubmissionSectionFormComponent_ds_form_1_Template(rf,ctx){if(1&rf){const _r4=core.EpF();core.TgZ(0,"ds-form",3,4),core.NdJ("dfChange",__name(function($event){return core.CHM(_r4),core.oxw().onChange($event)},"SubmissionSectionFormComponent_ds_form_1_Template_ds_form_dfChange_0_listener"))("dfFocus",__name(function($event){return core.CHM(_r4),core.oxw().onFocus($event)},"SubmissionSectionFormComponent_ds_form_1_Template_ds_form_dfFocus_0_listener"))("remove",__name(function($event){return core.CHM(_r4),core.oxw().onRemove($event)},"SubmissionSectionFormComponent_ds_form_1_Template_ds_form_remove_0_listener"))("ngbEvent",__name(function($event){return core.CHM(_r4),core.oxw().onCustomEvent($event)},"SubmissionSectionFormComponent_ds_form_1_Template_ds_form_ngbEvent_0_listener"))("removeArrayItem",__name(function($event){return core.CHM(_r4),core.oxw().onRemove($event)},"SubmissionSectionFormComponent_ds_form_1_Template_ds_form_removeArrayItem_0_listener")),core.qZA()}if(2&rf){const ctx_r1=core.oxw();core.Q6J("formId",ctx_r1.formId)("formModel",ctx_r1.formModel)("displaySubmit",!1)("displayCancel",!1)}}__name(SubmissionSectionFormComponent_ds_themed_loading_0_Template,"SubmissionSectionFormComponent_ds_themed_loading_0_Template"),__name(SubmissionSectionFormComponent_ds_form_1_Template,"SubmissionSectionFormComponent_ds_form_1_Template");let SubmissionSectionFormComponent=__name(class extends SectionModelComponent{constructor(cdr,formBuilderService,formOperationsService,formService,formConfigService,notificationsService,sectionService,submissionService,translate,submissionObjectService,objectCache,requestService,injectedCollectionId,injectedSectionData,injectedSubmissionId){super(injectedCollectionId,injectedSectionData,injectedSubmissionId),this.cdr=cdr,this.formBuilderService=formBuilderService,this.formOperationsService=formOperationsService,this.formService=formService,this.formConfigService=formConfigService,this.notificationsService=notificationsService,this.sectionService=sectionService,this.submissionService=submissionService,this.translate=translate,this.submissionObjectService=submissionObjectService,this.objectCache=objectCache,this.requestService=requestService,this.injectedCollectionId=injectedCollectionId,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.isUpdating=!1,this.isLoading=!0,this.fieldsOnTheirWayToBeRemoved=new Map,this.formData=Object.create({}),this.previousValue=new FormFieldPreviousValueObject,this.subs=[]}onSectionInit(){this.pathCombiner=new json_patch_operation_path_combiner.K("sections",this.sectionData.id),this.formId=this.formService.getUniqueId(this.sectionData.id),this.sectionService.dispatchSetSectionFormId(this.submissionId,this.sectionData.id,this.formId),this.formConfigService.findByHref(this.sectionData.config).pipe((0,operators.UI)(configData=>configData.payload),(0,operators.bw)(config=>this.formConfig=config),(0,operators.zg)(()=>(0,cjs.combineLatest)([this.sectionService.getSectionData(this.submissionId,this.sectionData.id,this.sectionData.sectionType),this.submissionObjectService.findById(this.submissionId,!0,!1,(0,follow_link_config_model.l)("item")).pipe((0,shared_operators.xw)(),(0,shared_operators.xe)())])),(0,operators.qn)(1)).subscribe(([sectionData,submissionObject])=>{(0,empty_util.o8)(this.formModel)&&(this.submissionObject=submissionObject,this.initForm(sectionData),this.sectionData.data=sectionData,this.subscriptions(),this.isLoading=!1,this.cdr.detectChanges())})}onSectionDestroy(){this.subs.filter(subscription=>(0,empty_util.Uh)(subscription)).forEach(subscription=>subscription.unsubscribe())}getSectionStatus(){const formStatus$=this.formService.isValid(this.formId),serverValidationStatus$=this.sectionService.getSectionServerErrors(this.submissionId,this.sectionData.id).pipe((0,operators.UI)(validationErrors=>(0,empty_util.xb)(validationErrors)));return(0,cjs.combineLatest)([formStatus$,serverValidationStatus$]).pipe((0,operators.UI)(([formValidation,serverSideValidation])=>formValidation&&serverSideValidation))}hasMetadataEnrichment(sectionData){const sectionDataToCheck={};Object.keys(sectionData).forEach(key=>{this.sectionMetadata&&this.sectionMetadata.includes(key)&&this.inCurrentSubmissionScope(key)&&(sectionDataToCheck[key]=sectionData[key])});const diffResult=[],diffObj=(0,object_util.e5)(sectionDataToCheck,this.formData);return Object.keys(diffObj).forEach(key=>{diffObj[key].forEach(value=>{value.hasOwnProperty("value")&&(0,lodash.findIndex)(this.formData[key],{value:value.value})<0&&diffResult.push(value)})}),(0,empty_util.UE)(diffResult)}inCurrentSubmissionScope(field){var _a,_b,_c;switch(null===(_c=null===(_b=null===(_a=this.formConfig)||void 0===_a?void 0:_a.rows.find(row=>{var _a2,_b2,_c2,_d;return(null===(_d=null===(_c2=null===(_b2=null===(_a2=row.fields)||void 0===_a2?void 0:_a2[0])||void 0===_b2?void 0:_b2.selectableMetadata)||void 0===_c2?void 0:_c2[0])||void 0===_d?void 0:_d.metadata)===field}).fields)||void 0===_b?void 0:_b[0])||void 0===_c?void 0:_c.scope){case submission_scope_type.S.WorkspaceItem:return this.submissionObject.type===workspaceitem_model.K.type.value;case submission_scope_type.S.WorkflowItem:return this.submissionObject.type===workflowitem_model.p.type.value;default:return!0}}initForm(sectionData){try{this.formModel=this.formBuilderService.modelFromConfiguration(this.submissionId,this.formConfig,this.collectionId,sectionData,this.submissionService.getSubmissionScope());const sectionMetadata=this.sectionService.computeSectionConfiguredMetadata(this.formConfig);this.sectionService.updateSectionData(this.submissionId,this.sectionData.id,sectionData,this.sectionData.errorsToShow,this.sectionData.serverValidationErrors,sectionMetadata)}catch(e){const sectionError={message:this.translate.instant("error.submission.sections.init-form-error")+e.toString(),path:"/sections/"+this.sectionData.id};console.error(e.stack),this.sectionService.setSectionError(this.submissionId,this.sectionData.id,sectionError)}}updateForm(sectionData,errors){(0,empty_util.UE)(sectionData)&&!(0,lodash.isEqual)(sectionData,this.sectionData.data)?(this.sectionData.data=sectionData,this.hasMetadataEnrichment(sectionData)?(this.isUpdating=!0,this.formModel=null,this.cdr.detectChanges(),this.initForm(sectionData),this.checksForErrors(errors),this.isUpdating=!1,this.cdr.detectChanges()):((0,empty_util.UE)(errors)||(0,empty_util.UE)(this.sectionData.errorsToShow))&&this.checksForErrors(errors)):((0,empty_util.UE)(errors)||(0,empty_util.UE)(this.sectionData.errorsToShow))&&this.checksForErrors(errors)}checksForErrors(errors){this.formService.isFormInitialized(this.formId).pipe((0,operators.sE)(status=>!0===status&&!this.isUpdating)).subscribe(()=>{this.sectionService.checkSectionErrors(this.submissionId,this.sectionData.id,this.formId,errors,this.sectionData.errorsToShow),this.sectionData.errorsToShow=errors,this.cdr.detectChanges()})}subscriptions(){this.subs.push(this.formService.getFormData(this.formId).pipe((0,operators.xb)()).subscribe(formData=>{this.formData=formData}),this.sectionService.getSectionState(this.submissionId,this.sectionData.id,this.sectionData.sectionType).pipe((0,operators.hX)(sectionState=>(0,empty_util.UE)(sectionState)&&((0,empty_util.UE)(sectionState.data)||(0,empty_util.UE)(sectionState.errorsToShow))),(0,operators.xb)()).subscribe(sectionState=>{this.fieldsOnTheirWayToBeRemoved=new Map,this.sectionMetadata=sectionState.metadata,this.updateForm(sectionState.data,sectionState.errorsToShow)}))}onChange(event){this.formOperationsService.dispatchOperationsFromEvent(this.pathCombiner,event,this.previousValue,this.hasStoredValue(this.formBuilderService.getId(event.model),this.formOperationsService.getArrayIndexFromEvent(event)));const metadata=this.formOperationsService.getFieldPathSegmentedFromChangeEvent(event),value=this.formOperationsService.getFieldValueFromChangeEvent(event);(-1!==environment.N.submission.autosave.metadata.indexOf(metadata)&&(0,empty_util.UE)(value)||this.hasRelatedCustomError(metadata))&&this.submissionService.dispatchSave(this.submissionId)}hasRelatedCustomError(medatata){const index=(0,lodash.findIndex)(this.sectionData.errorsToShow,{path:this.pathCombiner.getPath(medatata).path});if(-1!==index){const validator=this.sectionData.errorsToShow[index].message.replace("error.validation.","");return!environment.N.form.validatorMap.hasOwnProperty(validator)}return!1}onFocus(event){const value=this.formOperationsService.getFieldValueFromChangeEvent(event),path=this.formBuilderService.getPath(event.model);this.formBuilderService.hasMappedGroupValue(event.model)?(this.previousValue.path=path,this.previousValue.value=this.formOperationsService.getQualdropValueMap(event)):(0,empty_util.UE)(value)&&("object"==typeof value&&(0,empty_util.UE)(value.value)||"string"==typeof value)&&(this.previousValue.path=path,this.previousValue.value=value)}onRemove(event){const fieldId=this.formBuilderService.getId(event.model),fieldIndex=this.formOperationsService.getArrayIndexFromEvent(event);if(this.fieldsOnTheirWayToBeRemoved.has(fieldId)){const indexes=this.fieldsOnTheirWayToBeRemoved.get(fieldId);indexes.push(fieldIndex),this.fieldsOnTheirWayToBeRemoved.set(fieldId,indexes)}else this.fieldsOnTheirWayToBeRemoved.set(fieldId,[fieldIndex]);this.formOperationsService.dispatchOperationsFromEvent(this.pathCombiner,event,this.previousValue,this.hasStoredValue(fieldId,fieldIndex))}hasStoredValue(fieldId,index){return!!(0,empty_util.UE)(this.sectionData.data)&&(this.sectionData.data.hasOwnProperty(fieldId)&&(0,empty_util.UE)(this.sectionData.data[fieldId][index])&&!this.isFieldToRemove(fieldId,index))}isFieldToRemove(fieldId,index){return this.fieldsOnTheirWayToBeRemoved.has(fieldId)&&this.fieldsOnTheirWayToBeRemoved.get(fieldId).includes(index)}onCustomEvent(event){this.formOperationsService.dispatchOperationsFromEvent(this.pathCombiner,event,this.previousValue,null)}},"SubmissionSectionFormComponent");SubmissionSectionFormComponent.\u0275fac=__name(function(t){return new(t||SubmissionSectionFormComponent)(core.Y36(core.sBO),core.Y36(form_builder_service.c),core.Y36(section_form_operations_service.m),core.Y36(form_service.o),core.Y36(submission_forms_config_data_service.X),core.Y36(notifications_service.T),core.Y36(sections_service.J),core.Y36(submission_service.b),core.Y36(ngx_translate_core.sK),core.Y36(submission_object_data_service.O),core.Y36(object_cache_service.a),core.Y36(request_service.s),core.Y36("collectionIdProvider"),core.Y36("sectionDataProvider"),core.Y36("submissionIdProvider"))},"SubmissionSectionFormComponent_Factory"),SubmissionSectionFormComponent.\u0275cmp=core.Xpm({type:SubmissionSectionFormComponent,selectors:[["ds-submission-section-form"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(_c0,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.formRef=_t.first)}},"SubmissionSectionFormComponent_Query"),features:[core.qOj],decls:2,vars:2,consts:[["message","Loading...",4,"ngIf"],[3,"formId","formModel","displaySubmit","displayCancel","dfChange","dfFocus","remove","ngbEvent","removeArrayItem",4,"ngIf"],["message","Loading..."],[3,"formId","formModel","displaySubmit","displayCancel","dfChange","dfFocus","remove","ngbEvent","removeArrayItem"],["formRef","formComponent"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,SubmissionSectionFormComponent_ds_themed_loading_0_Template,1,0,"ds-themed-loading",0),core.YNc(1,SubmissionSectionFormComponent_ds_form_1_Template,2,4,"ds-form",1)),2&rf&&(core.Q6J("ngIf",ctx.isLoading),core.xp6(1),core.Q6J("ngIf",!ctx.isLoading&&ctx.formModel))},"SubmissionSectionFormComponent_Template"),directives:[common.O5,themed_loading_component.Z,form_component.U],styles:[""]}),SubmissionSectionFormComponent=(0,tslib_es6.__decorate)([(0,sections_decorator.E)(sections_type.i.SubmissionForm),(0,tslib_es6.__metadata)("design:paramtypes",[core.sBO,form_builder_service.c,section_form_operations_service.m,form_service.o,submission_forms_config_data_service.X,notifications_service.T,sections_service.J,submission_service.b,ngx_translate_core.sK,submission_object_data_service.O,object_cache_service.a,request_service.s,String,Object,String])],SubmissionSectionFormComponent);var sections_directive=__webpack_require__(31768),submission_form_collection_component=__webpack_require__(51769),submission_form_footer_component=__webpack_require__(17996),submission_form_component=__webpack_require__(25748),submission_form_section_add_component=__webpack_require__(29959),section_container_component=__webpack_require__(38103),ngrx_store=__webpack_require__(93179),ngrx_effects=__webpack_require__(48621),submission_reducers=__webpack_require__(34521),submission_json_patch_operations_service=__webpack_require__(65702),parseSectionErrors=__webpack_require__(60516),submission_objects_actions=__webpack_require__(91219),parseSectionErrorPaths=__webpack_require__(66660);class SubmissionObjectEffects{constructor(actions$,notificationsService,operationsService,sectionService,store$,submissionService,submissionObjectService,translate){this.actions$=actions$,this.notificationsService=notificationsService,this.operationsService=operationsService,this.sectionService=sectionService,this.store$=store$,this.submissionService=submissionService,this.submissionObjectService=submissionObjectService,this.translate=translate,this.loadForm$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(submission_objects_actions.tI.INIT_SUBMISSION_FORM),(0,operators.UI)(action=>{const definition=action.payload.submissionDefinition,mappedActions=[];return definition.sections.page.forEach(sectionDefinition=>{const selfLink=sectionDefinition._links.self.href||sectionDefinition._links.self,sectionId=selfLink.substr(selfLink.lastIndexOf("/")+1),config=sectionDefinition._links.config?sectionDefinition._links.config.href||sectionDefinition._links.config:"",enabled=sectionDefinition.mandatory||(0,empty_util.UE)(action.payload.sections)&&action.payload.sections.hasOwnProperty(sectionId);let sectionData;sectionData=sectionDefinition.sectionType!==sections_type.i.SubmissionForm?(0,empty_util.pT)(action.payload.sections)&&(0,empty_util.pT)(action.payload.sections[sectionId])?action.payload.sections[sectionId]:Object.create(null):action.payload.item.metadata;const sectionErrors=(0,empty_util.UE)(action.payload.errors)&&action.payload.errors[sectionId]||null;mappedActions.push(new submission_objects_actions.qK(action.payload.submissionId,sectionId,sectionDefinition.header,config,sectionDefinition.mandatory,sectionDefinition.sectionType,sectionDefinition.visibility,enabled,sectionData,sectionErrors))}),{action,definition,mappedActions}}),(0,operators.zg)(result=>(0,cjs.from)(result.mappedActions.concat(new submission_objects_actions.p3(result.action.payload.submissionId)))))),this.resetForm$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(submission_objects_actions.tI.RESET_SUBMISSION_FORM),(0,operators.UI)(action=>new submission_objects_actions.Xq(action.payload.collectionId,action.payload.submissionId,action.payload.selfUrl,action.payload.submissionDefinition,action.payload.sections,action.payload.item,null)))),this.saveSubmission$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(submission_objects_actions.tI.SAVE_SUBMISSION_FORM),(0,operators.wt)(action=>this.operationsService.jsonPatchByResourceType(this.submissionService.getSubmissionObjectLinkName(),action.payload.submissionId,"sections").pipe((0,operators.UI)(response=>new submission_objects_actions.Uq(action.payload.submissionId,response,action.payload.isManual,action.payload.isManual)),(0,operators.KQ)(()=>(0,cjs.of)(new submission_objects_actions.ec(action.payload.submissionId))))))),this.saveForLaterSubmission$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(submission_objects_actions.tI.SAVE_FOR_LATER_SUBMISSION_FORM),(0,operators.wt)(action=>this.operationsService.jsonPatchByResourceType(this.submissionService.getSubmissionObjectLinkName(),action.payload.submissionId,"sections").pipe((0,operators.UI)(response=>new submission_objects_actions.gA(action.payload.submissionId,response)),(0,operators.KQ)(()=>(0,cjs.of)(new submission_objects_actions.ec(action.payload.submissionId))))))),this.saveSubmissionSuccess$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(submission_objects_actions.tI.SAVE_SUBMISSION_FORM_SUCCESS),(0,operators.Mm)(this.store$),(0,operators.UI)(([action,currentState])=>this.parseSaveResponse(currentState.submission.objects[action.payload.submissionId],action.payload.submissionObject,action.payload.submissionId,currentState.forms,action.payload.showNotifications,action.payload.showErrors)),(0,operators.zg)(actions=>(0,cjs.from)(actions)))),this.saveSubmissionSectionSuccess$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(submission_objects_actions.tI.SAVE_SUBMISSION_SECTION_FORM_SUCCESS),(0,operators.Mm)(this.store$),(0,operators.UI)(([action,currentState])=>this.parseSaveResponse(currentState.submission.objects[action.payload.submissionId],action.payload.submissionObject,action.payload.submissionId,currentState.forms,!1,!1)),(0,operators.zg)(actions=>(0,cjs.from)(actions)))),this.saveSection$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(submission_objects_actions.tI.SAVE_SUBMISSION_SECTION_FORM),(0,operators.wt)(action=>this.operationsService.jsonPatchByResourceID(this.submissionService.getSubmissionObjectLinkName(),action.payload.submissionId,"sections",action.payload.sectionId).pipe((0,operators.UI)(response=>new submission_objects_actions.hM(action.payload.submissionId,response)),(0,operators.KQ)(()=>(0,cjs.of)(new submission_objects_actions.cT(action.payload.submissionId))))))),this.saveError$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(submission_objects_actions.tI.SAVE_SUBMISSION_FORM_ERROR,submission_objects_actions.tI.SAVE_SUBMISSION_SECTION_FORM_ERROR),(0,operators.Mm)(this.store$),(0,operators.bw)(()=>this.notificationsService.error(null,this.translate.get("submission.sections.general.save_error_notice")))),{dispatch:!1}),this.saveAndDeposit$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(submission_objects_actions.tI.SAVE_AND_DEPOSIT_SUBMISSION),(0,operators.Mm)(this.submissionService.hasUnsavedModification()),(0,operators.wt)(([action,hasUnsavedModification])=>{let response$;return response$=hasUnsavedModification?this.operationsService.jsonPatchByResourceType(this.submissionService.getSubmissionObjectLinkName(),action.payload.submissionId,"sections"):this.submissionObjectService.findById(action.payload.submissionId,!1,!0).pipe((0,shared_operators.Gp)(),(0,operators.UI)(submissionObject=>[submissionObject])),response$.pipe((0,operators.UI)(response=>this.canDeposit(response)?new submission_objects_actions.wn(action.payload.submissionId):(this.notificationsService.warning(null,this.translate.instant("submission.sections.general.cannot_deposit"),null,!0),new submission_objects_actions.Uq(action.payload.submissionId,response,!1,!0))),(0,operators.KQ)(()=>(0,cjs.of)(new submission_objects_actions.ec(action.payload.submissionId))))}))),this.depositSubmission$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(submission_objects_actions.tI.DEPOSIT_SUBMISSION),(0,operators.Mm)(this.store$),(0,operators.wt)(([action,state])=>this.submissionService.depositSubmission(state.submission.objects[action.payload.submissionId].selfUrl).pipe((0,operators.UI)(()=>new submission_objects_actions.e7(action.payload.submissionId)),(0,operators.KQ)(error=>(0,cjs.of)(new submission_objects_actions.jn(action.payload.submissionId))))))),this.saveForLaterSubmissionSuccess$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(submission_objects_actions.tI.SAVE_FOR_LATER_SUBMISSION_FORM_SUCCESS),(0,operators.bw)(()=>this.notificationsService.success(null,this.translate.get("submission.sections.general.save_success_notice"))),(0,operators.bw)(()=>this.submissionService.redirectToMyDSpace())),{dispatch:!1}),this.depositSubmissionSuccess$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(submission_objects_actions.tI.DEPOSIT_SUBMISSION_SUCCESS),(0,operators.bw)(()=>this.notificationsService.success(null,this.translate.get("submission.sections.general.deposit_success_notice"))),(0,operators.bw)(()=>this.submissionService.redirectToMyDSpace())),{dispatch:!1}),this.depositSubmissionError$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(submission_objects_actions.tI.DEPOSIT_SUBMISSION_ERROR),(0,operators.bw)(()=>this.notificationsService.error(null,this.translate.get("submission.sections.general.deposit_error_notice")))),{dispatch:!1}),this.discardSubmission$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(submission_objects_actions.tI.DISCARD_SUBMISSION),(0,operators.wt)(action=>this.submissionService.discardSubmission(action.payload.submissionId).pipe((0,operators.UI)(()=>new submission_objects_actions._w(action.payload.submissionId)),(0,operators.KQ)(()=>(0,cjs.of)(new submission_objects_actions.kj(action.payload.submissionId))))))),this.addAllMetadataToSectionData=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(submission_objects_actions.tI.UPDATE_SECTION_DATA),(0,operators.wt)(action=>this.sectionService.getSectionState(action.payload.submissionId,action.payload.sectionId,sections_type.i.Upload).pipe((0,operators.UI)(section=>[action,section]),(0,operators.qn)(1))),(0,operators.hX)(([action,section])=>section.sectionType===sections_type.i.SubmissionForm),(0,operators.wt)(([action,section])=>section.sectionType===sections_type.i.SubmissionForm?this.submissionObjectService.findById(action.payload.submissionId,!0,!1,(0,follow_link_config_model.l)("item")).pipe((0,shared_operators.Gp)()).pipe((0,operators.wt)(submissionObject=>submissionObject.item.pipe((0,shared_operators.Gp)()))).pipe((0,operators.UI)(item=>item.metadata),(0,operators.hX)(metadata=>!(0,lodash.isEqual)(action.payload.data,metadata)),(0,operators.UI)(metadata=>new submission_objects_actions.z6(action.payload.submissionId,action.payload.sectionId,metadata,action.payload.errorsToShow,action.payload.serverValidationErrors,action.payload.metadata))):(0,cjs.of)(new submission_objects_actions.jQ)))),this.discardSubmissionSuccess$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(submission_objects_actions.tI.DISCARD_SUBMISSION_SUCCESS),(0,operators.bw)(()=>this.notificationsService.success(null,this.translate.get("submission.sections.general.discard_success_notice"))),(0,operators.bw)(()=>this.submissionService.redirectToMyDSpace())),{dispatch:!1}),this.discardSubmissionError$=(0,ngrx_effects.GW)(()=>this.actions$.pipe((0,ngrx_effects.l4)(submission_objects_actions.tI.DISCARD_SUBMISSION_ERROR),(0,operators.bw)(()=>this.notificationsService.error(null,this.translate.get("submission.sections.general.discard_error_notice")))),{dispatch:!1})}canDeposit(response){let canDeposit=!0;return(0,empty_util.UE)(response)&&response.forEach(item=>{const{errors}=item;errors&&!(0,empty_util.xb)(errors)&&(canDeposit=!1)}),canDeposit}parseSaveResponse(currentState,response,submissionId,forms,showNotifications=!0,showErrors=!0){const mappedActions=[];return(0,empty_util.UE)(response)&&(showNotifications&&this.notificationsService.success(null,this.translate.get("submission.sections.general.save_success_notice")),response.forEach(item=>{var _a;let errorsList=Object.create({});const{errors}=item;errors&&!(0,empty_util.xb)(errors)&&(errorsList=(0,parseSectionErrors.Z)(errors),showNotifications&&this.notificationsService.warning(null,this.translate.get("submission.sections.general.sections_not_valid")));const sections=item.sections&&(0,empty_util.UE)(item.sections)?item.sections:{},sectionsKeys=(0,lodash.union)(Object.keys(sections),Object.keys(errorsList));for(const sectionId of sectionsKeys){const sectionErrors=errorsList[sectionId]||[],sectionData=sections[sectionId]||{};if(currentState.sections[sectionId].sectionType===sections_type.i.Upload&&(0,empty_util.xb)(sectionData.files)&&!currentState.sections[sectionId].enabled)continue;showNotifications&&!currentState.sections[sectionId].enabled&&this.submissionService.notifyNewSection(submissionId,sectionId,currentState.sections[sectionId].sectionType);const filteredErrors=filterErrors(getForm(forms,currentState,sectionId),sectionErrors,currentState.sections[sectionId].sectionType,showErrors);mappedActions.push(new submission_objects_actions.z6(submissionId,sectionId,sectionData,filteredErrors,sectionErrors))}const sherpaPoliciesSectionId=(0,lodash.findKey)(currentState.sections,section=>section.sectionType===sections_type.i.SherpaPolicies);(0,empty_util.pT)(sherpaPoliciesSectionId)&&(0,empty_util.UE)(null===(_a=currentState.sections[sherpaPoliciesSectionId])||void 0===_a?void 0:_a.data)&&(0,empty_util.xb)(sections[sherpaPoliciesSectionId])&&mappedActions.push(new submission_objects_actions.z6(submissionId,sherpaPoliciesSectionId,null,[],[]))})),mappedActions}}function getForm(forms,currentState,sectionId){if(!forms)return null;return forms[currentState.sections[sectionId].formId]}function filterErrors(sectionForm,sectionErrors,sectionType,notify){if(notify||sectionType!==sections_type.i.SubmissionForm)return sectionErrors;if(!sectionForm||!sectionForm.touched)return[];const filteredErrors=[];return sectionErrors.forEach(error=>{(0,parseSectionErrorPaths.Z)(error.path).forEach(path=>{path.fieldId&&sectionForm.touched[path.fieldId]&&filteredErrors.push(error)})}),filteredErrors}__name(SubmissionObjectEffects,"SubmissionObjectEffects"),SubmissionObjectEffects.\u0275fac=__name(function(t){return new(t||SubmissionObjectEffects)(core.LFG(ngrx_effects.eX),core.LFG(notifications_service.T),core.LFG(submission_json_patch_operations_service.E),core.LFG(sections_service.J),core.LFG(ngrx_store.yh),core.LFG(submission_service.b),core.LFG(submission_object_data_service.O),core.LFG(ngx_translate_core.sK))},"SubmissionObjectEffects_Factory"),SubmissionObjectEffects.\u0275prov=core.Yz7({token:SubmissionObjectEffects,factory:SubmissionObjectEffects.\u0275fac}),__name(getForm,"getForm"),__name(filterErrors,"filterErrors");const submissionEffects=[SubmissionObjectEffects];var selectors=__webpack_require__(36219);class SectionUploadService{constructor(store){this.store=store}getUploadedFileList(submissionId,sectionId){return this.store.select((0,selectors.y8)(submissionId,sectionId)).pipe((0,operators.UI)(state=>state),(0,operators.xb)())}getFileData(submissionId,sectionId,fileUUID){return this.store.select((0,selectors.y8)(submissionId,sectionId)).pipe((0,operators.hX)(state=>!(0,empty_util.o8)(state)),(0,operators.UI)(state=>{let fileState;return Object.keys(state).filter(key=>state[key].uuid===fileUUID).forEach(key=>fileState=state[key]),fileState}),(0,operators.xb)())}getDefaultPolicies(submissionId,sectionId,fileUUID){return this.store.select((0,selectors.G)(submissionId,sectionId,fileUUID)).pipe((0,operators.UI)(state=>state),(0,operators.xb)())}addUploadedFile(submissionId,sectionId,fileUUID,data){this.store.dispatch(new submission_objects_actions.l5(submissionId,sectionId,fileUUID,data))}updateFileData(submissionId,sectionId,fileUUID,data){this.store.dispatch(new submission_objects_actions.GM(submissionId,sectionId,fileUUID,data))}removeUploadedFile(submissionId,sectionId,fileUUID){this.store.dispatch(new submission_objects_actions.YU(submissionId,sectionId,fileUUID))}}__name(SectionUploadService,"SectionUploadService"),SectionUploadService.\u0275fac=__name(function(t){return new(t||SectionUploadService)(core.LFG(ngrx_store.yh))},"SectionUploadService_Factory"),SectionUploadService.\u0275prov=core.Yz7({token:SectionUploadService,factory:SectionUploadService.\u0275fac});var collection_data_service=__webpack_require__(64508),group_data_service=__webpack_require__(96652),resource_policy_data_service=__webpack_require__(98266),config_data_service=__webpack_require__(81703),hal_endpoint_service=__webpack_require__(19339),config_type=__webpack_require__(49004),remote_data_build_service=__webpack_require__(10303),data_service_decorator=__webpack_require__(8411);let SubmissionUploadsConfigDataService=__name(class extends config_data_service.o{constructor(requestService,rdbService,objectCache,halService){super("submissionuploads",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService}findByHref(href,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){return super.findByHref(href,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}},"SubmissionUploadsConfigDataService");SubmissionUploadsConfigDataService.\u0275fac=__name(function(t){return new(t||SubmissionUploadsConfigDataService)(core.LFG(request_service.s),core.LFG(remote_data_build_service.Q),core.LFG(object_cache_service.a),core.LFG(hal_endpoint_service.q))},"SubmissionUploadsConfigDataService_Factory"),SubmissionUploadsConfigDataService.\u0275prov=core.Yz7({token:SubmissionUploadsConfigDataService,factory:SubmissionUploadsConfigDataService.\u0275fac}),SubmissionUploadsConfigDataService=(0,tslib_es6.__decorate)([(0,data_service_decorator.cQ)(config_type.fB),(0,tslib_es6.__metadata)("design:paramtypes",[request_service.s,remote_data_build_service.Q,object_cache_service.a,hal_endpoint_service.q])],SubmissionUploadsConfigDataService);var aletr_type=__webpack_require__(338);function SubmissionSectionUploadComponent_ng_container_1_Template(rf,ctx){1&rf&&(core.ynx(0),core.TgZ(1,"div",2)(2,"div",3)(3,"h3",4)(4,"span",5),core._uU(5),core.ALo(6,"translate"),core.qZA()()()(),core.BQk()),2&rf&&(core.xp6(5),core.Oqu(core.lcZ(6,1,"submission.sections.upload.no-file-uploaded")))}__name(SubmissionSectionUploadComponent_ng_container_1_Template,"SubmissionSectionUploadComponent_ng_container_1_Template");const section_upload_component_c0=__name(function(a0){return{collectionName:a0}},"section_upload_component_c0");function SubmissionSectionUploadComponent_ng_container_2_div_1_ng_container_3_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._uU(1),core.ALo(2,"translate"),core.BQk()),2&rf){const ctx_r4=core.oxw(3);core.xp6(1),core.hij(" ",core.xi3(2,1,"submission.sections.upload.header.policy.default.nolist",core.VKq(4,section_upload_component_c0,ctx_r4.collectionName))," ")}}function SubmissionSectionUploadComponent_ng_container_2_div_1_ng_container_4_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._uU(1),core.ALo(2,"translate"),core.BQk()),2&rf){const ctx_r5=core.oxw(3);core.xp6(1),core.hij(" ",core.xi3(2,1,"submission.sections.upload.header.policy.default.withlist",core.VKq(4,section_upload_component_c0,ctx_r5.collectionName))," ")}}function SubmissionSectionUploadComponent_ng_container_2_div_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",2)(1,"div",8)(2,"ds-alert",9),core.YNc(3,SubmissionSectionUploadComponent_ng_container_2_div_1_ng_container_3_Template,3,6,"ng-container",1),core.YNc(4,SubmissionSectionUploadComponent_ng_container_2_div_1_ng_container_4_Template,3,6,"ng-container",1),core._UZ(5,"span",10)(6,"ds-submission-section-upload-access-conditions",11),core.qZA()()()),2&rf){const ctx_r2=core.oxw(2);core.xp6(2),core.Q6J("type",ctx_r2.AlertTypeEnum.Warning),core.xp6(1),core.Q6J("ngIf",1===ctx_r2.collectionPolicyType),core.xp6(1),core.Q6J("ngIf",2===ctx_r2.collectionPolicyType),core.xp6(2),core.Q6J("accessConditions",ctx_r2.collectionDefaultAccessConditions)}}function SubmissionSectionUploadComponent_ng_container_2_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"ds-submission-upload-section-file",12),core.ALo(2,"async"),core.TgZ(3,"div",2)(4,"div",3),core._UZ(5,"hr"),core.qZA()(),core.BQk()),2&rf){const fileEntry_r6=ctx.$implicit,ctx_r3=core.oxw(2);core.xp6(1),core.Q6J("availableAccessConditionOptions",ctx_r3.availableAccessConditionOptions)("collectionId",ctx_r3.collectionId)("collectionPolicyType",ctx_r3.collectionPolicyType)("configMetadataForm",core.lcZ(2,9,ctx_r3.configMetadataForm$))("fileId",ctx_r3.fileIndexes[ctx_r3.fileList.indexOf(fileEntry_r6)])("fileIndex",ctx_r3.fileList.indexOf(fileEntry_r6))("fileName",ctx_r3.fileNames[ctx_r3.fileList.indexOf(fileEntry_r6)])("sectionId",ctx_r3.sectionData.id)("submissionId",ctx_r3.submissionId)}}function SubmissionSectionUploadComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,SubmissionSectionUploadComponent_ng_container_2_div_1_Template,7,4,"div",6),core.YNc(2,SubmissionSectionUploadComponent_ng_container_2_ng_container_2_Template,6,11,"ng-container",7),core.BQk()),2&rf){const ctx_r1=core.oxw();core.xp6(1),core.Q6J("ngIf",ctx_r1.collectionDefaultAccessConditions.length>0),core.xp6(1),core.Q6J("ngForOf",ctx_r1.fileList)}}__name(SubmissionSectionUploadComponent_ng_container_2_div_1_ng_container_3_Template,"SubmissionSectionUploadComponent_ng_container_2_div_1_ng_container_3_Template"),__name(SubmissionSectionUploadComponent_ng_container_2_div_1_ng_container_4_Template,"SubmissionSectionUploadComponent_ng_container_2_div_1_ng_container_4_Template"),__name(SubmissionSectionUploadComponent_ng_container_2_div_1_Template,"SubmissionSectionUploadComponent_ng_container_2_div_1_Template"),__name(SubmissionSectionUploadComponent_ng_container_2_ng_container_2_Template,"SubmissionSectionUploadComponent_ng_container_2_ng_container_2_Template"),__name(SubmissionSectionUploadComponent_ng_container_2_Template,"SubmissionSectionUploadComponent_ng_container_2_Template");let SubmissionSectionUploadComponent=__name(class extends SectionModelComponent{constructor(bitstreamService,changeDetectorRef,collectionDataService,groupService,resourcePolicyService,sectionService,submissionService,uploadsConfigService,injectedSectionData,injectedSubmissionId){super(void 0,injectedSectionData,injectedSubmissionId),this.bitstreamService=bitstreamService,this.changeDetectorRef=changeDetectorRef,this.collectionDataService=collectionDataService,this.groupService=groupService,this.resourcePolicyService=resourcePolicyService,this.sectionService=sectionService,this.submissionService=submissionService,this.uploadsConfigService=uploadsConfigService,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.AlertTypeEnum=aletr_type.N,this.fileIndexes=[],this.fileList=[],this.fileNames=[],this.collectionDefaultAccessConditions=[],this.required$=new cjs.BehaviorSubject(!0),this.subs=[]}onSectionInit(){const config$=this.uploadsConfigService.findByHref(this.sectionData.config,!0,!1,(0,follow_link_config_model.l)("metadata")).pipe((0,shared_operators.xw)(),(0,operators.UI)(config=>config.payload));this.configMetadataForm$=config$.pipe((0,operators.wt)(config=>config.metadata.pipe((0,shared_operators.xw)(),(0,operators.UI)(remoteData=>remoteData.payload)))),this.subs.push(this.submissionService.getSubmissionObject(this.submissionId).pipe((0,operators.hX)(submissionObject=>(0,empty_util.pT)(submissionObject)&&!submissionObject.isLoading),(0,operators.hX)(submissionObject=>(0,empty_util.o8)(this.collectionId)||this.collectionId!==submissionObject.collection),(0,operators.bw)(submissionObject=>this.collectionId=submissionObject.collection),(0,operators.zg)(submissionObject=>this.collectionDataService.findById(submissionObject.collection)),(0,operators.hX)(rd=>(0,empty_util.pT)(rd.payload)),(0,operators.bw)(collectionRemoteData=>this.collectionName=collectionRemoteData.payload.name),(0,operators.zg)(()=>config$)).subscribe(config=>{this.required$.next(config.required),this.availableAccessConditionOptions=(0,empty_util.UE)(config.accessConditionOptions)?config.accessConditionOptions:[],this.collectionPolicyType=this.availableAccessConditionOptions.length>0?2:1,this.changeDetectorRef.detectChanges()}),(0,cjs.combineLatest)(this.configMetadataForm$,this.bitstreamService.getUploadedFileList(this.submissionId,this.sectionData.id)).pipe((0,operators.hX)(([configMetadataForm,fileList])=>(0,empty_util.UE)(configMetadataForm)&&(0,empty_util.pT)(fileList)),(0,operators.xb)()).subscribe(([configMetadataForm,fileList])=>{this.fileList=[],this.fileIndexes=[],this.fileNames=[],this.changeDetectorRef.detectChanges(),(0,empty_util.pT)(fileList)&&fileList.length>0&&fileList.forEach(file=>{this.fileList.push(file),this.fileIndexes.push(file.uuid),this.fileNames.push(this.getFileName(configMetadataForm,file))}),this.changeDetectorRef.detectChanges()}))}getFileName(configMetadataForm,fileData){const metadataName=configMetadataForm.rows[0].fields[0].selectableMetadata[0].metadata;let title;return title=(0,empty_util.UE)(fileData.metadata)&&(0,empty_util.UE)(fileData.metadata[metadataName])?fileData.metadata[metadataName][0].display:fileData.uuid,title}getSectionStatus(){return(0,cjs.combineLatest)(this.required$,this.bitstreamService.getUploadedFileList(this.submissionId,this.sectionData.id),(required,fileList)=>!required||(0,empty_util.pT)(fileList)&&fileList.length>0)}onSectionDestroy(){this.subs.filter(subscription=>(0,empty_util.Uh)(subscription)).forEach(subscription=>subscription.unsubscribe())}},"SubmissionSectionUploadComponent");SubmissionSectionUploadComponent.\u0275fac=__name(function(t){return new(t||SubmissionSectionUploadComponent)(core.Y36(SectionUploadService),core.Y36(core.sBO),core.Y36(collection_data_service.W),core.Y36(group_data_service.O),core.Y36(resource_policy_data_service.I),core.Y36(sections_service.J),core.Y36(submission_service.b),core.Y36(SubmissionUploadsConfigDataService),core.Y36("sectionDataProvider"),core.Y36("submissionIdProvider"))},"SubmissionSectionUploadComponent_Factory"),SubmissionSectionUploadComponent.\u0275cmp=core.Xpm({type:SubmissionSectionUploadComponent,selectors:[["ds-submission-section-upload"]],features:[core.qOj],decls:3,vars:5,consts:[[3,"content","dismissible","type"],[4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"text-center"],[1,"text-muted"],["class","row",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-sm-12"],[3,"type"],[1,"clearfix"],[3,"accessConditions"],[3,"availableAccessConditionOptions","collectionId","collectionPolicyType","configMetadataForm","fileId","fileIndex","fileName","sectionId","submissionId"]],template:__name(function(rf,ctx){1&rf&&(core._UZ(0,"ds-alert",0),core.YNc(1,SubmissionSectionUploadComponent_ng_container_1_Template,7,3,"ng-container",1),core.YNc(2,SubmissionSectionUploadComponent_ng_container_2_Template,3,2,"ng-container",1)),2&rf&&(core.Q6J("content","submission.sections.upload.info")("dismissible",!0)("type",ctx.AlertTypeEnum.Info),core.xp6(1),core.Q6J("ngIf",0==ctx.fileList.length),core.xp6(1),core.Q6J("ngIf",ctx.fileList.length>0))},"SubmissionSectionUploadComponent_Template"),styles:[""]}),SubmissionSectionUploadComponent=(0,tslib_es6.__decorate)([(0,sections_decorator.E)(sections_type.i.Upload),(0,tslib_es6.__metadata)("design:paramtypes",[SectionUploadService,core.sBO,collection_data_service.W,group_data_service.O,resource_policy_data_service.I,sections_service.J,submission_service.b,SubmissionUploadsConfigDataService,Object,String])],SubmissionSectionUploadComponent);var submission_upload_files_component=__webpack_require__(79560),json_patch_operations_builder=__webpack_require__(26704);const SECTION_LICENSE_FORM_LAYOUT={granted:{element:{container:"custom-control custom-checkbox pl-1",control:"custom-control-input",label:"custom-control-label pt-1"}}},SECTION_LICENSE_FORM_MODEL=[{id:"granted",label:"submission.sections.license.granted-label",required:!0,value:!1,validators:{required:null},errorMessages:{required:"submission.sections.license.required",notgranted:"submission.sections.license.notgranted"},type:"CHECKBOX"}],section_license_component_c0=["formRef"];function SubmissionSectionLicenseComponent_ds_form_4_Template(rf,ctx){if(1&rf){const _r3=core.EpF();core.TgZ(0,"ds-form",2,3),core.NdJ("dfChange",__name(function($event){return core.CHM(_r3),core.oxw().onChange($event)},"SubmissionSectionLicenseComponent_ds_form_4_Template_ds_form_dfChange_0_listener")),core.qZA()}if(2&rf){const ctx_r0=core.oxw();core.Q6J("formId",ctx_r0.formId)("formModel",ctx_r0.formModel)("formLayout",ctx_r0.formLayout)("displaySubmit",ctx_r0.displaySubmit)("displayCancel",!1)}}__name(SubmissionSectionLicenseComponent_ds_form_4_Template,"SubmissionSectionLicenseComponent_ds_form_4_Template");let SubmissionSectionLicenseComponent=__name(class extends SectionModelComponent{constructor(changeDetectorRef,collectionDataService,formBuilderService,formOperationsService,formService,operationsBuilder,sectionService,submissionService,translateService,injectedCollectionId,injectedSectionData,injectedSubmissionId){super(injectedCollectionId,injectedSectionData,injectedSubmissionId),this.changeDetectorRef=changeDetectorRef,this.collectionDataService=collectionDataService,this.formBuilderService=formBuilderService,this.formOperationsService=formOperationsService,this.formService=formService,this.operationsBuilder=operationsBuilder,this.sectionService=sectionService,this.submissionService=submissionService,this.translateService=translateService,this.injectedCollectionId=injectedCollectionId,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.formLayout=SECTION_LICENSE_FORM_LAYOUT,this.displaySubmit=!1,this.subs=[]}onSectionInit(){this.pathCombiner=new json_patch_operation_path_combiner.K("sections",this.sectionData.id),this.formId=this.formService.getUniqueId(this.sectionData.id),this.formModel=this.formBuilderService.fromJSON(SECTION_LICENSE_FORM_MODEL);const model=this.formBuilderService.findById("granted",this.formModel);model.label=this.translateService.instant(model.label),model.value=this.sectionData.data.granted,this.licenseText$=this.collectionDataService.findById(this.collectionId,!0,!0,(0,follow_link_config_model.l)("license")).pipe((0,operators.hX)(collectionData=>(0,empty_util.pT)(collectionData.payload)),(0,operators.zg)(collectionData=>collectionData.payload.license),(0,operators.sE)(licenseData=>(0,empty_util.pT)(licenseData.payload)),(0,operators.UI)(licenseData=>licenseData.payload.text),(0,operators.O4)("")),this.subs.push(this.sectionService.isSectionReadOnly(this.submissionId,this.sectionData.id,this.submissionService.getSubmissionScope()).pipe((0,operators.qn)(1),(0,operators.hX)(isReadOnly=>isReadOnly)).subscribe(()=>{model.disabled=!0}),this.sectionService.getSectionErrors(this.submissionId,this.sectionData.id).pipe((0,operators.hX)(errors=>(0,empty_util.UE)(errors)),(0,operators.xb)()).subscribe(errors=>{const newErrors=errors.map(error=>"/sections/license"===error.path?model.checked?null:Object.assign({},error,{path:"/sections/license/granted"}):error).filter(error=>(0,empty_util.K0)(error));(0,empty_util.UE)(newErrors)?(this.sectionService.checkSectionErrors(this.submissionId,this.sectionData.id,this.formId,newErrors),this.sectionData.errors=errors):this.sectionService.dispatchRemoveSectionErrors(this.submissionId,this.sectionData.id),this.changeDetectorRef.detectChanges()}))}getSectionStatus(){const model=this.formBuilderService.findById("granted",this.formModel);return model.valueChanges.pipe((0,operators.UI)(value=>!0===value),(0,operators.O4)(model.value))}onChange(event){const path=this.formOperationsService.getFieldPathSegmentedFromChangeEvent(event),value=this.formOperationsService.getFieldValueFromChangeEvent(event);value?(this.operationsBuilder.add(this.pathCombiner.getPath(path),value.value.toString(),!1,!0),this.sectionService.dispatchRemoveSectionErrors(this.submissionId,this.sectionData.id)):this.operationsBuilder.remove(this.pathCombiner.getPath(path))}onSectionDestroy(){this.subs.filter(subscription=>(0,empty_util.Uh)(subscription)).forEach(subscription=>subscription.unsubscribe())}},"SubmissionSectionLicenseComponent");SubmissionSectionLicenseComponent.\u0275fac=__name(function(t){return new(t||SubmissionSectionLicenseComponent)(core.Y36(core.sBO),core.Y36(collection_data_service.W),core.Y36(form_builder_service.c),core.Y36(section_form_operations_service.m),core.Y36(form_service.o),core.Y36(json_patch_operations_builder.w),core.Y36(sections_service.J),core.Y36(submission_service.b),core.Y36(ngx_translate_core.sK),core.Y36("collectionIdProvider"),core.Y36("sectionDataProvider"),core.Y36("submissionIdProvider"))},"SubmissionSectionLicenseComponent_Factory"),SubmissionSectionLicenseComponent.\u0275cmp=core.Xpm({type:SubmissionSectionLicenseComponent,selectors:[["ds-submission-section-license"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(section_license_component_c0,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.formRef=_t.first)}},"SubmissionSectionLicenseComponent_Query"),features:[core.qOj],decls:5,vars:4,consts:[[1,"mb-5",3,"innerHTML"],[3,"formId","formModel","formLayout","displaySubmit","displayCancel","dfChange",4,"ngIf"],[3,"formId","formModel","formLayout","displaySubmit","displayCancel","dfChange"],["formRef","formComponent"]],template:__name(function(rf,ctx){1&rf&&(core._UZ(0,"span",0),core.ALo(1,"async"),core._UZ(2,"br")(3,"br"),core.YNc(4,SubmissionSectionLicenseComponent_ds_form_4_Template,2,5,"ds-form",1)),2&rf&&(core.Q6J("innerHTML",core.lcZ(1,2,ctx.licenseText$),core.oJD),core.xp6(4),core.Q6J("ngIf",ctx.formModel))},"SubmissionSectionLicenseComponent_Template"),directives:[common.O5,form_component.U],pipes:[common.Ov],styles:[""]}),SubmissionSectionLicenseComponent=(0,tslib_es6.__decorate)([(0,sections_decorator.E)(sections_type.i.License),(0,tslib_es6.__metadata)("design:paramtypes",[core.sBO,collection_data_service.W,form_builder_service.c,section_form_operations_service.m,form_service.o,json_patch_operations_builder.w,sections_service.J,submission_service.b,ngx_translate_core.sK,String,Object,String])],SubmissionSectionLicenseComponent);var submission_edit_component=__webpack_require__(3751),fesm2015_core=(__webpack_require__(23938),__webpack_require__(65737));const BITSTREAM_METADATA_FORM_GROUP_CONFIG={id:"metadata",group:[]},BITSTREAM_METADATA_FORM_GROUP_LAYOUT={element:{container:"form-group",label:"col-form-label"},grid:{label:"col-sm-3"}},BITSTREAM_ACCESS_CONDITION_GROUP_CONFIG={id:"accessConditionGroup",group:[]},BITSTREAM_ACCESS_CONDITION_GROUP_LAYOUT={element:{host:"form-group access-condition-group col",container:"pl-1 pr-1",control:"form-row "}},BITSTREAM_ACCESS_CONDITIONS_FORM_ARRAY_CONFIG={id:"accessConditions",groupFactory:null},BITSTREAM_ACCESS_CONDITIONS_FORM_ARRAY_LAYOUT={grid:{group:"form-row pt-4"}},BITSTREAM_FORM_ACCESS_CONDITION_TYPE_CONFIG={id:"name",label:"submission.sections.upload.form.access-condition-label",hint:"submission.sections.upload.form.access-condition-hint",options:[]},BITSTREAM_FORM_ACCESS_CONDITION_TYPE_LAYOUT={element:{host:"col-12",label:"col-form-label name-label"}},BITSTREAM_FORM_ACCESS_CONDITION_START_DATE_CONFIG={id:"startDate",label:"submission.sections.upload.form.from-label",hint:"submission.sections.upload.form.from-hint",placeholder:"submission.sections.upload.form.from-placeholder",inline:!1,toggleIcon:"far fa-calendar-alt",relations:[{match:fesm2015_core.O6Y,operator:fesm2015_core.F8e,when:[]}],required:!0,validators:{required:null},errorMessages:{required:"submission.sections.upload.form.date-required-from"}},BITSTREAM_FORM_ACCESS_CONDITION_START_DATE_LAYOUT={element:{label:"col-form-label"},grid:{host:"col-6"}},BITSTREAM_FORM_ACCESS_CONDITION_END_DATE_CONFIG={id:"endDate",label:"submission.sections.upload.form.until-label",hint:"submission.sections.upload.form.until-hint",placeholder:"submission.sections.upload.form.until-placeholder",inline:!1,toggleIcon:"far fa-calendar-alt",relations:[{match:fesm2015_core.O6Y,operator:fesm2015_core.F8e,when:[]}],required:!0,validators:{required:null},errorMessages:{required:"submission.sections.upload.form.date-required-until"}},BITSTREAM_FORM_ACCESS_CONDITION_END_DATE_LAYOUT={element:{label:"col-form-label"},grid:{host:"col-6"}};var date_util=__webpack_require__(96099),ng_bootstrap=__webpack_require__(63742);const section_upload_file_edit_component_c0=["formRef"];function SubmissionSectionUploadFileEditComponent_ds_form_9_Template(rf,ctx){if(1&rf){const _r3=core.EpF();core.TgZ(0,"ds-form",6,7),core.NdJ("submitForm",__name(function(){return core.CHM(_r3),core.oxw().onSubmit()},"SubmissionSectionUploadFileEditComponent_ds_form_9_Template_ds_form_submitForm_0_listener"))("cancel",__name(function(){return core.CHM(_r3),core.oxw().onModalClose()},"SubmissionSectionUploadFileEditComponent_ds_form_9_Template_ds_form_cancel_0_listener"))("dfChange",__name(function($event){return core.CHM(_r3),core.oxw().onChange($event)},"SubmissionSectionUploadFileEditComponent_ds_form_9_Template_ds_form_dfChange_0_listener")),core.qZA()}if(2&rf){const ctx_r0=core.oxw();core.Q6J("formId",ctx_r0.formId)("formModel",ctx_r0.formModel)("displaySubmit",!ctx_r0.isSaving)("displayCancel",!ctx_r0.isSaving)}}__name(SubmissionSectionUploadFileEditComponent_ds_form_9_Template,"SubmissionSectionUploadFileEditComponent_ds_form_9_Template");class SubmissionSectionUploadFileEditComponent{constructor(activeModal,cdr,formBuilderService,formService,submissionService,operationsBuilder,operationsService,uploadService){this.activeModal=activeModal,this.cdr=cdr,this.formBuilderService=formBuilderService,this.formService=formService,this.submissionService=submissionService,this.operationsBuilder=operationsBuilder,this.operationsService=operationsService,this.uploadService=uploadService,this.formMetadata=[],this.isSaving=!1,this.subscriptions=[]}initModelData(formModel){this.fileData.accessConditions.forEach((accessCondition,index)=>{Array.of("name","startDate","endDate").filter(key=>accessCondition.hasOwnProperty(key)&&(0,empty_util.UE)(accessCondition[key])).forEach(key=>{const metadataModel=this.formBuilderService.findById(key,formModel,index);if(metadataModel)if(metadataModel.type===fesm2015_core.VId){const date=new Date(accessCondition[key]);metadataModel.value={year:date.getUTCFullYear(),month:date.getUTCMonth()+1,day:date.getUTCDate()}}else metadataModel.value=accessCondition[key]})})}onChange(event){"name"===event.model.id&&this.setOptions(event.model,event.control)}onModalClose(){this.activeModal.dismiss()}onSubmit(){this.isSaving=!0,this.saveBitstreamData()}setOptions(model,control){let accessCondition=null;if(this.availableAccessConditionOptions.filter(element=>element.name===control.value).forEach(element=>accessCondition=element),(0,empty_util.UE)(accessCondition)){const startDateControl=control.parent.get("startDate"),endDateControl=control.parent.get("endDate");null==startDateControl||startDateControl.markAsUntouched(),null==endDateControl||endDateControl.markAsUntouched(),null==startDateControl||startDateControl.setValue(null),control.parent.markAsDirty(),null==endDateControl||endDateControl.setValue(null)}}ngOnInit(){this.fileData&&this.formId&&(this.formModel=this.buildFileEditForm(),this.cdr.detectChanges())}ngOnDestroy(){this.unsubscribeAll()}retrieveValueFromField(field){const temp=Array.isArray(field)?field[0]:field;return temp?temp.value:void 0}buildFileEditForm(){const configDescr=Object.assign({},this.configMetadataForm.rows[0].fields[0]);configDescr.repeatable=!1;const configForm=Object.assign({},this.configMetadataForm,{fields:Object.assign([],this.configMetadataForm.rows[0].fields[0],[this.configMetadataForm.rows[0].fields[0],configDescr])}),formModel=[],metadataGroupModelConfig=Object.assign({},BITSTREAM_METADATA_FORM_GROUP_CONFIG);metadataGroupModelConfig.group=this.formBuilderService.modelFromConfiguration(this.submissionId,configForm,this.collectionId,this.fileData.metadata,this.submissionService.getSubmissionScope()),formModel.push(new fesm2015_core.S_O(metadataGroupModelConfig,BITSTREAM_METADATA_FORM_GROUP_LAYOUT));const accessConditionTypeModelConfig=Object.assign({},BITSTREAM_FORM_ACCESS_CONDITION_TYPE_CONFIG),accessConditionsArrayConfig=Object.assign({},BITSTREAM_ACCESS_CONDITIONS_FORM_ARRAY_CONFIG),accessConditionTypeOptions=[];if(2===this.collectionPolicyType){for(const accessCondition of this.availableAccessConditionOptions)accessConditionTypeOptions.push({label:accessCondition.name,value:accessCondition.name});accessConditionTypeModelConfig.options=accessConditionTypeOptions;const startDateCondition=[],endDateCondition=[];let maxStartDate,maxEndDate;this.availableAccessConditionOptions.forEach(condition=>{if(condition.hasStartDate&&(startDateCondition.push({id:"name",value:condition.name}),condition.maxStartDate)){const min=new Date(condition.maxStartDate);maxStartDate={year:min.getUTCFullYear(),month:min.getUTCMonth()+1,day:min.getUTCDate()}}if(condition.hasEndDate&&(endDateCondition.push({id:"name",value:condition.name}),condition.maxEndDate)){const max=new Date(condition.maxEndDate);maxEndDate={year:max.getUTCFullYear(),month:max.getUTCMonth()+1,day:max.getUTCDate()}}});const confStart={relations:[{match:fesm2015_core.O6Y,operator:fesm2015_core.F8e,when:startDateCondition}]},confEnd={relations:[{match:fesm2015_core.O6Y,operator:fesm2015_core.F8e,when:endDateCondition}]},hasStartDate=startDateCondition.length>0,hasEndDate=endDateCondition.length>0;accessConditionsArrayConfig.groupFactory=()=>{const type=new fesm2015_core.nMt(accessConditionTypeModelConfig,BITSTREAM_FORM_ACCESS_CONDITION_TYPE_LAYOUT),startDateConfig=Object.assign({},BITSTREAM_FORM_ACCESS_CONDITION_START_DATE_CONFIG,confStart);maxStartDate&&(startDateConfig.max=maxStartDate);const endDateConfig=Object.assign({},BITSTREAM_FORM_ACCESS_CONDITION_END_DATE_CONFIG,confEnd);maxEndDate&&(endDateConfig.max=maxEndDate);const startDate=new fesm2015_core.oqv(startDateConfig,BITSTREAM_FORM_ACCESS_CONDITION_START_DATE_LAYOUT),endDate=new fesm2015_core.oqv(endDateConfig,BITSTREAM_FORM_ACCESS_CONDITION_END_DATE_LAYOUT),accessConditionGroupConfig=Object.assign({},BITSTREAM_ACCESS_CONDITION_GROUP_CONFIG);return accessConditionGroupConfig.group=[type],hasStartDate&&accessConditionGroupConfig.group.push(startDate),hasEndDate&&accessConditionGroupConfig.group.push(endDate),[new fesm2015_core.S_O(accessConditionGroupConfig,BITSTREAM_ACCESS_CONDITION_GROUP_LAYOUT)]},accessConditionsArrayConfig.initialCount=(0,empty_util.UE)(this.fileData.accessConditions)?this.fileData.accessConditions.length:1,formModel.push(new fesm2015_core.RRz(accessConditionsArrayConfig,BITSTREAM_ACCESS_CONDITIONS_FORM_ARRAY_LAYOUT))}return this.initModelData(formModel),formModel}saveBitstreamData(){this.formService.validateAllFormFields(this.formRef.formGroup);const saveBitstreamDataSubscription=this.formService.isValid(this.formId).pipe((0,operators.qn)(1),(0,operators.hX)(isValid=>isValid),(0,operators.zg)(()=>this.formService.getFormData(this.formId)),(0,operators.qn)(1),(0,operators.zg)(formData=>{Object.keys(formData.metadata).filter(key=>(0,empty_util.UE)(formData.metadata[key])).forEach(key=>{const path=`metadata/${key.replace(/_/g,".")}`;this.operationsBuilder.add(this.pathCombiner.getPath(path),formData.metadata[key],!0)}),Object.keys(this.fileData.metadata).filter(key=>(0,empty_util.UE)(this.fileData.metadata[key])).filter(key=>(0,empty_util.xI)(formData.metadata[key])).filter(key=>this.formMetadata.includes(key)).forEach(key=>{const path=`metadata/${key.replace(/_/g,".")}`;this.operationsBuilder.remove(this.pathCombiner.getPath(path))});const accessConditionsToSave=[];return formData.accessConditions.map(accessConditions=>accessConditions.accessConditionGroup).filter(accessCondition=>(0,empty_util.UE)(accessCondition)).forEach(accessCondition=>{let accessConditionOpt;if(this.availableAccessConditionOptions.filter(element=>(0,empty_util.K0)(accessCondition.name)&&element.name===accessCondition.name[0].value).forEach(element=>accessConditionOpt=element),accessConditionOpt){const currentAccessCondition=Object.assign({},accessCondition);if(currentAccessCondition.name=this.retrieveValueFromField(accessCondition.name),accessConditionOpt.hasStartDate){if(accessCondition.startDate){const startDate=this.retrieveValueFromField(accessCondition.startDate);currentAccessCondition.startDate=(0,date_util.iV)(startDate)}}else delete currentAccessCondition.startDate;if(accessConditionOpt.hasEndDate){if(accessCondition.endDate){const endDate=this.retrieveValueFromField(accessCondition.endDate);currentAccessCondition.endDate=(0,date_util.iV)(endDate)}}else delete currentAccessCondition.endDate;accessConditionsToSave.push(currentAccessCondition)}}),(0,empty_util.UE)(accessConditionsToSave)&&this.operationsBuilder.add(this.pathCombiner.getPath("accessConditions"),accessConditionsToSave,!0),this.operationsService.jsonPatchByResourceID(this.submissionService.getSubmissionObjectLinkName(),this.submissionId,this.pathCombiner.rootElement,this.pathCombiner.subRootElement)})).subscribe(result=>{if(result[0].sections[this.sectionId]){const uploadSection=result[0].sections[this.sectionId];Object.keys(uploadSection.files).filter(key=>uploadSection.files[key].uuid===this.fileId).forEach(key=>this.uploadService.updateFileData(this.submissionId,this.sectionId,this.fileId,uploadSection.files[key]))}this.isSaving=!1,this.activeModal.close()});this.subscriptions.push(saveBitstreamDataSubscription)}unsubscribeAll(){this.subscriptions.filter(sub=>(0,empty_util.Uh)(sub)).forEach(sub=>sub.unsubscribe())}}__name(SubmissionSectionUploadFileEditComponent,"SubmissionSectionUploadFileEditComponent"),SubmissionSectionUploadFileEditComponent.\u0275fac=__name(function(t){return new(t||SubmissionSectionUploadFileEditComponent)(core.Y36(ng_bootstrap.Kz),core.Y36(core.sBO),core.Y36(form_builder_service.c),core.Y36(form_service.o),core.Y36(submission_service.b),core.Y36(json_patch_operations_builder.w),core.Y36(submission_json_patch_operations_service.E),core.Y36(SectionUploadService))},"SubmissionSectionUploadFileEditComponent_Factory"),SubmissionSectionUploadFileEditComponent.\u0275cmp=core.Xpm({type:SubmissionSectionUploadFileEditComponent,selectors:[["ds-submission-section-upload-file-edit"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(section_upload_file_edit_component_c0,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.formRef=_t.first)}},"SubmissionSectionUploadFileEditComponent_Query"),decls:10,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"disabled","click"],["aria-hidden","true"],[1,"modal-body"],[3,"formId","formModel","displaySubmit","displayCancel","submitForm","cancel","dfChange",4,"ngIf"],[3,"formId","formModel","displaySubmit","displayCancel","submitForm","cancel","dfChange"],["formRef","formComponent"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div")(1,"div",0)(2,"h4",1),core._uU(3),core.ALo(4,"translate"),core.qZA(),core.TgZ(5,"button",2),core.NdJ("click",__name(function(){return ctx.onModalClose()},"SubmissionSectionUploadFileEditComponent_Template_button_click_5_listener")),core.TgZ(6,"span",3),core._uU(7,"\xd7"),core.qZA()()(),core.TgZ(8,"div",4),core.YNc(9,SubmissionSectionUploadFileEditComponent_ds_form_9_Template,2,4,"ds-form",5),core.qZA()()),2&rf&&(core.xp6(3),core.Oqu(core.lcZ(4,3,"submission.sections.upload.edit.title")),core.xp6(2),core.Q6J("disabled",ctx.isSaving),core.xp6(4),core.Q6J("ngIf",ctx.formModel))},"SubmissionSectionUploadFileEditComponent_Template"),directives:[common.O5,form_component.U],pipes:[ngx_translate_core.X$],styles:[".access-condition-group{position:relative;top:-2.3rem;margin-bottom:-2.3rem}"]});var bitstream_model=__webpack_require__(87844),thumbnail_component=__webpack_require__(7553),file_download_link_component=__webpack_require__(91689),metadata_utils=__webpack_require__(59874);function SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span",3),core._uU(1),core.qZA()),2&rf){const accessCondition_r1=core.oxw().$implicit;core.xp6(1),core.lnq(" ",accessCondition_r1.name," ",accessCondition_r1.startDate," ",accessCondition_r1.endDate," ")}}function SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_2_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span",3),core._uU(1),core.qZA()),2&rf){const accessCondition_r1=core.oxw().$implicit;core.xp6(1),core.AsE("",accessCondition_r1.name," from ",accessCondition_r1.endDate,"")}}function SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_3_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span",4),core._uU(1),core.qZA()),2&rf){const accessCondition_r1=core.oxw().$implicit;core.xp6(1),core.AsE("",accessCondition_r1.name," until ",accessCondition_r1.startDate,"")}}function SubmissionSectionUploadAccessConditionsComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_1_Template,2,3,"span",1),core.YNc(2,SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_2_Template,2,2,"span",1),core.YNc(3,SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_3_Template,2,2,"span",2),core._UZ(4,"br"),core.BQk()),2&rf){const accessCondition_r1=ctx.$implicit;core.xp6(1),core.Q6J("ngIf","DEFAULT_BITSTREAM_READ"==accessCondition_r1.action),core.xp6(1),core.Q6J("ngIf","lease"==accessCondition_r1.name),core.xp6(1),core.Q6J("ngIf","embargo"==accessCondition_r1.name)}}__name(SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_1_Template,"SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_1_Template"),__name(SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_2_Template,"SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_2_Template"),__name(SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_3_Template,"SubmissionSectionUploadAccessConditionsComponent_ng_container_0_span_3_Template"),__name(SubmissionSectionUploadAccessConditionsComponent_ng_container_0_Template,"SubmissionSectionUploadAccessConditionsComponent_ng_container_0_Template");class SubmissionSectionUploadAccessConditionsComponent{constructor(groupService){this.groupService=groupService,this.accessConditionsList=[]}ngOnInit(){this.accessConditions.forEach(accessCondition=>{(0,empty_util.xb)(accessCondition.name)?this.groupService.findByHref(accessCondition._links.group.href).pipe((0,operators.sE)(rd=>!rd.isResponsePending&&rd.hasSucceeded)).subscribe(rd=>{const group=rd.payload,accessConditionEntry=Object.assign({},accessCondition);accessConditionEntry.name=group.name,this.accessConditionsList.push(accessConditionEntry)}):this.accessConditionsList.push(accessCondition)})}}__name(SubmissionSectionUploadAccessConditionsComponent,"SubmissionSectionUploadAccessConditionsComponent"),SubmissionSectionUploadAccessConditionsComponent.\u0275fac=__name(function(t){return new(t||SubmissionSectionUploadAccessConditionsComponent)(core.Y36(group_data_service.O))},"SubmissionSectionUploadAccessConditionsComponent_Factory"),SubmissionSectionUploadAccessConditionsComponent.\u0275cmp=core.Xpm({type:SubmissionSectionUploadAccessConditionsComponent,selectors:[["ds-submission-section-upload-access-conditions"]],inputs:{accessConditions:"accessConditions"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["class","badge badge-primary mt-3 mr-2",4,"ngIf"],["class","badge badge-dark mt-3 mr-2",4,"ngIf"],[1,"badge","badge-primary","mt-3","mr-2"],[1,"badge","badge-dark","mt-3","mr-2"]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,SubmissionSectionUploadAccessConditionsComponent_ng_container_0_Template,5,3,"ng-container",0),2&rf&&core.Q6J("ngForOf",ctx.accessConditionsList)},"SubmissionSectionUploadAccessConditionsComponent_Template"),directives:[common.sg,common.O5],encapsulation:2});var truncate_pipe=__webpack_require__(83073);function SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.TgZ(1,"h5"),core._uU(2),core.qZA(),core.BQk()),2&rf){const entry_r3=core.oxw().$implicit;core.xp6(2),core.hij(" ",entry_r3.value," ")}}function SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_ng_container_2_h5_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"h5")(1,"span",4),core._uU(2),core.ALo(3,"translate"),core.qZA()()),2&rf){const ctx_r7=core.oxw(4);core.xp6(2),core.AsE("",core.lcZ(3,2,"submission.sections.upload.no-entry")," ",ctx_r7.fileTitleKey,"")}}function SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_ng_container_2_h5_1_Template,4,4,"h5",0),core.BQk()),2&rf){const entry_r3=core.oxw().$implicit,ctx_r5=core.oxw(2);core.xp6(1),core.Q6J("ngIf",0===ctx_r5.metadata[ctx_r5.fileTitleKey].indexOf(entry_r3))}}function SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_ng_container_1_Template,3,1,"ng-container",0),core.YNc(2,SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_ng_container_2_Template,2,1,"ng-container",0),core._UZ(3,"span",1),core.BQk()),2&rf){const entry_r3=ctx.$implicit;core.xp6(1),core.Q6J("ngIf",""!==entry_r3.value),core.xp6(1),core.Q6J("ngIf",""===entry_r3.value)}}__name(SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_ng_container_1_Template,"SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_ng_container_1_Template"),__name(SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_ng_container_2_h5_1_Template,"SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_ng_container_2_h5_1_Template"),__name(SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_ng_container_2_Template,"SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_ng_container_2_Template"),__name(SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_Template,"SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_Template");const section_upload_file_view_component_c0=__name(function(){return["150"]},"section_upload_file_view_component_c0");function SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._uU(1),core.ALo(2,"dsTruncate"),core.BQk()),2&rf){const entry_r9=core.oxw().$implicit;core.xp6(1),core.hij(" ",core.xi3(2,1,entry_r9.value,core.DdM(4,section_upload_file_view_component_c0))," ")}}function SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_ng_container_2_span_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span",4),core._uU(1),core.ALo(2,"translate"),core.qZA()),2&rf){const ctx_r13=core.oxw(4);core.xp6(1),core.AsE("",core.lcZ(2,2,"submission.sections.upload.no-entry")," ",ctx_r13.fileDescrKey,"")}}function SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_ng_container_2_span_1_Template,3,4,"span",5),core.BQk()),2&rf){const entry_r9=core.oxw().$implicit,ctx_r11=core.oxw(2);core.xp6(1),core.Q6J("ngIf",0===ctx_r11.metadata[ctx_r11.fileDescrKey].indexOf(entry_r9))}}function SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_ng_container_1_Template,3,5,"ng-container",0),core.YNc(2,SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_ng_container_2_Template,2,1,"ng-container",0),core._UZ(3,"span",1),core.BQk()),2&rf){const entry_r9=ctx.$implicit;core.xp6(1),core.Q6J("ngIf",""!==entry_r9.value),core.xp6(1),core.Q6J("ngIf",""===entry_r9.value)}}function SubmissionSectionUploadFileViewComponent_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_1_Template,4,2,"ng-container",3),core.YNc(2,SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_Template,4,2,"ng-container",3),core.BQk()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("ngForOf",ctx_r0.getAllMetadataValue(ctx_r0.fileTitleKey)),core.xp6(1),core.Q6J("ngForOf",ctx_r0.getAllMetadataValue(ctx_r0.fileDescrKey))}}__name(SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_ng_container_1_Template,"SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_ng_container_1_Template"),__name(SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_ng_container_2_span_1_Template,"SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_ng_container_2_span_1_Template"),__name(SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_ng_container_2_Template,"SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_ng_container_2_Template"),__name(SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_Template,"SubmissionSectionUploadFileViewComponent_ng_container_1_ng_container_2_Template"),__name(SubmissionSectionUploadFileViewComponent_ng_container_1_Template,"SubmissionSectionUploadFileViewComponent_ng_container_1_Template");class SubmissionSectionUploadFileViewComponent{constructor(){this.metadata=Object.create({}),this.fileTitleKey="Title",this.fileDescrKey="Description"}ngOnInit(){(0,empty_util.UE)(this.fileData.metadata)&&(this.metadata[this.fileTitleKey]=metadata_utils.S.all(this.fileData.metadata,"dc.title"),this.metadata[this.fileDescrKey]=metadata_utils.S.all(this.fileData.metadata,"dc.description"))}getAllMetadataValue(metadataKey){return metadata_utils.S.all(this.metadata,metadataKey)}}__name(SubmissionSectionUploadFileViewComponent,"SubmissionSectionUploadFileViewComponent"),SubmissionSectionUploadFileViewComponent.\u0275fac=__name(function(t){return new(t||SubmissionSectionUploadFileViewComponent)},"SubmissionSectionUploadFileViewComponent_Factory"),SubmissionSectionUploadFileViewComponent.\u0275cmp=core.Xpm({type:SubmissionSectionUploadFileViewComponent,selectors:[["ds-submission-section-upload-file-view"]],inputs:{fileData:"fileData"},decls:4,vars:2,consts:[[4,"ngIf"],[1,"clearfix"],[3,"accessConditions"],[4,"ngFor","ngForOf"],[1,"text-muted"],["class","text-muted",4,"ngIf"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div"),core.YNc(1,SubmissionSectionUploadFileViewComponent_ng_container_1_Template,3,2,"ng-container",0),core._UZ(2,"span",1)(3,"ds-submission-section-upload-access-conditions",2),core.qZA()),2&rf&&(core.xp6(1),core.Q6J("ngIf",ctx.metadata),core.xp6(2),core.Q6J("accessConditions",ctx.fileData.accessConditions))},"SubmissionSectionUploadFileViewComponent_Template"),directives:[common.O5,common.sg,SubmissionSectionUploadAccessConditionsComponent],pipes:[ngx_translate_core.X$,truncate_pipe.W],encapsulation:2});var file_size_pipe=__webpack_require__(69748);function SubmissionSectionUploadFileComponent_ng_container_0_i_23_Template(rf,ctx){1&rf&&core._UZ(0,"i",18)}function SubmissionSectionUploadFileComponent_ng_container_0_i_25_Template(rf,ctx){1&rf&&core._UZ(0,"i",19)}function SubmissionSectionUploadFileComponent_ng_container_0_Template(rf,ctx){if(1&rf){const _r6=core.EpF();core.ynx(0),core.TgZ(1,"div",2)(2,"div",3),core._UZ(3,"ds-thumbnail",4),core.qZA(),core.TgZ(4,"div",5)(5,"div",6)(6,"h3"),core._uU(7),core.TgZ(8,"span",7),core._uU(9),core.ALo(10,"dsFileSize"),core.qZA()()(),core.TgZ(11,"div",8),core.ynx(12),core.TgZ(13,"ds-file-download-link",9),core._UZ(14,"i",10),core.qZA(),core.TgZ(15,"button",11),core.NdJ("click",__name(function($event){core.CHM(_r6);const ctx_r5=core.oxw();return $event.preventDefault(),ctx_r5.editBitstreamData()},"SubmissionSectionUploadFileComponent_ng_container_0_Template_button_click_15_listener")),core.ALo(16,"translate"),core.ALo(17,"translate"),core._UZ(18,"i",12),core.qZA(),core.TgZ(19,"button",13),core.NdJ("click",__name(function($event){core.CHM(_r6);const ctx_r7=core.oxw(),_r1=core.MAs(2);return $event.preventDefault(),ctx_r7.confirmDelete(_r1)},"SubmissionSectionUploadFileComponent_ng_container_0_Template_button_click_19_listener")),core.ALo(20,"translate"),core.ALo(21,"translate"),core.ALo(22,"async"),core.YNc(23,SubmissionSectionUploadFileComponent_ng_container_0_i_23_Template,1,0,"i",14),core.ALo(24,"async"),core.YNc(25,SubmissionSectionUploadFileComponent_ng_container_0_i_25_Template,1,0,"i",15),core.ALo(26,"async"),core.qZA(),core.BQk(),core.qZA(),core._UZ(27,"div",16)(28,"ds-submission-section-upload-file-view",17),core.qZA()(),core.BQk()}if(2&rf){const ctx_r0=core.oxw();core.xp6(3),core.Q6J("thumbnail",null==ctx_r0.fileData?null:ctx_r0.fileData.thumbnail),core.xp6(4),core.hij("",ctx_r0.fileName," "),core.xp6(2),core.hij("(",core.lcZ(10,15,null==ctx_r0.fileData?null:ctx_r0.fileData.sizeBytes),")"),core.xp6(4),core.Q6J("cssClasses","btn btn-link-focus")("isBlank",!0)("bitstream",ctx_r0.getBitstream())("enableRequestACopy",!1),core.xp6(2),core.s9C("title",core.lcZ(17,19,"submission.sections.upload.edit.title")),core.uIk("aria-label",core.lcZ(16,17,"submission.sections.upload.edit.title")),core.xp6(4),core.s9C("title",core.lcZ(21,23,"submission.sections.upload.delete.confirm.title")),core.Q6J("disabled",core.lcZ(22,25,ctx_r0.processingDelete$)),core.uIk("aria-label",core.lcZ(20,21,"submission.sections.upload.delete.confirm.title")),core.xp6(4),core.Q6J("ngIf",core.lcZ(24,27,ctx_r0.processingDelete$)),core.xp6(2),core.Q6J("ngIf",!core.lcZ(26,29,ctx_r0.processingDelete$)),core.xp6(3),core.Q6J("fileData",ctx_r0.fileData)}}function SubmissionSectionUploadFileComponent_ng_template_1_Template(rf,ctx){if(1&rf){const _r11=core.EpF();core.TgZ(0,"div",20)(1,"h4",21),core._uU(2),core.ALo(3,"translate"),core.qZA(),core.TgZ(4,"button",22),core.NdJ("click",__name(function(){return core.CHM(_r11).dismiss("cancel")},"SubmissionSectionUploadFileComponent_ng_template_1_Template_button_click_4_listener")),core.TgZ(5,"span",23),core._uU(6,"\xd7"),core.qZA()()(),core.TgZ(7,"div",24)(8,"p"),core._uU(9),core.ALo(10,"translate"),core.qZA()(),core.TgZ(11,"div",25)(12,"button",26),core.NdJ("click",__name(function(){return core.CHM(_r11).close("cancel")},"SubmissionSectionUploadFileComponent_ng_template_1_Template_button_click_12_listener")),core._uU(13),core.ALo(14,"translate"),core.qZA(),core.TgZ(15,"button",27),core.NdJ("click",__name(function(){return core.CHM(_r11).close("ok")},"SubmissionSectionUploadFileComponent_ng_template_1_Template_button_click_15_listener")),core._uU(16),core.ALo(17,"translate"),core.qZA()()}2&rf&&(core.xp6(2),core.Oqu(core.lcZ(3,4,"submission.sections.upload.delete.confirm.title")),core.xp6(7),core.Oqu(core.lcZ(10,6,"submission.sections.upload.delete.confirm.info")),core.xp6(4),core.Oqu(core.lcZ(14,8,"submission.sections.upload.delete.confirm.cancel")),core.xp6(3),core.Oqu(core.lcZ(17,10,"submission.sections.upload.delete.confirm.submit")))}__name(SubmissionSectionUploadFileComponent_ng_container_0_i_23_Template,"SubmissionSectionUploadFileComponent_ng_container_0_i_23_Template"),__name(SubmissionSectionUploadFileComponent_ng_container_0_i_25_Template,"SubmissionSectionUploadFileComponent_ng_container_0_i_25_Template"),__name(SubmissionSectionUploadFileComponent_ng_container_0_Template,"SubmissionSectionUploadFileComponent_ng_container_0_Template"),__name(SubmissionSectionUploadFileComponent_ng_template_1_Template,"SubmissionSectionUploadFileComponent_ng_template_1_Template");class SubmissionSectionUploadFileComponent{constructor(cdr,formService,halService,modalService,operationsBuilder,operationsService,submissionService,uploadService){this.cdr=cdr,this.formService=formService,this.halService=halService,this.modalService=modalService,this.operationsBuilder=operationsBuilder,this.operationsService=operationsService,this.submissionService=submissionService,this.uploadService=uploadService,this.processingDelete$=new cjs.BehaviorSubject(!1),this.subscriptions=[],this.formMetadata=[],this.readMode=!0}ngOnChanges(){this.availableAccessConditionOptions&&this.subscriptions.push(this.uploadService.getFileData(this.submissionId,this.sectionId,this.fileId).pipe((0,operators.hX)(bitstream=>(0,empty_util.pT)(bitstream))).subscribe(bitstream=>{this.fileData=bitstream}))}ngOnInit(){this.formId=this.formService.getUniqueId(this.fileId),this.pathCombiner=new json_patch_operation_path_combiner.K("sections",this.sectionId,"files",this.fileIndex),this.loadFormMetadata()}confirmDelete(content){this.modalService.open(content).result.then(result=>{"ok"===result&&(this.processingDelete$.next(!0),this.deleteFile())})}getBitstream(){return Object.assign(new bitstream_model.Z,{uuid:this.fileData.uuid})}editBitstreamData(){const activeModal=this.modalService.open(SubmissionSectionUploadFileEditComponent,{size:"xl",backdrop:"static"});activeModal.componentInstance.availableAccessConditionOptions=this.availableAccessConditionOptions,activeModal.componentInstance.collectionId=this.collectionId,activeModal.componentInstance.collectionPolicyType=this.collectionPolicyType,activeModal.componentInstance.configMetadataForm=this.configMetadataForm,activeModal.componentInstance.fileData=this.fileData,activeModal.componentInstance.fileId=this.fileId,activeModal.componentInstance.fileIndex=this.fileIndex,activeModal.componentInstance.formId=this.formId,activeModal.componentInstance.sectionId=this.sectionId,activeModal.componentInstance.formMetadata=this.formMetadata,activeModal.componentInstance.pathCombiner=this.pathCombiner,activeModal.componentInstance.submissionId=this.submissionId}ngOnDestroy(){this.unsubscribeAll()}unsubscribeAll(){this.subscriptions.filter(sub=>(0,empty_util.Uh)(sub)).forEach(sub=>sub.unsubscribe())}loadFormMetadata(){this.configMetadataForm.rows.forEach(row=>{row.fields.forEach(field=>{field.selectableMetadata.forEach(metadatum=>{this.formMetadata.push(metadatum.metadata)})})})}deleteFile(){this.operationsBuilder.remove(this.pathCombiner.getPath()),this.subscriptions.push(this.operationsService.jsonPatchByResourceID(this.submissionService.getSubmissionObjectLinkName(),this.submissionId,this.pathCombiner.rootElement,this.pathCombiner.subRootElement).subscribe(()=>{this.uploadService.removeUploadedFile(this.submissionId,this.sectionId,this.fileId),this.processingDelete$.next(!1)}))}}__name(SubmissionSectionUploadFileComponent,"SubmissionSectionUploadFileComponent"),SubmissionSectionUploadFileComponent.\u0275fac=__name(function(t){return new(t||SubmissionSectionUploadFileComponent)(core.Y36(core.sBO),core.Y36(form_service.o),core.Y36(hal_endpoint_service.q),core.Y36(ng_bootstrap.FF),core.Y36(json_patch_operations_builder.w),core.Y36(submission_json_patch_operations_service.E),core.Y36(submission_service.b),core.Y36(SectionUploadService))},"SubmissionSectionUploadFileComponent_Factory"),SubmissionSectionUploadFileComponent.\u0275cmp=core.Xpm({type:SubmissionSectionUploadFileComponent,selectors:[["ds-submission-upload-section-file"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(SubmissionSectionUploadFileEditComponent,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.fileEditComp=_t.first)}},"SubmissionSectionUploadFileComponent_Query"),inputs:{availableAccessConditionOptions:"availableAccessConditionOptions",collectionId:"collectionId",collectionPolicyType:"collectionPolicyType",configMetadataForm:"configMetadataForm",fileId:"fileId",fileIndex:"fileIndex",fileName:"fileName",sectionId:"sectionId",submissionId:"submissionId"},features:[core.TTD],decls:3,vars:1,consts:[[4,"ngIf"],["content",""],[1,"row"],[1,"col-md-2"],[3,"thumbnail"],[1,"col-md-10"],[1,"float-left","w-75"],[1,"text-muted"],[1,"float-right","w-15"],[3,"cssClasses","isBlank","bitstream","enableRequestACopy"],["aria-hidden","true",1,"fa","fa-download","fa-2x","text-normal"],[1,"btn","btn-link-focus",3,"title","click"],[1,"fa","fa-edit","fa-2x","text-normal"],[1,"btn","btn-link-focus",3,"title","disabled","click"],["class","fas fa-circle-notch fa-spin fa-2x text-danger",4,"ngIf"],["class","fa fa-trash fa-2x text-danger",4,"ngIf"],[1,"clearfix"],[3,"fileData"],[1,"fas","fa-circle-notch","fa-spin","fa-2x","text-danger"],[1,"fa","fa-trash","fa-2x","text-danger"],[1,"modal-header"],[1,"modal-title","text-danger"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,SubmissionSectionUploadFileComponent_ng_container_0_Template,29,31,"ng-container",0),core.YNc(1,SubmissionSectionUploadFileComponent_ng_template_1_Template,18,12,"ng-template",null,1,core.W1O)),2&rf&&core.Q6J("ngIf",ctx.fileData)},"SubmissionSectionUploadFileComponent_Template"),directives:[common.O5,thumbnail_component.Z,file_download_link_component.q,SubmissionSectionUploadFileViewComponent],pipes:[file_size_pipe.p,ngx_translate_core.X$,common.Ov],styles:[""]});var submission_submit_component=__webpack_require__(26098),app_reducer=__webpack_require__(39397),submission_import_external_component=__webpack_require__(51063),submission_import_external_searchbar_component=__webpack_require__(76202),submission_import_external_preview_component=__webpack_require__(54877),submission_import_external_collection_component=__webpack_require__(54475),submission_cc_license_data_service=__webpack_require__(97100),submission_cc_license_url_data_service=__webpack_require__(74299),ds_select_component=__webpack_require__(31084),var_directive=__webpack_require__(41633);function SubmissionSectionCcLicensesComponent_span_3_Template(rf,ctx){1&rf&&(core.TgZ(0,"span"),core._UZ(1,"ds-themed-loading"),core.qZA())}function SubmissionSectionCcLicensesComponent_span_4_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span"),core._uU(1),core.qZA()),2&rf){const ctx_r1=core.oxw();core.xp6(1),core.hij(" ",ctx_r1.getSelectedCcLicense().name," ")}}function SubmissionSectionCcLicensesComponent_span_5_ng_container_1_Template(rf,ctx){1&rf&&(core.ynx(0),core._uU(1),core.ALo(2,"translate"),core.BQk()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"submission.sections.ccLicense.change")," "))}function SubmissionSectionCcLicensesComponent_span_5_ng_container_2_Template(rf,ctx){1&rf&&(core.ynx(0),core._uU(1),core.ALo(2,"translate"),core.BQk()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"submission.sections.ccLicense.select")," "))}function SubmissionSectionCcLicensesComponent_span_5_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span"),core.YNc(1,SubmissionSectionCcLicensesComponent_span_5_ng_container_1_Template,3,3,"ng-container",3),core.YNc(2,SubmissionSectionCcLicensesComponent_span_5_ng_container_2_Template,3,3,"ng-container",3),core.qZA()),2&rf){const ctx_r2=core.oxw();core.xp6(1),core.Q6J("ngIf",ctx_r2.storedCcLicenseLink),core.xp6(1),core.Q6J("ngIf",!ctx_r2.storedCcLicenseLink)}}function SubmissionSectionCcLicensesComponent_button_7_Template(rf,ctx){1&rf&&(core.TgZ(0,"button",7),core._uU(1),core.ALo(2,"translate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"submission.sections.ccLicense.none")," "))}function SubmissionSectionCcLicensesComponent_button_8_Template(rf,ctx){if(1&rf){const _r11=core.EpF();core.TgZ(0,"button",8),core.NdJ("click",__name(function(){const license_r9=core.CHM(_r11).$implicit;return core.oxw().selectCcLicense(license_r9)},"SubmissionSectionCcLicensesComponent_button_8_Template_button_click_0_listener")),core._uU(1),core.qZA()}if(2&rf){const license_r9=ctx.$implicit;core.xp6(1),core.hij(" ",license_r9.name," ")}}function SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_template_6_div_10_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",10)(1,"h5"),core._uU(2),core.qZA(),core._UZ(3,"div",20),core.qZA()),2&rf){const value_r19=ctx.$implicit;core.xp6(2),core.hij(" ",value_r19.label," "),core.xp6(1),core.Q6J("innerHTML",value_r19.description,core.oJD)}}function SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_template_6_Template(rf,ctx){if(1&rf){const _r21=core.EpF();core.TgZ(0,"div")(1,"div",15)(2,"div")(3,"h4"),core._uU(4),core.qZA(),core._UZ(5,"div",16),core.qZA(),core.TgZ(6,"button",17),core.NdJ("click",__name(function(){return core.CHM(_r21),core.oxw(3).closeInfoModal()},"SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_template_6_Template_button_click_6_listener")),core.TgZ(7,"span",18),core._uU(8,"\xd7"),core.qZA()()(),core.TgZ(9,"div",19),core.YNc(10,SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_template_6_div_10_Template,4,2,"div",9),core.qZA()()}if(2&rf){const field_r13=core.oxw().$implicit;core.xp6(4),core.hij(" ",field_r13.label," "),core.xp6(1),core.Q6J("innerHTML",field_r13.description,core.oJD),core.xp6(5),core.Q6J("ngForOf",field_r13.enums)}}function SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_ng_container_1_span_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span"),core._uU(1),core.qZA()),2&rf){const option_r25=core.oxw().ngVar;core.xp6(1),core.hij(" ",option_r25.label," ")}}function SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_ng_container_1_span_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"span"),core._uU(1),core.ALo(2,"translate"),core.qZA()),2&rf&&(core.xp6(1),core.hij(" ",core.lcZ(2,1,"submission.sections.ccLicense.option.select")," "))}function SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0,2),core.YNc(1,SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_ng_container_1_span_1_Template,2,1,"span",3),core.YNc(2,SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_ng_container_1_span_2_Template,3,3,"span",3),core.BQk()),2&rf){const option_r25=ctx.ngVar;core.xp6(1),core.Q6J("ngIf",option_r25),core.xp6(1),core.Q6J("ngIf",!option_r25)}}function SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_button_4_Template(rf,ctx){if(1&rf){const _r31=core.EpF();core.TgZ(0,"button",8),core.NdJ("click",__name(function(){const option_r29=core.CHM(_r31).$implicit,field_r13=core.oxw(2).$implicit,ctx_r30=core.oxw(2);return ctx_r30.selectOption(ctx_r30.getSelectedCcLicense(),field_r13,option_r29)},"SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_button_4_Template_button_click_0_listener")),core._uU(1),core.qZA()}if(2&rf){const option_r29=ctx.$implicit;core.xp6(1),core.hij(" ",option_r29.label," ")}}function SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"ds-select"),core.YNc(1,SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_ng_container_1_Template,3,2,"ng-container",21),core.ynx(2,4),core.TgZ(3,"div",22),core.YNc(4,SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_button_4_Template,2,1,"button",6),core.qZA(),core.BQk(),core.qZA()),2&rf){const field_r13=core.oxw().$implicit,ctx_r16=core.oxw(2);core.xp6(1),core.Q6J("ngVar",ctx_r16.getSelectedOption(ctx_r16.getSelectedCcLicense(),field_r13)),core.xp6(3),core.Q6J("ngForOf",field_r13.enums)}}function SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_container_9_div_1_Template(rf,ctx){if(1&rf){const _r37=core.EpF();core.TgZ(0,"div",24)(1,"div",25),core.NdJ("click",__name(function(){const option_r35=core.CHM(_r37).$implicit,field_r13=core.oxw(2).$implicit,ctx_r36=core.oxw(2);return ctx_r36.selectOption(ctx_r36.getSelectedCcLicense(),field_r13,option_r35)},"SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_container_9_div_1_Template_div_click_1_listener")),core._UZ(2,"input",26),core.TgZ(3,"span"),core._uU(4),core.qZA()()()}if(2&rf){const option_r35=ctx.$implicit,field_r13=core.oxw(2).$implicit,ctx_r34=core.oxw(2);core.xp6(2),core.s9C("title",option_r35.label),core.Q6J("checked",ctx_r34.isSelectedOption(ctx_r34.getSelectedCcLicense(),field_r13,option_r35)),core.xp6(2),core.Oqu(option_r35.label)}}function SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_container_9_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_container_9_div_1_Template,5,3,"div",23),core.BQk()),2&rf){const field_r13=core.oxw().$implicit;core.xp6(1),core.Q6J("ngForOf",field_r13.enums)}}function SubmissionSectionCcLicensesComponent_ng_container_9_div_1_Template(rf,ctx){if(1&rf){const _r42=core.EpF();core.TgZ(0,"div",10)(1,"div",11)(2,"div"),core._uU(3),core.qZA(),core.TgZ(4,"button",12),core.NdJ("click",__name(function(){core.CHM(_r42);const _r14=core.MAs(7);return core.oxw(2).openInfoModal(_r14)},"SubmissionSectionCcLicensesComponent_ng_container_9_div_1_Template_button_click_4_listener")),core._UZ(5,"i",13),core.qZA()(),core.YNc(6,SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_template_6_Template,11,3,"ng-template",null,14,core.W1O),core.YNc(8,SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_Template,5,2,"ds-select",3),core.YNc(9,SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_container_9_Template,2,1,"ng-container",3),core.qZA()}if(2&rf){const field_r13=ctx.$implicit;core.xp6(2),core.Gre("font-weight-bold ",field_r13.id,""),core.xp6(1),core.hij(" ",field_r13.label," "),core.xp6(5),core.Q6J("ngIf",(null==field_r13.enums?null:field_r13.enums.length)>5),core.xp6(1),core.Q6J("ngIf",(null==field_r13.enums?null:field_r13.enums.length)<=5)}}function SubmissionSectionCcLicensesComponent_ng_container_9_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,SubmissionSectionCcLicensesComponent_ng_container_9_div_1_Template,10,6,"div",9),core.BQk()),2&rf){const ctx_r5=core.oxw();core.xp6(1),core.Q6J("ngForOf",ctx_r5.getSelectedCcLicense().fields)}}function SubmissionSectionCcLicensesComponent_ng_container_10_ng_container_1_div_1_Template(rf,ctx){1&rf&&(core.TgZ(0,"div"),core._UZ(1,"ds-themed-loading"),core.qZA())}function SubmissionSectionCcLicensesComponent_ng_container_10_ng_container_1_div_2_Template(rf,ctx){if(1&rf){const _r48=core.EpF();core.TgZ(0,"div",29)(1,"div"),core._uU(2),core.ALo(3,"translate"),core.qZA(),core.TgZ(4,"a",30),core._uU(5),core.qZA(),core.TgZ(6,"div",31)(7,"div",25),core.NdJ("click",__name(function(){core.CHM(_r48);const ctx_r47=core.oxw(3);return ctx_r47.setAccepted(!ctx_r47.accepted)},"SubmissionSectionCcLicensesComponent_ng_container_10_ng_container_1_div_2_Template_div_click_7_listener")),core._UZ(8,"input",32),core.TgZ(9,"span"),core._uU(10),core.ALo(11,"translate"),core.qZA()()()()}if(2&rf){const licenseLink_r44=core.oxw().ngVar,ctx_r46=core.oxw(2);core.xp6(2),core.hij(" ",core.lcZ(3,5,"submission.sections.ccLicense.link")," "),core.xp6(2),core.s9C("href",licenseLink_r44,core.LSH),core.xp6(1),core.hij(" ",licenseLink_r44," "),core.xp6(3),core.Q6J("checked",ctx_r46.accepted),core.xp6(2),core.Oqu(core.lcZ(11,7,"submission.sections.ccLicense.confirmation"))}}function SubmissionSectionCcLicensesComponent_ng_container_10_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,SubmissionSectionCcLicensesComponent_ng_container_10_ng_container_1_div_1_Template,2,0,"div",3),core.YNc(2,SubmissionSectionCcLicensesComponent_ng_container_10_ng_container_1_div_2_Template,12,9,"div",28),core.BQk()),2&rf){const licenseLink_r44=ctx.ngVar;core.xp6(1),core.Q6J("ngIf",!licenseLink_r44),core.xp6(1),core.Q6J("ngIf",licenseLink_r44)}}function SubmissionSectionCcLicensesComponent_ng_container_10_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,SubmissionSectionCcLicensesComponent_ng_container_10_ng_container_1_Template,3,2,"ng-container",27),core.ALo(2,"async"),core.BQk()),2&rf){const ctx_r6=core.oxw();core.xp6(1),core.Q6J("ngVar",core.lcZ(2,1,ctx_r6.getCcLicenseLink$()))}}__name(SubmissionSectionCcLicensesComponent_span_3_Template,"SubmissionSectionCcLicensesComponent_span_3_Template"),__name(SubmissionSectionCcLicensesComponent_span_4_Template,"SubmissionSectionCcLicensesComponent_span_4_Template"),__name(SubmissionSectionCcLicensesComponent_span_5_ng_container_1_Template,"SubmissionSectionCcLicensesComponent_span_5_ng_container_1_Template"),__name(SubmissionSectionCcLicensesComponent_span_5_ng_container_2_Template,"SubmissionSectionCcLicensesComponent_span_5_ng_container_2_Template"),__name(SubmissionSectionCcLicensesComponent_span_5_Template,"SubmissionSectionCcLicensesComponent_span_5_Template"),__name(SubmissionSectionCcLicensesComponent_button_7_Template,"SubmissionSectionCcLicensesComponent_button_7_Template"),__name(SubmissionSectionCcLicensesComponent_button_8_Template,"SubmissionSectionCcLicensesComponent_button_8_Template"),__name(SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_template_6_div_10_Template,"SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_template_6_div_10_Template"),__name(SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_template_6_Template,"SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_template_6_Template"),__name(SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_ng_container_1_span_1_Template,"SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_ng_container_1_span_1_Template"),__name(SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_ng_container_1_span_2_Template,"SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_ng_container_1_span_2_Template"),__name(SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_ng_container_1_Template,"SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_ng_container_1_Template"),__name(SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_button_4_Template,"SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_button_4_Template"),__name(SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_Template,"SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ds_select_8_Template"),__name(SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_container_9_div_1_Template,"SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_container_9_div_1_Template"),__name(SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_container_9_Template,"SubmissionSectionCcLicensesComponent_ng_container_9_div_1_ng_container_9_Template"),__name(SubmissionSectionCcLicensesComponent_ng_container_9_div_1_Template,"SubmissionSectionCcLicensesComponent_ng_container_9_div_1_Template"),__name(SubmissionSectionCcLicensesComponent_ng_container_9_Template,"SubmissionSectionCcLicensesComponent_ng_container_9_Template"),__name(SubmissionSectionCcLicensesComponent_ng_container_10_ng_container_1_div_1_Template,"SubmissionSectionCcLicensesComponent_ng_container_10_ng_container_1_div_1_Template"),__name(SubmissionSectionCcLicensesComponent_ng_container_10_ng_container_1_div_2_Template,"SubmissionSectionCcLicensesComponent_ng_container_10_ng_container_1_div_2_Template"),__name(SubmissionSectionCcLicensesComponent_ng_container_10_ng_container_1_Template,"SubmissionSectionCcLicensesComponent_ng_container_10_ng_container_1_Template"),__name(SubmissionSectionCcLicensesComponent_ng_container_10_Template,"SubmissionSectionCcLicensesComponent_ng_container_10_Template");let SubmissionSectionCcLicensesComponent=__name(class extends SectionModelComponent{constructor(modalService,sectionService,submissionCcLicensesDataService,submissionCcLicenseUrlDataService,operationsBuilder,injectedCollectionId,injectedSectionData,injectedSubmissionId){super(injectedCollectionId,injectedSectionData,injectedSubmissionId),this.modalService=modalService,this.sectionService=sectionService,this.submissionCcLicensesDataService=submissionCcLicensesDataService,this.submissionCcLicenseUrlDataService=submissionCcLicenseUrlDataService,this.operationsBuilder=operationsBuilder,this.injectedCollectionId=injectedCollectionId,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.isLoading=!0,this.subscriptions=[]}get storedCcLicenseLink(){return this.data.uri}get accepted(){return void 0===this.data.accepted?!!this.data.uri:this.data.accepted}get data(){return this.sectionData.data}selectCcLicense(ccLicense){this.getSelectedCcLicense()&&this.getSelectedCcLicense().id===ccLicense.id||(this.setAccepted(!1),this.updateSectionData({ccLicense:{id:ccLicense.id,fields:{}},uri:void 0}))}getSelectedCcLicense(){return this.submissionCcLicenses&&this.data.ccLicense?this.submissionCcLicenses.filter(ccLicense=>ccLicense.id===this.data.ccLicense.id)[0]:null}selectOption(ccLicense,field,option){this.isSelectedOption(ccLicense,field,option)||this.updateSectionData({ccLicense:{id:ccLicense.id,fields:Object.assign({},this.data.ccLicense.fields,{[field.id]:option})},accepted:!1})}getSelectedOption(ccLicense,field){return this.data.ccLicense.fields[field.id]}isSelectedOption(ccLicense,field,option){return this.getSelectedOption(ccLicense,field)&&this.getSelectedOption(ccLicense,field).id===option.id}getCcLicenseLink$(){if(this.storedCcLicenseLink)return(0,cjs.of)(this.storedCcLicenseLink);if(!this.getSelectedCcLicense()||this.getSelectedCcLicense().fields.some(field=>!this.getSelectedOption(this.getSelectedCcLicense(),field)))return;const selectedCcLicense=this.getSelectedCcLicense();return this.submissionCcLicenseUrlDataService.getCcLicenseLink(selectedCcLicense,new Map(selectedCcLicense.fields.map(field=>[field,this.getSelectedOption(selectedCcLicense,field)])))}openInfoModal(content){this.modalRef=this.modalService.open(content)}closeInfoModal(){this.modalRef.close()}getSectionStatus(){return(0,cjs.of)(this.accepted)}onSectionDestroy(){this.subscriptions.forEach(subscription=>subscription.unsubscribe())}onSectionInit(){this.pathCombiner=new json_patch_operation_path_combiner.K("sections",this.sectionData.id),this.subscriptions.push(this.sectionService.getSectionState(this.submissionId,this.sectionData.id,sections_type.i.CcLicense).pipe((0,operators.hX)(sectionState=>(0,empty_util.UE)(sectionState)&&((0,empty_util.UE)(sectionState.data)||(0,empty_util.UE)(sectionState.errorsToShow))),(0,operators.xb)(),(0,operators.UI)(sectionState=>sectionState.data)).subscribe(data=>{if(this.data.accepted!==data.accepted){const path=this.pathCombiner.getPath("uri");data.accepted?this.getCcLicenseLink$().pipe((0,operators.qn)(1)).subscribe(link=>{this.operationsBuilder.add(path,link.toString(),!1,!0)}):this.data.uri&&this.operationsBuilder.remove(path)}this.sectionData.data=data}),this.submissionCcLicensesDataService.findAll({elementsPerPage:9999}).pipe((0,shared_operators.xw)(),(0,shared_operators.xe)(),(0,operators.UI)(list=>list.page)).subscribe(licenses=>this.submissionCcLicenses=licenses))}setAccepted(accepted){this.updateSectionData({accepted}),this.updateSectionStatus()}updateSectionData(data){this.sectionService.updateSectionData(this.submissionId,this.sectionData.id,Object.assign({},this.data,data))}},"SubmissionSectionCcLicensesComponent");SubmissionSectionCcLicensesComponent.\u0275fac=__name(function(t){return new(t||SubmissionSectionCcLicensesComponent)(core.Y36(ng_bootstrap.FF),core.Y36(sections_service.J),core.Y36(submission_cc_license_data_service.I),core.Y36(submission_cc_license_url_data_service.K),core.Y36(json_patch_operations_builder.w),core.Y36("collectionIdProvider"),core.Y36("sectionDataProvider"),core.Y36("submissionIdProvider"))},"SubmissionSectionCcLicensesComponent_Factory"),SubmissionSectionCcLicensesComponent.\u0275cmp=core.Xpm({type:SubmissionSectionCcLicensesComponent,selectors:[["ds-submission-section-cc-licenses"]],features:[core.qOj],decls:11,vars:8,consts:[[1,"mb-4","ccLicense-select"],[3,"disabled"],[1,"selection"],[4,"ngIf"],[1,"menu"],["class","dropdown-item disabled",4,"ngIf"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"dropdown-item","disabled"],[1,"dropdown-item",3,"click"],["class","mb-4",4,"ngFor","ngForOf"],[1,"mb-4"],[1,"d-flex","flex-row"],[1,"btn","btn-outline-info","btn-sm","ml-2",3,"click"],[1,"fas","fa-question"],["infoModal",""],[1,"modal-header","mb-4"],[3,"innerHTML"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"font-weight-light",3,"innerHTML"],["class","selection",4,"ngVar"],[1,"options-select-menu","overflow-auto"],["class","d-flex flex-row m-1",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","m-1"],[3,"click"],["type","radio",1,"mr-1",3,"title","checked"],[4,"ngVar"],["class","mt-2 p-4 bg-light text-dark",4,"ngIf"],[1,"mt-2","p-4","bg-light","text-dark"],["target","_blank","rel","noopener noreferrer",1,"license-link",3,"href"],[1,"m-2"],["type","checkbox","title","accepted",3,"checked"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0)(1,"ds-select",1),core.ynx(2,2),core.YNc(3,SubmissionSectionCcLicensesComponent_span_3_Template,2,0,"span",3),core.YNc(4,SubmissionSectionCcLicensesComponent_span_4_Template,2,1,"span",3),core.YNc(5,SubmissionSectionCcLicensesComponent_span_5_Template,3,2,"span",3),core.BQk(),core.ynx(6,4),core.YNc(7,SubmissionSectionCcLicensesComponent_button_7_Template,3,3,"button",5),core.YNc(8,SubmissionSectionCcLicensesComponent_button_8_Template,2,1,"button",6),core.BQk(),core.qZA()(),core.YNc(9,SubmissionSectionCcLicensesComponent_ng_container_9_Template,2,1,"ng-container",3),core.YNc(10,SubmissionSectionCcLicensesComponent_ng_container_10_Template,3,3,"ng-container",3)),2&rf&&(core.xp6(1),core.Q6J("disabled",!ctx.submissionCcLicenses),core.xp6(2),core.Q6J("ngIf",!ctx.submissionCcLicenses),core.xp6(1),core.Q6J("ngIf",ctx.getSelectedCcLicense()),core.xp6(1),core.Q6J("ngIf",ctx.submissionCcLicenses&&!ctx.getSelectedCcLicense()),core.xp6(2),core.Q6J("ngIf",0==(null==ctx.submissionCcLicenses?null:ctx.submissionCcLicenses.length)),core.xp6(1),core.Q6J("ngForOf",ctx.submissionCcLicenses),core.xp6(1),core.Q6J("ngIf",ctx.getSelectedCcLicense()),core.xp6(1),core.Q6J("ngIf",ctx.getCcLicenseLink$()))},"SubmissionSectionCcLicensesComponent_Template"),directives:[ds_select_component.N,common.O5,themed_loading_component.Z,common.sg,var_directive.g],pipes:[ngx_translate_core.X$,common.Ov],styles:[".options-select-menu[_ngcontent-%COMP%]{max-height:25vh}"]}),SubmissionSectionCcLicensesComponent=(0,tslib_es6.__decorate)([(0,sections_decorator.E)(sections_type.i.CcLicense),(0,tslib_es6.__metadata)("design:paramtypes",[ng_bootstrap.FF,sections_service.J,submission_cc_license_data_service.I,submission_cc_license_url_data_service.K,json_patch_operations_builder.w,String,Object,String])],SubmissionSectionCcLicensesComponent);var journal_entities_module=__webpack_require__(30504),research_entities_module=__webpack_require__(42245),themed_submission_edit_component=__webpack_require__(14530),themed_submission_submit_component=__webpack_require__(68457),themed_submission_import_external_component=__webpack_require__(22992),form_module=__webpack_require__(48197);class SectionAccessesService{constructor(store){this.store=store}getAccessesData(submissionId,sectionId){return this.store.select((0,selectors.y5)(submissionId,sectionId)).pipe((0,operators.hX)(state=>(0,empty_util.pT)(state)),(0,operators.xb)())}}__name(SectionAccessesService,"SectionAccessesService"),SectionAccessesService.\u0275fac=__name(function(t){return new(t||SectionAccessesService)(core.LFG(ngrx_store.yh))},"SectionAccessesService_Factory"),SectionAccessesService.\u0275prov=core.Yz7({token:SectionAccessesService,factory:SectionAccessesService.\u0275fac});const ACCESS_FORM_CHECKBOX_CONFIG={id:"discoverable",name:"discoverable"},ACCESS_FORM_CHECKBOX_LAYOUT={element:{container:"custom-control custom-checkbox pl-1",control:"custom-control-input",label:"custom-control-label pt-1"}},ACCESS_CONDITION_GROUP_CONFIG={id:"accessConditionGroup",group:[]},ACCESS_CONDITION_GROUP_LAYOUT={element:{host:"form-group access-condition-group col",container:"pl-1 pr-1",control:"form-row "}},ACCESS_CONDITIONS_FORM_ARRAY_CONFIG={id:"accessCondition",groupFactory:null},ACCESS_CONDITIONS_FORM_ARRAY_LAYOUT={grid:{group:"form-row pt-4"}},FORM_ACCESS_CONDITION_TYPE_CONFIG={id:"name",label:"submission.sections.accesses.form.access-condition-label",hint:"submission.sections.accesses.form.access-condition-hint",options:[]},FORM_ACCESS_CONDITION_TYPE_LAYOUT={element:{host:"col-12",label:"col-form-label name-label"}},FORM_ACCESS_CONDITION_START_DATE_CONFIG={id:"startDate",label:"submission.sections.accesses.form.from-label",hint:"submission.sections.accesses.form.from-hint",placeholder:"submission.sections.accesses.form.from-placeholder",inline:!1,toggleIcon:"far fa-calendar-alt",relations:[{match:fesm2015_core.O6Y,operator:fesm2015_core.F8e,when:[]}],required:!0,validators:{required:null},errorMessages:{required:"submission.sections.accesses.form.date-required-from"}},FORM_ACCESS_CONDITION_START_DATE_LAYOUT={element:{label:"col-form-label"},grid:{host:"col-6"}},FORM_ACCESS_CONDITION_END_DATE_CONFIG={id:"endDate",label:"submission.sections.accesses.form.until-label",hint:"submission.sections.accesses.form.until-hint",placeholder:"submission.sections.accesses.form.until-placeholder",inline:!1,toggleIcon:"far fa-calendar-alt",relations:[{match:fesm2015_core.O6Y,operator:fesm2015_core.F8e,when:[]}],required:!0,validators:{required:null},errorMessages:{required:"submission.sections.accesses.form.date-required-until"}},FORM_ACCESS_CONDITION_END_DATE_LAYOUT={element:{label:"col-form-label"},grid:{host:"col-6"}};let SubmissionAccessesConfigDataService=__name(class extends config_data_service.o{constructor(requestService,rdbService,objectCache,halService){super("submissionaccessoptions",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService}findByHref(href,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){return super.findByHref(href,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}},"SubmissionAccessesConfigDataService");SubmissionAccessesConfigDataService.\u0275fac=__name(function(t){return new(t||SubmissionAccessesConfigDataService)(core.LFG(request_service.s),core.LFG(remote_data_build_service.Q),core.LFG(object_cache_service.a),core.LFG(hal_endpoint_service.q))},"SubmissionAccessesConfigDataService_Factory"),SubmissionAccessesConfigDataService.\u0275prov=core.Yz7({token:SubmissionAccessesConfigDataService,factory:SubmissionAccessesConfigDataService.\u0275fac}),SubmissionAccessesConfigDataService=(0,tslib_es6.__decorate)([(0,data_service_decorator.cQ)(config_type.MX),(0,tslib_es6.__metadata)("design:paramtypes",[request_service.s,remote_data_build_service.Q,object_cache_service.a,hal_endpoint_service.q])],SubmissionAccessesConfigDataService);const section_accesses_component_c0=["formRef"];function SubmissionSectionAccessesComponent_ds_form_0_Template(rf,ctx){if(1&rf){const _r3=core.EpF();core.TgZ(0,"ds-form",1,2),core.NdJ("dfChange",__name(function($event){return core.CHM(_r3),core.oxw().onChange($event)},"SubmissionSectionAccessesComponent_ds_form_0_Template_ds_form_dfChange_0_listener"))("removeArrayItem",__name(function($event){return core.CHM(_r3),core.oxw().onRemove($event)},"SubmissionSectionAccessesComponent_ds_form_0_Template_ds_form_removeArrayItem_0_listener")),core.qZA()}if(2&rf){const ctx_r0=core.oxw();core.Q6J("formId",ctx_r0.formId)("formModel",ctx_r0.formModel)("displaySubmit",!1)("displayCancel",!1)}}__name(SubmissionSectionAccessesComponent_ds_form_0_Template,"SubmissionSectionAccessesComponent_ds_form_0_Template");let SubmissionSectionAccessesComponent=__name(class extends SectionModelComponent{constructor(sectionService,formBuilderService,accessesConfigService,accessesService,formOperationsService,operationsBuilder,formService,translate,operationsService,injectedSectionData,injectedSubmissionId){super(void 0,injectedSectionData,injectedSubmissionId),this.sectionService=sectionService,this.formBuilderService=formBuilderService,this.accessesConfigService=accessesConfigService,this.accessesService=accessesService,this.formOperationsService=formOperationsService,this.operationsBuilder=operationsBuilder,this.formService=formService,this.translate=translate,this.operationsService=operationsService,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.subs=[]}initModelData(formModel){this.accessesData.accessConditions.forEach((accessCondition,index)=>{Array.of("name","startDate","endDate").filter(key=>accessCondition.hasOwnProperty(key)&&(0,empty_util.UE)(accessCondition[key])).forEach(key=>{const metadataModel=this.formBuilderService.findById(key,formModel,index);if(metadataModel)if(metadataModel.type===fesm2015_core.VId){const date=new Date(accessCondition[key]);metadataModel.value={year:date.getUTCFullYear(),month:date.getUTCMonth()+1,day:date.getUTCDate()}}else metadataModel.value=accessCondition[key]})})}onChange(event){if(event.model.type===fesm2015_core.fSU){const path=this.formOperationsService.getFieldPathSegmentedFromChangeEvent(event),value=this.formOperationsService.getFieldValueFromChangeEvent(event);this.operationsBuilder.replace(this.pathCombiner.getPath(path),value.value,!0)}else{if(event.model.id===FORM_ACCESS_CONDITION_TYPE_CONFIG.id){const startDateControl=event.control.parent.get("startDate"),endDateControl=event.control.parent.get("endDate");null==startDateControl||startDateControl.markAsUntouched(),null==endDateControl||endDateControl.markAsUntouched(),null==startDateControl||startDateControl.setValue(null),null==endDateControl||endDateControl.setValue(null),event.control.parent.markAsDirty()}this.formService.validateAllFormFields(this.formRef.formGroup),this.formService.isValid(this.formId).pipe((0,operators.qn)(1),(0,operators.hX)(isValid=>isValid),(0,operators.zg)(()=>this.formService.getFormData(this.formId)),(0,operators.qn)(1)).subscribe(formData=>{const accessConditionsToSave=[];formData.accessCondition.map(accessConditions=>accessConditions.accessConditionGroup).filter(accessCondition=>(0,empty_util.UE)(accessCondition)).forEach(accessCondition=>{let accessConditionOpt;if(this.availableAccessConditionOptions.filter(element=>(0,empty_util.K0)(accessCondition.name)&&element.name===accessCondition.name[0].value).forEach(element=>accessConditionOpt=element),accessConditionOpt){const currentAccessCondition=Object.assign({},accessCondition);if(currentAccessCondition.name=this.retrieveValueFromField(accessCondition.name),accessConditionOpt.hasStartDate){if(accessCondition.startDate){const startDate=this.retrieveValueFromField(accessCondition.startDate);currentAccessCondition.startDate=(0,date_util.iV)(startDate)}}else delete currentAccessCondition.startDate;if(accessConditionOpt.hasEndDate){if(accessCondition.endDate){const endDate=this.retrieveValueFromField(accessCondition.endDate);currentAccessCondition.endDate=(0,date_util.iV)(endDate)}}else delete currentAccessCondition.endDate;accessConditionsToSave.push(currentAccessCondition)}}),this.operationsBuilder.add(this.pathCombiner.getPath("accessConditions"),accessConditionsToSave,!0)})}}onRemove(event){const fieldPath="accessConditions/"+this.formOperationsService.getArrayIndexFromEvent(event);this.operationsBuilder.remove(this.pathCombiner.getPath(fieldPath))}onSectionDestroy(){this.subs.filter(subscription=>(0,empty_util.Uh)(subscription)).forEach(subscription=>subscription.unsubscribe())}onSectionInit(){this.pathCombiner=new json_patch_operation_path_combiner.K("sections",this.sectionData.id),this.formId=this.formService.getUniqueId(this.sectionData.id);const config$=this.accessesConfigService.findByHref(this.sectionData.config,!0,!1).pipe((0,shared_operators.xw)(),(0,operators.UI)(config=>config.payload)),accessData$=this.accessesService.getAccessesData(this.submissionId,this.sectionData.id);(0,cjs.combineLatest)([config$,accessData$]).subscribe(([config,accessData])=>{this.availableAccessConditionOptions=(0,empty_util.UE)(config.accessConditionOptions)?config.accessConditionOptions:[],this.canChangeDiscoverable=!!config.canChangeDiscoverable,this.accessesData=accessData,this.formModel=this.buildFileEditForm()})}getSectionStatus(){return(0,cjs.of)(!0)}buildFileEditForm(){const formModel=[];if(this.canChangeDiscoverable){const discoverableCheckboxConfig=Object.assign({},ACCESS_FORM_CHECKBOX_CONFIG,{label:this.translate.instant("submission.sections.accesses.form.discoverable-label"),hint:this.translate.instant("submission.sections.accesses.form.discoverable-description"),value:this.accessesData.discoverable});formModel.push(new fesm2015_core.dwp(discoverableCheckboxConfig,ACCESS_FORM_CHECKBOX_LAYOUT))}const accessConditionTypeModelConfig=Object.assign({},FORM_ACCESS_CONDITION_TYPE_CONFIG),accessConditionsArrayConfig=Object.assign({},ACCESS_CONDITIONS_FORM_ARRAY_CONFIG),accessConditionTypeOptions=[];for(const accessCondition of this.availableAccessConditionOptions)accessConditionTypeOptions.push({label:accessCondition.name,value:accessCondition.name});accessConditionTypeModelConfig.options=accessConditionTypeOptions;const startDateCondition=[],endDateCondition=[];let maxStartDate,maxEndDate;this.availableAccessConditionOptions.forEach(condition=>{if(condition.hasStartDate&&(startDateCondition.push({id:"name",value:condition.name}),condition.maxStartDate)){const min=new Date(condition.maxStartDate);maxStartDate={year:min.getUTCFullYear(),month:min.getUTCMonth()+1,day:min.getUTCDate()}}if(condition.hasEndDate&&(endDateCondition.push({id:"name",value:condition.name}),condition.maxEndDate)){const max=new Date(condition.maxEndDate);maxEndDate={year:max.getUTCFullYear(),month:max.getUTCMonth()+1,day:max.getUTCDate()}}});const confStart={relations:[{match:fesm2015_core.O6Y,operator:fesm2015_core.F8e,when:startDateCondition}]},confEnd={relations:[{match:fesm2015_core.O6Y,operator:fesm2015_core.F8e,when:endDateCondition}]},hasStartDate=startDateCondition.length>0,hasEndDate=endDateCondition.length>0;return accessConditionsArrayConfig.groupFactory=()=>{const type=new fesm2015_core.nMt(accessConditionTypeModelConfig,FORM_ACCESS_CONDITION_TYPE_LAYOUT),startDateConfig=Object.assign({},FORM_ACCESS_CONDITION_START_DATE_CONFIG,confStart);maxStartDate&&(startDateConfig.max=maxStartDate);const endDateConfig=Object.assign({},FORM_ACCESS_CONDITION_END_DATE_CONFIG,confEnd);maxEndDate&&(endDateConfig.max=maxEndDate);const startDate=new fesm2015_core.oqv(startDateConfig,FORM_ACCESS_CONDITION_START_DATE_LAYOUT),endDate=new fesm2015_core.oqv(endDateConfig,FORM_ACCESS_CONDITION_END_DATE_LAYOUT),accessConditionGroupConfig=Object.assign({},ACCESS_CONDITION_GROUP_CONFIG);return accessConditionGroupConfig.group=[type],hasStartDate&&accessConditionGroupConfig.group.push(startDate),hasEndDate&&accessConditionGroupConfig.group.push(endDate),[new fesm2015_core.S_O(accessConditionGroupConfig,ACCESS_CONDITION_GROUP_LAYOUT)]},accessConditionsArrayConfig.initialCount=(0,empty_util.UE)(this.accessesData.accessConditions)?this.accessesData.accessConditions.length:1,formModel.push(new fesm2015_core.RRz(accessConditionsArrayConfig,ACCESS_CONDITIONS_FORM_ARRAY_LAYOUT)),this.initModelData(formModel),formModel}retrieveValueFromField(field){const temp=Array.isArray(field)?field[0]:field;return temp?temp.value:void 0}},"SubmissionSectionAccessesComponent");SubmissionSectionAccessesComponent.\u0275fac=__name(function(t){return new(t||SubmissionSectionAccessesComponent)(core.Y36(sections_service.J),core.Y36(form_builder_service.c),core.Y36(SubmissionAccessesConfigDataService),core.Y36(SectionAccessesService),core.Y36(section_form_operations_service.m),core.Y36(json_patch_operations_builder.w),core.Y36(form_service.o),core.Y36(ngx_translate_core.sK),core.Y36(submission_json_patch_operations_service.E),core.Y36("sectionDataProvider"),core.Y36("submissionIdProvider"))},"SubmissionSectionAccessesComponent_Factory"),SubmissionSectionAccessesComponent.\u0275cmp=core.Xpm({type:SubmissionSectionAccessesComponent,selectors:[["ds-section-accesses"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(section_accesses_component_c0,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.formRef=_t.first)}},"SubmissionSectionAccessesComponent_Query"),features:[core.qOj],decls:1,vars:1,consts:[[3,"formId","formModel","displaySubmit","displayCancel","dfChange","removeArrayItem",4,"ngIf"],[3,"formId","formModel","displaySubmit","displayCancel","dfChange","removeArrayItem"],["formRef","formComponent"]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,SubmissionSectionAccessesComponent_ds_form_0_Template,2,4,"ds-form",0),2&rf&&core.Q6J("ngIf",!!ctx.formModel)},"SubmissionSectionAccessesComponent_Template"),directives:[common.O5,form_component.U],styles:[".access-condition-group{position:relative;top:-2.3rem;margin-bottom:-2.3rem}"]}),SubmissionSectionAccessesComponent=(0,tslib_es6.__decorate)([(0,sections_decorator.E)(sections_type.i.AccessesCondition),(0,tslib_es6.__metadata)("design:paramtypes",[sections_service.J,form_builder_service.c,SubmissionAccessesConfigDataService,SectionAccessesService,section_form_operations_service.m,json_patch_operations_builder.w,form_service.o,ngx_translate_core.sK,submission_json_patch_operations_service.E,Object,String])],SubmissionSectionAccessesComponent);var alert_component=__webpack_require__(7519);function PublicationInformationComponent_div_1_p_6_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"p",4),core._uU(1),core.qZA()),2&rf){const title_r7=ctx.$implicit;core.xp6(1),core.hij("",title_r7," ")}}function PublicationInformationComponent_div_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",2)(1,"div",3)(2,"p",4),core._uU(3),core.ALo(4,"translate"),core.qZA()(),core.TgZ(5,"div",3),core.YNc(6,PublicationInformationComponent_div_1_p_6_Template,2,1,"p",5),core.qZA()()),2&rf){const ctx_r0=core.oxw();core.xp6(3),core.Oqu(core.lcZ(4,2,"submission.sections.sherpa.publication.information.title")),core.xp6(3),core.Q6J("ngForOf",ctx_r0.journal.titles)}}function PublicationInformationComponent_div_2_p_6_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"p",4),core._uU(1),core.qZA()),2&rf){const issn_r9=ctx.$implicit;core.xp6(1),core.hij("",issn_r9," ")}}function PublicationInformationComponent_div_2_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",2)(1,"div",3)(2,"p",4),core._uU(3),core.ALo(4,"translate"),core.qZA()(),core.TgZ(5,"div",3),core.YNc(6,PublicationInformationComponent_div_2_p_6_Template,2,1,"p",5),core.qZA()()),2&rf){const ctx_r1=core.oxw();core.xp6(3),core.Oqu(core.lcZ(4,2,"submission.sections.sherpa.publication.information.issns")),core.xp6(3),core.Q6J("ngForOf",ctx_r1.journal.issns)}}function PublicationInformationComponent_div_3_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",2)(1,"div",3)(2,"p",4),core._uU(3),core.ALo(4,"translate"),core.qZA()(),core.TgZ(5,"div",3)(6,"p",4)(7,"a",6),core._uU(8),core.qZA()()()()),2&rf){const ctx_r2=core.oxw();core.xp6(3),core.Oqu(core.lcZ(4,3,"submission.sections.sherpa.publication.information.url")),core.xp6(4),core.s9C("href",ctx_r2.journal.url,core.LSH),core.xp6(1),core.hij(" ",ctx_r2.journal.url," ")}}function PublicationInformationComponent_div_4_div_5_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",3)(1,"p",4)(2,"a",6),core._uU(3),core.qZA()()()),2&rf){const publisher_r11=ctx.$implicit;core.xp6(2),core.s9C("href",publisher_r11.uri,core.LSH),core.xp6(1),core.hij(" ",publisher_r11.name," ")}}function PublicationInformationComponent_div_4_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",2)(1,"div",3)(2,"p",4),core._uU(3),core.ALo(4,"translate"),core.qZA()(),core.YNc(5,PublicationInformationComponent_div_4_div_5_Template,4,2,"div",7),core.qZA()),2&rf){const ctx_r3=core.oxw();core.xp6(3),core.Oqu(core.lcZ(4,2,"submission.sections.sherpa.publication.information.publishers")),core.xp6(2),core.Q6J("ngForOf",ctx_r3.journal.publishers)}}function PublicationInformationComponent_div_5_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",2)(1,"div",3)(2,"p",4),core._uU(3),core.ALo(4,"translate"),core.qZA()(),core.TgZ(5,"div",3)(6,"p",4),core._uU(7),core.qZA()()()),2&rf){const ctx_r4=core.oxw();core.xp6(3),core.Oqu(core.lcZ(4,2,"submission.sections.sherpa.publication.information.romeoPub")),core.xp6(4),core.hij(" ",ctx_r4.journal.romeoPub," ")}}function PublicationInformationComponent_div_6_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",2)(1,"div",3)(2,"p",4),core._uU(3),core.ALo(4,"translate"),core.qZA()(),core.TgZ(5,"div",3)(6,"p",4),core._uU(7),core.qZA()()()),2&rf){const ctx_r5=core.oxw();core.xp6(3),core.Oqu(core.lcZ(4,2,"submission.sections.sherpa.publication.information.zetoPub")),core.xp6(4),core.hij(" ",ctx_r5.journal.zetoPub," ")}}__name(PublicationInformationComponent_div_1_p_6_Template,"PublicationInformationComponent_div_1_p_6_Template"),__name(PublicationInformationComponent_div_1_Template,"PublicationInformationComponent_div_1_Template"),__name(PublicationInformationComponent_div_2_p_6_Template,"PublicationInformationComponent_div_2_p_6_Template"),__name(PublicationInformationComponent_div_2_Template,"PublicationInformationComponent_div_2_Template"),__name(PublicationInformationComponent_div_3_Template,"PublicationInformationComponent_div_3_Template"),__name(PublicationInformationComponent_div_4_div_5_Template,"PublicationInformationComponent_div_4_div_5_Template"),__name(PublicationInformationComponent_div_4_Template,"PublicationInformationComponent_div_4_Template"),__name(PublicationInformationComponent_div_5_Template,"PublicationInformationComponent_div_5_Template"),__name(PublicationInformationComponent_div_6_Template,"PublicationInformationComponent_div_6_Template");class PublicationInformationComponent{}function ContentAccordionComponent_span_8_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span"),core._UZ(1,"i",15),core._uU(2),core.qZA()),2&rf){const ctx_r0=core.oxw();core.xp6(2),core.AsE(" ",ctx_r0.version.embargo.amount," ",null==ctx_r0.version.embargo?null:ctx_r0.version.embargo.units[0],"")}}function ContentAccordionComponent_ng_template_9_Template(rf,ctx){1&rf&&(core.TgZ(0,"span"),core._UZ(1,"i",15),core._uU(2),core.ALo(3,"translate"),core.qZA()),2&rf&&(core.xp6(2),core.hij(" ",core.lcZ(3,1,"submission.sections.sherpa.publisher.policy.noembargo"),""))}function ContentAccordionComponent_span_13_span_2_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span"),core._uU(1),core.qZA()),2&rf){const ctx_r10=core.oxw(2);core.xp6(1),core.hij("+",ctx_r10.version.locations.length-1,"")}}function ContentAccordionComponent_span_13_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span"),core._uU(1),core.YNc(2,ContentAccordionComponent_span_13_span_2_Template,2,1,"span",16),core.qZA()),2&rf){const ctx_r3=core.oxw();core.xp6(1),core.hij(" ",ctx_r3.version.locations[0]," "),core.xp6(1),core.Q6J("ngIf",ctx_r3.version.locations.length>1)}}function ContentAccordionComponent_ng_template_14_Template(rf,ctx){1&rf&&(core.TgZ(0,"span"),core._uU(1),core.ALo(2,"translate"),core.qZA()),2&rf&&(core.xp6(1),core.Oqu(core.lcZ(2,1,"submission.sections.sherpa.publisher.policy.nolocation")))}function ContentAccordionComponent_span_17_Template(rf,ctx){1&rf&&core._UZ(0,"span",17)}function ContentAccordionComponent_span_18_Template(rf,ctx){1&rf&&core._UZ(0,"span",18)}function ContentAccordionComponent_div_21_div_1_p_7_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"p",23),core._uU(1),core.qZA()),2&rf){const ctx_r16=core.oxw(3);core.xp6(1),core.AsE("",ctx_r16.version.embargo.amount," ",ctx_r16.version.embargo.units,"")}}function ContentAccordionComponent_div_21_div_1_ng_template_8_Template(rf,ctx){1&rf&&(core.TgZ(0,"p",23),core._uU(1),core.ALo(2,"translate"),core.qZA()),2&rf&&(core.xp6(1),core.Oqu(core.lcZ(2,1,"submission.sections.sherpa.publisher.policy.noembargo")))}function ContentAccordionComponent_div_21_div_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",21)(1,"div",22)(2,"p",23),core._UZ(3,"i",15),core._uU(4),core.ALo(5,"translate"),core.qZA()(),core.TgZ(6,"div",24),core.YNc(7,ContentAccordionComponent_div_21_div_1_p_7_Template,2,2,"p",25),core.YNc(8,ContentAccordionComponent_div_21_div_1_ng_template_8_Template,3,3,"ng-template",null,26,core.W1O),core.qZA()()),2&rf){const _r17=core.MAs(9),ctx_r11=core.oxw(2);core.xp6(4),core.hij(" ",core.lcZ(5,3,"submission.sections.sherpa.publisher.policy.embargo"),""),core.xp6(3),core.Q6J("ngIf",!!ctx_r11.version.embargo)("ngIfElse",_r17)}}function ContentAccordionComponent_div_21_div_2_p_7_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"p",23),core._uU(1),core.qZA()),2&rf){const license_r20=ctx.$implicit;core.xp6(1),core.Oqu(license_r20)}}function ContentAccordionComponent_div_21_div_2_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",21)(1,"div",22)(2,"p",23),core._UZ(3,"i",27),core._uU(4),core.ALo(5,"translate"),core.qZA()(),core.TgZ(6,"div",24),core.YNc(7,ContentAccordionComponent_div_21_div_2_p_7_Template,2,1,"p",28),core.qZA()()),2&rf){const ctx_r12=core.oxw(2);core.xp6(4),core.hij(" ",core.lcZ(5,2,"submission.sections.sherpa.publisher.policy.license"),""),core.xp6(3),core.Q6J("ngForOf",ctx_r12.version.licenses)}}function ContentAccordionComponent_div_21_div_3_p_7_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"p",23),core._uU(1),core.qZA()),2&rf){const prerequisite_r22=ctx.$implicit;core.xp6(1),core.Oqu(prerequisite_r22)}}function ContentAccordionComponent_div_21_div_3_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",21)(1,"div",22)(2,"p",23),core._UZ(3,"i",29),core._uU(4),core.ALo(5,"translate"),core.qZA()(),core.TgZ(6,"div",24),core.YNc(7,ContentAccordionComponent_div_21_div_3_p_7_Template,2,1,"p",28),core.qZA()()),2&rf){const ctx_r13=core.oxw(2);core.xp6(4),core.hij(" ",core.lcZ(5,2,"submission.sections.sherpa.publisher.policy.prerequisites"),""),core.xp6(3),core.Q6J("ngForOf",ctx_r13.version.prerequisites)}}function ContentAccordionComponent_div_21_div_4_p_7_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"p",23),core._uU(1),core.qZA()),2&rf){const location_r24=ctx.$implicit;core.xp6(1),core.Oqu(location_r24)}}function ContentAccordionComponent_div_21_div_4_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",21)(1,"div",22)(2,"p",23),core._UZ(3,"i",7),core._uU(4),core.ALo(5,"translate"),core.qZA()(),core.TgZ(6,"div",24),core.YNc(7,ContentAccordionComponent_div_21_div_4_p_7_Template,2,1,"p",28),core.qZA()()),2&rf){const ctx_r14=core.oxw(2);core.xp6(4),core.hij(" ",core.lcZ(5,2,"submission.sections.sherpa.publisher.policy.location"),""),core.xp6(3),core.Q6J("ngForOf",ctx_r14.version.locations)}}function ContentAccordionComponent_div_21_div_5_p_7_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"p",23),core._uU(1),core.qZA()),2&rf){const condition_r26=ctx.$implicit;core.xp6(1),core.Oqu(condition_r26)}}function ContentAccordionComponent_div_21_div_5_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",21)(1,"div",22)(2,"p",23),core._UZ(3,"i",30),core._uU(4),core.ALo(5,"translate"),core.qZA()(),core.TgZ(6,"div",24),core.YNc(7,ContentAccordionComponent_div_21_div_5_p_7_Template,2,1,"p",28),core.qZA()()),2&rf){const ctx_r15=core.oxw(2);core.xp6(4),core.hij(" ",core.lcZ(5,2,"submission.sections.sherpa.publisher.policy.conditions"),""),core.xp6(3),core.Q6J("ngForOf",ctx_r15.version.conditions)}}function ContentAccordionComponent_div_21_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",19),core.YNc(1,ContentAccordionComponent_div_21_div_1_Template,10,5,"div",20),core.YNc(2,ContentAccordionComponent_div_21_div_2_Template,8,4,"div",20),core.YNc(3,ContentAccordionComponent_div_21_div_3_Template,8,4,"div",20),core.YNc(4,ContentAccordionComponent_div_21_div_4_Template,8,4,"div",20),core.YNc(5,ContentAccordionComponent_div_21_div_5_Template,8,4,"div",20),core.qZA()),2&rf){const ctx_r9=core.oxw();core.xp6(1),core.Q6J("ngIf",!(null==ctx_r9.version||!ctx_r9.version.embargo||null==ctx_r9.version||!ctx_r9.version.embargo.amount)),core.xp6(1),core.Q6J("ngIf",!(null==ctx_r9.version||!ctx_r9.version.licenses)&&ctx_r9.version.licenses.length>0),core.xp6(1),core.Q6J("ngIf",!(null==ctx_r9.version||!ctx_r9.version.prerequisites)&&ctx_r9.version.prerequisites.length>0),core.xp6(1),core.Q6J("ngIf",!(null==ctx_r9.version||!ctx_r9.version.locations)&&ctx_r9.version.locations.length>0),core.xp6(1),core.Q6J("ngIf",!(null==ctx_r9.version||!ctx_r9.version.conditions)&&ctx_r9.version.conditions.length>0)}}__name(PublicationInformationComponent,"PublicationInformationComponent"),PublicationInformationComponent.\u0275fac=__name(function(t){return new(t||PublicationInformationComponent)},"PublicationInformationComponent_Factory"),PublicationInformationComponent.\u0275cmp=core.Xpm({type:PublicationInformationComponent,selectors:[["ds-publication-information"]],inputs:{journal:"journal"},decls:7,vars:6,consts:[[1,"ml-4"],["class","row",4,"ngIf"],[1,"row"],[1,"col-4"],[1,"m-1"],["class","m-1",4,"ngFor","ngForOf"],["target","_blank",3,"href"],["class","col-4",4,"ngFor","ngForOf"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.YNc(1,PublicationInformationComponent_div_1_Template,7,4,"div",1),core.YNc(2,PublicationInformationComponent_div_2_Template,7,4,"div",1),core.YNc(3,PublicationInformationComponent_div_3_Template,9,5,"div",1),core.YNc(4,PublicationInformationComponent_div_4_Template,6,4,"div",1),core.YNc(5,PublicationInformationComponent_div_5_Template,8,4,"div",1),core.YNc(6,PublicationInformationComponent_div_6_Template,8,4,"div",1),core.qZA()),2&rf&&(core.xp6(1),core.Q6J("ngIf",!(null==ctx.journal||!ctx.journal.titles)&&ctx.journal.titles.length>0),core.xp6(1),core.Q6J("ngIf",!(null==ctx.journal||!ctx.journal.issns)&&ctx.journal.issns.length>0),core.xp6(1),core.Q6J("ngIf",!(null==ctx.journal||!ctx.journal.url)),core.xp6(1),core.Q6J("ngIf",!(null==ctx.journal||!ctx.journal.publishers)&&ctx.journal.publishers.length>0),core.xp6(1),core.Q6J("ngIf",!(null==ctx.journal||!ctx.journal.romeoPub)),core.xp6(1),core.Q6J("ngIf",!(null==ctx.journal||!ctx.journal.zetoPub)))},"PublicationInformationComponent_Template"),directives:[common.O5,common.sg],pipes:[ngx_translate_core.X$],styles:[""]}),__name(ContentAccordionComponent_span_8_Template,"ContentAccordionComponent_span_8_Template"),__name(ContentAccordionComponent_ng_template_9_Template,"ContentAccordionComponent_ng_template_9_Template"),__name(ContentAccordionComponent_span_13_span_2_Template,"ContentAccordionComponent_span_13_span_2_Template"),__name(ContentAccordionComponent_span_13_Template,"ContentAccordionComponent_span_13_Template"),__name(ContentAccordionComponent_ng_template_14_Template,"ContentAccordionComponent_ng_template_14_Template"),__name(ContentAccordionComponent_span_17_Template,"ContentAccordionComponent_span_17_Template"),__name(ContentAccordionComponent_span_18_Template,"ContentAccordionComponent_span_18_Template"),__name(ContentAccordionComponent_div_21_div_1_p_7_Template,"ContentAccordionComponent_div_21_div_1_p_7_Template"),__name(ContentAccordionComponent_div_21_div_1_ng_template_8_Template,"ContentAccordionComponent_div_21_div_1_ng_template_8_Template"),__name(ContentAccordionComponent_div_21_div_1_Template,"ContentAccordionComponent_div_21_div_1_Template"),__name(ContentAccordionComponent_div_21_div_2_p_7_Template,"ContentAccordionComponent_div_21_div_2_p_7_Template"),__name(ContentAccordionComponent_div_21_div_2_Template,"ContentAccordionComponent_div_21_div_2_Template"),__name(ContentAccordionComponent_div_21_div_3_p_7_Template,"ContentAccordionComponent_div_21_div_3_p_7_Template"),__name(ContentAccordionComponent_div_21_div_3_Template,"ContentAccordionComponent_div_21_div_3_Template"),__name(ContentAccordionComponent_div_21_div_4_p_7_Template,"ContentAccordionComponent_div_21_div_4_p_7_Template"),__name(ContentAccordionComponent_div_21_div_4_Template,"ContentAccordionComponent_div_21_div_4_Template"),__name(ContentAccordionComponent_div_21_div_5_p_7_Template,"ContentAccordionComponent_div_21_div_5_p_7_Template"),__name(ContentAccordionComponent_div_21_div_5_Template,"ContentAccordionComponent_div_21_div_5_Template"),__name(ContentAccordionComponent_div_21_Template,"ContentAccordionComponent_div_21_Template");class ContentAccordionComponent{constructor(){this.isCollapsed=!0}}function PublisherPolicyComponent_ds_content_accordion_1_Template(rf,ctx){if(1&rf&&core._UZ(0,"ds-content-accordion",3),2&rf){const permittedVersions_r2=ctx.$implicit;core.Q6J("version",permittedVersions_r2)}}function PublisherPolicyComponent_div_2_li_6_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"li")(1,"a",8),core._uU(2),core.qZA()()),2&rf){const url_r4=ctx.$implicit;core.xp6(1),core.s9C("href",url_r4.key,core.LSH),core.xp6(1),core.Oqu(url_r4.value)}}function PublisherPolicyComponent_div_2_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",4)(1,"div",5)(2,"p",6),core._uU(3),core.ALo(4,"translate"),core.qZA(),core.TgZ(5,"ul"),core.YNc(6,PublisherPolicyComponent_div_2_li_6_Template,3,2,"li",7),core.ALo(7,"keyvalue"),core.qZA()()()),2&rf){const ctx_r1=core.oxw();core.xp6(3),core.hij(" ",core.lcZ(4,2,"submission.sections.sherpa.publisher.policy.more.information")," "),core.xp6(3),core.Q6J("ngForOf",core.lcZ(7,4,ctx_r1.policy.urls))}}__name(ContentAccordionComponent,"ContentAccordionComponent"),ContentAccordionComponent.\u0275fac=__name(function(t){return new(t||ContentAccordionComponent)},"ContentAccordionComponent_Factory"),ContentAccordionComponent.\u0275cmp=core.Xpm({type:ContentAccordionComponent,selectors:[["ds-content-accordion"]],inputs:{version:"version"},decls:22,vars:15,consts:[["data-test","collapse",1,"mb-3","border-bottom"],[1,"w-100","d-flex","justify-content-between","collapse-toggle",3,"click"],[1,"d-flex"],["type","button","aria-controls","collapseExample",1,"btn","btn-link","p-0","mr-4",3,"click"],[4,"ngIf","ngIfElse"],["noEmbargoTitle",""],[1,"m-1","ml-4"],[1,"far","fa-folder-open"],["noLocations",""],[1,"d-inline-block"],["class","fas fa-chevron-down",4,"ngIf"],["class","fas fa-chevron-up",4,"ngIf"],[3,"ngbCollapse"],["collapse","ngbCollapse"],["class","ml-4",4,"ngIf"],[1,"fas","fa-hourglass-half"],[4,"ngIf"],[1,"fas","fa-chevron-down"],[1,"fas","fa-chevron-up"],[1,"ml-4"],["class","row",4,"ngIf"],[1,"row"],[1,"col-4"],[1,"m-1"],[1,"col-6"],["class","m-1",4,"ngIf","ngIfElse"],["noEmbargo",""],[1,"fas","fa-certificate"],["class","m-1",4,"ngFor","ngForOf"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-tasks"]],template:__name(function(rf,ctx){if(1&rf){const _r27=core.EpF();core.TgZ(0,"div",0)(1,"div",1),core.NdJ("click",__name(function(){return core.CHM(_r27),core.MAs(20).toggle()},"ContentAccordionComponent_Template_div_click_1_listener")),core.TgZ(2,"div",2)(3,"button",3),core.NdJ("click",__name(function($event){return $event.preventDefault()},"ContentAccordionComponent_Template_button_click_3_listener")),core._uU(4),core.ALo(5,"titlecase"),core.ALo(6,"translate"),core.qZA(),core.TgZ(7,"div"),core.YNc(8,ContentAccordionComponent_span_8_Template,3,2,"span",4),core.YNc(9,ContentAccordionComponent_ng_template_9_Template,4,3,"ng-template",null,5,core.W1O),core.TgZ(11,"span",6),core._UZ(12,"i",7),core.YNc(13,ContentAccordionComponent_span_13_Template,3,2,"span",4),core.YNc(14,ContentAccordionComponent_ng_template_14_Template,3,3,"ng-template",null,8,core.W1O),core.qZA()()(),core.TgZ(16,"div",9),core.YNc(17,ContentAccordionComponent_span_17_Template,1,0,"span",10),core.YNc(18,ContentAccordionComponent_span_18_Template,1,0,"span",11),core.qZA()(),core.TgZ(19,"div",12,13),core.YNc(21,ContentAccordionComponent_div_21_Template,6,5,"div",14),core.qZA()()}if(2&rf){const _r1=core.MAs(10),_r4=core.MAs(15),_r8=core.MAs(20);core.xp6(3),core.uIk("aria-expanded",!_r8.collapsed),core.xp6(1),core.AsE(" ",core.lcZ(5,11,ctx.version.articleVersion)," ",core.lcZ(6,13,"submission.sections.sherpa.publisher.policy.version")," "),core.xp6(4),core.Q6J("ngIf",!(null==ctx.version||!ctx.version.embargo||null==ctx.version||!ctx.version.embargo.amount))("ngIfElse",_r1),core.xp6(5),core.Q6J("ngIf",!(null==ctx.version||!ctx.version.locations)&&ctx.version.locations.length>0)("ngIfElse",_r4),core.xp6(4),core.Q6J("ngIf",_r8.collapsed),core.xp6(1),core.Q6J("ngIf",!_r8.collapsed),core.xp6(1),core.Q6J("ngbCollapse",ctx.isCollapsed),core.xp6(2),core.Q6J("ngIf",!!ctx.version)}},"ContentAccordionComponent_Template"),directives:[common.O5,ng_bootstrap._D,common.sg],pipes:[common.rS,ngx_translate_core.X$],styles:[""]}),__name(PublisherPolicyComponent_ds_content_accordion_1_Template,"PublisherPolicyComponent_ds_content_accordion_1_Template"),__name(PublisherPolicyComponent_div_2_li_6_Template,"PublisherPolicyComponent_div_2_li_6_Template"),__name(PublisherPolicyComponent_div_2_Template,"PublisherPolicyComponent_div_2_Template");class PublisherPolicyComponent{constructor(){this.AlertTypeEnum=aletr_type.N}}function MetadataInformationComponent_div_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",2)(1,"div",3)(2,"p",4),core._uU(3),core.ALo(4,"translate"),core.qZA()(),core.TgZ(5,"div",5)(6,"p",4),core._uU(7),core.qZA()()()),2&rf){const ctx_r0=core.oxw();core.xp6(3),core.Oqu(core.lcZ(4,2,"submission.sections.sherpa.record.information.id")),core.xp6(4),core.hij("",ctx_r0.metadata.id," ")}}function MetadataInformationComponent_div_2_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",2)(1,"div",3)(2,"p",4),core._uU(3),core.ALo(4,"translate"),core.qZA()(),core.TgZ(5,"div",5)(6,"p",4),core._uU(7),core.ALo(8,"date"),core.qZA()()()),2&rf){const ctx_r1=core.oxw();core.xp6(3),core.Oqu(core.lcZ(4,2,"submission.sections.sherpa.record.information.date.created")),core.xp6(4),core.hij("",core.xi3(8,4,ctx_r1.metadata.dateCreated,"d MMMM Y H:mm:ss zzzz")," ")}}function MetadataInformationComponent_div_3_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",2)(1,"div",3)(2,"p",4),core._uU(3),core.ALo(4,"translate"),core.qZA()(),core.TgZ(5,"div",5)(6,"p",4),core._uU(7),core.ALo(8,"date"),core.qZA()()()),2&rf){const ctx_r2=core.oxw();core.xp6(3),core.Oqu(core.lcZ(4,2,"submission.sections.sherpa.record.information.date.modified")),core.xp6(4),core.hij("",core.xi3(8,4,ctx_r2.metadata.dateModified,"d MMMM Y H:mm:ss zzzz")," ")}}function MetadataInformationComponent_div_4_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",2)(1,"div",3)(2,"p",4),core._uU(3),core.ALo(4,"translate"),core.qZA()(),core.TgZ(5,"div",5)(6,"p",4)(7,"a",6),core._uU(8),core.qZA()()()()),2&rf){const ctx_r3=core.oxw();core.xp6(3),core.Oqu(core.lcZ(4,3,"submission.sections.sherpa.record.information.uri")),core.xp6(4),core.Q6J("href",ctx_r3.metadata.uri,core.LSH),core.xp6(1),core.Oqu(ctx_r3.metadata.uri)}}__name(PublisherPolicyComponent,"PublisherPolicyComponent"),PublisherPolicyComponent.\u0275fac=__name(function(t){return new(t||PublisherPolicyComponent)},"PublisherPolicyComponent_Factory"),PublisherPolicyComponent.\u0275cmp=core.Xpm({type:PublisherPolicyComponent,selectors:[["ds-publisher-policy"]],inputs:{policy:"policy"},decls:3,vars:2,consts:[[1,"ml-4"],[3,"version",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[3,"version"],[1,"row"],[1,"col-12"],[1,"m-1"],[4,"ngFor","ngForOf"],["target","_blank",3,"href"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.YNc(1,PublisherPolicyComponent_ds_content_accordion_1_Template,1,1,"ds-content-accordion",1),core.YNc(2,PublisherPolicyComponent_div_2_Template,8,6,"div",2),core.qZA()),2&rf&&(core.xp6(1),core.Q6J("ngForOf",ctx.policy.permittedVersions),core.xp6(1),core.Q6J("ngIf",!(null==ctx.policy||!ctx.policy.urls)))},"PublisherPolicyComponent_Template"),directives:[common.sg,ContentAccordionComponent,common.O5],pipes:[ngx_translate_core.X$,common.Nd],styles:[""]}),__name(MetadataInformationComponent_div_1_Template,"MetadataInformationComponent_div_1_Template"),__name(MetadataInformationComponent_div_2_Template,"MetadataInformationComponent_div_2_Template"),__name(MetadataInformationComponent_div_3_Template,"MetadataInformationComponent_div_3_Template"),__name(MetadataInformationComponent_div_4_Template,"MetadataInformationComponent_div_4_Template");class MetadataInformationComponent{}function SubmissionSectionSherpaPoliciesComponent_ds_alert_0_Template(rf,ctx){1&rf&&core._UZ(0,"ds-alert",3),2&rf&&core.Q6J("type","alert-info")("content","submission.sections.sherpa-policy.title-empty")}function SubmissionSectionSherpaPoliciesComponent_div_1_Template(rf,ctx){if(1&rf){const _r4=core.EpF();core.TgZ(0,"div",4)(1,"ds-alert",5),core._uU(2),core.ALo(3,"translate"),core.qZA(),core.TgZ(4,"div")(5,"button",6),core.NdJ("click",__name(function(){return core.CHM(_r4),core.oxw().refresh()},"SubmissionSectionSherpaPoliciesComponent_div_1_Template_button_click_5_listener")),core.TgZ(6,"span"),core._UZ(7,"i",7),core._uU(8),core.ALo(9,"translate"),core.qZA()()()()}2&rf&&(core.xp6(1),core.Q6J("type","alert-info"),core.xp6(1),core.hij(" ",core.lcZ(3,3,"submission.sections.sherpa.publisher.policy.description")," "),core.xp6(6),core.hij(" ",core.lcZ(9,5,"submission.sections.sherpa.publisher.policy.refresh")," "))}function SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_span_7_Template(rf,ctx){1&rf&&core._UZ(0,"span",21)}function SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_span_8_Template(rf,ctx){1&rf&&core._UZ(0,"span",22)}function SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_div_12_span_6_Template(rf,ctx){1&rf&&core._UZ(0,"span",21)}function SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_div_12_span_7_Template(rf,ctx){1&rf&&core._UZ(0,"span",22)}function SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_div_12_Template(rf,ctx){if(1&rf){const _r24=core.EpF();core.TgZ(0,"div",10)(1,"div",11),core.NdJ("click",__name(function(){return core.CHM(_r24),core.MAs(9).toggle()},"SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_div_12_Template_div_click_1_listener")),core.TgZ(2,"button",12),core.NdJ("click",__name(function($event){return $event.preventDefault()},"SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_div_12_Template_button_click_2_listener")),core._uU(3),core.ALo(4,"translate"),core.qZA(),core.TgZ(5,"div",13),core.YNc(6,SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_div_12_span_6_Template,1,0,"span",14),core.YNc(7,SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_div_12_span_7_Template,1,0,"span",15),core.qZA()(),core.TgZ(8,"div",16,17),core._UZ(10,"ds-publisher-policy",23),core.qZA()()}if(2&rf){const policy_r18=ctx.$implicit,_r22=core.MAs(9),ctx_r17=core.oxw(4);core.xp6(2),core.uIk("aria-expanded",!_r22.collapsed),core.xp6(1),core.hij(" ",core.lcZ(4,6,"submission.sections.sherpa.publisher.policy")," "),core.xp6(3),core.Q6J("ngIf",_r22.collapsed),core.xp6(1),core.Q6J("ngIf",!_r22.collapsed),core.xp6(1),core.Q6J("ngbCollapse",ctx_r17.isCollapsed),core.xp6(2),core.Q6J("policy",policy_r18)}}function SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf){const _r27=core.EpF();core.ynx(0),core.TgZ(1,"div",10)(2,"div",11),core.NdJ("click",__name(function(){return core.CHM(_r27),core.MAs(10).toggle()},"SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_Template_div_click_2_listener")),core.TgZ(3,"button",12),core.NdJ("click",__name(function($event){return $event.preventDefault()},"SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_Template_button_click_3_listener")),core._uU(4),core.ALo(5,"translate"),core.qZA(),core.TgZ(6,"div",13),core.YNc(7,SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_span_7_Template,1,0,"span",14),core.YNc(8,SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_span_8_Template,1,0,"span",15),core.qZA()(),core.TgZ(9,"div",16,17),core._UZ(11,"ds-publication-information",19),core.qZA()(),core.YNc(12,SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_div_12_Template,11,8,"div",20),core.BQk()}if(2&rf){const journal_r12=ctx.$implicit,_r16=core.MAs(10),ctx_r8=core.oxw(3);core.xp6(3),core.uIk("aria-expanded",!_r16.collapsed),core.xp6(1),core.hij(" ",core.lcZ(5,7,"submission.sections.sherpa.publication.information")," "),core.xp6(3),core.Q6J("ngIf",_r16.collapsed),core.xp6(1),core.Q6J("ngIf",!_r16.collapsed),core.xp6(1),core.Q6J("ngbCollapse",ctx_r8.isCollapsed),core.xp6(2),core.Q6J("journal",journal_r12),core.xp6(1),core.Q6J("ngForOf",journal_r12.policies)}}function SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_span_8_Template(rf,ctx){1&rf&&core._UZ(0,"span",21)}function SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_span_9_Template(rf,ctx){1&rf&&core._UZ(0,"span",22)}function SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_Template(rf,ctx){if(1&rf){const _r30=core.EpF();core.ynx(0),core.YNc(1,SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_Template,13,9,"ng-container",9),core.TgZ(2,"div",10)(3,"div",11),core.NdJ("click",__name(function(){return core.CHM(_r30),core.MAs(11).toggle()},"SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_Template_div_click_3_listener")),core.TgZ(4,"button",12),core.NdJ("click",__name(function($event){return $event.preventDefault()},"SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_Template_button_click_4_listener")),core._uU(5),core.ALo(6,"translate"),core.qZA(),core.TgZ(7,"div",13),core.YNc(8,SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_span_8_Template,1,0,"span",14),core.YNc(9,SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_span_9_Template,1,0,"span",15),core.qZA()(),core.TgZ(10,"div",16,17),core._UZ(12,"ds-metadata-information",18),core.qZA()(),core.BQk()}if(2&rf){const _r11=core.MAs(11),sherpaData_r5=core.oxw().ngVar,ctx_r6=core.oxw();core.xp6(1),core.Q6J("ngForOf",sherpaData_r5.journals),core.xp6(3),core.uIk("aria-expanded",!_r11.collapsed),core.xp6(1),core.hij(" ",core.lcZ(6,7,"submission.sections.sherpa.record.information")," "),core.xp6(3),core.Q6J("ngIf",_r11.collapsed),core.xp6(1),core.Q6J("ngIf",!_r11.collapsed),core.xp6(1),core.Q6J("ngbCollapse",ctx_r6.isCollapsed),core.xp6(2),core.Q6J("metadata",sherpaData_r5.metadata)}}function SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"ds-alert",3),core.ALo(2,"translate"),core.BQk()),2&rf){const sherpaData_r5=core.oxw().ngVar,ctx_r7=core.oxw();core.xp6(1),core.Q6J("type",ctx_r7.AlertTypeEnum.Error)("content",sherpaData_r5.message?sherpaData_r5.message:core.lcZ(2,2,"submission.sections.sherpa.error.message"))}}function SubmissionSectionSherpaPoliciesComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_Template,13,9,"ng-container",8),core.YNc(2,SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_2_Template,3,4,"ng-container",8),core.BQk()),2&rf){const sherpaData_r5=ctx.ngVar,ctx_r2=core.oxw();core.xp6(1),core.Q6J("ngIf",!ctx_r2.hasNoData()&&!!sherpaData_r5&&!sherpaData_r5.error),core.xp6(1),core.Q6J("ngIf",!!sherpaData_r5&&sherpaData_r5.error)}}__name(MetadataInformationComponent,"MetadataInformationComponent"),MetadataInformationComponent.\u0275fac=__name(function(t){return new(t||MetadataInformationComponent)},"MetadataInformationComponent_Factory"),MetadataInformationComponent.\u0275cmp=core.Xpm({type:MetadataInformationComponent,selectors:[["ds-metadata-information"]],inputs:{metadata:"metadata"},decls:5,vars:4,consts:[[1,"ml-4"],["class","row",4,"ngIf"],[1,"row"],[1,"col-4"],[1,"m-1"],[1,"col-8"],["target","_blank",3,"href"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.YNc(1,MetadataInformationComponent_div_1_Template,8,4,"div",1),core.YNc(2,MetadataInformationComponent_div_2_Template,9,7,"div",1),core.YNc(3,MetadataInformationComponent_div_3_Template,9,7,"div",1),core.YNc(4,MetadataInformationComponent_div_4_Template,9,5,"div",1),core.qZA()),2&rf&&(core.xp6(1),core.Q6J("ngIf",!(null==ctx.metadata||!ctx.metadata.id)),core.xp6(1),core.Q6J("ngIf",!(null==ctx.metadata||!ctx.metadata.dateCreated)),core.xp6(1),core.Q6J("ngIf",!(null==ctx.metadata||!ctx.metadata.dateModified)),core.xp6(1),core.Q6J("ngIf",!(null==ctx.metadata||!ctx.metadata.uri)))},"MetadataInformationComponent_Template"),directives:[common.O5],pipes:[ngx_translate_core.X$,common.uU],styles:[""]}),__name(SubmissionSectionSherpaPoliciesComponent_ds_alert_0_Template,"SubmissionSectionSherpaPoliciesComponent_ds_alert_0_Template"),__name(SubmissionSectionSherpaPoliciesComponent_div_1_Template,"SubmissionSectionSherpaPoliciesComponent_div_1_Template"),__name(SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_span_7_Template,"SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_span_7_Template"),__name(SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_span_8_Template,"SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_span_8_Template"),__name(SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_div_12_span_6_Template,"SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_div_12_span_6_Template"),__name(SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_div_12_span_7_Template,"SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_div_12_span_7_Template"),__name(SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_div_12_Template,"SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_div_12_Template"),__name(SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_Template,"SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_ng_container_1_Template"),__name(SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_span_8_Template,"SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_span_8_Template"),__name(SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_span_9_Template,"SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_span_9_Template"),__name(SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_Template,"SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_1_Template"),__name(SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_2_Template,"SubmissionSectionSherpaPoliciesComponent_ng_container_2_ng_container_2_Template"),__name(SubmissionSectionSherpaPoliciesComponent_ng_container_2_Template,"SubmissionSectionSherpaPoliciesComponent_ng_container_2_Template");let SubmissionSectionSherpaPoliciesComponent=__name(class extends SectionModelComponent{constructor(sectionService,operationsBuilder,submissionService,injectedSectionData,injectedSubmissionId){super(void 0,injectedSectionData,injectedSubmissionId),this.sectionService=sectionService,this.operationsBuilder=operationsBuilder,this.submissionService=submissionService,this.injectedSectionData=injectedSectionData,this.injectedSubmissionId=injectedSubmissionId,this.sherpaPoliciesData$=new cjs.BehaviorSubject(null),this.subs=[],this.isCollapsed=!1,this.AlertTypeEnum=aletr_type.N}onSectionDestroy(){this.subs.filter(subscription=>(0,empty_util.Uh)(subscription)).forEach(subscription=>subscription.unsubscribe())}onSectionInit(){this.pathCombiner=new json_patch_operation_path_combiner.K("sections",this.sectionData.id),this.subs.push(this.sectionService.getSectionData(this.submissionId,this.sectionData.id,this.sectionData.sectionType).subscribe(sherpaPolicies=>{this.sherpaPoliciesData$.next(sherpaPolicies)}))}getSectionStatus(){return(0,cjs.of)(!0)}hasNoData(){return(0,empty_util.xb)(this.sherpaPoliciesData$.value)}refresh(){this.operationsBuilder.remove(this.pathCombiner.getPath("retrievalTime")),this.submissionService.dispatchSaveSection(this.submissionId,this.sectionData.id)}},"SubmissionSectionSherpaPoliciesComponent");SubmissionSectionSherpaPoliciesComponent.\u0275fac=__name(function(t){return new(t||SubmissionSectionSherpaPoliciesComponent)(core.Y36(sections_service.J),core.Y36(json_patch_operations_builder.w),core.Y36(submission_service.b),core.Y36("sectionDataProvider"),core.Y36("submissionIdProvider"))},"SubmissionSectionSherpaPoliciesComponent_Factory"),SubmissionSectionSherpaPoliciesComponent.\u0275cmp=core.Xpm({type:SubmissionSectionSherpaPoliciesComponent,selectors:[["ds-section-sherpa-policies"]],features:[core.qOj],decls:4,vars:5,consts:[[3,"type","content",4,"ngIf"],["class","d-flex flex-column flex-nowrap mt-2 mb-4",4,"ngIf"],[4,"ngVar"],[3,"type","content"],[1,"d-flex","flex-column","flex-nowrap","mt-2","mb-4"],[3,"type"],["type","button","data-test","refresh-btn",1,"btn","btn-secondary","float-right",3,"click"],[1,"fas","fa-sync"],[4,"ngIf"],[4,"ngFor","ngForOf"],["data-test","collapse",1,"mb-3","border-bottom"],[1,"w-100","d-flex","justify-content-between","collapse-toggle","mb-3",3,"click"],["type","button","aria-controls","collapseExample",1,"btn","btn-link","p-0",3,"click"],[1,"d-inline-block"],["class","fas fa-chevron-down",4,"ngIf"],["class","fas fa-chevron-up",4,"ngIf"],[3,"ngbCollapse"],["collapse","ngbCollapse"],[3,"metadata"],[3,"journal"],["class","mb-3 border-bottom","data-test","collapse",4,"ngFor","ngForOf"],[1,"fas","fa-chevron-down"],[1,"fas","fa-chevron-up"],[3,"policy"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,SubmissionSectionSherpaPoliciesComponent_ds_alert_0_Template,1,2,"ds-alert",0),core.YNc(1,SubmissionSectionSherpaPoliciesComponent_div_1_Template,10,7,"div",1),core.YNc(2,SubmissionSectionSherpaPoliciesComponent_ng_container_2_Template,3,2,"ng-container",2),core.ALo(3,"async")),2&rf){let tmp_2_0;core.Q6J("ngIf",ctx.hasNoData()),core.xp6(1),core.Q6J("ngIf",!ctx.hasNoData()),core.xp6(1),core.Q6J("ngVar",null==(tmp_2_0=core.lcZ(3,3,ctx.sherpaPoliciesData$))?null:tmp_2_0.sherpaResponse)}},"SubmissionSectionSherpaPoliciesComponent_Template"),directives:[common.O5,alert_component.w,var_directive.g,common.sg,ng_bootstrap._D,PublicationInformationComponent,PublisherPolicyComponent,MetadataInformationComponent],pipes:[ngx_translate_core.X$,common.Ov],styles:[""]}),SubmissionSectionSherpaPoliciesComponent=(0,tslib_es6.__decorate)([(0,sections_decorator.E)(sections_type.i.SherpaPolicies),(0,tslib_es6.__metadata)("design:paramtypes",[sections_service.J,json_patch_operations_builder.w,submission_service.b,Object,String])],SubmissionSectionSherpaPoliciesComponent);const ENTRY_COMPONENTS=[SubmissionSectionUploadComponent,SubmissionSectionFormComponent,SubmissionSectionLicenseComponent,SubmissionSectionCcLicensesComponent,SubmissionSectionAccessesComponent,SubmissionSectionSherpaPoliciesComponent];sections_directive.y,submission_edit_component.SubmissionEditComponent,themed_submission_edit_component.I,submission_form_section_add_component.i,submission_form_collection_component.z,submission_form_component.G,submission_form_footer_component.z,submission_submit_component.SubmissionSubmitComponent,themed_submission_submit_component.Y,submission_upload_files_component.h,section_container_component.y,submission_import_external_component.SubmissionImportExternalComponent,themed_submission_import_external_component.i,submission_import_external_searchbar_component.p,submission_import_external_preview_component.v,submission_import_external_collection_component.L;class SubmissionModule{static withEntryComponents(){return{ngModule:SubmissionModule,providers:ENTRY_COMPONENTS.map(component=>({provide:component}))}}}__name(SubmissionModule,"SubmissionModule"),SubmissionModule.\u0275fac=__name(function(t){return new(t||SubmissionModule)},"SubmissionModule_Factory"),SubmissionModule.\u0275mod=core.oAB({type:SubmissionModule}),SubmissionModule.\u0275inj=core.cJS({providers:[SectionUploadService,sections_service.J,SubmissionUploadsConfigDataService,SubmissionAccessesConfigDataService,SectionAccessesService],imports:[[common.ez,core_module.IR.forRoot(),shared_module.m,ngrx_store.Aw.forFeature("submission",submission_reducers.L,app_reducer.z7),ngrx_effects.sQ.forFeature(submissionEffects),journal_entities_module.x.withEntryComponents(),research_entities_module.a.withEntryComponents(),form_module.e,ng_bootstrap.bz,ng_bootstrap.lQ,ng_bootstrap.Gs]]}),core.B6R(SubmissionSectionUploadComponent,[alert_component.w,common.O5,SubmissionSectionUploadAccessConditionsComponent,common.sg,SubmissionSectionUploadFileComponent],[ngx_translate_core.X$,common.Ov])},26098:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SubmissionSubmitComponent:()=>SubmissionSubmitComponent});var rxjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(39942),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5796),_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(25839),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(16228),_submission_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(83653),_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(63281),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(89551),_angular_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(70074),_angular_router__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(37895),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(47241);class SubmissionSubmitComponent{constructor(changeDetectorRef,notificationsService,router,itemDataService,submissionService,translate,viewContainerRef,route){this.changeDetectorRef=changeDetectorRef,this.notificationsService=notificationsService,this.router=router,this.itemDataService=itemDataService,this.submissionService=submissionService,this.translate=translate,this.viewContainerRef=viewContainerRef,this.route=route,this.itemLink$=new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject(void 0),this.subs=[],this.route.queryParams.subscribe(params=>{this.collectionParam=params.collection})}ngOnInit(){this.subs.push(this.submissionService.createSubmission(this.collectionParam).subscribe(submissionObject=>{(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.K0)(submissionObject)&&((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.xb)(submissionObject)?(this.notificationsService.info(null,this.translate.get("submission.general.cannot_submit")),this.router.navigate(["/mydspace"])):this.router.navigate(["/workspaceitems",submissionObject.id,"edit"],{replaceUrl:!0}))}),this.itemLink$.pipe((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.iy)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.wt)(itemLink=>this.itemDataService.findByHref(itemLink)),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.g1)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.bh)(300)).subscribe(itemRd=>{this.item=itemRd.payload,this.changeDetectorRef.detectChanges()}))}ngOnDestroy(){this.subs.filter(subscription=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_5__.Uh)(subscription)).forEach(subscription=>subscription.unsubscribe()),this.viewContainerRef.clear(),this.changeDetectorRef.markForCheck()}}__name(SubmissionSubmitComponent,"SubmissionSubmitComponent"),SubmissionSubmitComponent.\u0275fac=__name(function(t){return new(t||SubmissionSubmitComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_7__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_7__.sBO),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Y36(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__.T),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_8__.F0),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Y36(_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_3__.S),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Y36(_submission_service__WEBPACK_IMPORTED_MODULE_1__.b),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Y36(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__.sK),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_7__.s_b),_angular_core__WEBPACK_IMPORTED_MODULE_7__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_8__.gz))},"SubmissionSubmitComponent_Factory"),SubmissionSubmitComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_7__.Xpm({type:SubmissionSubmitComponent,selectors:[["ds-submission-submit"]],decls:0,vars:0,template:__name(function(rf,ctx){},"SubmissionSubmitComponent_Template"),styles:[""]})},68457:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Y:()=>ThemedSubmissionSubmitComponent});var _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(46533),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(70074);function ThemedSubmissionSubmitComponent_ng_template_0_Template(rf,ctx){}__name(ThemedSubmissionSubmitComponent_ng_template_0_Template,"ThemedSubmissionSubmitComponent_ng_template_0_Template");class ThemedSubmissionSubmitComponent extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_0__.F{getComponentName(){return"SubmissionSubmitComponent"}importThemedComponent(themeName){return __webpack_require__(39881)(`./${themeName}/app/submission/submit/submission-submit.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,26098))}}__name(ThemedSubmissionSubmitComponent,"ThemedSubmissionSubmitComponent"),ThemedSubmissionSubmitComponent.\u0275fac=function(){let \u0275ThemedSubmissionSubmitComponent_BaseFactory;return __name(function(t){return(\u0275ThemedSubmissionSubmitComponent_BaseFactory||(\u0275ThemedSubmissionSubmitComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_1__.n5z(ThemedSubmissionSubmitComponent)))(t||ThemedSubmissionSubmitComponent)},"ThemedSubmissionSubmitComponent_Factory")}(),ThemedSubmissionSubmitComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Xpm({type:ThemedSubmissionSubmitComponent,selectors:[["ds-themed-submission-submit"]],features:[_angular_core__WEBPACK_IMPORTED_MODULE_1__.qOj],decls:2,vars:0,consts:[["vcr",""]],template:__name(function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.YNc(0,ThemedSubmissionSubmitComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.W1O)},"ThemedSubmissionSubmitComponent_Template"),encapsulation:2})},66660:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _shared_empty_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(25839);const regex=/([^\/]+)/g,regexShort=/\/sections\/(.*)/,__WEBPACK_DEFAULT_EXPORT__=__name(path=>("string"==typeof path?[path]:path).map(item=>item.match(regex)&&item.match(regex).length>2?{sectionId:item.match(regex)[1],fieldId:item.match(regex)[2],fieldIndex:(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_0__.Uh)(item.match(regex)[3])?+item.match(regex)[3]:0,originalPath:item}:{sectionId:item.match(regexShort)[1],originalPath:item}),"parseSectionErrorPaths")},60516:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _parseSectionErrorPaths__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(66660);const __WEBPACK_DEFAULT_EXPORT__=__name((errors=[])=>{const errorsList=Object.create({});return errors.forEach(error=>{(0,_parseSectionErrorPaths__WEBPACK_IMPORTED_MODULE_0__.Z)(error.paths).forEach(path=>{const sectionError={path:path.originalPath,message:error.message};errorsList[path.sectionId]||(errorsList[path.sectionId]=[]),errorsList[path.sectionId].push(sectionError)})}),errorsList},"parseSectionErrors")},71116:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{WorkspaceitemsEditPageModule:()=>WorkspaceitemsEditPageModule});var common=__webpack_require__(10210),shared_module=__webpack_require__(66004),router=__webpack_require__(37895),authenticated_guard=__webpack_require__(54818),themed_submission_edit_component=__webpack_require__(14530),i18n_breadcrumb_resolver=__webpack_require__(64561),themed_full_item_page_component=__webpack_require__(7595),submission_object_resolver=__webpack_require__(94650),workspaceitem_data_service=__webpack_require__(58686),core=__webpack_require__(70074),ngrx_store=__webpack_require__(93179);class ItemFromWorkspaceResolver extends submission_object_resolver.m{constructor(workspaceItemService,store){super(workspaceItemService,store),this.workspaceItemService=workspaceItemService,this.store=store}}__name(ItemFromWorkspaceResolver,"ItemFromWorkspaceResolver"),ItemFromWorkspaceResolver.\u0275fac=__name(function(t){return new(t||ItemFromWorkspaceResolver)(core.LFG(workspaceitem_data_service.p),core.LFG(ngrx_store.yh))},"ItemFromWorkspaceResolver_Factory"),ItemFromWorkspaceResolver.\u0275prov=core.Yz7({token:ItemFromWorkspaceResolver,factory:ItemFromWorkspaceResolver.\u0275fac});var follow_link_config_model=__webpack_require__(8183),operators=__webpack_require__(63281);class WorkspaceItemPageResolver{constructor(workspaceItemService){this.workspaceItemService=workspaceItemService}resolve(route,state){return this.workspaceItemService.findById(route.params.id,!0,!1,(0,follow_link_config_model.l)("item")).pipe((0,operators.hC)())}}__name(WorkspaceItemPageResolver,"WorkspaceItemPageResolver"),WorkspaceItemPageResolver.\u0275fac=__name(function(t){return new(t||WorkspaceItemPageResolver)(core.LFG(workspaceitem_data_service.p))},"WorkspaceItemPageResolver_Factory"),WorkspaceItemPageResolver.\u0275prov=core.Yz7({token:WorkspaceItemPageResolver,factory:WorkspaceItemPageResolver.\u0275fac});class WorkspaceitemsEditPageRoutingModule{}__name(WorkspaceitemsEditPageRoutingModule,"WorkspaceitemsEditPageRoutingModule"),WorkspaceitemsEditPageRoutingModule.\u0275fac=__name(function(t){return new(t||WorkspaceitemsEditPageRoutingModule)},"WorkspaceitemsEditPageRoutingModule_Factory"),WorkspaceitemsEditPageRoutingModule.\u0275mod=core.oAB({type:WorkspaceitemsEditPageRoutingModule}),WorkspaceitemsEditPageRoutingModule.\u0275inj=core.cJS({providers:[WorkspaceItemPageResolver,ItemFromWorkspaceResolver],imports:[[router.Bz.forChild([{path:"",redirectTo:"/home",pathMatch:"full"},{path:":id",resolve:{wsi:WorkspaceItemPageResolver},children:[{canActivate:[authenticated_guard.J],path:"edit",component:themed_submission_edit_component.I,resolve:{breadcrumb:i18n_breadcrumb_resolver.t},data:{title:"submission.edit.title",breadcrumbKey:"submission.edit"}},{canActivate:[authenticated_guard.J],path:"view",component:themed_full_item_page_component.B,resolve:{dso:ItemFromWorkspaceResolver,breadcrumb:i18n_breadcrumb_resolver.t},data:{title:"workspace-item.view.title",breadcrumbKey:"workspace-item.view"}}]}])]]});var submission_module=__webpack_require__(10685);class WorkspaceitemsEditPageModule{}__name(WorkspaceitemsEditPageModule,"WorkspaceitemsEditPageModule"),WorkspaceitemsEditPageModule.\u0275fac=__name(function(t){return new(t||WorkspaceitemsEditPageModule)},"WorkspaceitemsEditPageModule_Factory"),WorkspaceitemsEditPageModule.\u0275mod=core.oAB({type:WorkspaceitemsEditPageModule}),WorkspaceitemsEditPageModule.\u0275inj=core.cJS({imports:[[WorkspaceitemsEditPageRoutingModule,common.ez,shared_module.m,submission_module.o]]})},8377:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/submission/edit/submission-edit.component":[959,959],"./gusi/app/submission/edit/submission-edit.component":[42272,2272]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}__name(webpackAsyncContext,"webpackAsyncContext"),webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=8377,module.exports=webpackAsyncContext},43714:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/submission/import-external/submission-import-external.component":[69803,9803],"./gusi/app/submission/import-external/submission-import-external.component":[92661,2661]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}__name(webpackAsyncContext,"webpackAsyncContext"),webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=43714,module.exports=webpackAsyncContext},39881:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/submission/submit/submission-submit.component":[18711,8711],"./gusi/app/submission/submit/submission-submit.component":[70095,95]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}__name(webpackAsyncContext,"webpackAsyncContext"),webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=39881,module.exports=webpackAsyncContext}};