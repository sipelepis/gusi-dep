(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[4970],{43102:(M,k,s)=>{"use strict";s.d(k,{B:()=>u});var l=s(25330),g=s(5e3);function _(f,v){}let u=(()=>{class f extends l.F{getComponentName(){return"FullItemPageComponent"}importThemedComponent(E){return s(6296)(`./${E}/app/item-page/full/full-item-page.component`)}importUnthemedComponent(){return s.e(1317).then(s.bind(s,21317))}}return f.\u0275fac=function(){let v;return function(F){return(v||(v=g.\u0275\u0275getInheritedFactory(f)))(F||f)}}(),f.\u0275cmp=g.\u0275\u0275defineComponent({type:f,selectors:[["ds-themed-full-item-page"]],features:[g.\u0275\u0275InheritDefinitionFeature],decls:2,vars:0,consts:[["vcr",""]],template:function(E,F){1&E&&g.\u0275\u0275template(0,_,0,0,"ng-template",null,0,g.\u0275\u0275templateRefExtractor)},encapsulation:2}),f})()},74970:(M,k,s)=>{"use strict";s.r(k),s.d(k,{ItemPageModule:()=>$i});var l=s(69808),g=s(57981),u=(s(4353),s(74202)),f=s(59508),v=s(74851),E=s(86362),F=s(83639),Ye=s(77284),Je=s(27102),e=s(5e3);let pe=(()=>{class i extends Ye.t{constructor(t,n){super(t,n),this.breadcrumbService=t,this.dataService=n}get followLinks(){return Je.H}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275inject(E.B),e.\u0275\u0275inject(F.S))},i.\u0275prov=e.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var $=s(93369),h=s(68285),qe=s(8136),de=s(6164),et=s(65620);const tt=[(0,$.l)("item")];let me=(()=>{class i{constructor(t,n,o){this.versionService=t,this.store=n,this.router=o}resolve(t,n){const o=this.versionService.findById(t.params.id,!0,!1,...tt).pipe((0,h.hC)());return o.subscribe(a=>{this.store.dispatch(new qe.K(n.url,a.payload))}),o}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275inject(de._),e.\u0275\u0275inject(et.yh),e.\u0275\u0275inject(u.F0))},i.\u0275prov=e.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac}),i})();var nt=s(94476),R=s(39646),C=s(54004),P=s(63900),z=s(95698),it=s(82703),T=s(24702),V=s(24755),G=s(82596),ue=s(11221),ge=s(90697),he=s(62453),rt=s(31241),j=s(50503),A=s(40747),X=s(21540),y=s(86956),fe=s(98605),ot=s(69664),x=s(93075);function at(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"div")(1,"span",6),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext().ngVar;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,2,"item.bitstreams.upload.item")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.name)}}function st(i,r){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,at,6,4,"div",1),e.\u0275\u0275elementContainerEnd()),2&i){const t=r.ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t)}}function lt(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",12),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext(2).createBundle()}),e.\u0275\u0275element(1,"i",13),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()}2&i&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,1,"item.bitstreams.upload.bundle.new")," "))}function ct(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-uploader",14),e.\u0275\u0275listener("onCompleteItem",function(o){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext(2).onCompleteItem(o)})("onUploadError",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext(2).onUploadError()}),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("dropMsg","item.bitstreams.upload.drop-message")("dropOverDocumentMsg","item.bitstreams.upload.drop-message")("enableDragOverDocument",!0)("uploadFilesOptions",t.uploadFilesOptions)}}function pt(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",2)(2,"div",3)(3,"h2"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,st,2,1,"ng-container",4),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",5)(9,"label",6),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"ds-dso-input-suggestions",7,8),e.\u0275\u0275listener("ngModelChange",function(o){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().selectedBundleName=o})("typeSuggestion",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().bundleNameChange()})("clickSuggestion",function(o){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().onClick(o)})("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275reference(13).open()}),e.\u0275\u0275pipe(14,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,lt,4,3,"button",9),e.\u0275\u0275template(16,ct,1,4,"ds-uploader",10),e.\u0275\u0275elementStart(17,"button",11),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().onCancel()}),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=e.\u0275\u0275nextContext();let n;e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,12,"item.bitstreams.upload.title")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngVar",null==(n=e.\u0275\u0275pipeBind1(7,14,t.itemRD$))?null:n.payload),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(11,16,"item.bitstreams.upload.bundle")),e.\u0275\u0275advance(2),e.\u0275\u0275property("suggestions",t.bundles)("placeholder",e.\u0275\u0275pipeBind1(14,18,"item.bitstreams.upload.bundle.placeholder"))("action",t.getCurrentUrl())("name","bundle-select")("debounceTime",50)("ngModel",t.selectedBundleName),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!t.selectedBundleId&&(null==t.selectedBundleName?null:t.selectedBundleName.length)>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.selectedBundleId),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(19,20,"item.bitstreams.upload.cancel"))}}let ve=(()=>{class i{constructor(t,n,o,a,p,d,I,ji){this.route=t,this.router=n,this.itemService=o,this.bundleService=a,this.authService=p,this.notificationsService=d,this.translate=I,this.requestService=ji,this.bundles=[],this.uploadFilesOptions=Object.assign(new it.n,{url:"placeholder",authToken:null,disableMultipart:!1,itemAlias:null}),this.NOTIFICATIONS_PREFIX="item.bitstreams.upload.notifications.",this.subs=[]}ngOnInit(){this.itemId=this.route.snapshot.params.id,this.entityType=this.route.snapshot.params["entity-type"],this.itemRD$=this.route.data.pipe((0,C.U)(n=>n.dso));const t=this.itemService.getBundles(this.itemId).pipe((0,h.hC)(),(0,P.w)(n=>{if(n.hasSucceeded){if(n.payload.page){this.bundles=n.payload.page;for(const o of X.N.bundle.standardBundles){let a=!0;n.payload.page.forEach(p=>{o===p.name&&(a=!1)}),a&&this.bundles.push(Object.assign(new ue.b,{_name:o,type:"bundle"}))}}else this.bundles=X.N.bundle.standardBundles.map(o=>Object.assign(new ue.b,{_name:o,type:"bundle"}));return(0,R.of)(n.payload.page)}}));this.selectedBundleId=this.route.snapshot.queryParams.bundle,(0,T.UE)(this.selectedBundleId)&&(this.subs.push(this.bundleService.findById(this.selectedBundleId).pipe((0,h.Gp)()).subscribe(n=>{this.selectedBundleName=n.name})),this.setUploadUrl()),this.subs.push(t.subscribe())}createBundle(){this.itemService.createBundle(this.itemId,this.selectedBundleName).pipe((0,h.Gp)()).subscribe(t=>{this.selectedBundleId=t.id,this.notificationsService.success(this.translate.instant(this.NOTIFICATIONS_PREFIX+"bundle.created.title"),this.translate.instant(this.NOTIFICATIONS_PREFIX+"bundle.created.content")),this.setUploadUrl()})}bundleNameChange(){this.selectedBundleId=void 0;for(const t of this.bundles)if(this.selectedBundleName===t.name){this.selectedBundleId=t.id;break}}setUploadUrl(){this.bundleService.getBitstreamsEndpoint(this.selectedBundleId).pipe((0,z.q)(1)).subscribe(t=>{this.uploadFilesOptions.url=t,(0,T.xb)(this.uploadFilesOptions.authToken)&&(this.uploadFilesOptions.authToken=this.authService.buildAuthHeader()),this.uploaderComponent&&(this.uploaderComponent.ngOnInit(),this.uploaderComponent.ngAfterViewInit())})}onCompleteItem(t){this.bundleService.getBitstreamsEndpoint(this.selectedBundleId).pipe((0,z.q)(1)).subscribe(o=>{this.requestService.removeByHrefSubstring(o)});const n={itemId:this.itemId,entityType:this.entityType};this.router.navigate([(0,j.IB)(),t.id,"edit"],{queryParams:n})}onUploadError(){this.notificationsService.error(null,this.translate.get(this.NOTIFICATIONS_PREFIX+"upload.failed"))}onClick(t){this.selectedBundleId=t.id,this.selectedBundleName=t.name,t.id&&this.setUploadUrl()}onCancel(){this.router.navigate([(0,A.dZ)(this.entityType,this.itemId),"bitstreams"])}getCurrentUrl(){return this.router.url}ngOnDestroy(){this.subs.filter(t=>(0,T.Uh)(t)).forEach(t=>t.unsubscribe())}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(u.gz),e.\u0275\u0275directiveInject(u.F0),e.\u0275\u0275directiveInject(F.S),e.\u0275\u0275directiveInject(ge.b),e.\u0275\u0275directiveInject(V.e8),e.\u0275\u0275directiveInject(G.T),e.\u0275\u0275directiveInject(y.sK),e.\u0275\u0275directiveInject(rt.s))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ds-upload-bitstream"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(he.B,5),2&t){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.uploaderComponent=o.first)}},decls:2,vars:1,consts:[[1,"container"],[4,"ngIf"],[1,"row"],[1,"col-12","mb-4"],[4,"ngVar"],[1,"col-12"],[1,"font-weight-bold"],["id","search-form","ngDefaultControl","",3,"suggestions","placeholder","action","name","debounceTime","ngModel","ngModelChange","typeSuggestion","clickSuggestion","click"],["f",""],["class","btn btn-success",3,"click",4,"ngIf"],["class","w-100",3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","uploadFilesOptions","onCompleteItem","onUploadError",4,"ngIf"],[1,"btn","btn-outline-secondary",3,"click"],[1,"btn","btn-success",3,"click"],[1,"fa","fa-plus"],[1,"w-100",3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","uploadFilesOptions","onCompleteItem","onUploadError"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,pt,20,22,"ng-container",1),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.bundles))},directives:[l.O5,fe.g,ot.Q,x.Fj,x.JJ,x.On,he.B],pipes:[y.X$,l.Ov],encapsulation:2}),i})();var dt=s(7056),_e=s(25330);function mt(i,r){}let ye=(()=>{class i extends _e.F{getComponentName(){return"ItemPageComponent"}importThemedComponent(t){return s(66137)(`./${t}/app/item-page/simple/item-page.component`)}importUnthemedComponent(){return Promise.resolve().then(s.bind(s,4353))}}return i.\u0275fac=function(){let r;return function(n){return(r||(r=e.\u0275\u0275getInheritedFactory(i)))(n||i)}}(),i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ds-themed-item-page"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:0,consts:[["vcr",""]],template:function(t,n){1&t&&e.\u0275\u0275template(0,mt,0,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)},encapsulation:2}),i})();var xe=s(43102),ut=s(58460),Q=s(12691);let Ce=(()=>{class i{constructor(t,n,o,a){this.route=t,this.router=n,this.versionService=o,this.authService=a}ngOnInit(){this.versionRD$=this.route.data.pipe((0,C.U)(t=>t.dso),(0,Q.Gh)(this.router,this.authService)),this.versionRD$.pipe((0,h.Gp)(),(0,P.w)(t=>t.item),(0,Q.Gh)(this.router,this.authService),(0,h.hC)()).subscribe(t=>{if(t.hasNoContent)this.router.navigateByUrl((0,j.ro)(),{skipLocationChange:!0});else{const n=(0,A.Tt)(t.payload);this.router.navigateByUrl(n)}})}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(u.gz),e.\u0275\u0275directiveInject(u.F0),e.\u0275\u0275directiveInject(de._),e.\u0275\u0275directiveInject(V.e8))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ds-version-page"]],decls:0,vars:0,template:function(t,n){},styles:[""]}),i})();var gt=s(89414),w=s(61135),Z=s(39841),W=s(50672),we=s(45863),U=s(38605),ht=s(13465),ft=s(33609);function vt(i,r){1&i&&e.\u0275\u0275elementContainer(0)}function _t(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"li",19),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&i){const t=r.$implicit,n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,n.getAuthorizationDescription(t))," ")}}function yt(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"div",16)(1,"div",8)(2,"div",9),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",10)(6,"div",17)(7,"ul"),e.\u0275\u0275template(8,_t,3,3,"li",18),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275elementEnd()()()()()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,2,"person.page.orcid.granted-authorizations")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(9,4,t.getOrcidAuthorizations()))}}function xt(i,r){1&i&&(e.\u0275\u0275elementStart(0,"ds-alert",20),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&i&&(e.\u0275\u0275property("type","alert-success"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"person.page.orcid.no-missing-authorizations-message")," "))}function Ct(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"li",23),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&i){const t=r.$implicit,n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,n.getAuthorizationDescription(t))," ")}}function wt(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"ds-alert",21),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementStart(3,"ul"),e.\u0275\u0275template(4,Ct,3,3,"li",22),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("type","alert-warning"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,3,"person.page.orcid.missing-authorizations-message")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(5,5,t.getMissingOrcidAuthorizations()))}}function bt(i,r){1&i&&(e.\u0275\u0275elementStart(0,"ds-alert",24),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&i&&(e.\u0275\u0275property("type","alert-warning"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"person.page.orcid.remove-orcid-message")," "))}function It(i,r){1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275element(1,"i",30),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()),2&i&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,1,"person.page.orcid.unlink"),""))}function Ot(i,r){1&i&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275element(1,"i",31),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()),2&i&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,1,"person.page.orcid.unlink.processing"),""))}function St(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext(3).linkOrcid()}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275element(2,"i",33),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()}2&i&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,1,"person.page.orcid.grant-authorizations"),""))}function Pt(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",25)(1,"div",26)(2,"button",27),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext(2).unlinkOrcid()}),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275template(4,It,4,3,"span",28),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275template(6,Ot,4,3,"span",28),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,St,5,3,"button",29),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275elementEnd()()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(3,4,t.unlinkProcessing)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(5,6,t.unlinkProcessing)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(7,8,t.unlinkProcessing)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(9,10,t.hasMissingOrcidAuthorizations()))}}function Tt(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"div",4)(1,"div",5),e.\u0275\u0275template(2,yt,10,6,"div",6),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275elementStart(4,"div",7)(5,"div",8)(6,"div",9),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",10)(10,"div",11),e.\u0275\u0275template(11,xt,3,4,"ds-alert",12),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275template(13,wt,6,7,"ds-alert",13),e.\u0275\u0275pipe(14,"async"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275template(15,bt,3,4,"ds-alert",14),e.\u0275\u0275pipe(16,"async"),e.\u0275\u0275pipe(17,"async"),e.\u0275\u0275template(18,Pt,10,12,"div",15),e.\u0275\u0275pipe(19,"async"),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(3,6,t.hasOrcidAuthorizations())),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(8,8,"person.page.orcid.missing-authorizations")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(12,10,t.hasMissingOrcidAuthorizations())),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(14,12,t.hasMissingOrcidAuthorizations())),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(16,14,t.onlyAdminCanDisconnectProfileFromOrcid())&&!e.\u0275\u0275pipeBind1(17,16,t.ownerCanDisconnectProfileFromOrcid())),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(19,18,t.ownerCanDisconnectProfileFromOrcid()))}}function Mt(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",34)(1,"div",5)(2,"div",35),e.\u0275\u0275element(3,"img",36),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",26)(5,"ds-alert",37),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",5)(9,"div",26)(10,"button",38),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().linkOrcid()}),e.\u0275\u0275element(11,"i",39),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275elementEnd()()()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("type","alert-info"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(7,3,t.getOrcidNotLinkedMessage())),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(13,5,"person.page.orcid.link")," ")}}let be=(()=>{class i{constructor(t,n,o,a){this.orcidAuthService=t,this.translateService=n,this.notificationsService=o,this._window=a,this.profileAuthorizationScopes=new w.X([]),this.missingAuthorizationScopes=new w.X([]),this.orcidAuthorizationScopes=new w.X([]),this.unlinkProcessing=new w.X(!1),this.isOrcidLinked$=new w.X(!1),this.onlyAdminCanDisconnectProfileFromOrcid$=new w.X(!1),this.ownerCanDisconnectProfileFromOrcid$=new w.X(!1),this.unlink=new e.EventEmitter}ngOnInit(){this.orcidAuthService.getOrcidAuthorizationScopes().subscribe(t=>{this.orcidAuthorizationScopes.next(t),this.initOrcidAuthSettings()})}ngOnChanges(t){!t.item.isFirstChange()&&t.item.currentValue!==t.item.previousValue&&this.initOrcidAuthSettings()}hasOrcidAuthorizations(){return this.profileAuthorizationScopes.asObservable().pipe((0,C.U)(t=>t.length>0))}getOrcidAuthorizations(){return this.profileAuthorizationScopes.asObservable()}hasMissingOrcidAuthorizations(){return this.missingAuthorizationScopes.asObservable().pipe((0,C.U)(t=>t.length>0))}getMissingOrcidAuthorizations(){return this.profileAuthorizationScopes.asObservable()}isLinkedToOrcid(){return this.isOrcidLinked$.asObservable()}getOrcidNotLinkedMessage(){const t=this.item.firstMetadataValue("person.identifier.orcid");return t?this.translateService.get("person.page.orcid.orcid-not-linked-message",{orcid:t}):this.translateService.get("person.page.orcid.no-orcid-message")}getAuthorizationDescription(t){return"person.page.orcid.scope."+t.substring(1).replace("/","-")}onlyAdminCanDisconnectProfileFromOrcid(){return this.onlyAdminCanDisconnectProfileFromOrcid$.asObservable()}ownerCanDisconnectProfileFromOrcid(){return this.ownerCanDisconnectProfileFromOrcid$.asObservable()}linkOrcid(){this.orcidAuthService.getOrcidAuthorizeUrl(this.item).subscribe(t=>{this._window.nativeWindow.location.href=t})}unlinkOrcid(){this.unlinkProcessing.next(!0),this.orcidAuthService.unlinkOrcidByItem(this.item).pipe((0,h.hC)()).subscribe(t=>{this.unlinkProcessing.next(!1),t.isSuccess?(this.notificationsService.success(this.translateService.get("person.page.orcid.unlink.success")),this.unlink.emit()):this.notificationsService.error(this.translateService.get("person.page.orcid.unlink.error"))})}initOrcidAuthSettings(){this.setOrcidAuthorizationsFromItem(),this.setMissingOrcidAuthorizations(),this.orcidAuthService.onlyAdminCanDisconnectProfileFromOrcid().subscribe(t=>{this.onlyAdminCanDisconnectProfileFromOrcid$.next(t)}),this.orcidAuthService.ownerCanDisconnectProfileFromOrcid().subscribe(t=>{this.ownerCanDisconnectProfileFromOrcid$.next(t)}),this.isOrcidLinked$.next(this.orcidAuthService.isLinkedToOrcid(this.item))}setMissingOrcidAuthorizations(){const t=this.orcidAuthService.getOrcidAuthorizationScopesByItem(this.item),o=this.orcidAuthorizationScopes.value.filter(a=>!t.includes(a));this.missingAuthorizationScopes.next(o)}setOrcidAuthorizationsFromItem(){this.profileAuthorizationScopes.next(this.orcidAuthService.getOrcidAuthorizationScopesByItem(this.item))}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(W.m),e.\u0275\u0275directiveInject(y.sK),e.\u0275\u0275directiveInject(G.T),e.\u0275\u0275directiveInject(ht.DC))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ds-orcid-auth"]],inputs:{item:"item"},outputs:{unlink:"unlink"},features:[e.\u0275\u0275NgOnChangesFeature],decls:10,vars:8,consts:[[1,"container","mb-5"],[4,"ngIf","ngIfThen","ngIfElse"],["orcidLinked",""],["orcidNotLinked",""],["data-test","orcidLinked"],[1,"row"],["class","col-sm-6 mb-3","data-test","hasOrcidAuthorizations",4,"ngIf"],[1,"col-sm-6","mb-3"],[1,"card","h-100"],[1,"card-header"],[1,"card-body"],[1,"container"],["data-test","noMissingOrcidAuthorizations",3,"type",4,"ngIf"],["data-test","missingOrcidAuthorizations",3,"type",4,"ngIf"],["data-test","unlinkOnlyAdmin",3,"type",4,"ngIf"],["class","row","data-test","unlinkOwner",4,"ngIf"],["data-test","hasOrcidAuthorizations",1,"col-sm-6","mb-3"],[1,"container","p-0"],["data-test","orcidAuthorization",4,"ngFor","ngForOf"],["data-test","orcidAuthorization"],["data-test","noMissingOrcidAuthorizations",3,"type"],["data-test","missingOrcidAuthorizations",3,"type"],["data-test","missingOrcidAuthorization",4,"ngFor","ngForOf"],["data-test","missingOrcidAuthorization"],["data-test","unlinkOnlyAdmin",3,"type"],["data-test","unlinkOwner",1,"row"],[1,"col"],["type","submit",1,"btn","btn-danger","float-right",3,"disabled","click"],[4,"ngIf"],["type","submit","class","btn btn-primary float-right",3,"click",4,"ngIf"],[1,"fas","fa-unlink"],[1,"fas","fa-circle-notch","fa-spin"],["type","submit",1,"btn","btn-primary","float-right",3,"click"],[1,"fas","fa-check"],["data-test","orcidNotLinked"],[1,"col-2"],["alt","orcid-logo","src","../../../../assets/images/orcid.logo.icon.svg"],[3,"type"],[1,"btn","btn-primary","float-right",3,"click"],[1,"fas","fa-link"]],template:function(t,n){if(1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"h2"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,vt,1,0,"ng-container",1),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,Tt,20,20,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(8,Mt,14,7,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)),2&t){const o=e.\u0275\u0275reference(7),a=e.\u0275\u0275reference(9);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,4,"person.orcid.registry.auth")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(5,6,n.isLinkedToOrcid()))("ngIfThen",o)("ngIfElse",a)}},directives:[l.O5,l.sg,U.w],pipes:[y.X$,l.Ov],styles:[""]}),i})();var kt=s(96577);function Et(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"option",24),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&i){const t=r.$implicit;e.\u0275\u0275property("value",t.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,2,t.label))}}function Ft(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",25)(1,"input",26),e.\u0275\u0275listener("ngModelChange",function(o){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().currentSyncPublications=o}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"label",27),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()}if(2&i){const t=r.$implicit,n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("id","publicationOption_",t.value,""),e.\u0275\u0275property("ngModel",n.currentSyncPublications)("value",t.value),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("for","publicationOption_",t.value,""),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,5,t.label))}}function At(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",25)(1,"input",28),e.\u0275\u0275listener("ngModelChange",function(o){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().currentSyncFunding=o}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"label",27),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()}if(2&i){const t=r.$implicit,n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("id","fundingOption_",t.value,""),e.\u0275\u0275property("ngModel",n.currentSyncFunding)("value",t.value),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("for","fundingOption_",t.value,""),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,5,t.label))}}function Nt(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",25)(1,"input",29),e.\u0275\u0275listener("ngModelChange",function(o){return e.\u0275\u0275restoreView(t).$implicit.checked=o}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"label",27),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()}if(2&i){const t=r.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("name","syncProfile_",t.value,"")("id","profileOption_",t.value,""),e.\u0275\u0275property("ngModel",t.checked)("value",t.value),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("for","profileOption_",t.value,""),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,6,t.label))}}let Ie=(()=>{class i{constructor(t,n,o){this.researcherProfileService=t,this.notificationsService=n,this.translateService=o,this.messagePrefix="person.page.orcid",this.settingsUpdated=new e.EventEmitter}ngOnInit(){this.syncModes=[{label:this.messagePrefix+".synchronization-mode.batch",value:"BATCH"},{label:this.messagePrefix+".synchronization-mode.manual",value:"MANUAL"}],this.syncPublicationOptions=["DISABLED","ALL"].map(n=>({label:this.messagePrefix+".sync-publications."+n.toLowerCase(),value:n})),this.syncFundingOptions=["DISABLED","ALL"].map(n=>({label:this.messagePrefix+".sync-fundings."+n.toLowerCase(),value:n}));const t=this.item.allMetadataValues("dspace.orcid.sync-profile");this.syncProfileOptions=["BIOGRAPHICAL","IDENTIFIERS"].map(n=>({label:this.messagePrefix+".sync-profile."+n.toLowerCase(),value:n,checked:t.includes(n)})),this.currentSyncMode=this.getCurrentPreference("dspace.orcid.sync-mode",["BATCH","MANUAL"],"MANUAL"),this.currentSyncPublications=this.getCurrentPreference("dspace.orcid.sync-publications",["DISABLED","ALL"],"DISABLED"),this.currentSyncFunding=this.getCurrentPreference("dspace.orcid.sync-fundings",["DISABLED","ALL"],"DISABLED")}onSubmit(t){const n=[];this.fillOperationsFor(n,"/orcid/mode",t.value.syncMode),this.fillOperationsFor(n,"/orcid/publications",t.value.syncPublications),this.fillOperationsFor(n,"/orcid/fundings",t.value.syncFundings);const o=this.syncProfileOptions.map(a=>a.value).filter(a=>t.value["syncProfile_"+a]).join(",");this.fillOperationsFor(n,"/orcid/profile",o),0!==n.length&&this.researcherProfileService.findByRelatedItem(this.item).pipe((0,h.hC)(),(0,P.w)(a=>a.hasSucceeded?this.researcherProfileService.patch(a.payload,n).pipe((0,h.hC)()):(0,R.of)(a))).subscribe(a=>{a.isSuccess?(this.notificationsService.success(this.translateService.get(this.messagePrefix+".synchronization-settings-update.success")),this.settingsUpdated.emit()):this.notificationsService.error(this.translateService.get(this.messagePrefix+".synchronization-settings-update.error"))})}getCurrentPreference(t,n,o){const a=this.item.firstMetadataValue(t);return a&&n.includes(a)?a:o}fillOperationsFor(t,n,o){t.push({path:n,op:"replace",value:o})}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(kt.E),e.\u0275\u0275directiveInject(G.T),e.\u0275\u0275directiveInject(y.sK))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ds-orcid-sync-setting"]],inputs:{item:"item"},outputs:{settingsUpdated:"settingsUpdated"},decls:70,vars:42,consts:[[1,"container","mb-5"],[3,"ngSubmit"],["f","ngForm"],[1,"row","mb-3"],[1,"col-md"],["data-test","sync-mode",1,"card"],[1,"card-header"],[1,"card-body"],[1,"container"],[1,"row"],[3,"type"],[1,"form-group","row"],["for","syncMode"],["name","syncMode","id","syncMode","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md","mb-3"],["data-test","sync-mode-publication",1,"card","h-100"],[1,"form-group"],["class","row form-check",4,"ngFor","ngForOf"],["data-test","sync-mode-funding",1,"card","h-100"],["data-test","profile-preferences",1,"card","h-100"],[1,"col"],["type","submit",1,"btn","btn-primary","float-right"],[1,"fas","fa-edit"],[3,"value"],[1,"row","form-check"],["type","radio","name","syncPublications","required","",3,"ngModel","id","value","ngModelChange"],[1,"ml-2",3,"for"],["type","radio","name","syncFundings","required","",3,"ngModel","id","value","ngModelChange"],["type","checkbox",3,"ngModel","name","id","value","ngModelChange"]],template:function(t,n){if(1&t){const o=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0)(1,"h2"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"form",1,2),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(o);const p=e.\u0275\u0275reference(5);return n.onSubmit(p.form)}),e.\u0275\u0275elementStart(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",7)(13,"div",8)(14,"div",9)(15,"ds-alert",10),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"div",11)(19,"label",12),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"select",13),e.\u0275\u0275listener("ngModelChange",function(p){return n.currentSyncMode=p}),e.\u0275\u0275template(23,Et,3,4,"option",14),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(24,"div",9)(25,"div",15)(26,"div",16)(27,"div",6),e.\u0275\u0275text(28),e.\u0275\u0275pipe(29,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",7)(31,"div",8)(32,"div",9)(33,"ds-alert",10),e.\u0275\u0275text(34),e.\u0275\u0275pipe(35,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"div",17),e.\u0275\u0275template(37,Ft,5,7,"div",18),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(38,"div",15)(39,"div",19)(40,"div",6),e.\u0275\u0275text(41),e.\u0275\u0275pipe(42,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(43,"div",7)(44,"div",8)(45,"div",9)(46,"ds-alert",10),e.\u0275\u0275text(47),e.\u0275\u0275pipe(48,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(49,"div",17),e.\u0275\u0275template(50,At,5,7,"div",18),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(51,"div",15)(52,"div",20)(53,"div",6),e.\u0275\u0275text(54),e.\u0275\u0275pipe(55,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(56,"div",7)(57,"div",8)(58,"div",9)(59,"ds-alert",10),e.\u0275\u0275text(60),e.\u0275\u0275pipe(61,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(62,"div",17),e.\u0275\u0275template(63,Nt,5,8,"div",18),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(64,"div",9)(65,"div",21)(66,"button",22),e.\u0275\u0275element(67,"i",23),e.\u0275\u0275text(68),e.\u0275\u0275pipe(69,"translate"),e.\u0275\u0275elementEnd()()()()()}2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,20,"person.orcid.sync.setting")),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(11,22,"person.page.orcid.synchronization-mode")),e.\u0275\u0275advance(5),e.\u0275\u0275property("type","alert-info"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(17,24,"person.page.orcid.synchronization-mode-message")," "),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(21,26,"person.page.orcid.synchronization-mode.label")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",n.currentSyncMode),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.syncModes),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(29,28,"person.page.orcid.publications-preferences")),e.\u0275\u0275advance(5),e.\u0275\u0275property("type","alert-info"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(35,30,"person.page.orcid.synchronization-mode-publication-message")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",n.syncPublicationOptions),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(42,32,"person.page.orcid.funding-preferences")),e.\u0275\u0275advance(5),e.\u0275\u0275property("type","alert-info"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(48,34,"person.page.orcid.synchronization-mode-funding-message")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",n.syncFundingOptions),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(55,36,"person.page.orcid.profile-preferences")),e.\u0275\u0275advance(5),e.\u0275\u0275property("type","alert-info"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(61,38,"person.page.orcid.synchronization-mode-profile-message")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",n.syncProfileOptions),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(69,40,"person.page.orcid.save.preference.changes")," "))},directives:[x._Y,x.JL,x.F,U.w,x.EJ,x.Q7,x.JJ,x.On,l.sg,x.YN,x.Kr,x._,x.Fj,x.Wl],pipes:[y.X$],styles:[""]}),i})();var Bt=s(78372),zt=s(71884),Vt=s(18505),Lt=s(71537),Dt=s(12486),Rt=s(77467),Gt=s(4177),Ut=s(74711),Ht=s(62697),N=s(17656);function $t(i,r){1&i&&e.\u0275\u0275element(0,"ds-loading")}function jt(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"ds-alert",4),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("type",t.AlertTypeEnum.Info),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"person.page.orcid.sync-queue.empty-message")," ")}}function Xt(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",10)(1,"td",11),e.\u0275\u0275element(2,"i",12),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td",8),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td",13)(7,"div",14)(8,"button",15),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext(2).send(a)}),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275element(10,"i",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"button",17),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext(2).discardEntry(a)}),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275element(13,"i",18),e.\u0275\u0275elementEnd()()()()}if(2&i){const t=r.$implicit,n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",n.getIconClass(t))("ngbTooltip",e.\u0275\u0275pipeBind1(3,6,n.getIconTooltip(t))),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",t.description," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngbTooltip",e.\u0275\u0275pipeBind1(9,8,n.getOperationTooltip(t))),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",n.getOperationClass(t)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngbTooltip",e.\u0275\u0275pipeBind1(12,10,"person.page.orcid.sync-queue.discard"))}}function Qt(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-pagination",5),e.\u0275\u0275listener("paginationChange",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().updateList()}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementStart(2,"div",6)(3,"table",7)(4,"thead")(5,"tr",8)(6,"th"),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"th"),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"tbody"),e.\u0275\u0275template(16,Xt,14,12,"tr",9),e.\u0275\u0275pipe(17,"async"),e.\u0275\u0275elementEnd()()()()}if(2&i){const t=e.\u0275\u0275nextContext();let n,o;e.\u0275\u0275property("paginationOptions",t.paginationOptions)("collectionSize",null==(n=e.\u0275\u0275pipeBind1(1,8,t.getList()))||null==n.payload?null:n.payload.totalElements)("retainScrollPosition",!1)("hideGear",!0),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(8,10,"person.page.orcid.sync-queue.table.header.type")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(11,12,"person.page.orcid.sync-queue.table.header.description")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(14,14,"person.page.orcid.sync-queue.table.header.action")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",null==(o=e.\u0275\u0275pipeBind1(17,16,t.getList()))||null==o.payload?null:o.payload.page)}}let Oe=(()=>{class i{constructor(t,n,o,a,p,d){this.orcidAuthService=t,this.orcidQueueService=n,this.translateService=o,this.paginationService=a,this.notificationsService=p,this.orcidHistoryService=d,this.paginationOptions=Object.assign(new Gt.r,{id:"oqp",pageSize:5}),this.processing$=new w.X(!1),this.list$=new w.X({}),this.AlertTypeEnum=Ut.N,this.subs=[]}ngOnInit(){this.updateList()}ngOnChanges(t){!t.item.isFirstChange()&&t.item.currentValue!==t.item.previousValue&&this.updateList()}updateList(){this.subs.push(this.paginationService.getCurrentPagination(this.paginationOptions.id,this.paginationOptions).pipe((0,Bt.b)(100),(0,zt.x)(),(0,Vt.b)(()=>this.processing$.next(!0)),(0,P.w)(t=>this.orcidQueueService.searchByProfileItemId(this.item.id,t,!1)),(0,h.hC)()).subscribe(t=>{this.processing$.next(!1),this.list$.next(t),this.orcidQueueService.clearFindByProfileItemRequests()}))}getList(){return this.list$.asObservable()}getIconClass(t){if(!t.recordType)return"fa fa-user";switch(t.recordType.toLowerCase()){case"publication":return"fas fa-book";case"project":return"fas fa-wallet";case"education":return"fas fa-school";case"affiliation":return"fas fa-university";case"country":return"fas fa-globe-europe";case"external_ids":case"researcher_urls":return"fas fa-external-link-alt";default:return"fa fa-user"}}getIconTooltip(t){return t.recordType?"person.page.orcid.sync-queue.tooltip."+t.recordType.toLowerCase():""}getOperationTooltip(t){return t.operation?"person.page.orcid.sync-queue.tooltip."+t.operation.toLowerCase():""}getOperationClass(t){if(!t.operation)return"";switch(t.operation.toLowerCase()){case"insert":return"fas fa-plus";case"update":return"fas fa-edit";case"delete":return"fas fa-trash-alt";default:return""}}discardEntry(t){this.processing$.next(!0),this.subs.push(this.orcidQueueService.deleteById(t.id).pipe((0,h.hC)()).subscribe(n=>{this.processing$.next(!1),n.isSuccess?(this.notificationsService.success(this.translateService.get("person.page.orcid.sync-queue.discard.success")),this.updateList()):this.notificationsService.error(this.translateService.get("person.page.orcid.sync-queue.discard.error"))}))}send(t){this.processing$.next(!0),this.subs.push(this.orcidHistoryService.sendToORCID(t).pipe((0,h.hC)()).subscribe(n=>{this.processing$.next(!1),n.isSuccess?this.handleOrcidHistoryRecordCreation(n.payload):422===n.statusCode?this.handleValidationErrors(n):this.notificationsService.error(this.translateService.get("person.page.orcid.sync-queue.send.error"))}))}getUnauthorizedErrorContent(){return this.orcidAuthService.getOrcidAuthorizeUrl(this.item).pipe((0,P.w)(t=>this.translateService.get("person.page.orcid.sync-queue.send.unauthorized-error.content",{orcid:t})))}handleOrcidHistoryRecordCreation(t){switch(t.status){case 200:case 201:case 204:this.notificationsService.success(this.translateService.get("person.page.orcid.sync-queue.send.success")),this.updateList();break;case 400:this.notificationsService.error(this.translateService.get("person.page.orcid.sync-queue.send.bad-request-error"),null,{timeOut:0});break;case 401:(0,Z.a)([this.translateService.get("person.page.orcid.sync-queue.send.unauthorized-error.title"),this.getUnauthorizedErrorContent()]).subscribe(([n,o])=>{this.notificationsService.error(n,o,{timeOut:0},!0)});break;case 404:this.notificationsService.warning(this.translateService.get("person.page.orcid.sync-queue.send.not-found-warning"));break;case 409:this.notificationsService.error(this.translateService.get("person.page.orcid.sync-queue.send.conflict-error"),null,{timeOut:0});break;default:this.notificationsService.error(this.translateService.get("person.page.orcid.sync-queue.send.error"),null,{timeOut:0})}}handleValidationErrors(t){const n=[this.translateService.get("person.page.orcid.sync-queue.send.validation-error")],o=t.errorMessage;o&&o.indexOf("Error codes:")>0&&o.substring(o.indexOf(":")+1).trim().split(",").forEach(a=>n.push(this.translateService.get("person.page.orcid.sync-queue.send.validation-error."+a))),(0,Z.a)(n).subscribe(a=>{const p=a.shift(),d="<ul>"+a.map(I=>`<li>${I}</li>`).join("")+"</ul>";this.notificationsService.error(p,d,{timeOut:0},!0)})}ngOnDestroy(){this.list$=null,this.subs.filter(t=>(0,T.Uh)(t)).forEach(t=>t.unsubscribe())}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(W.m),e.\u0275\u0275directiveInject(Dt.I),e.\u0275\u0275directiveInject(y.sK),e.\u0275\u0275directiveInject(Rt.N),e.\u0275\u0275directiveInject(G.T),e.\u0275\u0275directiveInject(Lt.p))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ds-orcid-queue"]],inputs:{item:"item"},features:[e.\u0275\u0275NgOnChangesFeature],decls:13,vars:16,consts:[[4,"ngIf"],[1,"container"],[3,"type",4,"ngIf"],[3,"paginationOptions","collectionSize","retainScrollPosition","hideGear","paginationChange",4,"ngIf"],[3,"type"],[3,"paginationOptions","collectionSize","retainScrollPosition","hideGear","paginationChange"],[1,"table-responsive"],["id","groups",1,"table","table-sm","table-striped","table-hover","table-bordered"],[1,"text-center","align-middle"],["data-test","orcidQueueElementRow",4,"ngFor","ngForOf"],["data-test","orcidQueueElementRow"],[1,"text-center","align-middle",2,"width","15%"],["aria-hidden","true",1,"fa-2x",3,"ngClass","ngbTooltip"],[1,"text-center",2,"width","20%"],[1,"btn-group","edit-field"],["container","body",1,"btn","btn-outline-primary","my-1","col-md",3,"ngbTooltip","click"],[3,"ngClass"],["container","body",1,"btn","btn-outline-danger","my-1","col-md",3,"ngbTooltip","click"],[1,"fas","fa-unlink"]],template:function(t,n){if(1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,$t,1,0,"ds-loading",0),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementStart(3,"div",1)(4,"h2"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,jt,3,4,"ds-alert",2),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275template(10,Qt,18,18,"ds-pagination",3),e.\u0275\u0275pipe(11,"async"),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275elementEnd()()),2&t){let o,a;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,4,n.processing$)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,6,"person.orcid.registry.queue")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(8,8,n.processing$)&&0==(null==(o=e.\u0275\u0275pipeBind1(9,10,n.getList()))||null==o.payload?null:o.payload.totalElements)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(11,12,n.processing$)&&(null==(a=e.\u0275\u0275pipeBind1(12,14,n.getList()))||null==a.payload?null:a.payload.totalElements)>0)}},directives:[l.O5,we.LoadingComponent,U.w,Ht.Q,l.sg,l.mk,N._L],pipes:[l.Ov,y.X$],styles:[""]}),i})();function Zt(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"div",4)(1,"div",5)(2,"div",6)(3,"a",7),e.\u0275\u0275element(4,"i",8),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()()()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLink",t.getItemPage()),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,2,"item.orcid.return")," ")}}function Wt(i,r){1&i&&(e.\u0275\u0275element(0,"ds-loading",9),e.\u0275\u0275pipe(1,"translate")),2&i&&e.\u0275\u0275property("message",e.\u0275\u0275pipeBind1(1,1,"person.page.orcid.link.processing"))}function Kt(i,r){1&i&&(e.\u0275\u0275elementStart(0,"div",10)(1,"ds-alert",11),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()()),2&i&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("type","alert-danger"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,2,"person.page.orcid.link.error.message")))}function Yt(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-orcid-sync-setting",15),e.\u0275\u0275listener("settingsUpdated",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext(2).updateItem()}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("item",e.\u0275\u0275pipeBind1(1,1,t.item))}}function Jt(i,r){if(1&i&&(e.\u0275\u0275element(0,"ds-orcid-queue",16),e.\u0275\u0275pipe(1,"async")),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("item",e.\u0275\u0275pipeBind1(1,1,t.item))}}function qt(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"ds-orcid-auth",12),e.\u0275\u0275listener("unlink",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().updateItem()}),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Yt,2,3,"ds-orcid-sync-setting",13),e.\u0275\u0275template(4,Jt,2,3,"ds-orcid-queue",14),e.\u0275\u0275elementContainerEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("item",e.\u0275\u0275pipeBind1(2,3,t.item)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.isLinkedToOrcid()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isLinkedToOrcid())}}let Se=(()=>{class i{constructor(t,n,o,a,p,d){this.platformId=t,this.authService=n,this.itemService=o,this.orcidAuthService=a,this.route=p,this.router=d,this.connectionStatus=new w.X(!1),this.item=new w.X(null),this.processingConnection=new w.X(!0)}ngOnInit(){if((0,l.NF)(this.platformId)){const t=this.route.queryParamMap.pipe((0,z.q)(1),(0,C.U)(o=>o.get("code"))),n=this.route.data.pipe((0,C.U)(o=>o.dso),(0,Q.Gh)(this.router,this.authService),(0,h.Gp)());(0,Z.a)([t,n]).subscribe(([o,a])=>{this.itemId=a.id,(0,T.UE)(o)?this.linkProfileToOrcid(a,o):(this.item.next(a),this.processingConnection.next(!1),this.connectionStatus.next(!0))})}}isLinkedToOrcid(){return this.orcidAuthService.isLinkedToOrcid(this.item.value)}getItemPage(){return(0,A.Tt)(this.item.value)}updateItem(){this.clearRouteParams(),this.itemService.findById(this.itemId,!1).pipe((0,h.hC)()).subscribe(t=>{t.hasSucceeded&&this.item.next(t.payload)})}linkProfileToOrcid(t,n){this.orcidAuthService.linkOrcidByItem(t,n).pipe((0,h.hC)()).subscribe(o=>{this.processingConnection.next(!1),o.hasSucceeded?(this.connectionStatus.next(!0),this.updateItem()):(this.item.next(t),this.connectionStatus.next(!1),this.clearRouteParams())})}clearRouteParams(){const t=this.router.url.split("?")[0];this.router.navigate([t])}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(e.PLATFORM_ID),e.\u0275\u0275directiveInject(V.e8),e.\u0275\u0275directiveInject(F.S),e.\u0275\u0275directiveInject(W.m),e.\u0275\u0275directiveInject(u.gz),e.\u0275\u0275directiveInject(u.F0))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ds-orcid-page"]],decls:12,vars:20,consts:[["class","container",4,"ngIf"],[3,"message",4,"ngIf"],["class","container","data-test","error-box",4,"ngIf"],[4,"ngIf"],[1,"container"],[1,"button-row","bottom","mb-3"],[1,"text-right"],["role","button","data-test","back-button",1,"btn","btn-outline-secondary",3,"routerLink"],[1,"fas","fa-arrow-left"],[3,"message"],["data-test","error-box",1,"container"],[3,"type"],["data-test","orcid-auth",3,"item","unlink"],["data-test","orcid-sync-setting",3,"item","settingsUpdated",4,"ngIf"],[3,"item",4,"ngIf"],["data-test","orcid-sync-setting",3,"item","settingsUpdated"],[3,"item"]],template:function(t,n){1&t&&(e.\u0275\u0275template(0,Zt,7,4,"div",0),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,Wt,2,3,"ds-loading",1),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275template(5,Kt,4,4,"div",2),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275template(8,qt,5,5,"ng-container",3),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275pipe(11,"async")),2&t&&(e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(1,4,n.processingConnection)&&e.\u0275\u0275pipeBind1(2,6,n.item)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(4,8,n.processingConnection)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(6,10,n.processingConnection)&&!e.\u0275\u0275pipeBind1(7,12,n.connectionStatus)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(9,14,n.processingConnection)&&e.\u0275\u0275pipeBind1(10,16,n.item)&&e.\u0275\u0275pipeBind1(11,18,n.connectionStatus)))},directives:[l.O5,u.yS,we.LoadingComponent,U.w,be,Ie,Oe],pipes:[l.Ov,y.X$],styles:[""]}),i})();var en=s(19937),tn=s(68212),nn=s(47235);let Pe=(()=>{class i extends tn.h{constructor(t,n,o,a){super(t,n,o,a),this.resolver=t,this.authorizationService=n,this.router=o,this.authService=a}getFeatureID(t,n){return(0,R.of)(nn.i.CanSynchronizeWithORCID)}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275inject(f.o),e.\u0275\u0275inject(en._),e.\u0275\u0275inject(u.F0),e.\u0275\u0275inject(V.e8))},i.\u0275prov=e.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),rn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({providers:[f.o,pe,E.B,nt.M,dt.F,me,Pe],imports:[[u.Bz.forChild([{path:":id",resolve:{dso:f.o,breadcrumb:pe},runGuardsAndResolvers:"always",children:[{path:"",component:ye,pathMatch:"full"},{path:"full",component:xe.B},{path:A.lA,loadChildren:()=>Promise.resolve().then(s.bind(s,53018)).then(r=>r.EditItemPageModule)},{path:A.UZ,component:ve,canActivate:[v.J]},{path:j.mG,component:gt.O},{path:A.fL,component:Se,canActivate:[v.J,Pe]}],data:{menu:{public:[{id:"statistics_item_:id",active:!0,visible:!0,model:{type:ut.U.LINK,text:"menu.section.statistics",link:"statistics/items/:id/"}}]}}},{path:"version",children:[{path:":id",component:Ce,resolve:{dso:me}}]}])]]}),i})();var H=s(81846),K=s(37796);function on(i,r){if(1&i&&e.\u0275\u0275element(0,"span",4),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("innerHTML",t.separator,e.\u0275\u0275sanitizeHtml)}}function an(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"a",2),e.\u0275\u0275text(1),e.\u0275\u0275template(2,on,1,1,"span",3),e.\u0275\u0275elementEnd()),2&i){const t=r.$implicit,n=r.last,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("href",t.value,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",o.linktext||t.value,""),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!n)}}let Te=(()=>{class i extends H.R{}return i.\u0275fac=function(){let r;return function(n){return(r||(r=e.\u0275\u0275getInheritedFactory(i)))(n||i)}}(),i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ds-metadata-uri-values"]],inputs:{linktext:"linktext",mdValues:"mdValues",separator:"separator",label:"label"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[3,"label"],["class","dont-break-out",3,"href",4,"ngFor","ngForOf"],[1,"dont-break-out",3,"href"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"ds-metadata-field-wrapper",0),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275template(2,an,3,3,"a",1),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("label",e.\u0275\u0275pipeBind1(1,2,n.label)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.mdValues))},directives:[K.n,l.sg,l.O5],pipes:[y.X$],styles:[""]}),i})();var L=s(16454);let Y=(()=>{class i extends L.E{constructor(){super(...arguments),this.separator=", ",this.fields=["dc.date.issued"],this.label="item.page.date"}}return i.\u0275fac=function(){let r;return function(n){return(r||(r=e.\u0275\u0275getInheritedFactory(i)))(n||i)}}(),i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ds-item-page-date-field"]],inputs:{item:"item"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:4,consts:[[1,"item-page-field"],[3,"mdValues","separator","label","enableMarkdown"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"ds-metadata-values",1),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("mdValues",null==n.item?null:n.item.allMetadata(n.fields))("separator",n.separator)("label",n.label)("enableMarkdown",n.enableMarkdown))},directives:[H.R],encapsulation:2}),i})(),J=(()=>{class i extends L.E{constructor(){super(...arguments),this.fields=["dc.description.abstract"],this.label="item.page.abstract",this.enableMarkdown=!0}}return i.\u0275fac=function(){let r;return function(n){return(r||(r=e.\u0275\u0275getInheritedFactory(i)))(n||i)}}(),i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ds-item-page-abstract-field"]],inputs:{item:"item"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:4,consts:[[1,"item-page-field"],[3,"mdValues","separator","label","enableMarkdown"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"ds-metadata-values",1),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("mdValues",null==n.item?null:n.item.allMetadata(n.fields))("separator",n.separator)("label",n.label)("enableMarkdown",n.enableMarkdown))},directives:[H.R],encapsulation:2}),i})(),q=(()=>{class i extends L.E{}return i.\u0275fac=function(){let r;return function(n){return(r||(r=e.\u0275\u0275getInheritedFactory(i)))(n||i)}}(),i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ds-item-page-uri-field"]],inputs:{item:"item",separator:"separator",fields:"fields",label:"label"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:3,consts:[[1,"item-page-field"],[3,"mdValues","separator","label"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"ds-metadata-uri-values",1),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("mdValues",null==n.item?null:n.item.allMetadata(n.fields))("separator",n.separator)("label",n.label))},directives:[Te],encapsulation:2}),i})();var ee=s(69722),Me=(s(21317),s(94281),s(70655)),ke=s(51121),Ee=s(62921),Fe=s(46659),Ae=s(48532),Ne=s(39300),pn=s(86099),dn=s(13103);let Be=(()=>{class i{constructor(){this.LINKS_TO_FOLLOW=[(0,$.l)("format")]}showEmbeddedViewer(){return!(0,e.isDevMode)()}getImageCount(t,n,o){let a=0;return o.findAllByItem(t).pipe((0,h.hC)(),(0,C.U)(p=>p.payload),(0,C.U)(p=>p.page),(0,P.w)(p=>p),(0,Ne.h)(p=>this.isIiifBundle(p.name)),(0,pn.z)(p=>n.findAllByItemAndBundleName(t,p.name,{currentPage:1,elementsPerPage:5},!0,!0,...this.LINKS_TO_FOLLOW).pipe((0,h.hC)(),(0,C.U)(d=>d.payload),(0,C.U)(d=>d.page),(0,P.w)(d=>d),(0,P.w)(d=>d.format.pipe((0,h.hC)(),(0,C.U)(I=>I.payload),(0,C.U)(I=>(I.mimetype.includes("image")&&a++,a)))))),(0,dn.Z)())}isIiifBundle(t){return!("OtherContent"===t||"LICENSE"===t||"THUMBNAIL"===t||"TEXT"===t||"METADATA"===t||"CC-LICENSE"===t||"BRANDED_PREVIEW"===t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac}),i})();var te=s(958),B=s(22313);function mn(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"p",3),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.viewerMessage)}}function un(i,r){if(1&i&&(e.\u0275\u0275element(0,"iframe",4),e.\u0275\u0275pipe(1,"async")),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("src",e.\u0275\u0275pipeBind1(1,1,t.iframeViewerUrl),e.\u0275\u0275sanitizeResourceUrl)}}let ne=(()=>{class i{constructor(t,n,o,a,p,d){this.sanitizer=t,this.viewerService=n,this.bitstreamDataService=o,this.bundleDataService=a,this.hostWindowService=p,this.platformId=d,this.isViewerAvailable=!0,this.multi=!1,this.notMobile=!1,this.viewerMessage="Sorry, the Mirador viewer is not currently available in development mode."}setURL(){let n="/iiif/mirador/index.html?manifest="+encodeURIComponent(X.N.rest.baseUrl+"/iiif/"+this.object.id+"/manifest");return this.searchable&&(n+="&searchable="+this.searchable),this.query&&(n+="&query="+this.query),this.multi&&(n+="&multi="+this.multi),this.notMobile&&(n+="&notMobile=true"),this.sanitizer.bypassSecurityTrustResourceUrl(n)}ngOnInit(){if((0,l.NF)(this.platformId))if(this.isViewerAvailable=this.viewerService.showEmbeddedViewer(),this.hostWindowService.widthCategory.pipe((0,z.q)(1)).subscribe(t=>{this.notMobile=!(t===te.o.XS||t===te.o.SM)}),this.searchable){this.multi=!0;const t=(0,R.of)("");this.iframeViewerUrl=t.pipe((0,C.U)(n=>this.setURL()))}else this.iframeViewerUrl=this.viewerService.getImageCount(this.object,this.bitstreamDataService,this.bundleDataService).pipe((0,C.U)(t=>(t>1&&(this.multi=!0),this.setURL())))}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(B.H7),e.\u0275\u0275directiveInject(Be),e.\u0275\u0275directiveInject(Ae.J),e.\u0275\u0275directiveInject(ge.b),e.\u0275\u0275directiveInject(te.I),e.\u0275\u0275directiveInject(e.PLATFORM_ID))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ds-mirador-viewer"]],inputs:{object:"object",query:"query",searchable:"searchable"},features:[e.\u0275\u0275ProvidersFeature([Be])],decls:5,vars:5,consts:[[1,"full-text-op"],["id","viewer-message",4,"ngIf"],["title","Mirador Viewer","allowtransparency","true","id","mirador-viewer",3,"src",4,"ngIf"],["id","viewer-message"],["title","Mirador Viewer","allowtransparency","true","id","mirador-viewer",3,"src"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"p",0),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,mn,2,1,"p",1),e.\u0275\u0275template(4,un,2,3,"iframe",2)),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,3,"iiifviewer.fullscreen.notice")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!n.isViewerAvailable),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isViewerAvailable))},directives:[l.O5],pipes:[y.X$,l.Ov],styles:["#mirador-viewer[_ngcontent-%COMP%]{border:1px solid #dee2e6;height:660px;width:100%}.full-text-op[_ngcontent-%COMP%]{text-align:right;color:#333;font-size:.8em}p.full-text-op[_ngcontent-%COMP%]{margin-bottom:0}"],changeDetection:0}),i})();var ze=s(34261),Ve=s(56808),Le=s(42257),De=s(4775);class gn{}var hn=s(48106);function fn(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",10),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).index;return e.\u0275\u0275nextContext(2).selectedMedia(a)}),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()}if(2&i){const t=r.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.bitstream.name," ")}}function vn(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",3)(1,"button",4),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().prevMedia()}),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",5),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().nextMedia()}),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",6)(8,"button",7),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",8),e.\u0275\u0275template(12,fn,2,1,"button",9),e.\u0275\u0275elementEnd()()()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",0===t.currentIndex),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,6,"media-viewer.previous")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",t.currentIndex===t.filteredMedias.length-1),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,8,"media-viewer.next")," "),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(10,10,"media-viewer.playlist")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.filteredMedias)}}let Re=(()=>{class i{constructor(){this.currentIndex=0,this.replacements={video:"./assets/images/replacement_video.svg",audio:"./assets/images/replacement_audio.svg"}}ngOnInit(){this.isCollapsed=!1,this.filteredMedias=this.medias.filter(t=>"audio"===t.format||"video"===t.format)}selectedMedia(t){this.currentIndex=t}nextMedia(){this.currentIndex++}prevMedia(){this.currentIndex--}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ds-media-viewer-video"]],inputs:{medias:"medias"},decls:3,vars:3,consts:[["id","singleVideo","preload","none","controls","",3,"src","poster"],["media",""],["class","buttons",4,"ngIf"],[1,"buttons"],[1,"btn","btn-primary","previous",3,"disabled","click"],[1,"btn","btn-primary","next",3,"disabled","click"],["ngbDropdown","",1,"d-inline-block"],["id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-outline-primary","playlist"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],["ngbDropdownItem","","class","list-element",3,"click",4,"ngFor","ngForOf"],["ngbDropdownItem","",1,"list-element",3,"click"]],template:function(t,n){1&t&&(e.\u0275\u0275element(0,"video",0,1),e.\u0275\u0275template(2,vn,13,12,"div",2)),2&t&&(e.\u0275\u0275property("src",n.filteredMedias[n.currentIndex].bitstream._links.content.href,e.\u0275\u0275sanitizeUrl)("poster",n.filteredMedias[n.currentIndex].thumbnail||n.replacements[n.filteredMedias[n.currentIndex].format],e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",(null==n.filteredMedias?null:n.filteredMedias.length)>1))},directives:[l.O5,N.jt,N.iD,N.Vi,l.sg,N.TH],pipes:[y.X$],styles:["video[_ngcontent-%COMP%]{width:340px;height:279px}"]}),i})();var c=s(41777);const _n=function(i){return{"ngx-gallery-active":i}};function yn(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275listener("click",function(o){const p=e.\u0275\u0275restoreView(t).index;return e.\u0275\u0275nextContext().handleChange(o,p)}),e.\u0275\u0275elementEnd()}if(2&i){const t=r.index,n=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(1,_n,t===n.active))}}const xn=["previewImage"];function Cn(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ngx-gallery-arrows",16),e.\u0275\u0275listener("prevClick",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().showPrev()})("nextClick",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().showNext()}),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("prevDisabled",!t.canShowPrev())("nextDisabled",!t.canShowNext())("arrowPrevIcon",t.arrowPrevIcon)("arrowNextIcon",t.arrowNextIcon)}}function wn(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ngx-gallery-action",17),e.\u0275\u0275listener("closeClick",function(o){const p=e.\u0275\u0275restoreView(t).$implicit,d=e.\u0275\u0275nextContext();return p.onClick(o,d.index)}),e.\u0275\u0275elementEnd()}if(2&i){const t=r.$implicit;e.\u0275\u0275property("icon",t.icon)("disabled",t.disabled)("titleText",t.titleText)}}function bn(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"a",18),e.\u0275\u0275element(1,"i"),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("href",t.src,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(1),e.\u0275\u0275classMapInterpolate1("ngx-gallery-icon-content ",t.downloadIcon,"")}}function In(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ngx-gallery-action",19),e.\u0275\u0275listener("closeClick",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().zoomOut()}),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("icon",t.zoomOutIcon)("disabled",!t.canZoomOut())}}function On(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ngx-gallery-action",19),e.\u0275\u0275listener("closeClick",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().zoomIn()}),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("icon",t.zoomInIcon)("disabled",!t.canZoomIn())}}function Sn(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ngx-gallery-action",7),e.\u0275\u0275listener("closeClick",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().rotateLeft()}),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("icon",t.rotateLeftIcon)}}function Pn(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ngx-gallery-action",7),e.\u0275\u0275listener("closeClick",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().rotateRight()}),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("icon",t.rotateRightIcon)}}function Tn(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ngx-gallery-action",7),e.\u0275\u0275listener("closeClick",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().manageFullscreen()}),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("icon","ngx-gallery-fullscreen "+t.fullscreenIcon)}}function Mn(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"img",20,21),e.\u0275\u0275listener("click",function(o){return o.stopPropagation()})("mouseenter",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().imageMouseEnter()})("mouseleave",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().imageMouseLeave()})("mousedown",function(o){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().mouseDownHandler(o)})("touchstart",function(o){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().mouseDownHandler(o)}),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("transform",t.getTransform())("left",t.positionLeft+"px")("top",t.positionTop+"px"),e.\u0275\u0275classProp("ngx-gallery-active",!t.loading)("animation",t.animation)("ngx-gallery-grab",t.canDragOnZoom()),e.\u0275\u0275property("src",t.src,e.\u0275\u0275sanitizeUrl)}}function kn(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"video",22,21),e.\u0275\u0275listener("click",function(o){return o.stopPropagation()})("mouseenter",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().imageMouseEnter()})("mouseleave",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().imageMouseLeave()})("mousedown",function(o){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().mouseDownHandler(o)})("touchstart",function(o){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().mouseDownHandler(o)}),e.\u0275\u0275element(2,"source",23),e.\u0275\u0275text(3," Your browser does not support the video tag. "),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("transform",t.getTransform())("left",t.positionLeft+"px")("top",t.positionTop+"px"),e.\u0275\u0275classProp("ngx-gallery-active",!t.loading)("animation",t.animation)("ngx-gallery-grab",t.canDragOnZoom()),e.\u0275\u0275advance(2),e.\u0275\u0275property("src",t.src,e.\u0275\u0275sanitizeUrl)}}function En(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ngx-gallery-bullets",24),e.\u0275\u0275listener("bulletChange",function(o){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().showAtIndex(o)}),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("count",t.images.length)("active",t.index)}}function Fn(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"div",25),e.\u0275\u0275listener("click",function(n){return n.stopPropagation()}),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("innerHTML",t.description,e.\u0275\u0275sanitizeHtml)}}function An(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ngx-gallery-action",8),e.\u0275\u0275listener("closeClick",function(o){const p=e.\u0275\u0275restoreView(t).$implicit,d=e.\u0275\u0275nextContext(2).$implicit;return p.onClick(o,d.index)}),e.\u0275\u0275elementEnd()}if(2&i){const t=r.$implicit;e.\u0275\u0275property("icon",t.icon)("disabled",t.disabled)("titleText",t.titleText)}}function Nn(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"div",9),e.\u0275\u0275listener("click",function(n){return n.stopPropagation()}),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2).$implicit,n=e.\u0275\u0275nextContext();e.\u0275\u0275property("innerHTML",n.descriptions[t.index],e.\u0275\u0275sanitizeHtml)}}const Ge=function(i){return{"ngx-gallery-clickable":i}};function Bn(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",4),e.\u0275\u0275listener("click",function(o){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext().$implicit;return e.\u0275\u0275nextContext().handleClick(o,a.index)})("@animation.start",function(o){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext(2).onStart(o)})("@animation.done",function(o){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext(2).onDone(o)}),e.\u0275\u0275elementStart(1,"div",5),e.\u0275\u0275template(2,An,1,3,"ngx-gallery-action",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,Nn,1,1,"div",7),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext().$implicit,n=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("background-image",n.getSafeUrl(t.src)),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(6,Ge,n.clickable))("@animation",n.action),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.actions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.showDescription&&n.descriptions[t.index])}}function zn(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ngx-gallery-action",8),e.\u0275\u0275listener("closeClick",function(o){const p=e.\u0275\u0275restoreView(t).$implicit,d=e.\u0275\u0275nextContext(2).$implicit;return p.onClick(o,d.index)}),e.\u0275\u0275elementEnd()}if(2&i){const t=r.$implicit;e.\u0275\u0275property("icon",t.icon)("disabled",t.disabled)("titleText",t.titleText)}}function Vn(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"div",9),e.\u0275\u0275listener("click",function(n){return n.stopPropagation()}),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext(2).$implicit,n=e.\u0275\u0275nextContext();e.\u0275\u0275property("innerHTML",n.descriptions[t.index],e.\u0275\u0275sanitizeHtml)}}function Ln(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",4),e.\u0275\u0275listener("click",function(o){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext().$implicit;return e.\u0275\u0275nextContext().handleClick(o,a.index)})("@animation.start",function(o){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext(2).onStart(o)})("@animation.done",function(o){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext(2).onDone(o)}),e.\u0275\u0275elementStart(1,"video",10),e.\u0275\u0275element(2,"source",11),e.\u0275\u0275text(3," Your browser does not support the video tag. "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",5),e.\u0275\u0275template(5,zn,1,3,"ngx-gallery-action",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,Vn,1,1,"div",7),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext().$implicit,n=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("background-image",n.getSafeUrl(t.src)),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(7,Ge,n.clickable))("@animation",n.action),e.\u0275\u0275advance(2),e.\u0275\u0275property("src",t.src,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",n.actions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.showDescription&&n.descriptions[t.index])}}function Dn(i,r){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Bn,4,8,"div",3),e.\u0275\u0275template(2,Ln,7,9,"div",3),e.\u0275\u0275elementContainerEnd()),2&i){const t=r.$implicit,n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","image"===t.type&&t.index===n._selectedIndex),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","video"===t.type&&t.index===n._selectedIndex)}}function Rn(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ngx-gallery-bullets",12),e.\u0275\u0275listener("bulletChange",function(o){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().show(o)}),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("count",t.images.length)("active",t._selectedIndex)}}function Gn(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ngx-gallery-arrows",13),e.\u0275\u0275listener("prevClick",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().showPrev()})("nextClick",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().showNext()}),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275classMapInterpolate1("ngx-gallery-image-size-",t.size,""),e.\u0275\u0275property("prevDisabled",!t.canShowPrev())("nextDisabled",!t.canShowNext())("arrowPrevIcon",t.arrowPrevIcon)("arrowNextIcon",t.arrowNextIcon)}}const ie=function(i,r){return{"ngx-gallery-active":i,"ngx-gallery-clickable":r}};function Un(i,r){if(1&i&&e.\u0275\u0275element(0,"div",9),2&i){const t=e.\u0275\u0275nextContext(),n=t.$implicit,o=t.index,a=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("background-image",a.getSafeUrl(n)),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(3,ie,o===a.selectedIndex,a.clickable))}}function Hn(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"div",10)(1,"video",11),e.\u0275\u0275element(2,"source",12),e.\u0275\u0275text(3," Your browser does not support the video tag. "),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(),n=t.index,o=t.$implicit,a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(2,ie,n===a.selectedIndex,a.clickable)),e.\u0275\u0275advance(1),e.\u0275\u0275property("src",o,e.\u0275\u0275sanitizeUrl)}}function $n(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ngx-gallery-action",13),e.\u0275\u0275listener("closeClick",function(o){const p=e.\u0275\u0275restoreView(t).$implicit,d=e.\u0275\u0275nextContext().index;return p.onClick(o,d)}),e.\u0275\u0275elementEnd()}if(2&i){const t=r.$implicit;e.\u0275\u0275property("icon",t.icon)("disabled",t.disabled)("titleText",t.titleText)}}function jn(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"div",14)(1,"span",15),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("+",t.remainingCountValue,"")}}function Xn(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",3),e.\u0275\u0275listener("click",function(o){const p=e.\u0275\u0275restoreView(t).index;return e.\u0275\u0275nextContext().handleClick(o,p)}),e.\u0275\u0275template(1,Un,1,6,"div",4),e.\u0275\u0275template(2,Hn,4,5,"div",5),e.\u0275\u0275elementStart(3,"div",6),e.\u0275\u0275template(4,$n,1,3,"ngx-gallery-action",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,jn,3,1,"div",8),e.\u0275\u0275elementEnd()}if(2&i){const t=r.$implicit,n=r.index,o=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("width",o.getThumbnailWidth())("height",o.getThumbnailHeight())("left",o.getThumbnailLeft(n))("top",o.getThumbnailTop(n)),e.\u0275\u0275property("href",o.hasLink(n)?o.links[n]:"#",e.\u0275\u0275sanitizeUrl)("target",o.linkTarget)("ngClass",e.\u0275\u0275pureFunction2(16,ie,n===o.selectedIndex,o.clickable)),e.\u0275\u0275attribute("aria-label",o.labels[n]),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","image"===o.getFileType(t)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","video"===o.getFileType(t)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",o.actions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.remainingCount&&o.remainingCountValue&&n===o.rows*o.columns-1)}}function Qn(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ngx-gallery-arrows",16),e.\u0275\u0275listener("prevClick",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().moveLeft()})("nextClick",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().moveRight()}),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("prevDisabled",!t.canMoveLeft())("nextDisabled",!t.canMoveRight())("arrowPrevIcon",t.arrowPrevIcon)("arrowNextIcon",t.arrowNextIcon)}}function Zn(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ngx-gallery-image",3),e.\u0275\u0275listener("imageClick",function(o){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().openPreview(o)})("activeChange",function(o){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().selectFromImage(o)})("animating",function(o){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().setAnimating(o)}),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("height",t.getImageHeight()),e.\u0275\u0275property("images",t.mediumImages)("clickable",null==t.currentOptions?null:t.currentOptions.preview)("selectedIndex",t.selectedIndex)("arrows",null==t.currentOptions?null:t.currentOptions.imageArrows)("arrowsAutoHide",null==t.currentOptions?null:t.currentOptions.imageArrowsAutoHide)("arrowPrevIcon",null==t.currentOptions?null:t.currentOptions.arrowPrevIcon)("arrowNextIcon",null==t.currentOptions?null:t.currentOptions.arrowNextIcon)("swipe",null==t.currentOptions?null:t.currentOptions.imageSwipe)("animation",null==t.currentOptions?null:t.currentOptions.imageAnimation)("size",null==t.currentOptions?null:t.currentOptions.imageSize)("autoPlay",null==t.currentOptions?null:t.currentOptions.imageAutoPlay)("autoPlayInterval",null==t.currentOptions?null:t.currentOptions.imageAutoPlayInterval)("autoPlayPauseOnHover",null==t.currentOptions?null:t.currentOptions.imageAutoPlayPauseOnHover)("infinityMove",null==t.currentOptions?null:t.currentOptions.imageInfinityMove)("lazyLoading",null==t.currentOptions?null:t.currentOptions.lazyLoading)("actions",null==t.currentOptions?null:t.currentOptions.imageActions)("descriptions",t.descriptions)("showDescription",null==t.currentOptions?null:t.currentOptions.imageDescription)("bullets",null==t.currentOptions?null:t.currentOptions.imageBullets)}}const Wn=function(){return[]};function Kn(i,r){if(1&i){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ngx-gallery-thumbnails",4),e.\u0275\u0275listener("activeChange",function(o){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().selectFromThumbnails(o)}),e.\u0275\u0275elementEnd()}if(2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275styleProp("margin-top",t.getThumbnailsMarginTop())("margin-bottom",t.getThumbnailsMarginBottom())("height",t.getThumbnailsHeight()),e.\u0275\u0275property("images",t.smallImages)("isAnimating",t.isAnimating)("links",null!=t.currentOptions&&t.currentOptions.thumbnailsAsLinks?t.links:e.\u0275\u0275pureFunction0(28,Wn))("labels",t.labels)("linkTarget",null==t.currentOptions?null:t.currentOptions.linkTarget)("selectedIndex",t.selectedIndex)("columns",null==t.currentOptions?null:t.currentOptions.thumbnailsColumns)("rows",null==t.currentOptions?null:t.currentOptions.thumbnailsRows)("margin",null==t.currentOptions?null:t.currentOptions.thumbnailMargin)("arrows",null==t.currentOptions?null:t.currentOptions.thumbnailsArrows)("arrowsAutoHide",null==t.currentOptions?null:t.currentOptions.thumbnailsArrowsAutoHide)("arrowPrevIcon",null==t.currentOptions?null:t.currentOptions.arrowPrevIcon)("arrowNextIcon",null==t.currentOptions?null:t.currentOptions.arrowNextIcon)("clickable",(null==t.currentOptions?null:t.currentOptions.image)||(null==t.currentOptions?null:t.currentOptions.preview))("swipe",null==t.currentOptions?null:t.currentOptions.thumbnailsSwipe)("size",null==t.currentOptions?null:t.currentOptions.thumbnailSize)("moveSize",null==t.currentOptions?null:t.currentOptions.thumbnailsMoveSize)("order",null==t.currentOptions?null:t.currentOptions.thumbnailsOrder)("remainingCount",null==t.currentOptions?null:t.currentOptions.thumbnailsRemainingCount)("lazyLoading",null==t.currentOptions?null:t.currentOptions.lazyLoading)("actions",null==t.currentOptions?null:t.currentOptions.thumbnailActions)("ngClass",null==t.currentOptions?null:t.currentOptions.thumbnailClasses)}}let D=(()=>{class i{constructor(t){this.renderer=t,this.swipeHandlers=new Map}manageSwipe(t,n,o,a,p){const d=this.getSwipeHandlers(o);try{t&&!d?this.swipeHandlers.set(o,[this.renderer.listen(n.nativeElement,"swipeleft",()=>a()),this.renderer.listen(n.nativeElement,"swiperight",()=>p())]):!t&&d&&(d.map(I=>I()),this.removeSwipeHandlers(o))}catch(I){}}validateUrl(t){return t.replace?t.replace(new RegExp(" ","g"),"%20").replace(new RegExp("'","g"),"%27"):t}getBackgroundUrl(t){return"url('"+this.validateUrl(t)+"')"}getFileType(t){const n=t.split(".").pop().toLowerCase();return"avi"===n||"flv"===n||"wmv"===n||"mov"===n||"mp4"===n?"video":"image"}getSwipeHandlers(t){return this.swipeHandlers.get(t)}removeSwipeHandlers(t){this.swipeHandlers.delete(t)}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275inject(e.Renderer2))},i.\u0275prov=e.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),re=(()=>{class i{constructor(){this.prevClick=new e.EventEmitter,this.nextClick=new e.EventEmitter}handlePrevClick(){this.prevClick.emit()}handleNextClick(){this.nextClick.emit()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ngx-gallery-arrows"]],inputs:{prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",arrowPrevIcon:"arrowPrevIcon",arrowNextIcon:"arrowNextIcon"},outputs:{prevClick:"prevClick",nextClick:"nextClick"},decls:6,vars:10,consts:[[1,"ngx-gallery-arrows-wrapper","ngx-gallery-arrow-left"],["aria-hidden","true",1,"ngx-gallery-icon","ngx-gallery-arrow",3,"click"],[1,"ngx-gallery-arrows-wrapper","ngx-gallery-arrow-right"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275listener("click",function(){return n.handlePrevClick()}),e.\u0275\u0275element(2,"i"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"div",2)(4,"div",1),e.\u0275\u0275listener("click",function(){return n.handleNextClick()}),e.\u0275\u0275element(5,"i"),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275classProp("ngx-gallery-disabled",n.prevDisabled),e.\u0275\u0275advance(1),e.\u0275\u0275classMapInterpolate1("ngx-gallery-icon-content ",n.arrowPrevIcon,""),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("ngx-gallery-disabled",n.nextDisabled),e.\u0275\u0275advance(1),e.\u0275\u0275classMapInterpolate1("ngx-gallery-icon-content ",n.arrowNextIcon,""))},styles:[".ngx-gallery-arrow-wrapper[_ngcontent-%COMP%]{position:absolute;height:100%;width:1px;display:table;table-layout:fixed}.ngx-gallery-preview-img-wrapper[_ngcontent-%COMP%]   .ngx-gallery-arrow-wrapper[_ngcontent-%COMP%]{z-index:10001}.ngx-gallery-arrow-left[_ngcontent-%COMP%]{left:0}.ngx-gallery-arrow-right[_ngcontent-%COMP%]{right:0}.ngx-gallery-arrow[_ngcontent-%COMP%]{top:50%;transform:translateY(-50%);cursor:pointer}.ngx-gallery-arrow.ngx-gallery-disabled[_ngcontent-%COMP%]{opacity:.6;cursor:default}.ngx-gallery-arrow-left[_ngcontent-%COMP%]   .ngx-gallery-arrow[_ngcontent-%COMP%]{left:10px}.ngx-gallery-arrow-right[_ngcontent-%COMP%]   .ngx-gallery-arrow[_ngcontent-%COMP%]{right:10px}"],changeDetection:0}),i})(),oe=(()=>{class i{constructor(){this.disabled=!1,this.titleText="",this.closeClick=new e.EventEmitter}handleClick(t){this.disabled||this.closeClick.emit(t),t.stopPropagation(),t.preventDefault()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ngx-gallery-action"]],inputs:{icon:"icon",disabled:"disabled",titleText:"titleText"},outputs:{closeClick:"closeClick"},decls:2,vars:6,consts:[["aria-hidden","true",1,"ngx-gallery-icon",3,"title","click"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275listener("click",function(a){return n.handleClick(a)}),e.\u0275\u0275element(1,"i"),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275classProp("ngx-gallery-icon-disabled",n.disabled),e.\u0275\u0275propertyInterpolate("title",n.titleText),e.\u0275\u0275advance(1),e.\u0275\u0275classMapInterpolate1("ngx-gallery-icon-content ",n.icon,""))},styles:[".ngx-gallery-icon[_ngcontent-%COMP%]{color:#fff;font-size:25px;position:absolute;z-index:2000;display:inline-block}.ngx-gallery-icon[_ngcontent-%COMP%]{position:relative;margin-right:10px;margin-top:10px;font-size:25px;cursor:pointer;text-decoration:none}.ngx-gallery-icon[_ngcontent-%COMP%]   .ngx-gallery-icon-content[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),i})(),Ue=(()=>{class i{constructor(){this.active=0,this.bulletChange=new e.EventEmitter}getBullets(){return Array(this.count)}handleChange(t,n){this.bulletChange.emit(n)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ngx-gallery-bullets"]],inputs:{count:"count",active:"active"},outputs:{bulletChange:"bulletChange"},decls:1,vars:1,consts:[["class","ngx-gallery-bullet",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"ngx-gallery-bullet",3,"ngClass","click"]],template:function(t,n){1&t&&e.\u0275\u0275template(0,yn,1,3,"div",0),2&t&&e.\u0275\u0275property("ngForOf",n.getBullets())},directives:[l.sg,l.mk],styles:["[_nghost-%COMP%]{position:absolute;z-index:2000;display:inline-flex;left:50%;transform:translate(-50%);bottom:0;padding:10px}.ngx-gallery-bullet[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;cursor:pointer;background:white}.ngx-gallery-bullet[_ngcontent-%COMP%]:not(:first-child){margin-left:5px}.ngx-gallery-bullet[_ngcontent-%COMP%]:hover, .ngx-gallery-bullet.ngx-gallery-active[_ngcontent-%COMP%]{background:black}"],changeDetection:0}),i})(),He=(()=>{class i{constructor(t,n,o,a,p){this.sanitization=t,this.elementRef=n,this.helperService=o,this.renderer=a,this.changeDetectorRef=p,this.showSpinner=!1,this.positionLeft=0,this.positionTop=0,this.zoomValue=1,this.loading=!1,this.rotateValue=0,this.index=0,this.previewOpen=new e.EventEmitter,this.previewClose=new e.EventEmitter,this.activeChange=new e.EventEmitter,this.isOpen=!1,this.initialX=0,this.initialY=0,this.initialLeft=0,this.initialTop=0,this.isMove=!1}ngOnInit(){this.arrows&&this.arrowsAutoHide&&(this.arrows=!1)}ngOnChanges(t){t.swipe&&this.helperService.manageSwipe(this.swipe,this.elementRef,"preview",()=>this.showNext(),()=>this.showPrev())}ngOnDestroy(){this.keyDownListener&&this.keyDownListener()}onMouseEnter(){this.arrowsAutoHide&&!this.arrows&&(this.arrows=!0)}onMouseLeave(){this.arrowsAutoHide&&this.arrows&&(this.arrows=!1)}onKeyDown(t){this.isOpen&&(this.keyboardNavigation&&(this.isKeyboardPrev(t)?this.showPrev():this.isKeyboardNext(t)&&this.showNext()),this.closeOnEsc&&this.isKeyboardEsc(t)&&this.close())}open(t){this.previewOpen.emit(),this.index=t,this.isOpen=!0,this.show(!0),this.forceFullscreen&&this.manageFullscreen(),this.keyDownListener=this.renderer.listen("window","keydown",n=>this.onKeyDown(n))}close(){this.isOpen=!1;const t=this.previewImage.nativeElement;t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2&&t.pause(),this.closeFullscreen(),this.previewClose.emit(),this.stopAutoPlay(),this.keyDownListener&&this.keyDownListener()}imageMouseEnter(){this.autoPlay&&this.autoPlayPauseOnHover&&this.stopAutoPlay()}imageMouseLeave(){this.autoPlay&&this.autoPlayPauseOnHover&&this.startAutoPlay()}startAutoPlay(){this.autoPlay&&(this.stopAutoPlay(),this.timer=setTimeout(()=>{this.showNext()||(this.index=-1,this.showNext())},this.autoPlayInterval))}stopAutoPlay(){this.timer&&clearTimeout(this.timer)}showAtIndex(t){this.index=t,this.show()}showNext(){return!!this.canShowNext()&&(this.index++,this.index===this.images.length&&(this.index=0),this.show(),!0)}showPrev(){this.canShowPrev()&&(this.index--,this.index<0&&(this.index=this.images.length-1),this.show())}canShowNext(){return!this.loading&&!!this.images&&(this.infinityMove||this.index<this.images.length-1)}canShowPrev(){return!this.loading&&!!this.images&&(this.infinityMove||this.index>0)}manageFullscreen(){if(this.fullscreen||this.forceFullscreen){const t=document;t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement?this.closeFullscreen():this.openFullscreen()}}getSafeUrl(t){return this.sanitization.bypassSecurityTrustUrl(t)}getFileType(t){return this.helperService.getFileType(t)}zoomIn(){this.canZoomIn()&&(this.zoomValue+=this.zoomStep,this.zoomValue>this.zoomMax&&(this.zoomValue=this.zoomMax))}zoomOut(){this.canZoomOut()&&(this.zoomValue-=this.zoomStep,this.zoomValue<this.zoomMin&&(this.zoomValue=this.zoomMin),this.zoomValue<=1&&this.resetPosition())}rotateLeft(){this.rotateValue-=90}rotateRight(){this.rotateValue+=90}getTransform(){return this.sanitization.bypassSecurityTrustStyle("scale("+this.zoomValue+") rotate("+this.rotateValue+"deg)")}canZoomIn(){return this.zoomValue<this.zoomMax}canZoomOut(){return this.zoomValue>this.zoomMin}canDragOnZoom(){return this.zoom&&this.zoomValue>1}mouseDownHandler(t){this.canDragOnZoom()&&(this.initialX=this.getClientX(t),this.initialY=this.getClientY(t),this.initialLeft=this.positionLeft,this.initialTop=this.positionTop,this.isMove=!0,t.preventDefault())}mouseUpHandler(t){this.isMove=!1}mouseMoveHandler(t){this.isMove&&(this.positionLeft=this.initialLeft+(this.getClientX(t)-this.initialX),this.positionTop=this.initialTop+(this.getClientY(t)-this.initialY))}getClientX(t){return t.touches&&t.touches.length?t.touches[0].clientX:t.clientX}getClientY(t){return t.touches&&t.touches.length?t.touches[0].clientY:t.clientY}resetPosition(){this.zoom&&(this.positionLeft=0,this.positionTop=0)}isKeyboardNext(t){return 39===t.keyCode}isKeyboardPrev(t){return 37===t.keyCode}isKeyboardEsc(t){return 27===t.keyCode}openFullscreen(){const t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}closeFullscreen(){if(this.isFullscreen()){const t=document;t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()}}isFullscreen(){const t=document;return t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement}show(t=!1){this.loading=!0,this.stopAutoPlay(),this.activeChange.emit(this.index),t||!this.animation?this._show():setTimeout(()=>this._show(),600)}_show(){this.zoomValue=1,this.rotateValue=0,this.resetPosition(),this.src=this.getSafeUrl(this.images[this.index]),this.type=this.getFileType(this.images[this.index]),this.srcIndex=this.index,this.description=this.descriptions[this.index],this.changeDetectorRef.markForCheck(),setTimeout(()=>{this.isLoaded(this.previewImage.nativeElement)||"video"===this.type?(this.loading=!1,this.startAutoPlay(),this.changeDetectorRef.markForCheck()):"video"===this.type||(setTimeout(()=>{this.loading&&(this.showSpinner=!0,this.changeDetectorRef.markForCheck())}),this.previewImage.nativeElement.onload=()=>{this.loading=!1,this.showSpinner=!1,this.previewImage.nativeElement.onload=null,this.startAutoPlay(),this.changeDetectorRef.markForCheck()})})}isLoaded(t){return!(!t.complete||void 0!==t.naturalWidth&&0===t.naturalWidth)}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(B.H7),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(D),e.\u0275\u0275directiveInject(e.Renderer2),e.\u0275\u0275directiveInject(e.ChangeDetectorRef))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ngx-gallery-preview"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(xn,5),2&t){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.previewImage=o.first)}},hostBindings:function(t,n){1&t&&e.\u0275\u0275listener("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(){return n.onMouseLeave()})},inputs:{images:"images",descriptions:"descriptions",showDescription:"showDescription",arrows:"arrows",arrowsAutoHide:"arrowsAutoHide",swipe:"swipe",fullscreen:"fullscreen",forceFullscreen:"forceFullscreen",closeOnClick:"closeOnClick",closeOnEsc:"closeOnEsc",keyboardNavigation:"keyboardNavigation",arrowPrevIcon:"arrowPrevIcon",arrowNextIcon:"arrowNextIcon",closeIcon:"closeIcon",fullscreenIcon:"fullscreenIcon",spinnerIcon:"spinnerIcon",autoPlay:"autoPlay",autoPlayInterval:"autoPlayInterval",autoPlayPauseOnHover:"autoPlayPauseOnHover",infinityMove:"infinityMove",zoom:"zoom",zoomStep:"zoomStep",zoomMax:"zoomMax",zoomMin:"zoomMin",zoomInIcon:"zoomInIcon",zoomOutIcon:"zoomOutIcon",animation:"animation",actions:"actions",rotate:"rotate",rotateLeftIcon:"rotateLeftIcon",rotateRightIcon:"rotateRightIcon",download:"download",downloadIcon:"downloadIcon",bullets:"bullets"},outputs:{previewOpen:"previewOpen",previewClose:"previewClose",activeChange:"activeChange"},features:[e.\u0275\u0275NgOnChangesFeature],decls:19,vars:18,consts:[[3,"prevDisabled","nextDisabled","arrowPrevIcon","arrowNextIcon","prevClick","nextClick",4,"ngIf"],[1,"ngx-gallery-preview-top"],[1,"ngx-gallery-preview-icons"],[3,"icon","disabled","titleText","closeClick",4,"ngFor","ngForOf"],["class","ngx-gallery-icon","aria-hidden","true","download","",3,"href",4,"ngIf"],[3,"icon","disabled","closeClick",4,"ngIf"],[3,"icon","closeClick",4,"ngIf"],[3,"icon","closeClick"],[1,"ngx-spinner-wrapper","ngx-gallery-center"],["aria-hidden","true"],[1,"ngx-gallery-preview-wrapper",3,"click","mouseup","mousemove","touchend","touchmove"],[1,"ngx-gallery-preview-img-wrapper"],["class","ngx-gallery-preview-img ngx-gallery-center",3,"src","ngx-gallery-active","animation","ngx-gallery-grab","transform","left","top","click","mouseenter","mouseleave","mousedown","touchstart",4,"ngIf"],["controls","","style","width: 100%; height: 100%;","class","ngx-gallery-preview-img ngx-gallery-center",3,"ngx-gallery-active","animation","ngx-gallery-grab","transform","left","top","click","mouseenter","mouseleave","mousedown","touchstart",4,"ngIf"],[3,"count","active","bulletChange",4,"ngIf"],["class","ngx-gallery-preview-text",3,"innerHTML","click",4,"ngIf"],[3,"prevDisabled","nextDisabled","arrowPrevIcon","arrowNextIcon","prevClick","nextClick"],[3,"icon","disabled","titleText","closeClick"],["aria-hidden","true","download","",1,"ngx-gallery-icon",3,"href"],[3,"icon","disabled","closeClick"],[1,"ngx-gallery-preview-img","ngx-gallery-center",3,"src","click","mouseenter","mouseleave","mousedown","touchstart"],["previewImage",""],["controls","",1,"ngx-gallery-preview-img","ngx-gallery-center",2,"width","100%","height","100%",3,"click","mouseenter","mouseleave","mousedown","touchstart"],[3,"src"],[3,"count","active","bulletChange"],[1,"ngx-gallery-preview-text",3,"innerHTML","click"]],template:function(t,n){1&t&&(e.\u0275\u0275template(0,Cn,1,4,"ngx-gallery-arrows",0),e.\u0275\u0275elementStart(1,"div",1)(2,"div",2),e.\u0275\u0275template(3,wn,1,3,"ngx-gallery-action",3),e.\u0275\u0275template(4,bn,2,4,"a",4),e.\u0275\u0275template(5,In,1,2,"ngx-gallery-action",5),e.\u0275\u0275template(6,On,1,2,"ngx-gallery-action",5),e.\u0275\u0275template(7,Sn,1,1,"ngx-gallery-action",6),e.\u0275\u0275template(8,Pn,1,1,"ngx-gallery-action",6),e.\u0275\u0275template(9,Tn,1,1,"ngx-gallery-action",6),e.\u0275\u0275elementStart(10,"ngx-gallery-action",7),e.\u0275\u0275listener("closeClick",function(){return n.close()}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(11,"div",8),e.\u0275\u0275element(12,"i",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",10),e.\u0275\u0275listener("click",function(){return n.closeOnClick&&n.close()})("mouseup",function(a){return n.mouseUpHandler(a)})("mousemove",function(a){return n.mouseMoveHandler(a)})("touchend",function(a){return n.mouseUpHandler(a)})("touchmove",function(a){return n.mouseMoveHandler(a)}),e.\u0275\u0275elementStart(14,"div",11),e.\u0275\u0275template(15,Mn,2,13,"img",12),e.\u0275\u0275template(16,kn,4,13,"video",13),e.\u0275\u0275template(17,En,1,2,"ngx-gallery-bullets",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,Fn,1,1,"div",15),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("ngIf",n.arrows),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",n.actions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.download&&n.src),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.zoom),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.zoom),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.rotate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.rotate),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.fullscreen),e.\u0275\u0275advance(1),e.\u0275\u0275property("icon","ngx-gallery-close "+n.closeIcon),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("ngx-gallery-active",n.showSpinner),e.\u0275\u0275advance(1),e.\u0275\u0275classMapInterpolate1("ngx-gallery-icon ngx-gallery-spinner ",n.spinnerIcon,""),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",n.src&&"image"===n.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.src&&"video"===n.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.bullets),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.showDescription&&n.description))},directives:[re,oe,Ue,l.O5,l.sg],styles:[".ngx-gallery-active[_nghost-%COMP%]{width:100%;height:100%;position:fixed;left:0;top:0;background:rgba(0,0,0,.7);z-index:10000;display:inline-block;font-size:50px!important}[_nghost-%COMP%]{display:none;font-size:50px!important}[_nghost-%COMP%]   .ngx-gallery-arrow[_ngcontent-%COMP%]{font-size:50px!important}ngx-gallery-bullets[_ngcontent-%COMP%]{height:5%;align-items:center;padding:0}.ngx-gallery-preview-img[_ngcontent-%COMP%]{opacity:0;max-width:90%;max-height:90%;-webkit-user-select:none;user-select:none;transition:transform .5s}.ngx-gallery-preview-img.animation[_ngcontent-%COMP%]{transition:opacity .5s linear,transform .5s}.ngx-gallery-preview-img.ngx-gallery-active[_ngcontent-%COMP%]{opacity:1}.ngx-gallery-preview-img.ngx-gallery-grab[_ngcontent-%COMP%]{cursor:grab}.ngx-gallery-icon.ngx-gallery-spinner[_ngcontent-%COMP%]{font-size:50px;left:0;display:inline-block}[_nghost-%COMP%]   .ngx-gallery-preview-top[_ngcontent-%COMP%]{position:absolute;width:100%;-webkit-user-select:none;user-select:none;font-size:25px}.ngx-gallery-preview-icons[_ngcontent-%COMP%]{float:right}.ngx-gallery-preview-icons[_ngcontent-%COMP%]   .ngx-gallery-icon[_ngcontent-%COMP%]{position:relative;margin-right:10px;margin-top:10px;font-size:25px;cursor:pointer;text-decoration:none}.ngx-gallery-preview-icons[_ngcontent-%COMP%]   .ngx-gallery-icon.ngx-gallery-icon-disabled[_ngcontent-%COMP%]{cursor:default;opacity:.4}.ngx-spinner-wrapper[_ngcontent-%COMP%]{width:50px;height:50px;display:none}.ngx-spinner-wrapper.ngx-gallery-active[_ngcontent-%COMP%]{display:inline-block}.ngx-gallery-center[_ngcontent-%COMP%]{position:absolute;left:0;right:0;bottom:0;margin:auto;top:0}.ngx-gallery-preview-text[_ngcontent-%COMP%]{width:100%;background:rgba(0,0,0,.7);padding:10px;text-align:center;color:#fff;font-size:16px;flex:0 1 auto;z-index:10}.ngx-gallery-preview-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-flow:column}.ngx-gallery-preview-img-wrapper[_ngcontent-%COMP%]{flex:1 1 auto;position:relative}"],changeDetection:0}),i})(),m=(()=>{class i{}return i.Fade="fade",i.Slide="slide",i.Rotate="rotate",i.Zoom="zoom",i})(),$e=(()=>{class i{constructor(t,n,o,a){this.sanitization=t,this.changeDetectorRef=n,this.elementRef=o,this.helperService=a,this.imageClick=new e.EventEmitter,this.activeChange=new e.EventEmitter,this.animating=new e.EventEmitter,this.canChangeImage=!0,this.isAnimating=!1,this.changeDetectorRef=n,this.action="none"}set selectedIndex(t){if(t>this._selectedIndex){let n;this.animation===m.Slide?n="slideRight":this.animation===m.Fade?n="fade":this.animation===m.Rotate?n="rotateRight":this.animation===m.Zoom&&(n="zoom"),this.setAction(n)}else if(t<this._selectedIndex){let n;this.animation===m.Slide?n="slideLeft":this.animation===m.Fade?n="fade":this.animation===m.Rotate?n="rotateLeft":this.animation===m.Zoom&&(n="zoom"),this.setAction(n)}this._selectedIndex=t}ngOnInit(){this.arrows&&this.arrowsAutoHide&&(this.arrows=!1),this.autoPlay&&this.startAutoPlay()}ngOnChanges(t){t.swipe&&this.helperService.manageSwipe(this.swipe,this.elementRef,"image",()=>this.showNext(),()=>this.showPrev())}onMouseEnter(){this.arrowsAutoHide&&!this.arrows&&(this.arrows=!0),this.autoPlay&&this.autoPlayPauseOnHover&&this.stopAutoPlay()}onMouseLeave(){this.arrowsAutoHide&&this.arrows&&(this.arrows=!1),this.autoPlay&&this.autoPlayPauseOnHover&&this.startAutoPlay()}reset(t){this._selectedIndex=t,this.action="none"}getImages(){if(!this.images)return[];if(this.lazyLoading){const t=[this._selectedIndex],n=this._selectedIndex-1;-1===n&&this.infinityMove?t.push(this.images.length-1):n>=0&&t.push(n);const o=this._selectedIndex+1;return o===this.images.length&&this.infinityMove?t.push(0):o<this.images.length&&t.push(o),this.images.filter((a,p)=>-1!==t.indexOf(p))}return this.images}startAutoPlay(){this.stopAutoPlay(),this.timer=setInterval(()=>{this.showNext()||(this._selectedIndex=-1,this.showNext())},this.autoPlayInterval)}stopAutoPlay(){this.timer&&clearInterval(this.timer)}handleClick(t,n){this.clickable&&(this.imageClick.emit(n),t.stopPropagation(),t.preventDefault())}show(t){if(!this.isAnimating){if(t>this._selectedIndex){let n;this.animation===m.Slide?n="slideRight":this.animation===m.Fade?n="fade":this.animation===m.Rotate?n="rotateRight":this.animation===m.Zoom&&(n="zoom"),this.setAction(n)}else{let n;this.animation===m.Slide?n="slideLeft":this.animation===m.Fade?n="fade":this.animation===m.Rotate?n="rotateLeft":this.animation===m.Zoom&&(n="zoom"),this.setAction(n)}this._selectedIndex=t,this.activeChange.emit(this._selectedIndex),this.setChangeTimeout()}}setAction(t){this.action=t,this.changeDetectorRef.detectChanges()}showNext(){if(this.isAnimating)return!1;if(this.canShowNext()&&this.canChangeImage){let t;return this.animation===m.Slide?t="slideRight":this.animation===m.Fade?t="fade":this.animation===m.Rotate?t="rotateRight":this.animation===m.Zoom&&(t="zoom"),this.setAction(t),this._selectedIndex++,this._selectedIndex===this.images.length&&(this._selectedIndex=0),this.activeChange.emit(this._selectedIndex),this.setChangeTimeout(),!0}return!1}showPrev(){if(!this.isAnimating&&this.canShowPrev()&&this.canChangeImage){let t;this.animation===m.Slide?t="slideLeft":this.animation===m.Fade?t="fade":this.animation===m.Rotate?t="rotateLeft":this.animation===m.Zoom&&(t="zoom"),this.setAction(t),this._selectedIndex--,this._selectedIndex<0&&(this._selectedIndex=this.images.length-1),this.activeChange.emit(this._selectedIndex),this.setChangeTimeout()}}setChangeTimeout(){this.canChangeImage=!1;let t=1e3;(this.animation===m.Slide||this.animation===m.Fade)&&(t=500),setTimeout(()=>{this.canChangeImage=!0},t)}canShowNext(){return!!this.images&&(this.infinityMove||this._selectedIndex<this.images.length-1)}canShowPrev(){return!!this.images&&(this.infinityMove||this._selectedIndex>0)}getSafeUrl(t){return this.sanitization.bypassSecurityTrustStyle(this.helperService.getBackgroundUrl(t.toString()))}getFileType(t){return this.helperService.getFileType(t)}onStart(t){this.isAnimating=!0,this.animating.emit(!0)}onDone(t){this.isAnimating=!1,this.animating.emit(!1)}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(B.H7),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(D))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ngx-gallery-image"]],hostBindings:function(t,n){1&t&&e.\u0275\u0275listener("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(){return n.onMouseLeave()})},inputs:{images:"images",clickable:"clickable",selectedIndex:"selectedIndex",arrows:"arrows",arrowsAutoHide:"arrowsAutoHide",swipe:"swipe",animation:"animation",size:"size",arrowPrevIcon:"arrowPrevIcon",arrowNextIcon:"arrowNextIcon",autoPlay:"autoPlay",autoPlayInterval:"autoPlayInterval",autoPlayPauseOnHover:"autoPlayPauseOnHover",infinityMove:"infinityMove",lazyLoading:"lazyLoading",actions:"actions",descriptions:"descriptions",showDescription:"showDescription",bullets:"bullets"},outputs:{imageClick:"imageClick",activeChange:"activeChange",animating:"animating"},features:[e.\u0275\u0275NgOnChangesFeature],decls:4,vars:7,consts:[[4,"ngFor","ngForOf"],[3,"count","active","bulletChange",4,"ngIf"],[3,"class","prevDisabled","nextDisabled","arrowPrevIcon","arrowNextIcon","prevClick","nextClick",4,"ngIf"],["class","ngx-gallery-image",3,"ngClass","background-image","click",4,"ngIf"],[1,"ngx-gallery-image",3,"ngClass","click"],[1,"ngx-gallery-icons-wrapper"],[3,"icon","disabled","titleText","closeClick",4,"ngFor","ngForOf"],["class","ngx-gallery-image-text",3,"innerHTML","click",4,"ngIf"],[3,"icon","disabled","titleText","closeClick"],[1,"ngx-gallery-image-text",3,"innerHTML","click"],["controls","",2,"width","100%","height","100%","background","#000"],[3,"src"],[3,"count","active","bulletChange"],[3,"prevDisabled","nextDisabled","arrowPrevIcon","arrowNextIcon","prevClick","nextClick"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,Dn,3,2,"ng-container",0),e.\u0275\u0275template(2,Rn,1,2,"ngx-gallery-bullets",1),e.\u0275\u0275template(3,Gn,1,7,"ngx-gallery-arrows",2),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275classMapInterpolate2("ngx-gallery-image-wrapper ngx-gallery-animation-",n.animation," ngx-gallery-image-size-",n.size,""),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.getImages()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.bullets),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.arrows))},directives:[oe,Ue,re,l.sg,l.O5,l.mk],styles:["[_nghost-%COMP%]{width:100%;display:inline-block;position:relative;font-size:25px}.ngx-gallery-image-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;left:0;top:0;overflow:hidden}.ngx-gallery-image[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;height:100%;width:100%;position:absolute;top:0}.ngx-gallery-image-size-cover[_ngcontent-%COMP%]   .ngx-gallery-image[_ngcontent-%COMP%]{background-size:cover}.ngx-gallery-image-size-contain[_ngcontent-%COMP%]   .ngx-gallery-image[_ngcontent-%COMP%]{background-size:contain}.ngx-gallery-animation-fade[_ngcontent-%COMP%]   .ngx-gallery-image[_ngcontent-%COMP%]{left:0;opacity:1;transition:.5s ease-in-out}.ngx-gallery-animation-fade[_ngcontent-%COMP%]   .ngx-gallery-image.ngx-gallery-active[_ngcontent-%COMP%]{opacity:1}.ngx-gallery-animation-rotate[_ngcontent-%COMP%]   .ngx-gallery-image[_ngcontent-%COMP%]{transition:1s ease;transform:scale(1) rotate(0);left:0;opacity:1}.ngx-gallery-animation-zoom[_ngcontent-%COMP%]   .ngx-gallery-image[_ngcontent-%COMP%]{transition:1s ease;transform:scale(1);left:0;opacity:1}.ngx-gallery-image-text[_ngcontent-%COMP%]{width:100%;background:rgba(0,0,0,.7);padding:10px;text-align:center;color:#fff;font-size:16px;position:absolute;bottom:0;z-index:10}"],data:{animation:[(0,c.X$)("animation",[(0,c.SB)("slideRight",(0,c.oB)({})),(0,c.SB)("slideLeft",(0,c.oB)({})),(0,c.SB)("fade",(0,c.oB)({})),(0,c.SB)("rotateLeft",(0,c.oB)({})),(0,c.SB)("rotateRight",(0,c.oB)({})),(0,c.SB)("zoom",(0,c.oB)({})),(0,c.eR)("slideRight => void",[(0,c.jt)("500ms ease-in-out",(0,c.oB)({transform:"translateX(-100%)"}))]),(0,c.eR)("void => slideRight",[(0,c.oB)({transform:"translateX(100%)"}),(0,c.jt)("500ms ease-in-out",(0,c.oB)({transform:"translateX(0)"}))]),(0,c.eR)("slideLeft => void",[(0,c.jt)("500ms ease-in-out",(0,c.oB)({transform:"translateX(100%)"}))]),(0,c.eR)("void => slideLeft",[(0,c.oB)({transform:"translateX(-100%)"}),(0,c.jt)("500ms ease-in-out",(0,c.oB)({transform:"translateX(0)"}))]),(0,c.eR)("fade => void",[(0,c.jt)("500ms ease-in-out",(0,c.oB)({opacity:"0"}))]),(0,c.eR)("void => fade",[(0,c.oB)({opacity:"0"}),(0,c.jt)("500ms ease-in-out",(0,c.oB)({opacity:"1"}))]),(0,c.eR)("rotateLeft => void",[(0,c.jt)("500ms ease-in-out",(0,c.oB)({transform:"scale(1, 1) rotate(-90deg)",opacity:"0"}))]),(0,c.eR)("void => rotateLeft",[(0,c.oB)({transform:"scale(1, 1) rotate(-90deg)",opacity:"0"}),(0,c.jt)("500ms ease-in-out",(0,c.oB)({transform:"scale(1, 1) rotate(0deg)",opacity:"1"}))]),(0,c.eR)("rotateRight => void",[(0,c.jt)("500ms ease-in-out",(0,c.oB)({transform:"scale(1, 1) rotate(90deg)",opacity:"0"}))]),(0,c.eR)("void => rotateRight",[(0,c.oB)({transform:"scale(1, 1) rotate(90deg)",opacity:"0"}),(0,c.jt)("500ms ease-in-out",(0,c.oB)({transform:"scale(1, 1) rotate(0deg)",opacity:"1"}))]),(0,c.eR)("zoom => void",[(0,c.jt)("500ms ease-in-out",(0,c.oB)({transform:"scale(2.5,2.5)",opacity:"0"}))]),(0,c.eR)("void => zoom",[(0,c.oB)({transform:"scale(2.5,2.5)",opacity:"0"}),(0,c.jt)("500ms ease-in-out",(0,c.oB)({transform:"scale(1, 1)",opacity:"1"}))])])]},changeDetection:0}),i})(),b=(()=>{class i{}return i.Column=1,i.Row=2,i.Page=3,i})(),je=(()=>{class i{constructor(t,n,o){this.sanitization=t,this.elementRef=n,this.helperService=o,this.minStopIndex=0,this.activeChange=new e.EventEmitter,this.index=0}ngOnChanges(t){t.selectedIndex&&this.validateIndex(),t.swipe&&this.helperService.manageSwipe(this.swipe,this.elementRef,"thumbnails",()=>this.moveRight(),()=>this.moveLeft()),this.images&&(this.remainingCountValue=this.images.length-this.rows*this.columns)}onMouseEnter(){this.mouseenter=!0}onMouseLeave(){this.mouseenter=!1}reset(t){this.selectedIndex=t,this.setDefaultPosition(),this.index=0,this.validateIndex()}getImages(){if(!this.images)return[];if(this.remainingCount)return this.images.slice(0,this.rows*this.columns);if(this.lazyLoading&&this.order!==b.Row){let t=0;return this.order===b.Column?t=(this.index+this.columns+this.moveSize)*this.rows:this.order===b.Page&&(t=this.index+this.columns*this.rows*2),t<=this.minStopIndex?t=this.minStopIndex:this.minStopIndex=t,this.images.slice(0,t)}return this.images}handleClick(t,n){!this.hasLink(n)&&!this.isAnimating&&(this.selectedIndex=n,this.activeChange.emit(n)),t.stopPropagation(),t.preventDefault()}hasLink(t){return!!(this.links&&this.links.length&&this.links[t])}moveRight(){if(this.canMoveRight()){this.index+=this.moveSize;const t=this.getMaxIndex()-this.columns;this.index>t&&(this.index=t),this.setThumbnailsPosition()}}moveLeft(){this.canMoveLeft()&&(this.index-=this.moveSize,this.index<0&&(this.index=0),this.setThumbnailsPosition())}canMoveRight(){return this.index+this.columns<this.getMaxIndex()}canMoveLeft(){return 0!==this.index}getThumbnailLeft(t){let n;return n=this.order===b.Column?Math.floor(t/this.rows):this.order===b.Page?t%this.columns+Math.floor(t/(this.rows*this.columns))*this.columns:this.order===b.Row&&this.remainingCount?t%this.columns:t%Math.ceil(this.images.length/this.rows),this.getThumbnailPosition(n,this.columns)}getThumbnailTop(t){let n;return n=this.order===b.Column?t%this.rows:this.order===b.Page?Math.floor(t/this.columns)-Math.floor(t/(this.rows*this.columns))*this.rows:this.order===b.Row&&this.remainingCount?Math.floor(t/this.columns):Math.floor(t/Math.ceil(this.images.length/this.rows)),this.getThumbnailPosition(n,this.rows)}getThumbnailWidth(){return this.getThumbnailDimension(this.columns)}getThumbnailHeight(){return this.getThumbnailDimension(this.rows)}setThumbnailsPosition(){this.thumbnailsLeft=-100/this.columns*this.index+"%",this.thumbnailsMarginLeft=-(this.margin-(this.columns-1)*this.margin/this.columns)*this.index+"px"}setDefaultPosition(){this.thumbnailsLeft="0px",this.thumbnailsMarginLeft="0px"}canShowArrows(){return!this.remainingCount&&this.arrows&&this.images&&this.images.length>this.getVisibleCount()&&(!this.arrowsAutoHide||this.mouseenter)}validateIndex(){if(this.images){let t;if(t=this.order===b.Column?Math.floor(this.selectedIndex/this.rows):this.selectedIndex%Math.ceil(this.images.length/this.rows),this.remainingCount&&(t=0),t<this.index||t>=this.index+this.columns){const n=this.getMaxIndex()-this.columns;this.index=t>n?n:t,this.setThumbnailsPosition()}}}getSafeUrl(t){return this.sanitization.bypassSecurityTrustStyle(this.helperService.getBackgroundUrl(t.toString()))}getFileType(t){return this.helperService.getFileType(t.toString())}getThumbnailPosition(t,n){return this.getSafeStyle("calc("+100/n*t+"% + "+(this.margin-(n-1)*this.margin/n)*t+"px)")}getThumbnailDimension(t){return this.getSafeStyle(0!==this.margin?"calc("+100/t+"% - "+(t-1)*this.margin/t+"px)":"calc("+100/t+"% + 1px)")}getMaxIndex(){if(this.order===b.Page){let t=Math.floor(this.images.length/this.getVisibleCount())*this.columns;return this.images.length%this.getVisibleCount()>this.columns?t+=this.columns:t+=this.images.length%this.getVisibleCount(),t}return Math.ceil(this.images.length/this.rows)}getVisibleCount(){return this.columns*this.rows}getSafeStyle(t){return this.sanitization.bypassSecurityTrustStyle(t)}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(B.H7),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(D))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ngx-gallery-thumbnails"]],hostBindings:function(t,n){1&t&&e.\u0275\u0275listener("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(){return n.onMouseLeave()})},inputs:{images:"images",isAnimating:"isAnimating",links:"links",labels:"labels",linkTarget:"linkTarget",columns:"columns",rows:"rows",arrows:"arrows",arrowsAutoHide:"arrowsAutoHide",margin:"margin",selectedIndex:"selectedIndex",clickable:"clickable",swipe:"swipe",size:"size",arrowPrevIcon:"arrowPrevIcon",arrowNextIcon:"arrowNextIcon",moveSize:"moveSize",order:"order",remainingCount:"remainingCount",lazyLoading:"lazyLoading",actions:"actions"},outputs:{activeChange:"activeChange"},features:[e.\u0275\u0275NgOnChangesFeature],decls:4,vars:9,consts:[[1,"ngx-gallery-thumbnails"],["class","ngx-gallery-thumbnail",3,"href","target","width","height","left","top","ngClass","click",4,"ngFor","ngForOf"],[3,"prevDisabled","nextDisabled","arrowPrevIcon","arrowNextIcon","prevClick","nextClick",4,"ngIf"],[1,"ngx-gallery-thumbnail",3,"href","target","ngClass","click"],["class","ngx-gallery-thumbnail","style","width: 100%; height: 100%; position:absolute;",3,"background-image","ngClass",4,"ngIf"],["class","ngx-gallery-thumbnail-video",4,"ngIf"],[1,"ngx-gallery-icons-wrapper"],[3,"icon","disabled","titleText","closeClick",4,"ngFor","ngForOf"],["class","ngx-gallery-remaining-count-overlay",4,"ngIf"],[1,"ngx-gallery-thumbnail",2,"width","100%","height","100%","position","absolute",3,"ngClass"],[1,"ngx-gallery-thumbnail-video"],[1,"ngx-gallery-thumbnail",2,"width","100%","height","100%","position","absolute","left","0","background","#000",3,"ngClass"],[3,"src"],[3,"icon","disabled","titleText","closeClick"],[1,"ngx-gallery-remaining-count-overlay"],[1,"ngx-gallery-remaining-count"],[3,"prevDisabled","nextDisabled","arrowPrevIcon","arrowNextIcon","prevClick","nextClick"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div")(1,"div",0),e.\u0275\u0275template(2,Xn,6,19,"a",1),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(3,Qn,1,4,"ngx-gallery-arrows",2)),2&t&&(e.\u0275\u0275classMapInterpolate1("ngx-gallery-thumbnails-wrapper ngx-gallery-thumbnail-size-",n.size,""),e.\u0275\u0275advance(1),e.\u0275\u0275styleProp("transform","translateX("+n.thumbnailsLeft+")")("margin-left",n.thumbnailsMarginLeft),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.getImages()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.canShowArrows()))},directives:[oe,re,l.sg,l.mk,l.O5],styles:['@charset "UTF-8";[_nghost-%COMP%]{width:100%;display:inline-block;position:relative;font-size:25px}.ngx-gallery-thumbnails-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;overflow:hidden}.ngx-gallery-thumbnails[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;left:0;transform:translate(0);transition:transform .5s ease-in-out;will-change:transform}.ngx-gallery-thumbnails[_ngcontent-%COMP%]   .ngx-gallery-thumbnail[_ngcontent-%COMP%]{position:absolute;height:100%;background-position:center;background-repeat:no-repeat;text-decoration:none;border:1px double black}.ngx-gallery-thumbnails[_ngcontent-%COMP%]   .ngx-gallery-thumbnail[_ngcontent-%COMP%]   .ngx-gallery-thumbnail-video[_ngcontent-%COMP%]:after{content:"\\f144";display:block;position:absolute;background:#0000;height:100%;width:100%;left:0;top:calc(50% - 20px);font-size:40px;color:#fff;margin:0;padding:0;font-family:fontawesome;text-shadow:0px 4px 3px rgba(0,0,0,.4),0px 8px 13px rgba(0,0,0,.1),0px 18px 23px rgba(0,0,0,.1)}.ngx-gallery-thumbnails[_ngcontent-%COMP%]   .ngx-gallery-thumbnail[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{background-size:cover;height:100%}.ngx-gallery-thumbnails[_ngcontent-%COMP%]   .ngx-gallery-thumbnail.ngx-gallery-active[_ngcontent-%COMP%]{border:1px double #cc4548}.ngx-gallery-thumbnail-size-cover[_ngcontent-%COMP%]   .ngx-gallery-thumbnails[_ngcontent-%COMP%]   .ngx-gallery-thumbnail[_ngcontent-%COMP%]{background-size:cover}.ngx-gallery-thumbnail-size-contain[_ngcontent-%COMP%]   .ngx-gallery-thumbnails[_ngcontent-%COMP%]   .ngx-gallery-thumbnail[_ngcontent-%COMP%]{background-size:contain}.ngx-gallery-remaining-count-overlay[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;left:0;top:0;background-color:#0006}.ngx-gallery-remaining-count[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:30px}'],changeDetection:0}),i})();class ae{constructor(r){this.icon=r.icon,this.disabled=!!r.disabled&&r.disabled,this.titleText=r.titleText?r.titleText:"",this.onClick=r.onClick}}let se=(()=>{class i{}return i.ThumbnailsTop="thumbnails-top",i.ThumbnailsBottom="thumbnails-bottom",i})(),Xe=(()=>{class i{}return i.Cover="cover",i.Contain="contain",i})();class Qe{constructor(r){const t=void 0!==r.breakpoint;function n(o,a){return r&&(void 0!==o||t)?o:a}this.breakpoint=n(r.breakpoint,void 0),this.width=n(r.width,"500px"),this.height=n(r.height,"400px"),this.fullWidth=n(r.fullWidth,!1),this.layout=n(r.layout,se.ThumbnailsBottom),this.startIndex=n(r.startIndex,0),this.linkTarget=n(r.linkTarget,"_blank"),this.lazyLoading=n(r.lazyLoading,!0),this.image=n(r.image,!0),this.imagePercent=n(r.imagePercent,75),this.imageArrows=n(r.imageArrows,!0),this.imageArrowsAutoHide=n(r.imageArrowsAutoHide,!1),this.imageSwipe=n(r.imageSwipe,!1),this.imageAnimation=n(r.imageAnimation,m.Fade),this.imageSize=n(r.imageSize,Xe.Cover),this.imageAutoPlay=n(r.imageAutoPlay,!1),this.imageAutoPlayInterval=n(r.imageAutoPlayInterval,2e3),this.imageAutoPlayPauseOnHover=n(r.imageAutoPlayPauseOnHover,!1),this.imageInfinityMove=n(r.imageInfinityMove,!1),r&&r.imageActions&&r.imageActions.length&&(r.imageActions=r.imageActions.map(o=>new ae(o))),this.imageActions=n(r.imageActions,[]),this.imageDescription=n(r.imageDescription,!1),this.imageBullets=n(r.imageBullets,!1),this.thumbnails=n(r.thumbnails,!0),this.thumbnailsColumns=n(r.thumbnailsColumns,4),this.thumbnailsRows=n(r.thumbnailsRows,1),this.thumbnailsPercent=n(r.thumbnailsPercent,25),this.thumbnailsMargin=n(r.thumbnailsMargin,10),this.thumbnailsArrows=n(r.thumbnailsArrows,!0),this.thumbnailsArrowsAutoHide=n(r.thumbnailsArrowsAutoHide,!1),this.thumbnailsSwipe=n(r.thumbnailsSwipe,!1),this.thumbnailsMoveSize=n(r.thumbnailsMoveSize,1),this.thumbnailsOrder=n(r.thumbnailsOrder,b.Column),this.thumbnailsRemainingCount=n(r.thumbnailsRemainingCount,!1),this.thumbnailsAsLinks=n(r.thumbnailsAsLinks,!1),this.thumbnailsAutoHide=n(r.thumbnailsAutoHide,!1),this.thumbnailMargin=n(r.thumbnailMargin,10),this.thumbnailSize=n(r.thumbnailSize,Xe.Cover),r&&r.thumbnailActions&&r.thumbnailActions.length&&(r.thumbnailActions=r.thumbnailActions.map(o=>new ae(o))),this.thumbnailActions=n(r.thumbnailActions,[]),this.thumbnailClasses=n(r.thumbnailClasses,[]),this.preview=n(r.preview,!0),this.previewDescription=n(r.previewDescription,!0),this.previewArrows=n(r.previewArrows,!0),this.previewArrowsAutoHide=n(r.previewArrowsAutoHide,!1),this.previewSwipe=n(r.previewSwipe,!1),this.previewFullscreen=n(r.previewFullscreen,!1),this.previewForceFullscreen=n(r.previewForceFullscreen,!1),this.previewCloseOnClick=n(r.previewCloseOnClick,!1),this.previewCloseOnEsc=n(r.previewCloseOnEsc,!1),this.previewKeyboardNavigation=n(r.previewKeyboardNavigation,!1),this.previewAnimation=n(r.previewAnimation,!0),this.previewAutoPlay=n(r.previewAutoPlay,!1),this.previewAutoPlayInterval=n(r.previewAutoPlayInterval,2e3),this.previewAutoPlayPauseOnHover=n(r.previewAutoPlayPauseOnHover,!1),this.previewInfinityMove=n(r.previewInfinityMove,!1),this.previewZoom=n(r.previewZoom,!1),this.previewZoomStep=n(r.previewZoomStep,.1),this.previewZoomMax=n(r.previewZoomMax,2),this.previewZoomMin=n(r.previewZoomMin,.5),this.previewRotate=n(r.previewRotate,!1),this.previewDownload=n(r.previewDownload,!1),this.previewCustom=n(r.previewCustom,void 0),this.previewBullets=n(r.previewBullets,!1),this.arrowPrevIcon=n(r.arrowPrevIcon,"fa fa-arrow-circle-left"),this.arrowNextIcon=n(r.arrowNextIcon,"fa fa-arrow-circle-right"),this.closeIcon=n(r.closeIcon,"fa fa-times-circle"),this.fullscreenIcon=n(r.fullscreenIcon,"fa fa-arrows-alt"),this.spinnerIcon=n(r.spinnerIcon,"fa fa-spinner fa-pulse fa-3x fa-fw"),this.zoomInIcon=n(r.zoomInIcon,"fa fa-search-plus"),this.zoomOutIcon=n(r.zoomOutIcon,"fa fa-search-minus"),this.rotateLeftIcon=n(r.rotateLeftIcon,"fa fa-undo"),this.rotateRightIcon=n(r.rotateRightIcon,"fa fa-repeat"),this.downloadIcon=n(r.downloadIcon,"fa fa-arrow-circle-down"),r&&r.actions&&r.actions.length&&(r.actions=r.actions.map(o=>new ae(o))),this.actions=n(r.actions,[])}}class Yn{constructor(r){this.src=r.src,this.type=r.type,this.index=r.index}}let Jn=(()=>{class i{constructor(t,n){this.myElement=t,this.helperService=n,this.options=[{}],this.imagesReady=new e.EventEmitter,this.change=new e.EventEmitter,this.previewOpen=new e.EventEmitter,this.previewClose=new e.EventEmitter,this.previewChange=new e.EventEmitter,this.oldImagesLength=0,this.selectedIndex=0,this.breakpoint=void 0,this.prevBreakpoint=void 0}ngOnInit(){this.options=this.options.map(t=>new Qe(t)),this.sortOptions(),this.setBreakpoint(),this.setOptions(),this.checkFullWidth(),this.currentOptions&&(this.selectedIndex=this.currentOptions.startIndex)}ngDoCheck(){(void 0!==this.images&&this.images.length!==this.oldImagesLength||this.images!==this.oldImages)&&(this.oldImagesLength=this.images.length,this.oldImages=this.images,this.setOptions(),this.setImages(),this.images&&this.images.length&&this.imagesReady.emit(),this.image&&this.image.reset(this.currentOptions.startIndex),this.currentOptions.thumbnailsAutoHide&&this.currentOptions.thumbnails&&this.images.length<=1&&(this.currentOptions.thumbnails=!1,this.currentOptions.imageArrows=!1),this.resetThumbnails())}ngAfterViewInit(){this.checkFullWidth()}onResize(){this.setBreakpoint(),this.prevBreakpoint!==this.breakpoint&&(this.setOptions(),this.resetThumbnails()),this.currentOptions&&this.currentOptions.fullWidth&&(this.fullWidthTimeout&&clearTimeout(this.fullWidthTimeout),this.fullWidthTimeout=setTimeout(()=>{this.checkFullWidth()},200))}getImageHeight(){return this.currentOptions&&this.currentOptions.thumbnails?this.currentOptions.imagePercent+"%":"100%"}getThumbnailsHeight(){return this.currentOptions&&this.currentOptions.image?"calc("+this.currentOptions.thumbnailsPercent+"% - "+this.currentOptions.thumbnailsMargin+"px)":"100%"}getThumbnailsMarginTop(){return this.currentOptions&&this.currentOptions.layout===se.ThumbnailsBottom?this.currentOptions.thumbnailsMargin+"px":"0px"}getThumbnailsMarginBottom(){return this.currentOptions&&this.currentOptions.layout===se.ThumbnailsTop?this.currentOptions.thumbnailsMargin+"px":"0px"}openPreview(t){this.currentOptions.previewCustom?this.currentOptions.previewCustom(t):(this.previewEnabled=!0,this.preview.open(t))}onPreviewOpen(){this.previewOpen.emit(),this.image&&this.image.autoPlay&&this.image.stopAutoPlay()}onPreviewClose(){this.previewEnabled=!1,this.previewClose.emit(),this.image&&this.image.autoPlay&&this.image.startAutoPlay()}selectFromImage(t){this.select(t)}selectFromThumbnails(t){this.select(t),this.currentOptions&&this.currentOptions.thumbnails&&this.currentOptions.preview&&(!this.currentOptions.image||this.currentOptions.thumbnailsRemainingCount)&&this.openPreview(this.selectedIndex)}show(t){this.select(t)}showNext(){this.image.showNext()}showPrev(){this.image.showPrev()}canShowNext(){return!(!this.images||!this.currentOptions||!(this.currentOptions.imageInfinityMove||this.selectedIndex<this.images.length-1))}canShowPrev(){return!(!this.images||!this.currentOptions||!(this.currentOptions.imageInfinityMove||this.selectedIndex>0))}previewSelect(t){this.previewChange.emit({index:t,image:this.images[t]})}moveThumbnailsRight(){this.thumbnails.moveRight()}moveThumbnailsLeft(){this.thumbnails.moveLeft()}canMoveThumbnailsRight(){return this.thumbnails.canMoveRight()}canMoveThumbnailsLeft(){return this.thumbnails.canMoveLeft()}resetThumbnails(){this.thumbnails&&this.thumbnails.reset(this.currentOptions.startIndex)}select(t){this.selectedIndex=t,this.change.emit({index:t,image:this.images[t]})}checkFullWidth(){this.currentOptions&&this.currentOptions.fullWidth&&(this.width=document.body.clientWidth+"px",this.left="translateX("+-(document.body.clientWidth-this.myElement.nativeElement.parentNode.innerWidth)/2+"px)")}setImages(){this.images.forEach(t=>t.type=this.helperService.getFileType(t.url||t.big||t.medium||t.small||"")),this.smallImages=this.images.map(t=>t.small),this.mediumImages=this.images.map((t,n)=>new Yn({src:t.medium,type:t.type,index:n})),this.bigImages=this.images.map(t=>t.big),this.descriptions=this.images.map(t=>t.description),this.links=this.images.map(t=>t.url),this.labels=this.images.map(t=>t.label)}setBreakpoint(){let t;this.prevBreakpoint=this.breakpoint,"undefined"!=typeof window&&(t=this.options.filter(n=>n.breakpoint>=window.innerWidth).map(n=>n.breakpoint)),this.breakpoint=t&&t.length?t.pop():void 0}sortOptions(){this.options=[...this.options.filter(t=>void 0===t.breakpoint),...this.options.filter(t=>void 0!==t.breakpoint).sort((t,n)=>n.breakpoint-t.breakpoint)]}setOptions(){this.currentOptions=new Qe({}),this.options.filter(t=>void 0===t.breakpoint||t.breakpoint>=this.breakpoint).map(t=>this.combineOptions(this.currentOptions,t)),this.width=this.currentOptions.width,this.height=this.currentOptions.height}combineOptions(t,n){Object.keys(n).map(o=>t[o]=void 0!==n[o]?n[o]:t[o])}setAnimating(t){this.isAnimating=t}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(D))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ngx-gallery"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(He,5),e.\u0275\u0275viewQuery($e,5),e.\u0275\u0275viewQuery(je,5)),2&t){let o;e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.preview=o.first),e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.image=o.first),e.\u0275\u0275queryRefresh(o=e.\u0275\u0275loadQuery())&&(n.thumbnails=o.first)}},hostVars:6,hostBindings:function(t,n){1&t&&e.\u0275\u0275listener("resize",function(){return n.onResize()},!1,e.\u0275\u0275resolveWindow),2&t&&e.\u0275\u0275styleProp("width",n.width)("height",n.height)("transform",n.left)},inputs:{options:"options",images:"images"},outputs:{imagesReady:"imagesReady",change:"change",previewOpen:"previewOpen",previewClose:"previewClose",previewChange:"previewChange"},features:[e.\u0275\u0275ProvidersFeature([D])],decls:4,vars:41,consts:[[3,"height","images","clickable","selectedIndex","arrows","arrowsAutoHide","arrowPrevIcon","arrowNextIcon","swipe","animation","size","autoPlay","autoPlayInterval","autoPlayPauseOnHover","infinityMove","lazyLoading","actions","descriptions","showDescription","bullets","imageClick","activeChange","animating",4,"ngIf"],[3,"marginTop","marginBottom","height","images","isAnimating","links","labels","linkTarget","selectedIndex","columns","rows","margin","arrows","arrowsAutoHide","arrowPrevIcon","arrowNextIcon","clickable","swipe","size","moveSize","order","remainingCount","lazyLoading","actions","ngClass","activeChange",4,"ngIf"],[3,"images","descriptions","showDescription","arrowPrevIcon","arrowNextIcon","closeIcon","fullscreenIcon","spinnerIcon","arrows","arrowsAutoHide","swipe","fullscreen","forceFullscreen","closeOnClick","closeOnEsc","keyboardNavigation","animation","autoPlay","autoPlayInterval","autoPlayPauseOnHover","infinityMove","zoom","zoomStep","zoomMax","zoomMin","zoomInIcon","zoomOutIcon","actions","rotate","rotateLeftIcon","rotateRightIcon","download","downloadIcon","bullets","previewClose","previewOpen","activeChange"],[3,"images","clickable","selectedIndex","arrows","arrowsAutoHide","arrowPrevIcon","arrowNextIcon","swipe","animation","size","autoPlay","autoPlayInterval","autoPlayPauseOnHover","infinityMove","lazyLoading","actions","descriptions","showDescription","bullets","imageClick","activeChange","animating"],[3,"images","isAnimating","links","labels","linkTarget","selectedIndex","columns","rows","margin","arrows","arrowsAutoHide","arrowPrevIcon","arrowNextIcon","clickable","swipe","size","moveSize","order","remainingCount","lazyLoading","actions","ngClass","activeChange"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,Zn,1,21,"ngx-gallery-image",0),e.\u0275\u0275template(2,Kn,1,29,"ngx-gallery-thumbnails",1),e.\u0275\u0275elementStart(3,"ngx-gallery-preview",2),e.\u0275\u0275listener("previewClose",function(){return n.onPreviewClose()})("previewOpen",function(){return n.onPreviewOpen()})("activeChange",function(a){return n.previewSelect(a)}),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275classMapInterpolate1("ngx-gallery-layout ",null==n.currentOptions?null:n.currentOptions.layout,""),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.currentOptions?null:n.currentOptions.image),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==n.currentOptions?null:n.currentOptions.thumbnails),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("ngx-gallery-active",n.previewEnabled),e.\u0275\u0275property("images",n.bigImages)("descriptions",n.descriptions)("showDescription",null==n.currentOptions?null:n.currentOptions.previewDescription)("arrowPrevIcon",null==n.currentOptions?null:n.currentOptions.arrowPrevIcon)("arrowNextIcon",null==n.currentOptions?null:n.currentOptions.arrowNextIcon)("closeIcon",null==n.currentOptions?null:n.currentOptions.closeIcon)("fullscreenIcon",null==n.currentOptions?null:n.currentOptions.fullscreenIcon)("spinnerIcon",null==n.currentOptions?null:n.currentOptions.spinnerIcon)("arrows",null==n.currentOptions?null:n.currentOptions.previewArrows)("arrowsAutoHide",null==n.currentOptions?null:n.currentOptions.previewArrowsAutoHide)("swipe",null==n.currentOptions?null:n.currentOptions.previewSwipe)("fullscreen",null==n.currentOptions?null:n.currentOptions.previewFullscreen)("forceFullscreen",null==n.currentOptions?null:n.currentOptions.previewForceFullscreen)("closeOnClick",null==n.currentOptions?null:n.currentOptions.previewCloseOnClick)("closeOnEsc",null==n.currentOptions?null:n.currentOptions.previewCloseOnEsc)("keyboardNavigation",null==n.currentOptions?null:n.currentOptions.previewKeyboardNavigation)("animation",null==n.currentOptions?null:n.currentOptions.previewAnimation)("autoPlay",null==n.currentOptions?null:n.currentOptions.previewAutoPlay)("autoPlayInterval",null==n.currentOptions?null:n.currentOptions.previewAutoPlayInterval)("autoPlayPauseOnHover",null==n.currentOptions?null:n.currentOptions.previewAutoPlayPauseOnHover)("infinityMove",null==n.currentOptions?null:n.currentOptions.previewInfinityMove)("zoom",null==n.currentOptions?null:n.currentOptions.previewZoom)("zoomStep",null==n.currentOptions?null:n.currentOptions.previewZoomStep)("zoomMax",null==n.currentOptions?null:n.currentOptions.previewZoomMax)("zoomMin",null==n.currentOptions?null:n.currentOptions.previewZoomMin)("zoomInIcon",null==n.currentOptions?null:n.currentOptions.zoomInIcon)("zoomOutIcon",null==n.currentOptions?null:n.currentOptions.zoomOutIcon)("actions",null==n.currentOptions?null:n.currentOptions.actions)("rotate",null==n.currentOptions?null:n.currentOptions.previewRotate)("rotateLeftIcon",null==n.currentOptions?null:n.currentOptions.rotateLeftIcon)("rotateRightIcon",null==n.currentOptions?null:n.currentOptions.rotateRightIcon)("download",null==n.currentOptions?null:n.currentOptions.previewDownload)("downloadIcon",null==n.currentOptions?null:n.currentOptions.downloadIcon)("bullets",null==n.currentOptions?null:n.currentOptions.previewBullets))},directives:[$e,je,He,l.O5,l.mk],styles:[":host{display:inline-block}:host>*{float:left}.ngx-gallery-layout{width:100%;height:100%;display:flex;flex-direction:column}.ngx-gallery-layout.thumbnails-top ngx-gallery-image{order:2}.ngx-gallery-layout.thumbnails-top ngx-gallery-thumbnails{order:1}.ngx-gallery-layout.thumbnails-bottom ngx-gallery-image{order:1}.ngx-gallery-layout.thumbnails-bottom ngx-gallery-thumbnails{order:2}*{box-sizing:border-box}.ngx-gallery-icon{color:#fff;position:absolute;display:inline-block}.ngx-gallery-icon .ngx-gallery-icon-content{display:block}ngx-gallery-preview{font-size:25px}ngx-gallery-preview .ngx-gallery-icon{z-index:2000}.ngx-gallery-clickable{cursor:pointer}.ngx-gallery-icons-wrapper .ngx-gallery-icon{position:relative;margin-right:5px;margin-top:5px;font-size:20px;cursor:pointer}.ngx-gallery-icons-wrapper{float:right}\n"],encapsulation:2,changeDetection:0}),i})(),qn=(()=>{class i extends B.hm{constructor(){super(...arguments),this.overrides={pinch:{enable:!1},rotate:{enable:!1}}}}return i.\u0275fac=function(){let r;return function(n){return(r||(r=e.\u0275\u0275getInheritedFactory(i)))(n||i)}}(),i.\u0275prov=e.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac}),i})(),ei=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({providers:[{provide:B.ok,useClass:qn}],imports:[[l.ez]]}),i})(),Ze=(()=>{class i{constructor(t){this.authService=t}ngOnInit(){this.isAuthenticated$=this.authService.isAuthenticated(),this.galleryOptions=[{preview:void 0===this.preview||this.preview,image:!0,imageSize:"contain",thumbnails:!1,imageArrows:!1,startIndex:0,imageAnimation:m.Slide,previewCloseOnEsc:!0,previewZoom:!0,previewRotate:!0,previewFullscreen:!0}],this.galleryImages=this.image?[{small:this.image,medium:this.image,big:this.image}]:this.convertToGalleryImage(this.images)}convertToGalleryImage(t){const n=[];for(const o of t)"image"===o.format&&n.push({small:o.thumbnail?o.thumbnail:"./assets/images/replacement_image.svg",medium:o.thumbnail?o.thumbnail:"./assets/images/replacement_image.svg",big:o.bitstream._links.content.href});return n}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(V.e8))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ds-media-viewer-image"]],inputs:{images:"images",preview:"preview",image:"image"},decls:3,vars:6,consts:[[1,"ngx-gallery",3,"options","images"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275element(2,"ngx-gallery",0),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275classProp("change-gallery",e.\u0275\u0275pipeBind1(1,4,n.isAuthenticated$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("options",n.galleryOptions)("images",n.galleryImages))},directives:[Jn],pipes:[l.Ov],styles:[".ngx-gallery[_ngcontent-%COMP%]{display:inline-block;margin-bottom:20px;width:340px!important;height:279px!important}"]}),i})();function ti(i,r){1&i&&(e.\u0275\u0275element(0,"ds-themed-loading",3),e.\u0275\u0275pipe(1,"translate")),2&i&&(e.\u0275\u0275propertyInterpolate("message",e.\u0275\u0275pipeBind1(1,2,"loading.default")),e.\u0275\u0275property("showMessage",!1))}function ni(i,r){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"ds-media-viewer-video",6),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(4).ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("medias",t)}}function ii(i,r){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ni,2,1,"ng-container",5),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(3).ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","video"===(null==t[0]?null:t[0].format)||"audio"===(null==t[0]?null:t[0].format))}}function ri(i,r){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"ds-media-viewer-image",7),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(3).ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("images",t)}}function oi(i,r){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ii,2,1,"ng-container",5),e.\u0275\u0275template(2,ri,2,1,"ng-container",5),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(2).ngVar,n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.videoOptions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","image"===(null==t[0]?null:t[0].format))}}function ai(i,r){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"ds-media-viewer-image",8),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext(2).ngVar,n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("image",(null==t[0]?null:t[0].thumbnail)||n.thumbnailPlaceholder)("preview",!1)}}function si(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"div",4),e.\u0275\u0275template(1,oi,3,2,"ng-container",5),e.\u0275\u0275template(2,ai,2,2,"ng-container",5),e.\u0275\u0275elementEnd()),2&i){const t=e.\u0275\u0275nextContext().ngVar,n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.length>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(("image"===(null==t[0]?null:t[0].format)||n.videoOptions&&"video"===(null==t[0]?null:t[0].format)||n.videoOptions&&"audio"===(null==t[0]?null:t[0].format))&&0!==t.length))}}function li(i,r){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ti,2,4,"ds-themed-loading",1),e.\u0275\u0275template(2,si,3,2,"div",2),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.isLoading)}}let le=(()=>{class i{constructor(t){this.bitstreamDataService=t,this.thumbnailPlaceholder="./assets/images/replacement_document.svg"}ngOnInit(){this.mediaList$=new w.X([]),this.isLoading=!0,this.loadRemoteData("ORIGINAL").subscribe(t=>{0===t.payload.page.length?(this.isLoading=!1,this.mediaList$.next([])):this.loadRemoteData("THUMBNAIL").subscribe(n=>{for(let o=0;o<t.payload.page.length;o++)t.payload.page[o].format.pipe((0,h.Gp)()).subscribe(a=>{const p=this.mediaList$.getValue(),d=this.createMediaViewerItem(t.payload.page[o],a,n.payload&&n.payload.page[o]);this.mediaList$.next([...p,d])});this.isLoading=!1})})}loadRemoteData(t){return this.bitstreamDataService.findAllByItemAndBundleName(this.item,t,{},!0,!0,(0,$.l)("format")).pipe((0,Ne.h)(n=>(0,T.Uh)(n)&&((0,T.Uh)(n.errorMessage)||(0,T.Uh)(n.payload))),(0,z.q)(1))}createMediaViewerItem(t,n,o){const a=new gn;return a.bitstream=t,a.format=n.mimetype.split("/")[0],a.thumbnail=o?o._links.content.href:null,a}}return i.\u0275fac=function(t){return new(t||i)(e.\u0275\u0275directiveInject(Ae.J))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ds-media-viewer"]],inputs:{item:"item",videoOptions:"videoOptions"},decls:2,vars:3,consts:[[4,"ngVar"],[3,"message","showMessage",4,"ngIf"],["class","media-viewer",4,"ngIf"],[3,"message","showMessage"],[1,"media-viewer"],[4,"ngIf"],[3,"medias"],[3,"images"],[3,"image","preview"]],template:function(t,n){1&t&&(e.\u0275\u0275template(0,li,3,2,"ng-container",0),e.\u0275\u0275pipe(1,"async")),2&t&&e.\u0275\u0275property("ngVar",e.\u0275\u0275pipeBind1(1,1,n.mediaList$))},directives:[fe.g,l.O5,hn.Z,Re,Ze],pipes:[l.Ov,y.X$],styles:[""]}),i})();function ci(i,r){}let ce=(()=>{class i extends _e.F{constructor(){super(...arguments),this.inAndOutputNames=["item"]}getComponentName(){return"FileSectionComponent"}importThemedComponent(t){return s(80160)(`./${t}/app/item-page/simple/field-components/file-section/file-section.component`)}importUnthemedComponent(){return Promise.resolve().then(s.bind(s,57200))}}return i.\u0275fac=function(){let r;return function(n){return(r||(r=e.\u0275\u0275getInheritedFactory(i)))(n||i)}}(),i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["ds-themed-item-page-file-section"]],inputs:{item:"item"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:0,consts:[["vcr",""]],template:function(t,n){1&t&&e.\u0275\u0275template(0,ci,0,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor)},encapsulation:2}),i})();var We=s(14077),Ke=s(98055),pi=s(82542);function di(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"div",6)(1,"div",17),e.\u0275\u0275element(2,"ds-mirador-viewer",18),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("object",t.object)("searchable",t.iiifSearchEnabled)("query",e.\u0275\u0275pipeBind1(3,3,t.iiifQuery$))}}function mi(i,r){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"ds-metadata-field-wrapper",19),e.\u0275\u0275element(2,"ds-thumbnail",20),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("hideIfNoTextContent",!1),e.\u0275\u0275advance(1),e.\u0275\u0275property("thumbnail",e.\u0275\u0275pipeBind1(3,2,null==t.object?null:t.object.thumbnail))}}function ui(i,r){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"ds-media-viewer",21),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("item",t.object)("videoOptions",t.mediaViewer.video)}}const gi=function(){return["dc.contributor.author","dc.creator"]},hi=function(){return["journal.title"]},fi=function(){return["journal.identifier.issn"]},vi=function(){return["journalvolume.identifier.name"]},_i=function(){return["dc.publisher"]},yi=function(){return["dc.description"]},xi=function(){return["dc.subject"]},Ci=function(){return["dc.identifier.citation"]},wi=function(){return["dc.identifier.uri"]},bi=function(i){return[i]};let O=class extends Fe.d{};O.\u0275fac=function(){let i;return function(t){return(i||(i=e.\u0275\u0275getInheritedFactory(O)))(t||O)}}(),O.\u0275cmp=e.\u0275\u0275defineComponent({type:O,selectors:[["ds-publication"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:36,vars:75,consts:[["class","row",4,"ngIf"],[1,"d-flex","flex-row"],[1,"mr-auto",3,"item"],[1,"pl-2","space-children-mr"],[3,"dso","tooltipMsgCreate","tooltipMsgHasDraft","newVersionEvent"],[3,"pageRoute","dso","tooltipMsg"],[1,"row"],[1,"col-xs-12","col-md-4"],[4,"ngIf"],[3,"item"],[1,"ds-item-page-mixed-author-field",3,"parentItem","itemType","metadataFields","label"],[3,"item","fields","label"],[1,"col-xs-12","col-md-7"],[3,"parentItem","relationType","label"],[3,"item","fields","separator","label"],["role","button",1,"btn","btn-outline-primary",3,"routerLink"],[1,"fas","fa-info-circle"],[1,"col-12"],["id","iiif-viewer",3,"object","searchable","query"],[3,"hideIfNoTextContent"],[3,"thumbnail"],[3,"item","videoOptions"]],template:function(r,t){1&r&&(e.\u0275\u0275template(0,di,4,5,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275element(2,"ds-item-page-title-field",2),e.\u0275\u0275elementStart(3,"div",3)(4,"ds-dso-page-version-button",4),e.\u0275\u0275listener("newVersionEvent",function(){return t.onCreateNewVersion()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"ds-dso-page-edit-button",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",6)(7,"div",7),e.\u0275\u0275template(8,mi,4,4,"ng-container",8),e.\u0275\u0275template(9,ui,2,2,"ng-container",8),e.\u0275\u0275element(10,"ds-themed-item-page-file-section",9)(11,"ds-item-page-date-field",9)(12,"ds-metadata-representation-list",10),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275element(14,"ds-generic-item-page-field",11)(15,"ds-generic-item-page-field",11)(16,"ds-generic-item-page-field",11)(17,"ds-generic-item-page-field",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",12),e.\u0275\u0275element(19,"ds-related-items",13),e.\u0275\u0275pipe(20,"translate"),e.\u0275\u0275element(21,"ds-related-items",13),e.\u0275\u0275pipe(22,"translate"),e.\u0275\u0275element(23,"ds-related-items",13),e.\u0275\u0275pipe(24,"translate"),e.\u0275\u0275element(25,"ds-item-page-abstract-field",9)(26,"ds-generic-item-page-field",11)(27,"ds-generic-item-page-field",14)(28,"ds-generic-item-page-field",11)(29,"ds-item-page-uri-field",11)(30,"ds-item-page-collections",9),e.\u0275\u0275elementStart(31,"div")(32,"a",15),e.\u0275\u0275element(33,"i",16),e.\u0275\u0275text(34),e.\u0275\u0275pipe(35,"translate"),e.\u0275\u0275elementEnd()()()()),2&r&&(e.\u0275\u0275property("ngIf",t.iiifEnabled),e.\u0275\u0275advance(2),e.\u0275\u0275property("item",t.object),e.\u0275\u0275advance(2),e.\u0275\u0275property("dso",t.object)("tooltipMsgCreate","item.page.version.create")("tooltipMsgHasDraft","item.page.version.hasDraft"),e.\u0275\u0275advance(1),e.\u0275\u0275property("pageRoute",t.itemPageRoute)("dso",t.object)("tooltipMsg","publication.page.edit"),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!t.mediaViewer.image),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.mediaViewer.image),e.\u0275\u0275advance(1),e.\u0275\u0275property("item",t.object),e.\u0275\u0275advance(1),e.\u0275\u0275property("item",t.object),e.\u0275\u0275advance(1),e.\u0275\u0275property("parentItem",t.object)("itemType","Person")("metadataFields",e.\u0275\u0275pureFunction0(64,gi))("label",e.\u0275\u0275pipeBind1(13,54,"relationships.isAuthorOf")),e.\u0275\u0275advance(2),e.\u0275\u0275property("item",t.object)("fields",e.\u0275\u0275pureFunction0(65,hi))("label","publication.page.journal-title"),e.\u0275\u0275advance(1),e.\u0275\u0275property("item",t.object)("fields",e.\u0275\u0275pureFunction0(66,fi))("label","publication.page.journal-issn"),e.\u0275\u0275advance(1),e.\u0275\u0275property("item",t.object)("fields",e.\u0275\u0275pureFunction0(67,vi))("label","publication.page.volume-title"),e.\u0275\u0275advance(1),e.\u0275\u0275property("item",t.object)("fields",e.\u0275\u0275pureFunction0(68,_i))("label","publication.page.publisher"),e.\u0275\u0275advance(2),e.\u0275\u0275property("parentItem",t.object)("relationType","isProjectOfPublication")("label",e.\u0275\u0275pipeBind1(20,56,"relationships.isProjectOf")),e.\u0275\u0275advance(2),e.\u0275\u0275property("parentItem",t.object)("relationType","isOrgUnitOfPublication")("label",e.\u0275\u0275pipeBind1(22,58,"relationships.isOrgUnitOf")),e.\u0275\u0275advance(2),e.\u0275\u0275property("parentItem",t.object)("relationType","isJournalIssueOfPublication")("label",e.\u0275\u0275pipeBind1(24,60,"relationships.isJournalIssueOf")),e.\u0275\u0275advance(2),e.\u0275\u0275property("item",t.object),e.\u0275\u0275advance(1),e.\u0275\u0275property("item",t.object)("fields",e.\u0275\u0275pureFunction0(69,yi))("label","publication.page.description"),e.\u0275\u0275advance(1),e.\u0275\u0275property("item",t.object)("fields",e.\u0275\u0275pureFunction0(70,xi))("separator",",")("label","item.page.subject"),e.\u0275\u0275advance(1),e.\u0275\u0275property("item",t.object)("fields",e.\u0275\u0275pureFunction0(71,Ci))("label","item.page.citation"),e.\u0275\u0275advance(1),e.\u0275\u0275property("item",t.object)("fields",e.\u0275\u0275pureFunction0(72,wi))("label","item.page.uri"),e.\u0275\u0275advance(1),e.\u0275\u0275property("item",t.object),e.\u0275\u0275advance(2),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction1(73,bi,t.itemPageRoute+"/full")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(35,62,"item.page.link.full")," "))},directives:[l.O5,ne,ze.k,Ve._,Le._,K.n,De.Z,le,ce,Y,We.Q,Ke.w,pi.e,J,q,ee.U,u.yS],pipes:[l.Ov,y.X$],styles:[""],changeDetection:0}),O=(0,Me.gn)([(0,Ee.d$)("Publication",ke.w.StandalonePage)],O),s(54221);var Oi=s(53018),Si=s(79248);function Ti(i,r){if(1&i&&(e.\u0275\u0275elementStart(0,"div",6)(1,"div",16),e.\u0275\u0275element(2,"ds-mirador-viewer",17),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275elementEnd()()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("object",t.object)("searchable",t.iiifSearchEnabled)("query",e.\u0275\u0275pipeBind1(3,3,t.iiifQuery$))}}function Mi(i,r){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"ds-metadata-field-wrapper",18),e.\u0275\u0275element(2,"ds-thumbnail",19),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("hideIfNoTextContent",!1),e.\u0275\u0275advance(1),e.\u0275\u0275property("thumbnail",e.\u0275\u0275pipeBind1(3,2,null==t.object?null:t.object.thumbnail))}}function ki(i,r){if(1&i&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"ds-media-viewer",20),e.\u0275\u0275elementContainerEnd()),2&i){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("item",t.object)("videoOptions",t.mediaViewer.video)}}s(6049);const Ei=function(){return["dc.contributor.author","dc.creator"]},Fi=function(){return["journal.title"]},Ai=function(){return["journal.identifier.issn"]},Ni=function(){return["journalvolume.identifier.name"]},Bi=function(){return["dc.publisher"]},zi=function(){return["dc.description"]},Vi=function(){return["dc.subject"]},Li=function(){return["dc.identifier.citation"]},Di=function(){return["dc.identifier.uri"]},Ri=function(i){return[i]};let S=class extends Fe.d{};S.\u0275fac=function(){let i;return function(t){return(i||(i=e.\u0275\u0275getInheritedFactory(S)))(t||S)}}(),S.\u0275cmp=e.\u0275\u0275defineComponent({type:S,selectors:[["ds-untyped-item"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:30,vars:60,consts:[["class","row",4,"ngIf"],[1,"d-flex","flex-row"],[1,"mr-auto",3,"item"],[1,"pl-2","space-children-mr"],[3,"dso","tooltipMsgCreate","tooltipMsgHasDraft","newVersionEvent"],[3,"pageRoute","dso","tooltipMsg"],[1,"row"],[1,"col-xs-12","col-md-4"],[4,"ngIf"],[3,"item"],[1,"ds-item-page-mixed-author-field",3,"parentItem","itemType","metadataFields","label"],[3,"item","fields","label"],[1,"col-xs-12","col-md-6"],[3,"item","fields","separator","label"],["role","button",1,"btn","btn-outline-primary",3,"routerLink"],[1,"fas","fa-info-circle"],[1,"col-12"],["id","iiif-viewer",3,"object","searchable","query"],[3,"hideIfNoTextContent"],[3,"thumbnail"],[3,"item","videoOptions"]],template:function(r,t){1&r&&(e.\u0275\u0275template(0,Ti,4,5,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275element(2,"ds-item-page-title-field",2),e.\u0275\u0275elementStart(3,"div",3)(4,"ds-dso-page-version-button",4),e.\u0275\u0275listener("newVersionEvent",function(){return t.onCreateNewVersion()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"ds-dso-page-edit-button",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",6)(7,"div",7),e.\u0275\u0275template(8,Mi,4,4,"ng-container",8),e.\u0275\u0275template(9,ki,2,2,"ng-container",8),e.\u0275\u0275element(10,"ds-themed-item-page-file-section",9)(11,"ds-item-page-date-field",9)(12,"ds-metadata-representation-list",10),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275element(14,"ds-generic-item-page-field",11)(15,"ds-generic-item-page-field",11)(16,"ds-generic-item-page-field",11)(17,"ds-generic-item-page-field",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",12),e.\u0275\u0275element(19,"ds-item-page-abstract-field",9)(20,"ds-generic-item-page-field",11)(21,"ds-generic-item-page-field",13)(22,"ds-generic-item-page-field",11)(23,"ds-item-page-uri-field",11)(24,"ds-item-page-collections",9),e.\u0275\u0275elementStart(25,"div")(26,"a",14),e.\u0275\u0275element(27,"i",15),e.\u0275\u0275text(28),e.\u0275\u0275pipe(29,"translate"),e.\u0275\u0275elementEnd()()()()),2&r&&(e.\u0275\u0275property("ngIf",t.iiifEnabled),e.\u0275\u0275advance(2),e.\u0275\u0275property("item",t.object),e.\u0275\u0275advance(2),e.\u0275\u0275property("dso",t.object)("tooltipMsgCreate","item.page.version.create")("tooltipMsgHasDraft","item.page.version.hasDraft"),e.\u0275\u0275advance(1),e.\u0275\u0275property("pageRoute",t.itemPageRoute)("dso",t.object)("tooltipMsg","item.page.edit"),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!t.mediaViewer.image),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.mediaViewer.image),e.\u0275\u0275advance(1),e.\u0275\u0275property("item",t.object),e.\u0275\u0275advance(1),e.\u0275\u0275property("item",t.object),e.\u0275\u0275advance(1),e.\u0275\u0275property("parentItem",t.object)("itemType","Person")("metadataFields",e.\u0275\u0275pureFunction0(49,Ei))("label",e.\u0275\u0275pipeBind1(13,45,"relationships.isAuthorOf")),e.\u0275\u0275advance(2),e.\u0275\u0275property("item",t.object)("fields",e.\u0275\u0275pureFunction0(50,Fi))("label","item.page.journal-title"),e.\u0275\u0275advance(1),e.\u0275\u0275property("item",t.object)("fields",e.\u0275\u0275pureFunction0(51,Ai))("label","item.page.journal-issn"),e.\u0275\u0275advance(1),e.\u0275\u0275property("item",t.object)("fields",e.\u0275\u0275pureFunction0(52,Ni))("label","item.page.volume-title"),e.\u0275\u0275advance(1),e.\u0275\u0275property("item",t.object)("fields",e.\u0275\u0275pureFunction0(53,Bi))("label","item.page.publisher"),e.\u0275\u0275advance(2),e.\u0275\u0275property("item",t.object),e.\u0275\u0275advance(1),e.\u0275\u0275property("item",t.object)("fields",e.\u0275\u0275pureFunction0(54,zi))("label","item.page.description"),e.\u0275\u0275advance(1),e.\u0275\u0275property("item",t.object)("fields",e.\u0275\u0275pureFunction0(55,Vi))("separator",",")("label","item.page.subject"),e.\u0275\u0275advance(1),e.\u0275\u0275property("item",t.object)("fields",e.\u0275\u0275pureFunction0(56,Li))("label","item.page.citation"),e.\u0275\u0275advance(1),e.\u0275\u0275property("item",t.object)("fields",e.\u0275\u0275pureFunction0(57,Di))("label","item.page.uri"),e.\u0275\u0275advance(1),e.\u0275\u0275property("item",t.object),e.\u0275\u0275advance(2),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction1(58,Ri,t.itemPageRoute+"/full")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(29,47,"item.page.link.full")," "))},directives:[l.O5,ne,ze.k,Ve._,Le._,K.n,De.Z,le,ce,Y,We.Q,Ke.w,J,q,ee.U,u.yS],pipes:[l.Ov,y.X$],styles:[""],changeDetection:0}),S=(0,Me.gn)([(0,Ee.d$)(ft.c,ke.w.StandalonePage)],S);var Gi=s(74227),Ui=s(84376);const Hi=[O,S];let $i=(()=>{class i{static withEntryComponents(){return{ngModule:i,providers:Hi.map(t=>({provide:t}))}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=e.\u0275\u0275defineInjector({imports:[[l.ez,g.m.withEntryComponents(),rn,Oi.EditItemPageModule,Si.p.forRoot(),Gi.x.withEntryComponents(),Ui.a.withEntryComponents(),ei,N.Gs]]}),i})()},6296:(M,k,s)=>{var l={"./custom/app/item-page/full/full-item-page.component":[7708,1317,7708]};function g(_){if(!s.o(l,_))return Promise.resolve().then(()=>{var v=new Error("Cannot find module '"+_+"'");throw v.code="MODULE_NOT_FOUND",v});var u=l[_],f=u[0];return Promise.all(u.slice(1).map(s.e)).then(()=>s(f))}g.keys=()=>Object.keys(l),g.id=6296,M.exports=g},80160:(M,k,s)=>{var l={"./custom/app/item-page/simple/field-components/file-section/file-section.component":[5747,5747]};function g(_){if(!s.o(l,_))return Promise.resolve().then(()=>{var v=new Error("Cannot find module '"+_+"'");throw v.code="MODULE_NOT_FOUND",v});var u=l[_],f=u[0];return s.e(u[1]).then(()=>s(f))}g.keys=()=>Object.keys(l),g.id=80160,M.exports=g},66137:(M,k,s)=>{var l={"./custom/app/item-page/simple/item-page.component":[44555,4555]};function g(_){if(!s.o(l,_))return Promise.resolve().then(()=>{var v=new Error("Cannot find module '"+_+"'");throw v.code="MODULE_NOT_FOUND",v});var u=l[_],f=u[0];return s.e(u[1]).then(()=>s(f))}g.keys=()=>Object.keys(l),g.id=66137,M.exports=g}}]);