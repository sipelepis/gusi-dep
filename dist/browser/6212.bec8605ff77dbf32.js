"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[6212],{66212:(re,J,t)=>{t.d(J,{_:()=>ye,B:()=>Ne});var e=t(5e3),E=t(8108),P=t(65806),o=t(93571),G=t(37548),U=t(28571),$=t(81907),F=t(96807),M=t(41850),W=t(11656),K=t(49210),d=t(24702),j=t(16125),D=t(28554),L=t(74043),T=t(88766),Y=t(86471),X=t(42803),H=t(21650),Z=t(66319),f=t(79001),R=t(22280),s=t(19869),c=t(45014),p=t(13457),m=t(40367),B=t(63900),O=t(95698),S=t(54004),Q=t(68675),ne=t(39841),ae=t(34827),ee=t(88002),oe=t(51117),l=t(8671),A=t(53905),i=t(55648),_=t(68285),C=t(83639),w=t(74297),v=t(84412),u=t(79300),V=t(28858),a=t(86421),y=t(93369),I=t(4900),q=t(34780),le=t(71022),me=t(78103),de=t(7973),he=t(86956),h=t(17656),b=t(65620),n=t(93075),r=t(69808),x=t(77410);const k=["componentViewContainer"],se=function(z,ie){return[z,ie]};function Ce(z,ie){if(1&z&&(e.\u0275\u0275element(0,"label",11),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275pipe(2,"translate")),2&z){const g=e.\u0275\u0275nextContext();e.\u0275\u0275property("id","label_"+g.model.id)("for",g.id)("innerHTML",g.model.required&&g.model.label?e.\u0275\u0275pipeBind1(1,4,g.model.label)+" *":e.\u0275\u0275pipeBind1(2,6,g.model.label),e.\u0275\u0275sanitizeHtml)("ngClass",e.\u0275\u0275pureFunction2(8,se,g.getClass("element","label"),g.getClass("grid","label")))}}function De(z,ie){1&z&&e.\u0275\u0275elementContainer(0)}function be(z,ie){if(1&z&&(e.\u0275\u0275element(0,"small",12),e.\u0275\u0275pipe(1,"translate")),2&z){const g=e.\u0275\u0275nextContext();e.\u0275\u0275property("innerHTML",e.\u0275\u0275pipeBind1(1,2,g.model.hint),e.\u0275\u0275sanitizeHtml)("ngClass",g.getClass("element","hint"))}}function xe(z,ie){1&z&&e.\u0275\u0275element(0,"div",13)}function Oe(z,ie){if(1&z&&(e.\u0275\u0275elementStart(0,"small",16),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&z){const g=ie.$implicit,N=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(2,1,g,N.model.validators))}}function Ie(z,ie){if(1&z&&(e.\u0275\u0275elementStart(0,"div",14),e.\u0275\u0275template(1,Oe,3,4,"small",15),e.\u0275\u0275elementEnd()),2&z){const g=e.\u0275\u0275nextContext();e.\u0275\u0275property("id",g.id+"_errors")("ngClass",e.\u0275\u0275pureFunction2(3,se,g.getClass("element","errors"),g.getClass("grid","errors"))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",g.errorMessages)}}function Me(z,ie){if(1&z&&(e.\u0275\u0275elementStart(0,"option",21),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&z){const g=ie.$implicit;e.\u0275\u0275property("value",g.code),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(g.display)}}const Pe=function(){return{standalone:!0}};function Te(z,ie){if(1&z){const g=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",17)(1,"select",18,19),e.\u0275\u0275listener("ngModelChange",function(te){return e.\u0275\u0275restoreView(g),e.\u0275\u0275nextContext().model.language=te})("blur",function(te){return e.\u0275\u0275restoreView(g),e.\u0275\u0275nextContext().onBlur(te)})("change",function(te){return e.\u0275\u0275restoreView(g),e.\u0275\u0275nextContext().onChangeLanguage(te)}),e.\u0275\u0275template(3,Me,2,2,"option",20),e.\u0275\u0275elementEnd()()}if(2&z){const g=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",g.model.readOnly)("ngModel",g.model.language)("ngModelOptions",e.\u0275\u0275pureFunction0(4,Pe)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",g.model.languageCodes)}}function Be(z,ie){if(1&z){const g=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",22)(1,"button",23),e.\u0275\u0275listener("click",function(te){return e.\u0275\u0275restoreView(g),e.\u0275\u0275nextContext().openLookup(),te.stopPropagation()}),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275element(3,"i",24),e.\u0275\u0275elementEnd()()}2&z&&(e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("ngbTooltip",e.\u0275\u0275pipeBind1(2,1,"form.lookup-help")))}function Se(z,ie){1&z&&e.\u0275\u0275elementContainer(0)}function Le(z,ie){if(1&z){const g=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-existing-metadata-list-element",27),e.\u0275\u0275listener("remove",function(){return e.\u0275\u0275restoreView(g),e.\u0275\u0275nextContext(2).onRemove()}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()}if(2&z){const g=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("reoRel",e.\u0275\u0275pipeBind1(1,6,g.relationshipValue$))("submissionItem",e.\u0275\u0275pipeBind1(2,8,g.item$))("listId",g.listId)("metadataFields",g.model.metadataFields)("submissionId",g.model.submissionId)("relationshipOptions",g.model.relationship)}}const Re=function(z){return{"d-block pb-2 pt-2":z}};function Fe(z,ie){if(1&z&&(e.\u0275\u0275element(0,"ds-existing-relation-list-element",28),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275pipe(2,"async")),2&z){const g=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(11,Re,!(null!=g.context&&g.context.index)))("reoRel",e.\u0275\u0275pipeBind1(1,7,g.relationshipValue$))("submissionItem",e.\u0275\u0275pipeBind1(2,9,g.item$))("listId",g.listId)("metadataFields",g.model.metadataFields)("submissionId",g.model.submissionId)("relationshipOptions",g.model.relationship)}}function Ae(z,ie){if(1&z&&(e.\u0275\u0275element(0,"small",12),e.\u0275\u0275pipe(1,"translate")),2&z){const g=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("innerHTML",e.\u0275\u0275pipeBind1(1,2,g.model.hint),e.\u0275\u0275sanitizeHtml)("ngClass",g.getClass("element","hint"))}}function Ue(z,ie){if(1&z&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Le,3,10,"ds-existing-metadata-list-element",25),e.\u0275\u0275template(2,Fe,3,13,"ds-existing-relation-list-element",26),e.\u0275\u0275template(3,Ae,2,4,"small",5),e.\u0275\u0275element(4,"div",13),e.\u0275\u0275elementContainerEnd()),2&z){const g=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",g.model.hasSelectableMetadata),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!g.model.hasSelectableMetadata),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",g.hasHint&&(!1===g.model.repeatable||(null==g.context?null:g.context.index)===(null==g.context||null==g.context.context||null==g.context.context.groups?null:g.context.context.groups.length)-1)&&(!g.showErrorMessages||0===g.errorMessages.length))}}const we=function(z){return{$implicit:z}},Ge=function(z,ie){return{"form-row":z,"d-none":ie}},We=["*"];function ye(z){switch(z.type){case E.i9b:return f.s;case E.fSU:return P.Gy;case E.aTt:return z instanceof W.R?T.d:P.P2;case E.VId:return z.inline?P.qz:s.u;case E.Qam:return Z.i;case E.X9S:return P.Zu;case E.e6P:return z instanceof K.s?T.d:P.TE;case E.Lq6:return P.QB;case E.Pdh:return P.Sb;case E.BKB:return P.XX;case G.n:return Y.r;case U.v:return X.D;case $.D:return D.V;case me.Q:return R.H;case F.L:return L.H;case M.d:case j.S:return H.G;case A.W:return l.x;case c.c:return p._;default:return null}}let Ne=(()=>{class z extends E.wT7{constructor(g,N,te,ce,pe,ue,_e,fe,ge,ve,Ve,Ke,je,ke,Ee,$e,ze,He){super(Ee,g,te,ce,N,_e),this.componentFactoryResolver=g,this.dynamicFormComponentService=N,this.layoutService=te,this.validationService=ce,this.typeBindRelationService=pe,this.translateService=ue,this.relationService=_e,this.modalService=fe,this.relationshipService=ge,this.selectableListService=ve,this.itemService=Ve,this.zone=Ke,this.store=je,this.submissionObjectService=ke,this.ref=Ee,this.formService=$e,this.formBuilderService=ze,this.submissionService=He,this.asBootstrapFormGroup=!1,this.bindId=!0,this.context=null,this.hasErrorMessaging=!1,this.layout=null,this.subs=[],this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter,this.customEvent=new e.EventEmitter}get componentType(){return ye(this.model)}ngOnInit(){this.isRelationship=(0,d.Uh)(this.model.relationship);const g=(0,d.Uh)(this.model.relationshipConfig);if(this.isRelationship||g){const N=this.model.relationshipConfig||this.model.relationship,te=Object.assign(new q.u,N);if(this.listId=`list-${this.model.submissionId}-${te.relationshipType}`,this.setItem(),g||!this.model.repeatable){const ce=this.selectableListService.getSelectableList(this.listId).pipe((0,m.s)(pe=>(0,d.xI)(pe)),(0,B.w)(()=>this.item$.pipe((0,O.q)(1))),(0,B.w)(pe=>{const ue=this.relationshipService.getItemRelationshipsByLabel(pe,te.relationshipType,void 0,!0,!0,(0,y.l)("leftItem"),(0,y.l)("rightItem"),(0,y.l)("relationshipType"));return ue.pipe((0,_.Gp)(),(0,_.qP)()).subscribe(_e=>{_e.forEach(fe=>{const ge=pe.firstMetadata(te.metadataField,{authority:`${u.O_}${fe.id}`}),ve=pe.firstMetadata(this.model.metadataFields,{authority:`${u.O_}${fe.id}`});(0,d.Uh)(ge)&&(0,d.UE)(ge.value)&&(0,d.Uh)(ve)&&(0,d.UE)(ve.value)&&this.relationshipService.setNameVariant(this.listId,ge.value,ve.value)})}),ue.pipe((0,I.Sv)(pe.uuid),(0,_.xw)(),(0,S.U)(_e=>_e.payload.page.map(fe=>Object.assign(new v.T,{indexableObject:fe}))))})).subscribe(pe=>this.selectableListService.select(this.listId,pe));this.subs.push(ce)}if(this.value=(0,d.Uh)(this.model.metadataValue)?Object.assign(new de.u,this.model.metadataValue):Object.assign(new de.u,this.model.value),(0,d.Uh)(this.value)&&this.value.isVirtual){const ce=this.relationshipService.findById(this.value.virtualValue,!0,!0,(0,y.l)("leftItem"),(0,y.l)("rightItem"),(0,y.l)("relationshipType")).pipe((0,_.g1)(),(0,_.xe)());this.relationshipValue$=(0,ne.a)([this.item$.pipe((0,O.q)(1)),ce]).pipe((0,B.w)(([pe,ue])=>ue.leftItem.pipe((0,_.g1)(),(0,_.xe)(),(0,S.U)(_e=>new o.zw(ue,_e.uuid!==pe.uuid,this.store,this.model.submissionId)))),(0,Q.O)(void 0))}}}get isCheckbox(){return this.model.type===E.fSU||this.model.type===c.c}ngOnChanges(g){g&&!this.isRelationship&&(0,d.Uh)(this.group.get(this.model.id))&&(super.ngOnChanges(g),this.model&&this.model.placeholder&&(this.model.placeholder=this.translateService.instant(this.model.placeholder)),this.model.typeBindRelations&&this.model.typeBindRelations.length>0&&this.subscriptions.push(...this.typeBindRelationService.subscribeRelations(this.model,this.control)))}ngDoCheck(){(0,d.pT)(this.showErrorMessagesPreviousStage)&&this.showErrorMessagesPreviousStage!==this.showErrorMessages&&(this.showErrorMessagesPreviousStage=this.showErrorMessages,this.forceShowErrorDetection())}ngAfterViewInit(){this.showErrorMessagesPreviousStage=this.showErrorMessages}createFormControlComponent(){if(super.createFormControlComponent(),null!==this.componentType){let g;this.context&&this.context instanceof E.NJD&&(g=this.context.index);const N=this.dynamicFormComponentService.getFormControlRef(this.model,g);N&&(N.formModel=this.formModel,N.formGroup=this.formGroup)}}forceShowErrorDetection(){this.showErrorMessages&&(this.destroyFormControlComponent(),this.createFormControlComponent())}onChangeLanguage(g){(0,d.UE)(this.model.value)&&this.onChange(g)}hasRelationship(){return(0,d.UE)(this.model)&&this.model.hasOwnProperty("relationship")&&(0,d.UE)(this.model.relationship)}isVirtual(){const g=this.model.metadataValue;return(0,d.UE)(g)&&g.isVirtual}hasResultsSelected(){return this.model.value.pipe((0,S.U)(g=>(0,d.UE)(g)))}openLookup(){this.modalRef=this.modalService.open(i.i,{size:"lg"}),(0,d.Uh)(this.model.value)&&(this.focus.emit({$event:new Event("focus"),context:this.context,control:this.control,model:this.model,type:E.nm_.Focus}),this.change.emit({$event:new Event("change"),context:this.context,control:this.control,model:this.model,type:E.nm_.Change})),this.submissionService.dispatchSave(this.model.submissionId);const g=this.modalRef.componentInstance;(0,d.Uh)(this.model.value)&&!this.model.readOnly&&("string"==typeof this.model.value?g.query=this.model.value:"string"==typeof this.model.value.value&&(g.query=this.model.value.value)),g.repeatable=this.model.repeatable,g.listId=this.listId,g.relationshipOptions=this.model.relationship,g.label=this.model.relationship.relationshipType,g.metadataFields=this.model.metadataFields,g.item=this.item,g.collection=this.collection,g.submissionId=this.model.submissionId}onRemove(){const g=this.context.context,N=this.formBuilderService.getPath(g),te=this.group.root.get(N);this.formBuilderService.removeFormArrayGroup(this.context.index,te,g),0===this.model.parent.context.groups.length&&this.formBuilderService.addFormArrayGroup(te,g)}ngOnDestroy(){this.subs.filter(g=>(0,d.Uh)(g)).forEach(g=>g.unsubscribe())}get hasHint(){return(0,d.UE)(this.model.hint)&&"&nbsp;"!==this.model.hint}setItem(){const g=this.submissionObjectService.findById(this.model.submissionId,!0,!0,(0,y.l)("item"),(0,y.l)("collection")).pipe((0,_.g1)(),(0,_.xe)());this.item$=g.pipe((0,B.w)(te=>te.item.pipe((0,_.g1)(),(0,_.xe)())));const N=g.pipe((0,B.w)(te=>te.collection.pipe((0,_.g1)(),(0,_.xe)())));this.subs.push(this.item$.subscribe(te=>this.item=te)),this.subs.push(N.subscribe(te=>this.collection=te))}}return z.\u0275fac=function(g){return new(g||z)(e.\u0275\u0275directiveInject(e.ComponentFactoryResolver),e.\u0275\u0275directiveInject(E.rJA),e.\u0275\u0275directiveInject(E.vnf),e.\u0275\u0275directiveInject(E.fhz),e.\u0275\u0275directiveInject(ae.R),e.\u0275\u0275directiveInject(he.sK),e.\u0275\u0275directiveInject(E.uTg),e.\u0275\u0275directiveInject(h.FF),e.\u0275\u0275directiveInject(ee.U),e.\u0275\u0275directiveInject(oe.w),e.\u0275\u0275directiveInject(C.S),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(b.yh),e.\u0275\u0275directiveInject(w.O),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(V.o),e.\u0275\u0275directiveInject(le.c),e.\u0275\u0275directiveInject(a.b))},z.\u0275cmp=e.\u0275\u0275defineComponent({type:z,selectors:[["ds-dynamic-form-control-container"]],contentQueries:function(g,N,te){if(1&g&&e.\u0275\u0275contentQuery(te,E.ATj,4),2&g){let ce;e.\u0275\u0275queryRefresh(ce=e.\u0275\u0275loadQuery())&&(N.contentTemplateList=ce)}},viewQuery:function(g,N){if(1&g&&e.\u0275\u0275viewQuery(k,7,e.ViewContainerRef),2&g){let te;e.\u0275\u0275queryRefresh(te=e.\u0275\u0275loadQuery())&&(N.componentViewContainerRef=te.first)}},inputs:{inputTemplateList:["templates","inputTemplateList"],hasMetadataModel:"hasMetadataModel",formId:"formId",formGroup:"formGroup",formModel:"formModel",asBootstrapFormGroup:"asBootstrapFormGroup",bindId:"bindId",context:"context",group:"group",hostClass:"hostClass",hasErrorMessaging:"hasErrorMessaging",layout:"layout",model:"model"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",customEvent:"ngbEvent"},features:[e.\u0275\u0275InheritDefinitionFeature,e.\u0275\u0275NgOnChangesFeature],ngContentSelectors:We,decls:16,vars:27,consts:[[3,"formGroup","ngClass"],[3,"id","for","innerHTML","ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["componentViewContainer",""],["class","text-muted ds-hint",3,"innerHTML","ngClass",4,"ngIf"],["class","clearfix w-100 mb-2",4,"ngIf"],[3,"id","ngClass",4,"ngIf"],["class","col-xs-2",4,"ngIf"],["class","col-auto text-center",4,"ngIf"],[4,"ngIf"],[3,"id","for","innerHTML","ngClass"],[1,"text-muted","ds-hint",3,"innerHTML","ngClass"],[1,"clearfix","w-100","mb-2"],[3,"id","ngClass"],["class","invalid-feedback d-block",4,"ngFor","ngForOf"],[1,"invalid-feedback","d-block"],[1,"col-xs-2"],["required","",1,"form-control",3,"disabled","ngModel","ngModelOptions","ngModelChange","blur","change"],["language","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"col-auto","text-center"],["type","button","placement","top",1,"btn","btn-secondary",3,"ngbTooltip","click"],[1,"fa","fa-search"],[3,"reoRel","submissionItem","listId","metadataFields","submissionId","relationshipOptions","remove",4,"ngIf"],[3,"ngClass","reoRel","submissionItem","listId","metadataFields","submissionId","relationshipOptions",4,"ngIf"],[3,"reoRel","submissionItem","listId","metadataFields","submissionId","relationshipOptions","remove"],[3,"ngClass","reoRel","submissionItem","listId","metadataFields","submissionId","relationshipOptions"]],template:function(g,N){1&g&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,Ce,3,11,"label",1),e.\u0275\u0275template(2,De,1,0,"ng-container",2),e.\u0275\u0275elementStart(3,"div",3)(4,"div",3)(5,"div"),e.\u0275\u0275elementContainer(6,null,4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,be,2,4,"small",5),e.\u0275\u0275template(9,xe,1,0,"div",6),e.\u0275\u0275template(10,Ie,2,6,"div",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,Te,4,5,"div",8),e.\u0275\u0275template(12,Be,4,3,"div",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,Se,1,0,"ng-container",2),e.\u0275\u0275template(14,Ue,5,3,"ng-container",10),e.\u0275\u0275projection(15),e.\u0275\u0275elementEnd()),2&g&&(e.\u0275\u0275classProp("form-group","GROUP"!==N.model.type&&N.asBootstrapFormGroup||N.getClass("element","container").includes("form-group"))("d-none",N.model.hidden),e.\u0275\u0275property("formGroup",N.group)("ngClass",e.\u0275\u0275pureFunction2(19,se,N.getClass("element","container"),N.getClass("grid","container"))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!N.isCheckbox&&N.hasLabel),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",null==N.startTemplate?null:N.startTemplate.templateRef)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(22,we,N.model)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(24,Ge,N.model.hasLanguages||N.isRelationship,(null==N.value?null:N.value.isVirtual)&&(N.model.hasSelectableMetadata||(null==N.context?null:N.context.index)>0))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",N.getClass("grid","control")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",N.hasHint&&(!N.model.repeatable&&(!1===N.isRelationship||null===(null==N.value?null:N.value.value))||!0===N.model.repeatable&&(null==N.context?null:N.context.index)===(null==N.context||null==N.context.context||null==N.context.context.groups?null:N.context.context.groups.length)-1)&&(!N.showErrorMessages||0===N.errorMessages.length)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!==(null==N.context?null:N.context.index)&&(!N.showErrorMessages||0===N.errorMessages.length)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!N.model.hideErrorMessages&&N.showErrorMessages),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",N.model.languageCodes&&N.model.languageCodes.length>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",N.isRelationship),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",null==N.endTemplate?null:N.endTemplate.templateRef)("ngTemplateOutletContext",N.model),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==N.value?null:N.value.isVirtual))},directives:[n.JL,n.sg,r.mk,r.O5,r.tP,r.sg,n.EJ,n.Q7,n.JJ,n.On,n.YN,n.Kr,h._L,o.fP,x.t],pipes:[he.X$,r.Ov],styles:["[_nghost-%COMP%]     .ds-form-input-addon{border-top-right-radius:0!important;border-bottom-right-radius:0!important;border-right:0!important}[_nghost-%COMP%]     .ds-form-input-btn{border:var(--bs-input-btn-border-width) solid var(--bs-input-border-color);border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}[_nghost-%COMP%]     .ds-form-input-btn:focus{box-shadow:none!important}[_nghost-%COMP%]     button.ds-form-add-more:focus{outline:none;box-shadow:none!important}[_nghost-%COMP%]     .ds-form-input-value{border-top-left-radius:0!important;border-bottom-left-radius:0!important}[_nghost-%COMP%]     .fa-spin{pointer-events:none}[_nghost-%COMP%]     .left-addon .far, [_nghost-%COMP%]     .left-addon .fas, [_nghost-%COMP%]     .left-addon i{left:0}[_nghost-%COMP%]     .right-addon .far, [_nghost-%COMP%]     .right-addon .fas, [_nghost-%COMP%]     .right-addon i{right:0}[_nghost-%COMP%]     .left-addon input{padding-left:calc(var(--bs-spacer) * 2.25)}[_nghost-%COMP%]     .right-addon input{padding-right:calc(var(--bs-spacer) * 2.25)}[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center}[_nghost-%COMP%]     .custom-select{-webkit-appearance:none;appearance:none}"]}),z})()},93571:(re,J,t)=>{t.d(J,{zw:()=>R,fP:()=>s});var e=t(5e3),E=t(61135),P=t(39300),o=t(95698),U=(t(33609),t(27869)),$=t(68285),F=t(24702),M=t(84412),W=t(51117),K=t(35355),d=t(86421),j=t(65620),D=t(69808),L=t(48106),T=t(71966),Y=t(86956);function X(c,p){1&c&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"ds-themed-loading",5),e.\u0275\u0275elementContainerEnd()),2&c&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("showMessage",!1))}function H(c,p){if(1&c&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"ds-metadata-representation-loader",6),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementContainerEnd()),2&c){const m=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("mdRepresentation",e.\u0275\u0275pipeBind1(2,1,m.metadataRepresentation$))}}class R extends class Z{constructor(p,m){this.oldIndex=p,this.newIndex=m}update(){this.oldIndex=this.newIndex}get hasMoved(){return this.oldIndex!==this.newIndex}}{constructor(p,m,B,O,S,Q){super(S,Q),this.relationship=p,this.useLeftItem=m,this.store=B,this.submissionID=O,this.relationship=p,this.useLeftItem=m}getId(){return this.relationship.id}getPlace(){return this.useLeftItem?this.relationship.rightPlace:this.relationship.leftPlace}}let s=(()=>{class c{constructor(m,B,O){this.selectableListService=m,this.store=B,this.submissionService=O,this.metadataRepresentation$=new E.X(void 0),this.remove=new e.EventEmitter,this.subs=[]}ngOnInit(){this.ngOnChanges()}ngOnChanges(){(0,F.Uh)(this.reoRel)&&this.subs.push((this.reoRel.useLeftItem?this.reoRel.relationship.leftItem:this.reoRel.relationship.rightItem).pipe((0,$.g1)(),(0,$.xe)(),(0,P.h)(B=>(0,F.Uh)(B)&&(0,F.UE)(B.uuid))).subscribe(B=>{this.relatedItem=B;const O=this.submissionItem.firstMetadata(this.relationshipOptions.metadataField,{value:this.relatedItem.uuid});if((0,F.Uh)(O)){const S=this.submissionItem.firstMetadata(this.metadataFields,{authority:O.authority}),Q=Object.assign(new U.A(S),this.relatedItem);this.metadataRepresentation$.next(Q)}}))}removeSelection(){this.submissionService.dispatchSave(this.submissionId),this.submissionService.getSubmissionObject(this.submissionId).pipe((0,P.h)(m=>!m.savePending&&!m.isLoading),(0,o.q)(1)).subscribe(()=>{this.selectableListService.deselectSingle(this.listId,Object.assign(new M.T,{indexableObject:this.relatedItem})),this.store.dispatch(new K.J9(this.submissionItem,this.relatedItem,this.relationshipOptions.relationshipType,this.submissionId)),this.remove.emit()})}ngOnDestroy(){this.subs.filter(m=>(0,F.Uh)(m)).forEach(m=>m.unsubscribe())}}return c.\u0275fac=function(m){return new(m||c)(e.\u0275\u0275directiveInject(W.w),e.\u0275\u0275directiveInject(j.yh),e.\u0275\u0275directiveInject(d.b))},c.\u0275cmp=e.\u0275\u0275defineComponent({type:c,selectors:[["ds-existing-metadata-list-element"]],inputs:{listId:"listId",submissionItem:"submissionItem",reoRel:"reoRel",metadataFields:"metadataFields",relationshipOptions:"relationshipOptions",submissionId:"submissionId"},outputs:{remove:"remove"},features:[e.\u0275\u0275NgOnChangesFeature],decls:9,vars:9,consts:[[1,"d-flex"],[1,"mr-auto","text-contents"],[4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"title","click"],["aria-hidden","true",1,"fas","fa-trash"],[3,"showMessage"],[3,"mdRepresentation"]],template:function(m,B){1&m&&(e.\u0275\u0275elementStart(0,"div",0)(1,"span",1),e.\u0275\u0275template(2,X,2,1,"ng-container",2),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275template(4,H,3,3,"ng-container",2),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",3),e.\u0275\u0275listener("click",function(){return B.removeSelection()}),e.\u0275\u0275pipe(7,"translate"),e.\u0275\u0275element(8,"i",4),e.\u0275\u0275elementEnd()()),2&m&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(3,3,B.metadataRepresentation$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(5,5,B.metadataRepresentation$)),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(7,7,"form.remove")))},directives:[D.O5,L.Z,T.G],pipes:[D.Ov,Y.X$],styles:["span.text-contents[_ngcontent-%COMP%]{padding:var(--bs-btn-padding-y) 0}"]}),c})()},77410:(re,J,t)=>{t.d(J,{t:()=>Z});var e=t(5e3),E=t(61135),P=t(39300),G=(t(33609),t(68285)),U=t(24702),$=t(84412),F=t(51117),M=t(35355),W=t(51121),d=(t(93571),t(86421)),j=t(65620),D=t(69808),L=t(48106),T=t(91538);function Y(f,R){1&f&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"ds-themed-loading",5),e.\u0275\u0275elementContainerEnd()),2&f&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("showMessage",!1))}function X(f,R){if(1&f&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"ds-listable-object-component-loader",6),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementContainerEnd()),2&f){const s=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("showLabel",!1)("viewMode",s.viewType)("object",e.\u0275\u0275pipeBind1(2,3,s.relatedItem$))}}let Z=(()=>{class f{constructor(s,c,p){this.selectableListService=s,this.submissionService=c,this.store=p,this.relatedItem$=new E.X(void 0),this.viewType=W.w.ListElement,this.remove=new e.EventEmitter,this.subs=[]}ngOnInit(){this.ngOnChanges()}ngOnChanges(){(0,U.Uh)(this.reoRel)&&this.subs.push((this.reoRel.useLeftItem?this.reoRel.relationship.leftItem:this.reoRel.relationship.rightItem).pipe((0,G.g1)(),(0,G.xe)(),(0,P.h)(c=>(0,U.Uh)(c)&&(0,U.UE)(c.uuid))).subscribe(c=>{this.relatedItem$.next(c)}))}removeSelection(){this.submissionService.dispatchSave(this.submissionId),this.selectableListService.deselectSingle(this.listId,Object.assign(new $.T,{indexableObject:this.relatedItem$.getValue()})),this.store.dispatch(new M.J9(this.submissionItem,this.relatedItem$.getValue(),this.relationshipOptions.relationshipType,this.submissionId))}ngOnDestroy(){this.subs.filter(s=>(0,U.Uh)(s)).forEach(s=>s.unsubscribe())}}return f.\u0275fac=function(s){return new(s||f)(e.\u0275\u0275directiveInject(F.w),e.\u0275\u0275directiveInject(d.b),e.\u0275\u0275directiveInject(j.yh))},f.\u0275cmp=e.\u0275\u0275defineComponent({type:f,selectors:[["ds-existing-relation-list-element"]],inputs:{listId:"listId",submissionItem:"submissionItem",reoRel:"reoRel",metadataFields:"metadataFields",relationshipOptions:"relationshipOptions",submissionId:"submissionId"},outputs:{remove:"remove"},features:[e.\u0275\u0275NgOnChangesFeature],decls:8,vars:6,consts:[[1,"d-flex"],[1,"mr-auto","text-contents"],[4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],["aria-hidden","true",1,"fas","fa-trash"],[3,"showMessage"],[3,"showLabel","viewMode","object"]],template:function(s,c){1&s&&(e.\u0275\u0275elementStart(0,"div",0)(1,"span",1),e.\u0275\u0275template(2,Y,2,1,"ng-container",2),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275template(4,X,3,5,"ng-container",2),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",3),e.\u0275\u0275listener("click",function(){return c.removeSelection()}),e.\u0275\u0275element(7,"i",4),e.\u0275\u0275elementEnd()()),2&s&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(3,2,c.relatedItem$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(5,4,c.relatedItem$)))},directives:[D.O5,L.Z,T.p],pipes:[D.Ov],styles:["span.text-contents[_ngcontent-%COMP%]{padding:var(--bs-btn-padding-y) 0}"]}),f})()},79001:(re,J,t)=>{t.d(J,{s:()=>K});var e=t(5e3),E=t(8108),P=t(24702);function G(d,j){1&d&&e.\u0275\u0275elementContainer(0)}t(18980);const U=function(d){return[d]},$=function(d,j){return[d,j]};function F(d,j){if(1&d){const D=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-dynamic-form-control-container",9),e.\u0275\u0275listener("dfBlur",function(T){return e.\u0275\u0275restoreView(D),e.\u0275\u0275nextContext(2).onBlur(T)})("dfChange",function(T){return e.\u0275\u0275restoreView(D),e.\u0275\u0275nextContext(2).onChange(T)})("dfFocus",function(T){return e.\u0275\u0275restoreView(D),e.\u0275\u0275nextContext(2).onFocus(T)})("ngbEvent",function(T){return e.\u0275\u0275restoreView(D),e.\u0275\u0275nextContext(2).onCustomEvent(T,null,!0)}),e.\u0275\u0275elementEnd()}if(2&d){const D=j.$implicit,L=e.\u0275\u0275nextContext(),T=L.$implicit,Y=L.index,X=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("d-none",D.hidden),e.\u0275\u0275property("bindId",!1)("formGroup",X.group)("formModel",X.formModel)("context",T)("group",X.control.get(e.\u0275\u0275pureFunction1(12,U,Y)))("hidden",D.hidden)("layout",X.formLayout)("model",D)("templates",X.templates)("ngClass",e.\u0275\u0275pureFunction2(14,$,X.getClass("element","host",D),X.getClass("grid","host",D)))}}function M(d,j){1&d&&e.\u0275\u0275elementContainer(0)}function W(d,j){if(1&d&&(e.\u0275\u0275elementStart(0,"div",4)(1,"div",5),e.\u0275\u0275element(2,"i",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,G,1,0,"ng-container",7),e.\u0275\u0275template(4,F,1,17,"ds-dynamic-form-control-container",8),e.\u0275\u0275template(5,M,1,0,"ng-container",7),e.\u0275\u0275elementEnd()),2&d){const D=j.$implicit,L=j.index,T=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("grey-background",T.model.isInlineGroupArray),e.\u0275\u0275property("formGroupName",L)("ngClass",e.\u0275\u0275pureFunction2(15,$,T.getClass("element","group"),T.getClass("grid","group")))("cdkDragDisabled",T.dragDisabled)("cdkDragPreviewClass","ds-submission-reorder-dragging"),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("drag-disable",T.dragDisabled),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("drag-disable",T.dragDisabled),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",null==T.startTemplate?null:T.startTemplate.templateRef)("ngTemplateOutletContext",D),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",D.group),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",null==T.endTemplate?null:T.endTemplate.templateRef)("ngTemplateOutletContext",D)}}let K=(()=>{class d extends E.CRj{constructor(D,L){super(D,L),this.layoutService=D,this.validationService=L,this.bindId=!0,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter,this.customEvent=new e.EventEmitter}moveSelection(D){if(D.previousIndex===D.currentIndex)return;this.model.moveGroup(D.previousIndex,D.currentIndex-D.previousIndex);const L=D.previousIndex,T=D.currentIndex;(0,P.Uh)(this.model.groups[T])&&(0,P.Uh)(this.control.controls[T])&&this.onCustomEvent({previousIndex:L,index:T,arrayModel:this.model,model:this.model.groups[T].group[0],control:this.control.controls[T]},"move")}update(D,L){const T=Object.assign({},D,{context:{index:L-1}});this.onChange(T)}get dragDisabled(){return 1===this.model.groups.length||!this.model.isDraggable}}return d.\u0275fac=function(D){return new(D||d)(e.\u0275\u0275directiveInject(E.vnf),e.\u0275\u0275directiveInject(E.fhz))},d.\u0275cmp=e.\u0275\u0275defineComponent({type:d,selectors:[["ds-dynamic-form-array"]],inputs:{bindId:"bindId",formModel:"formModel",formLayout:"formLayout",group:"group",layout:"layout",model:"model",templates:"templates"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",customEvent:"ngbEvent"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:7,consts:[[3,"formGroup"],[3,"id","formArrayName","ngClass"],["cdkDropList","","cdkDropListLockAxis","y",3,"cdkDropListDropped"],["role","group","cdkDrag","","cdkDragHandle","",3,"formGroupName","ngClass","cdkDragDisabled","cdkDragPreviewClass","grey-background",4,"ngFor","ngForOf"],["role","group","cdkDrag","","cdkDragHandle","",3,"formGroupName","ngClass","cdkDragDisabled","cdkDragPreviewClass"],["tabindex","0",1,"drag-handle"],[1,"drag-icon","fas","fa-grip-vertical","fa-fw"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"bindId","formGroup","formModel","context","group","hidden","d-none","layout","model","templates","ngClass","dfBlur","dfChange","dfFocus","ngbEvent",4,"ngFor","ngForOf"],[3,"bindId","formGroup","formModel","context","group","hidden","layout","model","templates","ngClass","dfBlur","dfChange","dfFocus","ngbEvent"]],template:function(D,L){1&D&&(e.\u0275\u0275elementContainerStart(0,0),e.\u0275\u0275elementStart(1,"div",1)(2,"div",2),e.\u0275\u0275listener("cdkDropListDropped",function(Y){return L.moveSelection(Y)}),e.\u0275\u0275template(3,W,6,18,"div",3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&D&&(e.\u0275\u0275property("formGroup",L.group),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("d-none",L.model.hidden),e.\u0275\u0275property("id",L.id)("formArrayName",L.model.id)("ngClass",L.getClass("element","control")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",L.model.groups))},styles:["[_nghost-%COMP%]{display:block}.drag-disable[_ngcontent-%COMP%]{visibility:hidden!important}.drag-disable[_ngcontent-%COMP%]:hover, .drag-disable[_ngcontent-%COMP%]:focus{cursor:default}.drag-disable[_ngcontent-%COMP%]:hover   .drag-icon[_ngcontent-%COMP%], .drag-disable[_ngcontent-%COMP%]:focus   .drag-icon[_ngcontent-%COMP%]{visibility:hidden!important}.cdk-drag[_ngcontent-%COMP%]{margin-left:calc(-2.3 * var(--bs-spacer));margin-right:calc(-.5 * var(--bs-spacer));padding-right:calc(.5 * var(--bs-spacer))}.cdk-drag[_ngcontent-%COMP%]   .drag-icon[_ngcontent-%COMP%]{visibility:hidden;width:calc(2 * var(--bs-spacer));color:var(--bs-gray-600);margin:var(--bs-btn-padding-y) 0;line-height:var(--bs-btn-line-height);text-indent:calc(.5 * var(--bs-spacer))}.cdk-drag[_ngcontent-%COMP%]:hover, .cdk-drag[_ngcontent-%COMP%]:focus{cursor:grab}.cdk-drag[_ngcontent-%COMP%]:hover   .drag-icon[_ngcontent-%COMP%], .cdk-drag[_ngcontent-%COMP%]:focus   .drag-icon[_ngcontent-%COMP%]{visibility:visible}.drag-handle[_ngcontent-%COMP%]:hover{cursor:move}.drag-handle[_ngcontent-%COMP%]:focus   .drag-icon[_ngcontent-%COMP%]{visibility:visible}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{cursor:grabbing}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]   .drag-icon[_ngcontent-%COMP%]{visibility:hidden}.cdk-drag-preview[_ngcontent-%COMP%]{margin:0;padding:0}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}"]}),d})()},13457:(re,J,t)=>{t.d(J,{_:()=>F});var e=t(5e3),E=t(65806),o=(t(45014),t(8108)),G=t(93075),U=t(69808);const $=function(M,W){return[M,W]};let F=(()=>{class M extends E.Gy{constructor(K,d){super(K,d),this.bindId=!0,this.selected=new e.EventEmitter,this.remove=new e.EventEmitter,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter}}return M.\u0275fac=function(K){return new(K||M)(e.\u0275\u0275directiveInject(o.vnf),e.\u0275\u0275directiveInject(o.fhz))},M.\u0275cmp=e.\u0275\u0275defineComponent({type:M,selectors:[["ds-custom-switch"]],inputs:{bindId:"bindId",group:"group",model:"model"},outputs:{selected:"selected",remove:"remove",blur:"blur",change:"change",focus:"focus"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:20,consts:[[1,"form-check","custom-control","custom-switch",3,"formGroup"],["type","checkbox",1,"form-check-input","custom-control-input",3,"checked","id","formControlName","indeterminate","name","ngClass","required","tabindex","value","blur","change","focus"],[1,"form-check-label","custom-control-label",3,"for"],[3,"innerHTML","ngClass"]],template:function(K,d){1&K&&(e.\u0275\u0275elementStart(0,"div",0)(1,"input",1),e.\u0275\u0275listener("blur",function(D){return d.onBlur(D)})("change",function(D){return d.onChange(D)})("focus",function(D){return d.onFocus(D)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"label",2),e.\u0275\u0275element(3,"span",3),e.\u0275\u0275elementEnd()()),2&K&&(e.\u0275\u0275classProp("disabled",d.model.disabled),e.\u0275\u0275property("formGroup",d.group),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("is-invalid",d.showErrorMessages),e.\u0275\u0275property("checked",d.model.checked)("id",d.id)("formControlName",d.model.id)("indeterminate",d.model.indeterminate)("name",d.model.name)("ngClass",d.getClass("element","control"))("required",d.model.required)("tabindex",d.model.tabIndex)("value",d.model.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",d.bindId&&d.model.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("innerHTML",d.model.label,e.\u0275\u0275sanitizeHtml)("ngClass",e.\u0275\u0275pureFunction2(17,$,d.getClass("element","label"),d.getClass("grid","label"))))},directives:[G.JL,G.sg,G.Wl,G.Zs,G.JJ,G.u,U.mk],styles:[""]}),M})()},45014:(re,J,t)=>{t.d(J,{c:()=>P,p:()=>o});var e=t(70655),E=t(8108);const P="CUSTOM_SWITCH";class o extends E.dwp{constructor(U,$){super(U,$),this.type=P}}(0,e.gn)([(0,E.BgY)(),(0,e.w6)("design:type",String)],o.prototype,"type",void 0)},19869:(re,J,t)=>{t.d(J,{u:()=>F});var e=t(5e3),E=t(17656),P=t(8108),o=t(93075),G=t(69808);function U(M,W){if(1&M&&e.\u0275\u0275element(0,"i",7),2&M){const K=e.\u0275\u0275nextContext();e.\u0275\u0275classMap(K.model.toggleIcon)}}function $(M,W){if(1&M&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&M){const K=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(K.model.toggleLabel)}}let F=(()=>{class M extends P.LvC{constructor(K,d,j){super(K,d),this.layoutService=K,this.validationService=d,this.config=j,this.bindId=!0,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter}}return M.\u0275fac=function(K){return new(K||M)(e.\u0275\u0275directiveInject(P.vnf),e.\u0275\u0275directiveInject(P.fhz),e.\u0275\u0275directiveInject(E.M4))},M.\u0275cmp=e.\u0275\u0275defineComponent({type:M,selectors:[["ds-dynamic-date-picker-inline"]],viewQuery:function(K,d){if(1&K&&e.\u0275\u0275viewQuery(E.VL,5),2&K){let j;e.\u0275\u0275queryRefresh(j=e.\u0275\u0275loadQuery())&&(d.ngbDatePicker=j.first)}},inputs:{bindId:"bindId",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:25,consts:[[1,"input-group",3,"formGroup"],["ngbDatepicker","",1,"form-control",3,"displayMonths","id","firstDayOfWeek","formControlName","maxDate","minDate","name","navigation","ngClass","outsideDays","placeholder","placement","weekdays","showWeekNumbers","startDate","blur","dateSelect","change","focus"],["datepicker","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"disabled","click"],["aria-hidden","true",3,"class",4,"ngIf"],[4,"ngIf"],["aria-hidden","true"]],template:function(K,d){if(1&K){const j=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0)(1,"input",1,2),e.\u0275\u0275listener("blur",function(L){return d.onBlur(L)})("dateSelect",function(L){return d.onChange(L)})("change",function(L){return d.onChange(L)})("focus",function(L){return d.onFocus(L)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",3)(4,"button",4),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(j),e.\u0275\u0275reference(2).toggle()}),e.\u0275\u0275template(5,U,1,3,"i",5),e.\u0275\u0275template(6,$,2,1,"span",6),e.\u0275\u0275elementEnd()()()}2&K&&(e.\u0275\u0275property("formGroup",d.group),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("is-invalid",d.showErrorMessages),e.\u0275\u0275property("displayMonths",d.model.getAdditional("displayMonths",d.config.displayMonths))("id",d.id)("firstDayOfWeek",d.model.getAdditional("firstDayOfWeek",d.config.firstDayOfWeek))("formControlName",d.model.id)("maxDate",d.model.max)("minDate",d.model.min)("name",d.model.name)("navigation",d.model.getAdditional("navigation",d.config.navigation))("ngClass",d.getClass("element","control"))("outsideDays",d.model.getAdditional("outsideDays",d.config.outsideDays))("placeholder",d.model.placeholder)("placement",d.model.getAdditional("placement","bottom-left"))("weekdays",d.model.getAdditional("showWeekdays",d.config.showWeekdays))("showWeekNumbers",d.model.getAdditional("showWeekNumbers",d.config.showWeekNumbers))("startDate",d.model.focusedDate),e.\u0275\u0275attribute("aria-labelledby","label_"+d.model.id),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("disabled",d.model.disabled),e.\u0275\u0275property("disabled",d.model.disabled),e.\u0275\u0275attribute("aria-labelledby","label_"+d.model.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",d.model.toggleIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",d.model.toggleLabel))},directives:[o.JL,o.sg,E.J4,o.Fj,o.JJ,o.u,G.mk,G.O5],encapsulation:2}),M})()},8671:(re,J,t)=>{t.d(J,{x:()=>G});var e=t(5e3),E=t(8108),o=(t(53905),t(86956));let G=(()=>{class U extends E.LvC{constructor(F,M){super(F,M),this.layoutService=F,this.validationService=M,this.modelValuesString="",this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter}}return U.\u0275fac=function(F){return new(F||U)(e.\u0275\u0275directiveInject(E.vnf),e.\u0275\u0275directiveInject(E.fhz))},U.\u0275cmp=e.\u0275\u0275defineComponent({type:U,selectors:[["ds-dynamic-disabled"]],inputs:{formId:"formId",group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:5,vars:11,consts:[[1,"form-row","align-items-center"],[1,"col"],[1,"form-control",3,"id","name","value","disabled","type","placeholder","readonly"]],template:function(F,M){1&F&&(e.\u0275\u0275elementStart(0,"div")(1,"div",0)(2,"div",1),e.\u0275\u0275element(3,"input",2),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()()),2&F&&(e.\u0275\u0275advance(3),e.\u0275\u0275classProp("is-invalid",M.showErrorMessages),e.\u0275\u0275property("id",M.id)("name",M.model.name)("value",M.modelValuesString)("disabled",M.model.disabled)("type",M.model.inputType)("placeholder",e.\u0275\u0275pipeBind1(4,9,M.model.placeholder))("readonly",M.model.readOnly))},pipes:[o.X$],encapsulation:2}),U})()},10362:(re,J,t)=>{t.d(J,{m:()=>K});var e=t(8108),E=t(54004),P=t(39646),o=t(49566),G=t(24702),U=t(7973),$=t(58140),M=(t(19260),t(62713)),W=t(5e3);let K=(()=>{class d extends e.LvC{constructor(D,L,T){super(L,T),this.vocabularyService=D,this.layoutService=L,this.validationService=T}getInitValueFromModel(){let D;if((0,G.UE)(this.model.value)&&this.model.value instanceof U.u){let L;L=this.model.value.hasAuthority()?this.vocabularyService.getVocabularyEntryByID(this.model.value.authority,this.model.vocabularyOptions):this.vocabularyService.getVocabularyEntryByValue(this.model.value.value,this.model.vocabularyOptions),D=L.pipe((0,E.U)(T=>(0,G.UE)(T)?new U.u(T.value,null,T.authority,T.display,this.model.value.place,null,T.otherInformation||null):this.model.value))}else D=(0,G.UE)(this.model.value)&&this.model.value instanceof $.j?(0,P.of)(new U.u(this.model.value.value,null,this.model.value.authority,this.model.value.display,0,null,this.model.value.otherInformation||null)):(0,P.of)(new U.u(this.model.value));return D}onBlur(D){this.blur.emit(D)}onFocus(D){this.focus.emit(D)}dispatchUpdate(D){this.model.value=D,this.change.emit(D)}updatePageInfo(D,L,T,Y){this.pageInfo=Object.assign(new M.S,{elementsPerPage:D,currentPage:L,totalElements:T,totalPages:Y})}}return d.\u0275fac=function(D){return new(D||d)(W.\u0275\u0275directiveInject(o.c),W.\u0275\u0275directiveInject(e.vnf),W.\u0275\u0275directiveInject(e.fhz))},d.\u0275cmp=W.\u0275\u0275defineComponent({type:d,selectors:[["ds-dynamic-vocabulary"]],inputs:{group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[W.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(D,L){},encapsulation:2}),d})()},66319:(re,J,t)=>{t.d(J,{i:()=>G});var e=t(5e3),E=t(8108);const P=function(U,$){return[U,$]};function o(U,$){if(1&U){const F=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-dynamic-form-control-container",4),e.\u0275\u0275listener("dfBlur",function(W){return e.\u0275\u0275restoreView(F),e.\u0275\u0275nextContext().onBlur(W)})("dfChange",function(W){return e.\u0275\u0275restoreView(F),e.\u0275\u0275nextContext().onChange(W)})("dfFocus",function(W){return e.\u0275\u0275restoreView(F),e.\u0275\u0275nextContext().onFocus(W)})("ngbEvent",function(W){return e.\u0275\u0275restoreView(F),e.\u0275\u0275nextContext().onCustomEvent(W,null,!0)}),e.\u0275\u0275elementEnd()}if(2&U){const F=$.$implicit,M=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("d-none",F.hidden),e.\u0275\u0275property("formGroup",M.group)("formModel",M.formModel)("group",M.control)("hasErrorMessaging",M.model.hasErrorMessages)("hidden",F.hidden)("layout",M.formLayout)("model",F)("templates",M.templates)("ngClass",e.\u0275\u0275pureFunction2(11,P,M.getClass("element","host",F),M.getClass("grid","host",F)))}}let G=(()=>{class U extends E.LvC{constructor(F,M){super(F,M),this.layoutService=F,this.validationService=M,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter,this.customEvent=new e.EventEmitter}}return U.\u0275fac=function(F){return new(F||U)(e.\u0275\u0275directiveInject(E.vnf),e.\u0275\u0275directiveInject(E.fhz))},U.\u0275cmp=e.\u0275\u0275defineComponent({type:U,selectors:[["ds-dynamic-form-group"]],inputs:{formModel:"formModel",formLayout:"formLayout",group:"group",layout:"layout",model:"model",templates:"templates"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",customEvent:"ngbEvent"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:7,consts:[[2,"width","100%"],[3,"formGroup"],["role","group",3,"formGroupName","id","ngClass"],[3,"formGroup","formModel","group","hasErrorMessaging","hidden","d-none","layout","model","templates","ngClass","dfBlur","dfChange","dfFocus","ngbEvent",4,"ngFor","ngForOf"],[3,"formGroup","formModel","group","hasErrorMessaging","hidden","layout","model","templates","ngClass","dfBlur","dfChange","dfFocus","ngbEvent"]],template:function(F,M){1&F&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementContainerStart(1,1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275template(3,o,1,14,"ds-dynamic-form-control-container",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()),2&F&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",M.group),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("d-none",M.model.hidden),e.\u0275\u0275property("formGroupName",M.model.id)("id",M.id)("ngClass",M.getClass("element","control")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",M.model.group))},encapsulation:2}),U})()},88766:(re,J,t)=>{t.d(J,{d:()=>X});var e=t(5e3),E=t(8108),P=t(17489),G=t(24702),U=t(71022),$=t(49566),F=t(68285),M=t(62713),W=t(93075),K=t(69808);function d(H,Z){if(1&H){const f=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",7)(1,"input",8),e.\u0275\u0275listener("blur",function(s){return e.\u0275\u0275restoreView(f),e.\u0275\u0275nextContext(3).onBlur(s)})("change",function(s){return e.\u0275\u0275restoreView(f),e.\u0275\u0275nextContext(3).onChange(s)})("focus",function(s){return e.\u0275\u0275restoreView(f),e.\u0275\u0275nextContext(3).onFocus(s)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"label",9),e.\u0275\u0275element(3,"span",10),e.\u0275\u0275elementEnd()()}if(2&H){const f=Z.$implicit,R=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("checked",f.value)("id",f.id)("formControlName",f.id)("name",R.model.name)("required",R.model.required)("value",f.value),e.\u0275\u0275attribute("aria-labelledby","label_"+R.model.id)("tabindex",f.index),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("disabled",R.model.disabled),e.\u0275\u0275property("ngClass",null==R.model.layout.element?null:R.model.layout.element.control)("for",f.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",null==R.model.layout.element?null:R.model.layout.element.label)("innerHTML",f.label,e.\u0275\u0275sanitizeHtml)}}function j(H,Z){if(1&H&&(e.\u0275\u0275elementStart(0,"div",5),e.\u0275\u0275template(1,d,4,14,"div",6),e.\u0275\u0275element(2,"br"),e.\u0275\u0275elementEnd()),2&H){const f=Z.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",f)}}function D(H,Z){if(1&H&&(e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275template(1,j,3,1,"div",4),e.\u0275\u0275elementEnd()),2&H){const f=e.\u0275\u0275nextContext();e.\u0275\u0275property("id",f.id)("formGroupName",f.model.id)("ngClass",null==f.model.layout.element?null:f.model.layout.element.control),e.\u0275\u0275attribute("tabindex",f.model.tabIndex),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",f.items)}}function L(H,Z){if(1&H){const f=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",13)(1,"input",14),e.\u0275\u0275listener("blur",function(s){return e.\u0275\u0275restoreView(f),e.\u0275\u0275nextContext(3).onBlur(s)})("focus",function(s){return e.\u0275\u0275restoreView(f),e.\u0275\u0275nextContext(3).onFocus(s)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"label",9),e.\u0275\u0275element(3,"span",10),e.\u0275\u0275elementEnd()()}if(2&H){const f=Z.$implicit,R=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("checked",f.value)("id",f.id)("name",R.model.id)("required",R.model.required)("value",f.index),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("disabled",R.model.disabled),e.\u0275\u0275property("ngClass",null==R.model.layout.element?null:R.model.layout.element.control)("for",f.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",null==R.model.layout.element?null:R.model.layout.element.label)("innerHTML",f.label,e.\u0275\u0275sanitizeHtml)}}function T(H,Z){if(1&H&&(e.\u0275\u0275elementStart(0,"div",5),e.\u0275\u0275template(1,L,4,11,"div",12),e.\u0275\u0275element(2,"br"),e.\u0275\u0275elementEnd()),2&H){const f=Z.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",f)}}function Y(H,Z){if(1&H){const f=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275listener("change",function(s){return e.\u0275\u0275restoreView(f),e.\u0275\u0275nextContext().onChange(s)}),e.\u0275\u0275template(1,T,3,1,"div",4),e.\u0275\u0275elementEnd()}if(2&H){const f=e.\u0275\u0275nextContext();e.\u0275\u0275property("id",f.id)("ngClass",null==f.model.layout.element?null:f.model.layout.element.control),e.\u0275\u0275attribute("tabindex",f.model.tabIndex),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",f.items)}}let X=(()=>{class H extends E.LvC{constructor(f,R,s,c,p){super(c,p),this.vocabularyService=f,this.cdr=R,this.formBuilderService=s,this.layoutService=c,this.validationService=p,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter,this.items=[]}ngOnInit(){this.model.vocabularyOptions&&(0,G.Uh)(this.model.vocabularyOptions.name)&&this.setOptionsFromVocabulary()}onBlur(f){this.blur.emit(f)}onFocus(f){this.focus.emit(f)}onChange(f){const R=f.target;if(this.model.repeatable){const s=this.optionsList[R.tabIndex];if(R.checked)this.model.valueUpdates.next(s);else{const c=[];this.model.value.filter(p=>p.value!==s.value).forEach(p=>c.push(p)),this.model.valueUpdates.next(c)}}else this.model.value=this.optionsList[R.value];this.change.emit(f)}setOptionsFromVocabulary(){if(this.model.vocabularyOptions.name&&this.model.vocabularyOptions.name.length>0){const f=this.group.controls[this.model.id],R=new M.S({elementsPerPage:9999,currentPage:1});this.vocabularyService.getVocabularyEntries(this.model.vocabularyOptions,R).pipe((0,F.Gp)()).subscribe(s=>{let c=0,p=0,m=[];this.optionsList=s.page,s.page.forEach((B,O)=>{const S=B.authority||B.value,Q=(0,G.UE)((0,P.findKey)(this.model.value,ae=>ae.value===B.value)),ne={id:S,label:B.display,value:Q,index:O};this.model.repeatable?this.formBuilderService.addFormGroupControl(f,this.model,new E.dwp(ne)):this.model.options.push({label:ne.label,value:B}),m.push(ne),p++,this.items[c]=m,p===this.model.groupLength&&(c++,p=0,m=[])}),this.cdr.markForCheck()})}}}return H.\u0275fac=function(f){return new(f||H)(e.\u0275\u0275directiveInject($.c),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(U.c),e.\u0275\u0275directiveInject(E.vnf),e.\u0275\u0275directiveInject(E.fhz))},H.\u0275cmp=e.\u0275\u0275defineComponent({type:H,selectors:[["ds-dynamic-list"]],inputs:{group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:3,consts:[[3,"formGroup"],["class","form-row",3,"id","formGroupName","ngClass",4,"ngIf"],["class","form-row","ngbRadioGroup","",3,"id","ngClass","change",4,"ngIf"],[1,"form-row",3,"id","formGroupName","ngClass"],["class","col-sm ml-3",4,"ngFor","ngForOf"],[1,"col-sm","ml-3"],["class","custom-control custom-checkbox",4,"ngFor","ngForOf"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"checked","id","formControlName","name","required","value","blur","change","focus"],[1,"custom-control-label",3,"ngClass","for"],[3,"ngClass","innerHTML"],["ngbRadioGroup","",1,"form-row",3,"id","ngClass","change"],["class","custom-control custom-radio",4,"ngFor","ngForOf"],[1,"custom-control","custom-radio"],["type","radio",1,"custom-control-input",3,"checked","id","name","required","value","blur","focus"]],template:function(f,R){1&f&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,D,2,5,"div",1),e.\u0275\u0275template(2,Y,2,4,"div",2),e.\u0275\u0275elementEnd()),2&f&&(e.\u0275\u0275property("formGroup",R.group),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",R.model.repeatable),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!R.model.repeatable))},directives:[W.JL,W.sg,K.O5,W.x0,K.mk,K.sg,W.Wl,W.Zs,W.JJ,W.u],styles:[""]}),H})()},21650:(re,J,t)=>{t.d(J,{G:()=>oe});var e=t(5e3),E=t(39646),P=t(70262),o=t(71884),G=t(49566),U=t(24702),$=t(62713),F=t(7973),M=t(58140),W=t(16125),K=t(24789),d=t(68285),j=t(10362),D=t(8108),L=t(17656),T=t(30735),Y=t(93075),X=t(69808),H=t(48689),Z=t(86956),f=t(43928);const R=function(){return{}};function s(l,A){if(1&l){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",17)(1,"input",18),e.\u0275\u0275listener("ngModelChange",function(C){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext().secondInputValue=C})("change",function(C){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext().onChange(C)})("blur",function(C){e.\u0275\u0275restoreView(i);const w=e.\u0275\u0275nextContext(),v=e.\u0275\u0275reference(1);return w.onBlur(C),C.stopPropagation(),v.close()})("focus",function(C){e.\u0275\u0275restoreView(i);const w=e.\u0275\u0275nextContext(),v=e.\u0275\u0275reference(1);return w.onFocus(C),C.stopPropagation(),v.close()})("click",function(C){e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext();const w=e.\u0275\u0275reference(1);return C.stopPropagation(),w.close()}),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()()}if(2&l){const i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275classProp("is-invalid",i.showErrorMessages),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction0(14,R))("id",i.id)("name",i.model.name+"_2")("type",i.model.inputType)("ngModel",i.secondInputValue)("disabled",0===i.firstInputValue.length||i.isInputDisabled())("placeholder",e.\u0275\u0275pipeBind1(2,12,i.model.secondPlaceholder))("readonly",i.model.readOnly),e.\u0275\u0275attribute("aria-labelledby","label_"+i.model.id)("autoComplete",i.model.autoComplete)}}function c(l,A){if(1&l){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",19),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext().remove()}),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()}if(2&l){const i=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("ngbTooltip",e.\u0275\u0275pipeBind1(1,3,"form.clear-help")),e.\u0275\u0275property("disabled",i.model.readOnly),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(3,5,"form.clear")," ")}}function p(l,A){if(1&l){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",19),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext().switchEditMode()}),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()}if(2&l){const i=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("ngbTooltip",e.\u0275\u0275pipeBind1(1,3,"form.edit-help")),e.\u0275\u0275property("disabled",i.isEditDisabled()),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(3,5,"form.edit")," ")}}function m(l,A){if(1&l){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",19),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext().saveChanges()}),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()}if(2&l){const i=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("ngbTooltip",e.\u0275\u0275pipeBind1(1,3,"form.save-help")),e.\u0275\u0275property("disabled",!i.hasEmptyValue()),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(3,5,"form.save")," ")}}function B(l,A){if(1&l){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",20),e.\u0275\u0275listener("click",function(C){e.\u0275\u0275restoreView(i);const w=e.\u0275\u0275nextContext(),v=e.\u0275\u0275reference(1);return C.stopPropagation(),w.clearFields(),v.close()}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()}2&l&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(2,1,"form.no-results")," "))}const O=function(l){return{entry:l}};function S(l,A){if(1&l){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",21),e.\u0275\u0275listener("click",function(C){const v=e.\u0275\u0275restoreView(i).$implicit,u=e.\u0275\u0275nextContext(),V=e.\u0275\u0275reference(1);return C.stopPropagation(),u.onSelect(v),V.close()}),e.\u0275\u0275elementContainer(1,22),e.\u0275\u0275elementEnd()}if(2&l){const i=A.$implicit;e.\u0275\u0275nextContext();const _=e.\u0275\u0275reference(23),C=e.\u0275\u0275reference(25);e.\u0275\u0275propertyInterpolate("title",i.display),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",i.hasOtherInformation()?_:C)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(3,O,i))}}function Q(l,A){1&l&&(e.\u0275\u0275elementStart(0,"div",23)(1,"p"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()()),2&l&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,"form.loading")))}function ne(l,A){if(1&l&&(e.\u0275\u0275elementStart(0,"li",27),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&l){const i=A.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" ",e.\u0275\u0275pipeBind1(2,2,"form.other-information."+i.key)," : ",i.value," ")}}function ae(l,A){if(1&l&&(e.\u0275\u0275elementStart(0,"ul",24)(1,"li",25),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,ne,3,4,"li",26),e.\u0275\u0275pipe(4,"dsObjNgFor"),e.\u0275\u0275elementEnd()),2&l){const i=A.entry,_=e.\u0275\u0275nextContext();e.\u0275\u0275attribute("aria-labelledby","label_"+_.model.id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(i.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(4,3,i.otherInformation))}}function ee(l,A){if(1&l&&(e.\u0275\u0275elementStart(0,"ul",24)(1,"li",25),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&l){const i=A.entry,_=e.\u0275\u0275nextContext();e.\u0275\u0275attribute("aria-labelledby","label_"+_.model.id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(i.value)}}let oe=(()=>{class l extends j.m{constructor(i,_,C,w){super(i,C,w),this.vocabularyService=i,this.cdr=_,this.layoutService=C,this.validationService=w,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter,this.editMode=!1,this.firstInputValue="",this.secondInputValue="",this.loading=!1,this.subs=[],this.inputFormatter=(v,u)=>1===u?this.firstInputValue:this.secondInputValue}ngOnInit(){(0,U.UE)(this.model.value)&&this.setCurrentValue(this.model.value,!0),this.subs.push(this.model.valueChanges.subscribe(i=>{(0,U.xb)(i)?this.resetFields():this.editMode||this.setCurrentValue(this.model.value)}))}hasAuthorityValue(){return(0,U.Uh)(this.model.value)&&"object"==typeof this.model.value&&this.model.value.hasAuthority()}hasEmptyValue(){return(0,U.UE)(this.getCurrentValue())}clearFields(){this.model.vocabularyOptions.closed&&this.resetFields()}isEditDisabled(){return!this.hasAuthorityValue()}isInputDisabled(){return this.model.vocabularyOptions.closed&&this.hasAuthorityValue()&&!this.editMode}isLookupName(){return this.model instanceof W.z}isSearchDisabled(){return(0,U.xb)(this.firstInputValue)||this.editMode}onChange(i){if(i.preventDefault(),!this.model.vocabularyOptions.closed)if((0,U.UE)(this.getCurrentValue())){const _=new F.u(this.getCurrentValue());this.editMode||this.updateModel(_)}else this.remove()}onScroll(){!this.loading&&this.pageInfo.currentPage<=this.pageInfo.totalPages&&(this.updatePageInfo(this.pageInfo.elementsPerPage,this.pageInfo.currentPage+1,this.pageInfo.totalElements,this.pageInfo.totalPages),this.search())}onSelect(i){this.updateModel(i)}openChange(i){i||this.model.vocabularyOptions.closed&&!this.hasAuthorityValue()&&this.setCurrentValue("")}remove(){this.group.markAsPristine(),this.dispatchUpdate(null)}saveChanges(){if((0,U.UE)(this.getCurrentValue())){const i=Object.assign(new M.j,this.model.value,{display:this.getCurrentValue(),value:this.getCurrentValue()});this.updateModel(i)}else this.remove();this.switchEditMode()}search(){this.optionsList=null,this.updatePageInfo(this.model.maxOptions,1),this.loading=!0,this.subs.push(this.vocabularyService.getVocabularyEntriesByValue(this.getCurrentValue(),!1,this.model.vocabularyOptions,this.pageInfo).pipe((0,d.Gp)(),(0,P.K)(()=>(0,E.of)((0,K.b)(new $.S,[]))),(0,o.x)()).subscribe(i=>{this.optionsList=i.page,this.updatePageInfo(i.pageInfo.elementsPerPage,i.pageInfo.currentPage,i.pageInfo.totalElements,i.pageInfo.totalPages),this.loading=!1,this.cdr.detectChanges()}))}switchEditMode(){this.editMode=!this.editMode}whenClickOnConfidenceNotAccepted(i,_){this.model.readOnly||(i.open(),this.search())}ngOnDestroy(){this.subs.filter(i=>(0,U.Uh)(i)).forEach(i=>i.unsubscribe())}setCurrentValue(i,_=!1){_?this.getInitValueFromModel().subscribe(C=>this.setDisplayInputValue(C.display)):(0,U.Uh)(i)&&(i instanceof F.u||i instanceof M.j)&&this.setDisplayInputValue(i.display)}setDisplayInputValue(i){if((0,U.Uh)(i)){if(this.isLookupName()){const _=i.split(this.model.separator);this.firstInputValue=(_[0]||"").trim(),this.secondInputValue=(_[1]||"").trim()}else this.firstInputValue=i||"";this.cdr.detectChanges()}}getCurrentValue(){let i="";return this.isLookupName()?((0,U.UE)(this.firstInputValue)&&(i=this.firstInputValue),(0,U.UE)(this.secondInputValue)&&(i=(0,U.xb)(i)?this.secondInputValue:this.firstInputValue+this.model.separator+" "+this.secondInputValue)):i=this.firstInputValue,i}resetFields(){this.firstInputValue="",this.isLookupName()&&(this.secondInputValue="")}updateModel(i){this.group.markAsDirty(),this.dispatchUpdate(i),this.setCurrentValue(i),this.optionsList=null,this.pageInfo=null}}return l.\u0275fac=function(i){return new(i||l)(e.\u0275\u0275directiveInject(G.c),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(D.vnf),e.\u0275\u0275directiveInject(D.fhz))},l.\u0275cmp=e.\u0275\u0275defineComponent({type:l,selectors:[["ds-dynamic-lookup"]],inputs:{group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:26,vars:33,consts:[["ngbDropdown","",3,"click","openChange"],["sdRef","ngbDropdown"],[1,"form-row","align-items-center"],[1,"col","right-addon"],["dsAuthorityConfidenceState","","aria-hidden","true",1,"far","fa-circle","fa-2x","fa-fw","position-absolute","mt-1","p-0","pr-2",3,"authorityValue","whenClickOnConfidenceNotAccepted"],[1,"form-control",3,"id","name","type","ngModel","disabled","placeholder","readonly","ngModelChange","change","blur","focus","click"],["class","col",4,"ngIf"],[1,"col-auto","text-center"],["ngbDropdownAnchor","","type","button","placement","top",1,"btn","btn-secondary",3,"ngbTooltip","disabled","hidden","click"],["class","btn btn-secondary","type","button","placement","top",3,"ngbTooltip","disabled","click",4,"ngIf"],["ngbDropdownMenu","","aria-haspopup","true","aria-expanded","false",1,"dropdown-menu","scrollable-dropdown-menu","w-100"],["aria-labelledby","scrollableDropdownMenuButton","infiniteScroll","",1,"scrollable-menu",3,"infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["class","dropdown-item disabled",3,"click",4,"ngIf"],["class","dropdown-item lookup-item",3,"title","click",4,"ngFor","ngForOf"],["class","scrollable-dropdown-loading text-center",4,"ngIf"],["hasInfo",""],["noInfo",""],[1,"col"],[1,"form-control",3,"ngClass","id","name","type","ngModel","disabled","placeholder","readonly","ngModelChange","change","blur","focus","click"],["type","button","placement","top",1,"btn","btn-secondary",3,"ngbTooltip","disabled","click"],[1,"dropdown-item","disabled",3,"click"],[1,"dropdown-item","lookup-item",3,"title","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"scrollable-dropdown-loading","text-center"],[1,"list-unstyled","mb-0"],[1,"list-item","text-truncate","text-primary","font-weight-bold"],["class","list-item text-truncate text-secondary",4,"ngFor","ngForOf"],[1,"list-item","text-truncate","text-secondary"]],template:function(i,_){if(1&i){const C=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0,1),e.\u0275\u0275listener("click",function(v){return v.stopPropagation()})("openChange",function(v){return _.openChange(v)}),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"i",4),e.\u0275\u0275listener("whenClickOnConfidenceNotAccepted",function(v){e.\u0275\u0275restoreView(C);const u=e.\u0275\u0275reference(1);return _.whenClickOnConfidenceNotAccepted(u,v)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"input",5),e.\u0275\u0275listener("ngModelChange",function(v){return _.firstInputValue=v})("change",function(v){return _.onChange(v)})("blur",function(v){e.\u0275\u0275restoreView(C);const u=e.\u0275\u0275reference(1);return _.onBlur(v),v.stopPropagation(),u.close()})("focus",function(v){e.\u0275\u0275restoreView(C);const u=e.\u0275\u0275reference(1);return _.onFocus(v),v.stopPropagation(),u.close()})("click",function(v){e.\u0275\u0275restoreView(C);const u=e.\u0275\u0275reference(1);return v.stopPropagation(),v.stopPropagation(),u.close()}),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(7,s,3,15,"div",6),e.\u0275\u0275elementStart(8,"div",7)(9,"button",8),e.\u0275\u0275listener("click",function(v){return e.\u0275\u0275restoreView(C),e.\u0275\u0275reference(1).open(),_.search(),v.stopPropagation()}),e.\u0275\u0275pipe(10,"translate"),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,c,4,7,"button",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",7),e.\u0275\u0275template(15,p,4,7,"button",9),e.\u0275\u0275template(16,m,4,7,"button",9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"div",10)(18,"div",11),e.\u0275\u0275listener("scrolled",function(){return _.onScroll()}),e.\u0275\u0275template(19,B,3,3,"button",12),e.\u0275\u0275template(20,S,2,5,"button",13),e.\u0275\u0275template(21,Q,4,3,"div",14),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(22,ae,5,5,"ng-template",null,15,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(24,ee,3,2,"ng-template",null,16,e.\u0275\u0275templateRefExtractor)}2&i&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("authorityValue",_.model.value),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("is-invalid",_.showErrorMessages),e.\u0275\u0275property("id",_.model.id)("name",_.model.name)("type",_.model.inputType)("ngModel",_.firstInputValue)("disabled",_.isInputDisabled())("placeholder",e.\u0275\u0275pipeBind1(6,27,_.model.placeholder))("readonly",_.model.readOnly),e.\u0275\u0275attribute("aria-labelledby","label_"+_.model.id)("autoComplete",_.model.autoComplete),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",_.isLookupName()),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("ngbTooltip",e.\u0275\u0275pipeBind1(10,29,"form.search-help")),e.\u0275\u0275property("disabled",_.model.readOnly||_.isSearchDisabled())("hidden",_.isInputDisabled()),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(12,31,"form.search")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",_.isInputDisabled()),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!_.editMode),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",_.editMode),e.\u0275\u0275advance(1),e.\u0275\u0275attribute("aria-labelledby","label_"+_.model.id),e.\u0275\u0275advance(1),e.\u0275\u0275property("infiniteScrollDistance",2)("infiniteScrollThrottle",50)("scrollWindow",!1),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",_.optionsList&&0==_.optionsList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",_.optionsList),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",_.loading))},directives:[L.jt,T.e,Y.Fj,Y.JJ,Y.On,X.O5,X.mk,L.YE,L._L,L.Vi,H.R,X.sg,X.tP],pipes:[Z.X$,f.C],styles:[".dropdown-toggle[_ngcontent-%COMP%]:after{display:none}[_nghost-%COMP%]     .dropdown-menu{left:0!important;width:100%!important;max-height:var(--ds-dropdown-menu-max-height);overflow-y:auto!important;overflow-x:hidden}[_nghost-%COMP%]     .dropdown-item.active, [_nghost-%COMP%]     .dropdown-item:active, [_nghost-%COMP%]     .dropdown-item:focus, [_nghost-%COMP%]     .dropdown-item:hover{color:var(--bs-dropdown-link-hover-color)!important;background-color:var(--bs-dropdown-link-hover-bg)!important}div[_ngcontent-%COMP%]{overflow:visible}.lookup-item[_ngcontent-%COMP%]{border-bottom:var(--bs-dropdown-border-width) solid var(--bs-dropdown-border-color)}"]}),l})()},86471:(re,J,t)=>{t.d(J,{r:()=>v});var e=t(5e3),E=t(15683),P=t(78372),o=t(71884),G=t(18505),U=t(63900),$=t(70262),F=t(54004),M=t(39300),W=t(95698),K=t(68306),d=t(77579),j=t(39646),D=t(49566),T=(t(37548),t(24702)),Y=t(7973),X=t(68285),H=t(24789),Z=t(62713),f=t(10362),R=t(66077),s=t(8108),c=t(17656),p=t(69808),m=t(30735),B=t(93075),O=t(43928),S=t(86956);const Q=["instance"],ne=function(u){return{entry:u}};function ae(u,V){if(1&u&&e.\u0275\u0275elementContainer(0,4),2&u){const a=V.result;e.\u0275\u0275nextContext();const y=e.\u0275\u0275reference(3),I=e.\u0275\u0275reference(5);e.\u0275\u0275property("ngTemplateOutlet",a.hasOtherInformation()?y:I)("ngTemplateOutletContext",e.\u0275\u0275pureFunction1(2,ne,a))}}function ee(u,V){if(1&u&&(e.\u0275\u0275elementStart(0,"li",8),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&u){const a=V.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2(" ",e.\u0275\u0275pipeBind1(2,2,"form.other-information."+a.key)," : ",a.value," ")}}function oe(u,V){if(1&u&&(e.\u0275\u0275elementStart(0,"ul",5)(1,"li",6),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,ee,3,4,"li",7),e.\u0275\u0275pipe(4,"dsObjNgFor"),e.\u0275\u0275elementEnd()),2&u){const a=V.entry;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(a.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(4,2,a.otherInformation))}}function l(u,V){if(1&u&&(e.\u0275\u0275elementStart(0,"ul",5)(1,"li",6),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&u){const a=V.entry;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(a.value)}}function A(u,V){1&u&&e.\u0275\u0275element(0,"i",15)}function i(u,V){if(1&u){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"i",16),e.\u0275\u0275listener("whenClickOnConfidenceNotAccepted",function(I){return e.\u0275\u0275restoreView(a),e.\u0275\u0275nextContext(2).whenClickOnConfidenceNotAccepted(I)}),e.\u0275\u0275elementEnd()}if(2&u){const a=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("authorityValue",a.currentValue)}}function _(u,V){1&u&&(e.\u0275\u0275elementStart(0,"div",17),e.\u0275\u0275text(1,"Sorry, suggestions could not be loaded."),e.\u0275\u0275elementEnd())}function C(u,V){if(1&u){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",9),e.\u0275\u0275template(1,A,1,0,"i",10),e.\u0275\u0275template(2,i,1,1,"i",11),e.\u0275\u0275elementStart(3,"input",12,13),e.\u0275\u0275listener("ngModelChange",function(I){return e.\u0275\u0275restoreView(a),e.\u0275\u0275nextContext().currentValue=I})("blur",function(I){return e.\u0275\u0275restoreView(a),e.\u0275\u0275nextContext().onBlur(I)})("focus",function(I){return e.\u0275\u0275restoreView(a),e.\u0275\u0275nextContext().onFocus(I)})("change",function(I){return e.\u0275\u0275restoreView(a),e.\u0275\u0275nextContext().onChange(I)})("input",function(I){return e.\u0275\u0275restoreView(a),e.\u0275\u0275nextContext().onInput(I)})("selectItem",function(I){return e.\u0275\u0275restoreView(a),e.\u0275\u0275nextContext().onSelectItem(I)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,_,2,0,"div",14),e.\u0275\u0275elementEnd()}if(2&u){const a=e.\u0275\u0275nextContext(),y=e.\u0275\u0275reference(1);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.searching),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!a.searching),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("is-invalid",a.showErrorMessages),e.\u0275\u0275property("id",a.model.id)("inputFormatter",a.formatter)("name",a.model.name)("ngbTypeahead",a.search)("placeholder",a.model.placeholder)("readonly",a.model.readOnly)("resultTemplate",y)("type",a.model.inputType)("ngModel",a.currentValue),e.\u0275\u0275attribute("aria-labelledby","label_"+a.model.id)("autoComplete",a.model.autoComplete),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",a.searchFailed)}}function w(u,V){if(1&u){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",9)(1,"i",18),e.\u0275\u0275listener("click",function(I){return e.\u0275\u0275restoreView(a),e.\u0275\u0275nextContext().openTree(I)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"input",19),e.\u0275\u0275listener("focus",function(I){return e.\u0275\u0275restoreView(a),e.\u0275\u0275nextContext().onFocus(I)})("change",function(I){return e.\u0275\u0275restoreView(a),e.\u0275\u0275nextContext().onChange(I)})("click",function(I){return e.\u0275\u0275restoreView(a),e.\u0275\u0275nextContext().openTree(I)})("keydown",function(I){return I.preventDefault()})("keypress",function(I){return I.preventDefault()})("keyup",function(I){return I.preventDefault()}),e.\u0275\u0275elementEnd()()}if(2&u){const a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275classProp("is-invalid",a.showErrorMessages)("tree-input",!a.model.readOnly),e.\u0275\u0275property("id",a.id)("name",a.model.name)("placeholder",a.model.placeholder)("readonly",!0)("type",a.model.inputType)("value",null==a.currentValue?null:a.currentValue.display),e.\u0275\u0275attribute("aria-labelledby","label_"+a.model.id)("autoComplete",a.model.autoComplete)}}let v=(()=>{class u extends f.m{constructor(a,y,I,q,le){super(a,I,le),this.vocabularyService=a,this.cdr=y,this.layoutService=I,this.modalService=q,this.validationService=le,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter,this.pageInfo=new Z.S,this.searching=!1,this.searchFailed=!1,this.hideSearchingWhenUnsubscribed$=new K.y(()=>()=>this.changeSearchingStatus(!1)),this.click$=new d.x,this.subs=[],this.formatter=me=>"object"==typeof me?me.display:me,this.search=me=>me.pipe((0,E.T)(this.click$),(0,P.b)(300),(0,o.x)(),(0,G.b)(()=>this.changeSearchingStatus(!0)),(0,U.w)(de=>""===de||de.length<this.model.minChars?(0,j.of)({list:[]}):this.vocabularyService.getVocabularyEntriesByValue(de,!1,this.model.vocabularyOptions,this.pageInfo).pipe((0,X.Gp)(),(0,G.b)(()=>this.searchFailed=!1),(0,$.K)(()=>(this.searchFailed=!0,(0,j.of)((0,H.b)(new Z.S,[])))))),(0,F.U)(de=>de.page),(0,G.b)(()=>this.changeSearchingStatus(!1)),(0,E.T)(this.hideSearchingWhenUnsubscribed$))}ngOnInit(){this.model.value&&this.setCurrentValue(this.model.value,!0),this.vocabulary$=this.vocabularyService.findVocabularyById(this.model.vocabularyOptions.name).pipe((0,X.Gp)(),(0,o.x)()),this.isHierarchicalVocabulary$=this.vocabulary$.pipe((0,F.U)(a=>a.hierarchical)),this.subs.push(this.group.get(this.model.id).valueChanges.pipe((0,M.h)(a=>this.currentValue!==a)).subscribe(a=>{this.setCurrentValue(this.model.value)}))}changeSearchingStatus(a){this.searching=a,this.cdr.detectChanges()}isHierarchicalVocabulary(){return this.isHierarchicalVocabulary$}onInput(a){!this.model.vocabularyOptions.closed&&(0,T.UE)(a.target.value)&&(this.inputValue=new Y.u(a.target.value))}onBlur(a){this.instance.isPopupOpen()?(a.preventDefault(),a.stopImmediatePropagation(),a.target.focus()):(!this.model.vocabularyOptions.closed&&(0,T.UE)(this.inputValue)&&((0,T.K0)(this.inputValue)&&this.model.value!==this.inputValue&&this.dispatchUpdate(this.inputValue),this.inputValue=null),this.blur.emit(a))}onChange(a){a.stopPropagation(),(0,T.xb)(this.currentValue)&&this.dispatchUpdate(null)}onSelectItem(a){this.inputValue=null,this.setCurrentValue(a.item),this.dispatchUpdate(a.item)}openTree(a){a.preventDefault(),a.stopImmediatePropagation(),this.subs.push(this.vocabulary$.pipe((0,F.U)(y=>y.preloadLevel),(0,W.q)(1)).subscribe(y=>{const I=this.modalService.open(R.I,{size:"lg",windowClass:"treeview"});I.componentInstance.vocabularyOptions=this.model.vocabularyOptions,I.componentInstance.preloadLevel=y,I.componentInstance.selectedItem=this.currentValue?this.currentValue:"",I.result.then(q=>{q&&(this.currentValue=q,this.dispatchUpdate(q))},()=>{})}))}whenClickOnConfidenceNotAccepted(a){this.model.readOnly||this.click$.next(this.formatter(this.currentValue))}setCurrentValue(a,y=!1){let I;y?this.getInitValueFromModel().subscribe(q=>{this.currentValue=q,this.cdr.detectChanges()}):(I=(0,T.xb)(a)?"":a.value,this.currentValue=I,this.cdr.detectChanges())}ngOnDestroy(){this.subs.filter(a=>(0,T.Uh)(a)).forEach(a=>a.unsubscribe())}}return u.\u0275fac=function(a){return new(a||u)(e.\u0275\u0275directiveInject(D.c),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(s.vnf),e.\u0275\u0275directiveInject(c.FF),e.\u0275\u0275directiveInject(s.fhz))},u.\u0275cmp=e.\u0275\u0275defineComponent({type:u,selectors:[["ds-dynamic-onebox"]],viewQuery:function(a,y){if(1&a&&e.\u0275\u0275viewQuery(Q,5),2&a){let I;e.\u0275\u0275queryRefresh(I=e.\u0275\u0275loadQuery())&&(y.instance=I.first)}},inputs:{group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:10,vars:6,consts:[["rt",""],["hasInfo",""],["noInfo",""],["class","position-relative right-addon",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"list-unstyled","mb-0"],[1,"list-item","text-truncate","text-primary","font-weight-bold"],["class","list-item text-truncate text-secondary",4,"ngFor","ngForOf"],[1,"list-item","text-truncate","text-secondary"],[1,"position-relative","right-addon"],["class","fas fa-circle-notch fa-spin fa-2x fa-fw text-primary position-absolute mt-1 p-0","aria-hidden","true",4,"ngIf"],["dsAuthorityConfidenceState","","class","far fa-circle fa-2x fa-fw position-absolute mt-1 p-0","aria-hidden","true",3,"authorityValue","whenClickOnConfidenceNotAccepted",4,"ngIf"],[1,"form-control",3,"id","inputFormatter","name","ngbTypeahead","placeholder","readonly","resultTemplate","type","ngModel","ngModelChange","blur","focus","change","input","selectItem"],["instance","ngbTypeahead"],["class","invalid-feedback",4,"ngIf"],["aria-hidden","true",1,"fas","fa-circle-notch","fa-spin","fa-2x","fa-fw","text-primary","position-absolute","mt-1","p-0"],["dsAuthorityConfidenceState","","aria-hidden","true",1,"far","fa-circle","fa-2x","fa-fw","position-absolute","mt-1","p-0",3,"authorityValue","whenClickOnConfidenceNotAccepted"],[1,"invalid-feedback"],["aria-hidden","true",1,"dropdown-toggle","position-absolute","tree-toggle",3,"click"],[1,"form-control",3,"id","name","placeholder","readonly","type","value","focus","change","click","keydown","keypress","keyup"]],template:function(a,y){1&a&&(e.\u0275\u0275template(0,ae,1,4,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(2,oe,5,4,"ng-template",null,1,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(4,l,3,1,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(6,C,6,16,"div",3),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275template(8,w,3,12,"div",3),e.\u0275\u0275pipe(9,"async")),2&a&&(e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(7,2,y.isHierarchicalVocabulary())),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(9,4,y.isHierarchicalVocabulary())))},directives:[p.tP,p.sg,p.O5,m.e,c.dR,B.Fj,B.JJ,B.On],pipes:[O.C,S.X$,p.Ov],styles:[".ds-form-input-addon[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important;border-right:0!important}.ds-form-input-btn[_ngcontent-%COMP%]{border:var(--bs-input-btn-border-width) solid var(--bs-input-border-color);border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.ds-form-input-btn[_ngcontent-%COMP%]:focus{box-shadow:none!important}button.ds-form-add-more[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none!important}.ds-form-input-value[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-bottom-left-radius:0!important}.fa-spin[_ngcontent-%COMP%]{pointer-events:none}.left-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{left:0}.right-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{right:0}.left-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:calc(var(--bs-spacer) * 2.25)}.right-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:calc(var(--bs-spacer) * 2.25)}[_nghost-%COMP%]     .dropdown-menu{width:100%!important;max-height:var(--ds-dropdown-menu-max-height);overflow-y:auto!important;overflow-x:hidden}[_nghost-%COMP%]     .dropdown-item{border-bottom:var(--bs-dropdown-border-width) solid var(--bs-dropdown-border-color)}[_nghost-%COMP%]     .dropdown-item.active, [_nghost-%COMP%]     .dropdown-item:active, [_nghost-%COMP%]     .dropdown-item:focus, [_nghost-%COMP%]     .dropdown-item:hover{color:var(--bs-dropdown-link-hover-color)!important;background-color:var(--bs-dropdown-link-hover-bg)!important}.treeview[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{max-height:85vh!important;overflow-y:auto}.tree-toggle[_ngcontent-%COMP%]{padding:.7rem .7rem 0}.tree-input[readonly][_ngcontent-%COMP%]{background-color:#fff}"]}),u})()},22280:(re,J,t)=>{t.d(J,{H:()=>_});var e=t(5e3),E=t(39646),P=t(39841),o=t(86099),G=t(54004),U=t(22940),$=t(39300),F=t(8108),M=t(17489),K=(t(1365),t(71022)),d=t(28858),j=t(63311),D=t(93769),L=t(24702),T=t(41777);const Y=(0,T.X$)("shrinkInOut",[(0,T.SB)("in",(0,T.oB)({height:"100%",opacity:1})),(0,T.eR)("* => void",[(0,T.oB)({height:"!",opacity:1}),(0,T.jt)(200,(0,T.oB)({height:0,opacity:0}))]),(0,T.eR)("void => *",[(0,T.oB)({height:0,opacity:0}),(0,T.jt)(200,(0,T.oB)({height:"*",opacity:1}))])]);var X=t(91776),H=t(49566),Z=t(7973),f=t(21540),R=t(78103),s=t(68285),c=t(69808),p=t(17656),m=t(48106),B=t(16312),O=t(86956);const S=["formRef"];function Q(C,w){if(1&C){const v=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",7),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275elementStart(2,"span",8),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(v),e.\u0275\u0275nextContext().collapseForm()}),e.\u0275\u0275elementEnd()()}2&C&&e.\u0275\u0275propertyInterpolate("ngbTooltip",e.\u0275\u0275pipeBind1(1,1,"form.group-collapse-help"))}function ne(C,w){if(1&C){const v=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",7),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275elementStart(2,"span",9),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(v),e.\u0275\u0275nextContext().expandForm()}),e.\u0275\u0275elementEnd()()}2&C&&e.\u0275\u0275propertyInterpolate("ngbTooltip",e.\u0275\u0275pipeBind1(1,1,"form.group-expand-help"))}function ae(C,w){if(1&C){const v=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",15)(1,"button",16),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(v),e.\u0275\u0275nextContext(2).save()}),e.\u0275\u0275element(2,"i",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",16),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(v),e.\u0275\u0275nextContext(2).delete()}),e.\u0275\u0275element(4,"i",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"button",16),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(v),e.\u0275\u0275nextContext(2).clear()}),e.\u0275\u0275element(6,"i",19),e.\u0275\u0275elementEnd()()}if(2&C){const v=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",v.isMandatoryFieldEmpty()),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!v.editMode),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",v.isMandatoryFieldEmpty())}}function ee(C,w){if(1&C){const v=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",10)(1,"ds-form",11,12),e.\u0275\u0275listener("dfBlur",function(V){return e.\u0275\u0275restoreView(v),e.\u0275\u0275nextContext().onBlur(V)})("dfFocus",function(V){return e.\u0275\u0275restoreView(v),e.\u0275\u0275nextContext().onFocus(V)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,ae,7,3,"div",13),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275element(5,"div",14),e.\u0275\u0275elementEnd()}if(2&C){const v=e.\u0275\u0275nextContext();e.\u0275\u0275property("@shrinkInOut",void 0),e.\u0275\u0275advance(1),e.\u0275\u0275property("formId",v.formId)("formModel",v.formModel)("displaySubmit",!1)("displayCancel",!1)("emitChange",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(4,7,v.formCollapsed))}}function oe(C,w){1&C&&e.\u0275\u0275element(0,"ds-themed-loading",20),2&C&&e.\u0275\u0275property("showMessage",!1)}function l(C,w){1&C&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275element(1,"input",21),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&C&&(e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("value",e.\u0275\u0275pipeBind1(2,1,"form.no-value")))}function A(C,w){if(1&C){const v=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-chips",22),e.\u0275\u0275listener("selected",function(V){return e.\u0275\u0275restoreView(v),e.\u0275\u0275nextContext().onChipSelected(V)}),e.\u0275\u0275elementEnd()}if(2&C){const v=e.\u0275\u0275nextContext();e.\u0275\u0275property("chips",v.chips)("editable",!0)("showIcons",!0)}}const i=function(C,w){return{"border-top":C,"border border-danger":w}};let _=(()=>{class C extends F.LvC{constructor(v,u,V,a,y,I){super(y,I),this.vocabularyService=v,this.formBuilderService=u,this.formService=V,this.cdr=a,this.layoutService=y,this.validationService=I,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter,this.formCollapsed=(0,E.of)(!1),this.editMode=!1,this.subs=[]}ngOnInit(){const v={rows:this.model.formConfiguration};this.model.isEmpty()||(this.formCollapsed=(0,E.of)(!0)),this.model.valueChanges.subscribe(u=>{!(0,L.UE)(u)||1===u.length&&(0,X.OG)(u[0])?this.expandForm():this.collapseForm()}),this.formId=this.formService.getUniqueId(this.model.id),this.formModel=this.formBuilderService.modelFromConfiguration(this.model.submissionId,v,this.model.scopeUUID,{},this.model.submissionScope,this.model.readOnly),this.initChipsFromModelValue()}isMandatoryFieldEmpty(){let v=!0;return this.formModel.forEach(u=>{u.group.forEach(a=>{a.name!==this.model.mandatoryField||(v=null==a.value)})}),v}onBlur(v){this.blur.emit()}onChipSelected(v){this.expandForm(),this.selectedChipItem=this.chips.getChipByIndex(v),this.formModel.forEach(u=>{u.group.forEach(a=>{const y=this.selectedChipItem.item[a.name]===R.n||this.selectedChipItem.item[a.name].value===R.n?null:this.selectedChipItem.item[a.name],I=this.formBuilderService.isInputModel(a)&&(0,L.K0)(y)&&"string"!=typeof y?y.value:y;a.value=I})}),this.editMode=!0}onFocus(v){this.focus.emit(v)}collapseForm(){this.formCollapsed=(0,E.of)(!0),this.clear()}expandForm(){this.formCollapsed=(0,E.of)(!1)}clear(){this.editMode&&(this.selectedChipItem.editMode=!1,this.selectedChipItem=null,this.editMode=!1),this.resetForm(),this.model.isEmpty()||(this.formCollapsed=(0,E.of)(!0))}save(){this.editMode?this.modifyChip():this.addToChips()}delete(){this.chips.remove(this.selectedChipItem),this.clear()}ngOnDestroy(){this.subs.filter(v=>(0,L.Uh)(v)).forEach(v=>v.unsubscribe())}addToChips(){if(this.formRef.formGroup.valid){if(!this.isMandatoryFieldEmpty()){const v=this.buildChipItem();this.chips.add(v),this.resetForm()}}else this.formService.validateAllFormFields(this.formRef.formGroup)}modifyChip(){if(this.formRef.formGroup.valid){if(!this.isMandatoryFieldEmpty()){const v=this.buildChipItem();this.chips.update(this.selectedChipItem.id,v),this.resetForm(),this.cdr.detectChanges()}}else this.formService.validateAllFormFields(this.formRef.formGroup)}buildChipItem(){const v=Object.create({});return this.formModel.forEach(u=>{u.group.forEach(a=>{v[a.name]=a.value||R.n})}),v}initChipsFromModelValue(){let v;this.model.isEmpty()?this.initChips([]):(v=(0,E.of)(this.model.value),this.subs.push(v.pipe((0,o.z)(u=>{const V=[];return u.forEach(a=>{const y=Object.keys(a).map(I=>{let q;if((0,M.isObject)(a[I])&&a[I].hasAuthority()&&(0,L.UE)(a[I].authority)){const le=I.replace(/\./g,"_"),me=this.formBuilderService.findById(le,this.formModel);q=this.vocabularyService.findEntryDetailById(a[I].authority,me.vocabularyOptions.name).pipe((0,s.Gp)(),(0,G.U)(de=>Object.assign(new Z.u,a[I],{otherInformation:de.otherInformation})))}else q=(0,E.of)(a[I]);return q.pipe((0,G.U)(le=>({[I]:le})))});V.push((0,P.a)(y))}),V}),(0,o.z)((u,V)=>u.pipe((0,G.U)(a=>({index:V,value:a.reduce((y,I)=>Object.assign({},y,I))})))),(0,U.R)((u,V)=>(0===u.length?u.push(V.value):u.splice(V.index,0,V.value),u),[]),(0,$.h)(u=>this.model.value.length===u.length)).subscribe(u=>{this.model.value=u,this.initChips(u),this.cdr.markForCheck()})))}initChips(v){this.chips=new D.c(v,"value",this.model.mandatoryField,f.N.submission.icons.metadata),this.subs.push(this.chips.chipsItems.subscribe(()=>{const u=this.chips.getChipsItems();(0,M.isEqual)(u,this.model.value)||(0,L.xb)(u)&&this.model.isEmpty()||(this.model.value=u,this.change.emit())}))}resetForm(){this.formRef&&this.formService.resetForm(this.formRef.formGroup,this.formModel,this.formId)}}return C.\u0275fac=function(v){return new(v||C)(e.\u0275\u0275directiveInject(H.c),e.\u0275\u0275directiveInject(K.c),e.\u0275\u0275directiveInject(d.o),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(F.vnf),e.\u0275\u0275directiveInject(F.fhz))},C.\u0275cmp=e.\u0275\u0275defineComponent({type:C,selectors:[["ds-dynamic-relation-group"]],viewQuery:function(v,u){if(1&v&&e.\u0275\u0275viewQuery(S,5),2&v){let V;e.\u0275\u0275queryRefresh(V=e.\u0275\u0275loadQuery())&&(u.formRef=V.first)}},inputs:{formId:"formId",group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:11,vars:16,consts:[["class","close position-relative","placement","left",3,"ngbTooltip",4,"ngIf"],[1,"pt-2",3,"ngClass"],["class","pl-2 row",4,"ngIf"],[1,"d-flex"],[3,"showMessage",4,"ngIf"],[4,"ngIf"],[3,"chips","editable","showIcons","selected",4,"ngIf"],["placement","left",1,"close","position-relative",3,"ngbTooltip"],["aria-hidden","true",1,"fas","fa-angle-up","fa-fw","fa-2x",3,"click"],["aria-hidden","true",1,"fas","fa-angle-down","fa-fw","fa-2x",3,"click"],[1,"pl-2","row"],[1,"col-sm-12","col-md-8","col-lg-9","col-xl-10","pl-0",3,"formId","formModel","displaySubmit","displayCancel","emitChange","dfBlur","dfFocus"],["formRef","formComponent"],["class","col p-0 m-0 d-flex justify-content-center align-items-center",4,"ngIf"],[1,"clearfix"],[1,"col","p-0","m-0","d-flex","justify-content-center","align-items-center"],["type","button",1,"btn","btn-link",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-save","text-primary","fa-2x"],["aria-hidden","true",1,"fas","fa-trash","text-danger","fa-2x"],["aria-hidden","true",1,"fas","fa-undo","fa-2x"],[3,"showMessage"],["type","text","readonly","","tabindex","-1",1,"border-0","form-control-plaintext","tag-input","mt-1","mb-1","pl-2","text-muted",3,"value"],[3,"chips","editable","showIcons","selected"]],template:function(v,u){1&v&&(e.\u0275\u0275template(0,Q,3,3,"a",0),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275template(2,ne,3,3,"a",0),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275elementStart(4,"div",1),e.\u0275\u0275template(5,ee,6,9,"div",2),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275elementStart(7,"div",3),e.\u0275\u0275template(8,oe,1,1,"ds-themed-loading",4),e.\u0275\u0275template(9,l,3,3,"div",5),e.\u0275\u0275template(10,A,1,3,"ds-chips",6),e.\u0275\u0275elementEnd()()),2&v&&(e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(1,7,u.formCollapsed)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(3,9,u.formCollapsed)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(13,i,!u.showErrorMessages,u.showErrorMessages)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(6,11,u.formCollapsed)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!u.chips),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",u.chips&&!u.chips.hasItems()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",u.chips&&u.chips.hasItems()))},directives:[c.O5,p._L,c.mk,j.U,m.Z,B.k],pipes:[O.X$,c.Ov],styles:[".close[_ngcontent-%COMP%]{top:-2.5rem}"],data:{animation:[Y]}}),C})()},42803:(re,J,t)=>{t.d(J,{D:()=>R});var e=t(5e3),E=t(39646),P=t(70262),o=t(71884),G=t(18505),U=t(54004),F=(t(28571),t(62713)),M=t(24702),W=t(49566),K=t(68285),d=t(24789),j=t(10362),D=t(8108),L=t(17656),T=t(48689),Y=t(69808),X=t(86956);function H(s,c){1&s&&(e.\u0275\u0275elementStart(0,"button",10),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&s&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"form.no-results")))}function Z(s,c){if(1&s){const p=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",11),e.\u0275\u0275listener("click",function(){const O=e.\u0275\u0275restoreView(p).$implicit,S=e.\u0275\u0275nextContext(),Q=e.\u0275\u0275reference(1);return S.onSelect(O),Q.close()})("mousedown",function(){const O=e.\u0275\u0275restoreView(p).$implicit,S=e.\u0275\u0275nextContext(),Q=e.\u0275\u0275reference(1);return S.onSelect(O),Q.close()}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()}if(2&s){const p=c.$implicit,m=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("title",p.display),e.\u0275\u0275attribute("id",p.display==e.\u0275\u0275pipeBind1(1,3,m.currentValue)?"combobox_"+m.id+"_selected":null),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",m.inputFormatter(p)," ")}}function f(s,c){1&s&&(e.\u0275\u0275elementStart(0,"div",12)(1,"p"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()()),2&s&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,"form.loading")))}let R=(()=>{class s extends j.m{constructor(p,m,B,O){super(p,B,O),this.vocabularyService=p,this.cdr=m,this.layoutService=B,this.validationService=O,this.bindId=!0,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter,this.loading=!1,this.inputFormatter=S=>S.display||S.value}ngOnInit(){this.updatePageInfo(this.model.maxOptions,1),this.vocabularyService.getVocabularyEntries(this.model.vocabularyOptions,this.pageInfo).pipe((0,K.Gp)(),(0,P.K)(()=>(0,E.of)((0,d.b)(new F.S,[])))).subscribe(p=>{this.optionsList=p.page,this.model.value&&this.setCurrentValue(this.model.value,!0),this.updatePageInfo(p.pageInfo.elementsPerPage,p.pageInfo.currentPage,p.pageInfo.totalElements,p.pageInfo.totalPages),this.cdr.detectChanges()}),this.group.get(this.model.id).valueChanges.pipe((0,o.x)()).subscribe(p=>{this.setCurrentValue(p)})}openDropdown(p){this.model.readOnly||(this.group.markAsUntouched(),p.open())}onScroll(){!this.loading&&this.pageInfo.currentPage<=this.pageInfo.totalPages&&(this.loading=!0,this.updatePageInfo(this.pageInfo.elementsPerPage,this.pageInfo.currentPage+1,this.pageInfo.totalElements,this.pageInfo.totalPages),this.vocabularyService.getVocabularyEntries(this.model.vocabularyOptions,this.pageInfo).pipe((0,K.Gp)(),(0,P.K)(()=>(0,E.of)((0,d.b)(new F.S,[]))),(0,G.b)(()=>this.loading=!1)).subscribe(p=>{this.optionsList=this.optionsList.concat(p.page),this.updatePageInfo(p.pageInfo.elementsPerPage,p.pageInfo.currentPage,p.pageInfo.totalElements,p.pageInfo.totalPages),this.cdr.detectChanges()}))}onSelect(p){this.group.markAsDirty(),this.dispatchUpdate(p),this.setCurrentValue(p)}setCurrentValue(p,m=!1){let B;B=m?this.getInitValueFromModel().pipe((0,U.U)(O=>O.display)):(0,M.xb)(p)?(0,E.of)(""):(0,E.of)("string"==typeof p?p:p.display),this.currentValue=B}}return s.\u0275fac=function(p){return new(p||s)(e.\u0275\u0275directiveInject(W.c),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(D.vnf),e.\u0275\u0275directiveInject(D.fhz))},s.\u0275cmp=e.\u0275\u0275defineComponent({type:s,selectors:[["ds-dynamic-scrollable-dropdown"]],inputs:{bindId:"bindId",group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:11,vars:26,consts:[["ngbDropdown","","display","dynamic","placement","bottom-right",1,"w-100"],["sdRef","ngbDropdown"],["role","combobox",1,"position-relative","right-addon"],["ngbDropdownToggle","","aria-hidden","true",1,"position-absolute","scrollable-dropdown-toggle"],[1,"form-control",3,"id","name","readonly","type","value","blur","click","focus","keypress"],["ngbDropdownMenu","","aria-haspopup","true","aria-expanded","false",1,"dropdown-menu","scrollable-dropdown-menu","w-100"],["role","listbox","infiniteScroll","",1,"scrollable-menu",3,"id","infiniteScrollDistance","infiniteScrollThrottle","scrollWindow","scrolled"],["class","dropdown-item disabled",4,"ngIf"],["class","dropdown-item collection-item text-truncate","role","option",3,"title","click","mousedown",4,"ngFor","ngForOf"],["class","scrollable-dropdown-loading text-center",4,"ngIf"],[1,"dropdown-item","disabled"],["role","option",1,"dropdown-item","collection-item","text-truncate",3,"title","click","mousedown"],[1,"scrollable-dropdown-loading","text-center"]],template:function(p,m){if(1&p){const B=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0,1)(2,"div",2),e.\u0275\u0275element(3,"i",3),e.\u0275\u0275elementStart(4,"input",4),e.\u0275\u0275listener("blur",function(S){return m.onBlur(S)})("click",function(S){e.\u0275\u0275restoreView(B);const Q=e.\u0275\u0275reference(1);return S.stopPropagation(),m.openDropdown(Q)})("focus",function(S){return m.onFocus(S)})("keypress",function(S){return S.preventDefault()}),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",5)(7,"div",6),e.\u0275\u0275listener("scrolled",function(){return m.onScroll()}),e.\u0275\u0275template(8,H,3,3,"button",7),e.\u0275\u0275template(9,Z,3,5,"button",8),e.\u0275\u0275template(10,f,4,3,"div",9),e.\u0275\u0275elementEnd()()()}2&p&&(e.\u0275\u0275advance(2),e.\u0275\u0275attribute("aria-label",m.model.label)("aria-owns","combobox_"+m.id+"_listbox"),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("is-invalid",m.showErrorMessages)("scrollable-dropdown-input",!m.model.readOnly),e.\u0275\u0275property("id",m.id)("name",m.model.name)("readonly",!0)("type",m.model.inputType)("value",e.\u0275\u0275pipeBind1(5,24,m.currentValue)),e.\u0275\u0275attribute("aria-controls","combobox_"+m.id+"_listbox")("aria-activedescendant","combobox_"+m.id+"_selected")("aria-label",m.model.placeholder)("autoComplete",m.model.autoComplete),e.\u0275\u0275advance(2),e.\u0275\u0275attribute("aria-label",m.model.placeholder),e.\u0275\u0275advance(1),e.\u0275\u0275property("id","combobox_"+m.id+"_listbox")("infiniteScrollDistance",2)("infiniteScrollThrottle",50)("scrollWindow",!1),e.\u0275\u0275attribute("aria-label",m.model.placeholder),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",m.optionsList&&0==m.optionsList.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",m.optionsList),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",m.loading))},directives:[L.jt,L.iD,L.Vi,T.R,Y.O5,Y.sg],pipes:[Y.Ov,X.X$],styles:[".ds-form-input-addon[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important;border-right:0!important}.ds-form-input-btn[_ngcontent-%COMP%]{border:var(--bs-input-btn-border-width) solid var(--bs-input-border-color);border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.ds-form-input-btn[_ngcontent-%COMP%]:focus{box-shadow:none!important}button.ds-form-add-more[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none!important}.ds-form-input-value[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-bottom-left-radius:0!important}.fa-spin[_ngcontent-%COMP%]{pointer-events:none}.left-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{left:0}.right-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{right:0}.left-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:calc(var(--bs-spacer) * 2.25)}.right-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:calc(var(--bs-spacer) * 2.25)}.scrollable-menu[_ngcontent-%COMP%]{height:auto;max-height:var(--ds-dropdown-menu-max-height);overflow-x:hidden}.collection-item[_ngcontent-%COMP%]{border-bottom:var(--bs-dropdown-border-width) solid var(--bs-dropdown-border-color)}.scrollable-dropdown-loading[_ngcontent-%COMP%]{background-color:var(--bs-primary);color:#fff;height:calc(var(--bs-spacer) * 2)!important;line-height:calc(var(--bs-spacer) * 2);position:sticky;bottom:0}.scrollable-dropdown-menu[_ngcontent-%COMP%]{left:0!important;margin-bottom:var(--bs-spacer);z-index:1000}.scrollable-dropdown-toggle[_ngcontent-%COMP%]{padding:.7rem .7rem 0}.scrollable-dropdown-input[readonly][_ngcontent-%COMP%]{background-color:#fff}"]}),s})()},28554:(re,J,t)=>{t.d(J,{V:()=>ae});var e=t(5e3),E=t(68306),P=t(39646),o=t(78372),G=t(71884),U=t(18505),$=t(63900),F=t(70262),M=t(54004),W=t(15683),K=t(17489),j=t(49566),L=(t(81907),t(93769)),T=t(24702),Y=t(21540),X=t(68285),H=t(24789),Z=t(62713),f=t(10362),R=t(8108),s=t(16312),c=t(69808),p=t(93075),m=t(17656);const B=["instance"];function O(ee,oe){1&ee&&e.\u0275\u0275text(0),2&ee&&e.\u0275\u0275textInterpolate1(" ",oe.result.display,"\n")}function S(ee,oe){if(1&ee){const l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",4),e.\u0275\u0275listener("ngModelChange",function(i){return e.\u0275\u0275restoreView(l),e.\u0275\u0275nextContext().currentValue=i})("blur",function(i){return e.\u0275\u0275restoreView(l),e.\u0275\u0275nextContext().onBlur(i)})("keypress",function(i){return e.\u0275\u0275restoreView(l),e.\u0275\u0275nextContext().preventEventsPropagation(i)})("keydown",function(i){return e.\u0275\u0275restoreView(l),e.\u0275\u0275nextContext().preventEventsPropagation(i)})("keyup",function(i){return e.\u0275\u0275restoreView(l),e.\u0275\u0275nextContext().onKeyUp(i)}),e.\u0275\u0275elementEnd()}if(2&ee){const l=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("pl-3",l.chips.hasItems()),e.\u0275\u0275property("placeholder",l.model.placeholder)("readonly",l.model.readOnly)("ngModel",l.currentValue)}}function Q(ee,oe){1&ee&&e.\u0275\u0275element(0,"i",9)}function ne(ee,oe){if(1&ee){const l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",5),e.\u0275\u0275template(1,Q,1,0,"i",6),e.\u0275\u0275elementStart(2,"input",7,8),e.\u0275\u0275listener("ngModelChange",function(i){return e.\u0275\u0275restoreView(l),e.\u0275\u0275nextContext().currentValue=i})("blur",function(i){return e.\u0275\u0275restoreView(l),e.\u0275\u0275nextContext().onBlur(i)})("focus",function(i){return e.\u0275\u0275restoreView(l),e.\u0275\u0275nextContext().onFocus(i)})("change",function(i){return i.stopPropagation()})("input",function(i){return e.\u0275\u0275restoreView(l),e.\u0275\u0275nextContext().onInput(i)})("selectItem",function(i){return e.\u0275\u0275restoreView(l),e.\u0275\u0275nextContext().onSelectItem(i)})("keypress",function(i){return e.\u0275\u0275restoreView(l),e.\u0275\u0275nextContext().preventEventsPropagation(i)})("keydown",function(i){return e.\u0275\u0275restoreView(l),e.\u0275\u0275nextContext().preventEventsPropagation(i)})("keyup",function(i){return e.\u0275\u0275restoreView(l),e.\u0275\u0275nextContext().onKeyUp(i)}),e.\u0275\u0275elementEnd()()}if(2&ee){const l=e.\u0275\u0275nextContext(),A=e.\u0275\u0275reference(1);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",l.searching),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("is-invalid",l.showErrorMessages)("pl-3",l.chips.hasItems()),e.\u0275\u0275property("ngModel",l.currentValue)("id",l.id)("inputFormatter",l.formatter)("name",l.model.name)("ngbTypeahead",l.search)("placeholder",l.model.placeholder)("readonly",l.model.readOnly)("resultTemplate",A)("type",l.model.inputType),e.\u0275\u0275attribute("aria-labelledby","label_"+l.model.id)("autoComplete",l.model.autoComplete)}}let ae=(()=>{class ee extends f.m{constructor(l,A,i,_){super(l,i,_),this.vocabularyService=l,this.cdr=A,this.layoutService=i,this.validationService=_,this.bindId=!0,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter,this.searching=!1,this.searchFailed=!1,this.hideSearchingWhenUnsubscribed=new E.y(()=>()=>this.changeSearchingStatus(!1)),this.formatter=C=>C.display,this.search=C=>C.pipe((0,o.b)(300),(0,G.x)(),(0,U.b)(()=>this.changeSearchingStatus(!0)),(0,$.w)(w=>""===w||w.length<this.model.minChars?(0,P.of)({list:[]}):this.vocabularyService.getVocabularyEntriesByValue(w,!1,this.model.vocabularyOptions,new Z.S).pipe((0,X.Gp)(),(0,U.b)(()=>this.searchFailed=!1),(0,F.K)(()=>(this.searchFailed=!0,(0,P.of)((0,H.b)(new Z.S,[])))))),(0,M.U)(w=>w.page),(0,U.b)(()=>this.changeSearchingStatus(!1)),(0,W.T)(this.hideSearchingWhenUnsubscribed))}ngOnInit(){this.hasAuthority=this.model.vocabularyOptions&&(0,T.Uh)(this.model.vocabularyOptions.name),this.chips=new L.c(this.model.value,"display",null,Y.N.submission.icons.metadata),this.chips.chipsItems.subscribe(l=>{const A=this.chips.getChipsItems();(0,K.isEqual)(A,this.model.value)||this.dispatchUpdate(A)})}changeSearchingStatus(l){this.searching=l,this.cdr.detectChanges()}onInput(l){l.data&&this.group.markAsDirty(),this.cdr.detectChanges()}onBlur(l){(0,T.UE)(this.currentValue)&&!this.instance.isPopupOpen()&&this.addTagsToChips(),this.blur.emit(l)}onSelectItem(l){this.chips.add(l.item),this.updateModel(l),setTimeout(()=>{this.setCurrentValue(null),this.cdr.detectChanges()},50)}updateModel(l){this.dispatchUpdate(this.chips.getChipsItems())}onKeyUp(l){(13===l.keyCode||188===l.keyCode)&&(l.preventDefault(),this.addTagsToChips(),l.stopPropagation())}preventEventsPropagation(l){l.stopPropagation(),13===l.keyCode&&l.preventDefault()}setCurrentValue(l,A=!1){this.currentValue=l}addTagsToChips(){if((0,T.Uh)(this.currentValue)&&(!this.hasAuthority||!this.model.vocabularyOptions.closed)){let l=[];l=this.currentValue.split(",");const A=[];l.forEach(i=>{i.split(";").forEach(_=>{A.push(_)})}),A.forEach(i=>{(i=i.trim()).length>0&&this.chips.add(i)}),setTimeout(()=>{this.setCurrentValue(null),this.cdr.detectChanges()},50),this.updateModel(event)}}}return ee.\u0275fac=function(l){return new(l||ee)(e.\u0275\u0275directiveInject(j.c),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(R.vnf),e.\u0275\u0275directiveInject(R.fhz))},ee.\u0275cmp=e.\u0275\u0275defineComponent({type:ee,selectors:[["ds-dynamic-tag"]],viewQuery:function(l,A){if(1&l&&e.\u0275\u0275viewQuery(B,5),2&l){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(A.instance=i.first)}},inputs:{bindId:"bindId",group:"group",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:5,vars:6,consts:[["rt",""],[3,"chips","editable","showIcons","wrapperClass"],["class","border-0 form-control-plaintext tag-input flex-grow-1 mt-1 mb-1","type","text","role","textbox",3,"pl-3","placeholder","readonly","ngModel","ngModelChange","blur","keypress","keydown","keyup",4,"ngIf"],["class","position-relative right-addon",4,"ngIf"],["type","text","role","textbox",1,"border-0","form-control-plaintext","tag-input","flex-grow-1","mt-1","mb-1",3,"placeholder","readonly","ngModel","ngModelChange","blur","keypress","keydown","keyup"],[1,"position-relative","right-addon"],["class","fas fa-circle-notch fa-spin fa-2x fa-fw text-primary position-absolute mt-1 p-0","aria-hidden","true",4,"ngIf"],["type","text",1,"border-0","form-control-plaintext","tag-input","flex-grow-1","mt-1","mb-1",3,"ngModel","id","inputFormatter","name","ngbTypeahead","placeholder","readonly","resultTemplate","type","ngModelChange","blur","focus","change","input","selectItem","keypress","keydown","keyup"],["instance","ngbTypeahead"],["aria-hidden","true",1,"fas","fa-circle-notch","fa-spin","fa-2x","fa-fw","text-primary","position-absolute","mt-1","p-0"]],template:function(l,A){1&l&&(e.\u0275\u0275template(0,O,1,1,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(2,"ds-chips",1),e.\u0275\u0275template(3,S,1,5,"input",2),e.\u0275\u0275template(4,ne,4,16,"div",3),e.\u0275\u0275elementEnd()),2&l&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("chips",A.chips)("editable",!1)("showIcons",A.model.hasAuthority)("wrapperClass","border-bottom border-light"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!A.model.hasAuthority),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",A.model.hasAuthority))},directives:[s.k,c.O5,p.Fj,p.JJ,p.On,m.dR],styles:[".ds-form-input-addon[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important;border-right:0!important}.ds-form-input-btn[_ngcontent-%COMP%]{border:var(--bs-input-btn-border-width) solid var(--bs-input-border-color);border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.ds-form-input-btn[_ngcontent-%COMP%]:focus{box-shadow:none!important}button.ds-form-add-more[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none!important}.ds-form-input-value[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-bottom-left-radius:0!important}.fa-spin[_ngcontent-%COMP%]{pointer-events:none}.left-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{left:0}.right-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{right:0}.left-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:calc(var(--bs-spacer) * 2.25)}.right-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:calc(var(--bs-spacer) * 2.25)}.chips-left[_ngcontent-%COMP%]{left:0;padding-right:100%}[_nghost-%COMP%]     .dropdown-menu{width:100%!important;max-height:var(--ds-dropdown-menu-max-height);overflow-y:scroll;overflow-x:hidden;left:0!important;margin-top:var(--bs-spacer)!important}[_nghost-%COMP%]     .dropdown-item.active, [_nghost-%COMP%]     .dropdown-item:active, [_nghost-%COMP%]     .dropdown-item:focus, [_nghost-%COMP%]     .dropdown-item:hover{color:var(--bs-dropdown-link-hover-color)!important;background-color:var(--bs-dropdown-link-hover-bg)!important}.tag-input[_ngcontent-%COMP%]{flex-grow:1;outline:none;width:auto!important}"]}),ee})()},55648:(re,J,t)=>{t.d(J,{i:()=>v});var e=t(5e3),E=t(61135),P=t(39841),o=t(24702),G=t(54004),U=t(95698),$=t(35684),F=t(63900),M=t(14292),W=t(36872),K=t(51117),d=t(35355),j=t(88002),D=t(67357),L=t(84935),T=t(45715),Y=t(31388),X=t(43015),H=t(68285),Z=t(93369),f=t(17656),R=t(65620),s=t(74202),c=t(69808),p=t(48106),m=t(64204),B=t(32272),O=t(53006),S=t(86956);function Q(u,V){1&u&&e.\u0275\u0275element(0,"ds-themed-loading")}function ne(u,V){if(1&u){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-dynamic-lookup-relation-search-tab",18),e.\u0275\u0275listener("selectObject",function(I){return e.\u0275\u0275restoreView(a),e.\u0275\u0275nextContext(2).select(I)})("deselectObject",function(I){return e.\u0275\u0275restoreView(a),e.\u0275\u0275nextContext(2).deselect(I)})("resultFound",function(I){return e.\u0275\u0275restoreView(a),e.\u0275\u0275nextContext(2).setTotalInternals(I.pageInfo.totalElements)}),e.\u0275\u0275elementEnd()}if(2&u){const a=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("selection$",a.selection$)("listId",a.listId)("relationship",a.relationshipOptions)("repeatable",a.repeatable)("context",a.context)("query",a.query)("relationshipType",a.relationshipType)("isLeft",a.isLeft)("item",a.item)("isEditRelationship",a.isEditRelationship)("toRemove",a.toRemove)}}function ae(u,V){if(1&u){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-dynamic-lookup-relation-external-source-tab",19),e.\u0275\u0275listener("importedObject",function(I){return e.\u0275\u0275restoreView(a),e.\u0275\u0275nextContext(3).imported(I)}),e.\u0275\u0275elementEnd()}if(2&u){const a=e.\u0275\u0275nextContext().$implicit,y=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("label",y.label)("listId",y.listId)("repeatable",y.repeatable)("item",y.item)("collection",y.collection)("relationship",y.relationshipOptions)("context",y.context)("externalSource",a)}}const ee=function(u){return{count:u}};function oe(u,V){if(1&u&&(e.\u0275\u0275elementStart(0,"li",12)(1,"a",13),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,ae,1,8,"ng-template",14),e.\u0275\u0275elementEnd()),2&u){const a=V.$implicit,y=V.index,I=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(3,1,"submission.sections.describe.relationship-lookup.search-tab.tab-title."+a.id,e.\u0275\u0275pureFunction1(6,ee,e.\u0275\u0275pipeBind1(4,4,I.totalExternal$)[y])))}}function l(u,V){if(1&u){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-dynamic-lookup-relation-selection-tab",20),e.\u0275\u0275listener("selectObject",function(I){return e.\u0275\u0275restoreView(a),e.\u0275\u0275nextContext(3).select(I)})("deselectObject",function(I){return e.\u0275\u0275restoreView(a),e.\u0275\u0275nextContext(3).deselect(I)}),e.\u0275\u0275elementEnd()}if(2&u){const a=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("selection$",a.selection$)("listId",a.listId)("relationshipType",a.relationshipOptions.relationshipType)("repeatable",a.repeatable)("context",a.context)}}function A(u,V){if(1&u&&(e.\u0275\u0275elementStart(0,"li",12)(1,"a",13),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,l,1,5,"ng-template",14),e.\u0275\u0275elementEnd()),2&u){const a=e.\u0275\u0275nextContext(2);let y;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(3,1,"submission.sections.describe.relationship-lookup.selection-tab.tab-title",e.\u0275\u0275pureFunction1(6,ee,null==(y=e.\u0275\u0275pipeBind1(4,4,a.selection$))?null:y.length)))}}function i(u,V){if(1&u&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"ul",10,11)(3,"li",12)(4,"a",13),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,ne,1,11,"ng-template",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,oe,6,8,"li",15),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275template(11,A,6,8,"li",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"div",17),e.\u0275\u0275elementContainerEnd()),2&u){const a=e.\u0275\u0275reference(2),y=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(6,4,"submission.sections.describe.relationship-lookup.search-tab.tab-title."+y.relationshipOptions.relationshipType,e.\u0275\u0275pureFunction1(11,ee,e.\u0275\u0275pipeBind1(7,7,y.totalInternal$)))),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(10,9,y.externalSourcesRD$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!y.isEditRelationship),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngbNavOutlet",a)}}function _(u,V){1&u&&e.\u0275\u0275element(0,"span",27)}function C(u,V){if(1&u){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",21),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275nextContext().discardEv()}),e.\u0275\u0275element(2,"i",22),e.\u0275\u0275elementStart(3,"span",23),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"button",24),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(a),e.\u0275\u0275nextContext().submitEv()}),e.\u0275\u0275template(7,_,1,0,"span",25),e.\u0275\u0275element(8,"i",26),e.\u0275\u0275elementStart(9,"span",23),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&u){const a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",0==a.toAdd.length&&0==a.toRemove.length||a.isPending),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("\xa0",e.\u0275\u0275pipeBind1(5,5,"item.edit.metadata.discard-button"),""),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",0==a.toAdd.length&&0==a.toRemove.length||a.isPending),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.isPending),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("\xa0",e.\u0275\u0275pipeBind1(11,7,"item.edit.metadata.save-button"),"")}}const w=function(u){return{size:u}};let v=(()=>{class u{constructor(a,y,I,q,le,me,de,he,h,b,n){this.modal=a,this.selectableListService=y,this.relationshipService=I,this.relationshipTypeService=q,this.externalSourceService=le,this.lookupRelationService=me,this.searchConfigService=de,this.rdbService=he,this.zone=h,this.store=b,this.router=n,this.selectEvent=new e.EventEmitter,this.subMap={},this.totalInternal$=new E.X(0),this.isLeft=!1,this.isEditRelationship=!1,this.toAdd=[],this.toRemove=[],this.isPending=!1}ngOnInit(){this.currentItemIsLeftItem$&&this.currentItemIsLeftItem$.subscribe(a=>{this.isLeft=a}),this.selection$=this.selectableListService.getSelectableList(this.listId).pipe((0,G.U)(a=>(0,o.Uh)(a)&&(0,o.Uh)(a.selection)?a.selection:[])),this.selection$.pipe((0,U.q)(1)).subscribe(a=>a.map(y=>this.addNameVariantSubscription(y))),this.context="true"===this.relationshipOptions.nameVariants?L._.EntitySearchModalWithNameVariants:L._.EntitySearchModal,(0,o.UE)(this.relationshipOptions.externalSources)&&(this.externalSourcesRD$=this.rdbService.aggregate(this.relationshipOptions.externalSources.map(a=>this.externalSourceService.findById(a,!0,!0,(0,Z.l)("entityTypes")))).pipe((0,H.mc)())),this.setTotals()}close(){this.toAdd=[],this.toRemove=[],this.modal.close()}select(...a){this.zone.runOutsideAngular(()=>{(0,P.a)([...a.map(I=>(this.addNameVariantSubscription(I),this.relationshipService.getNameVariant(this.listId,I.indexableObject.uuid).pipe((0,U.q)(1),(0,G.U)(q=>({item:I.indexableObject,nameVariant:q})))))]).subscribe(I=>I.forEach(q=>{const le=new d.Jg(this.item,q.item,this.relationshipOptions.relationshipType,this.submissionId,q.nameVariant);this.store.dispatch(le)}))})}addNameVariantSubscription(a){const y=this.relationshipService.getNameVariant(this.listId,a.indexableObject.uuid);this.subMap[a.indexableObject.uuid]=y.pipe((0,$.T)(1)).subscribe(I=>this.store.dispatch(new d._k(this.item,a.indexableObject,this.relationshipOptions.relationshipType,this.submissionId,I)))}deselect(...a){this.zone.runOutsideAngular(()=>a.forEach(y=>{this.subMap[y.indexableObject.uuid].unsubscribe(),this.store.dispatch(new d.J9(this.item,y.indexableObject,this.relationshipOptions.relationshipType,this.submissionId))}))}imported(a){this.setTotals(),this.select(a)}setTotals(){const a=(0,P.a)([this.externalSourcesRD$,this.searchConfigService.paginatedSearchOptions]);this.totalExternal$=a.pipe((0,F.w)(([y,I])=>(0,P.a)([...y.map(q=>this.lookupRelationService.getTotalExternalResults(q,I))])))}setTotalInternals(a){this.totalInternal$.next(a)}ngOnDestroy(){this.router.navigate([],{}),Object.values(this.subMap).forEach(a=>a.unsubscribe())}discardEv(){}submitEv(){}}return u.\u0275fac=function(a){return new(a||u)(e.\u0275\u0275directiveInject(f.Kz),e.\u0275\u0275directiveInject(K.w),e.\u0275\u0275directiveInject(j.U),e.\u0275\u0275directiveInject(D.X),e.\u0275\u0275directiveInject(Y.G),e.\u0275\u0275directiveInject(T.P),e.\u0275\u0275directiveInject(W.U),e.\u0275\u0275directiveInject(X.Q),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(R.yh),e.\u0275\u0275directiveInject(s.F0))},u.\u0275cmp=e.\u0275\u0275defineComponent({type:u,selectors:[["ds-dynamic-lookup-relation-modal"]],outputs:{selectEvent:"selectEvent"},features:[e.\u0275\u0275ProvidersFeature([{provide:M.SEARCH_CONFIG_SERVICE,useClass:W.U}])],decls:21,vars:19,consts:[[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Close button","aria-describedby","modal-title",1,"close",3,"disabled","click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngIf"],[1,"modal-footer"],[1,"d-flex","float-right","space-children-mr"],[1,"close-button"],["type","button",1,"btn","btn-outline-secondary",3,"disabled","click"],["ngbNav","",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","",4,"ngFor","ngForOf"],["ngbNavItem","",4,"ngIf"],[3,"ngbNavOutlet"],[1,"d-block","pt-3",3,"selection$","listId","relationship","repeatable","context","query","relationshipType","isLeft","item","isEditRelationship","toRemove","selectObject","deselectObject","resultFound"],[1,"d-block","pt-3",3,"label","listId","repeatable","item","collection","relationship","context","externalSource","importedObject"],[1,"d-block","pt-3",3,"selection$","listId","relationshipType","repeatable","context","selectObject","deselectObject"],[1,"btn","btn-danger","discard",3,"disabled","click"],[1,"fas","fa-times"],[1,"d-none","d-sm-inline"],[1,"btn","btn-primary","submit",3,"disabled","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"fas","fa-save"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(a,y){if(1&a&&(e.\u0275\u0275elementStart(0,"div",0)(1,"h4",1),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",2),e.\u0275\u0275listener("click",function(){return y.close()}),e.\u0275\u0275elementStart(5,"span",3),e.\u0275\u0275text(6,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"div",4),e.\u0275\u0275template(8,Q,1,0,"ds-themed-loading",5),e.\u0275\u0275template(9,i,13,13,"ng-container",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",6)(11,"small"),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275pipe(14,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",7)(16,"div",8)(17,"button",9),e.\u0275\u0275listener("click",function(){return y.close()}),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(20,C,12,9,"ng-container",5),e.\u0275\u0275elementEnd()()),2&a){let I;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,8,"submission.sections.describe.relationship-lookup.title."+y.relationshipOptions.relationshipType)),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",y.isPending),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!y.item||!y.collection),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",y.item&&y.collection),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(13,10,"submission.sections.describe.relationship-lookup.selected",e.\u0275\u0275pureFunction1(17,w,(null==(I=e.\u0275\u0275pipeBind1(14,13,y.selection$))?null:I.length)||0))),e.\u0275\u0275advance(5),e.\u0275\u0275property("disabled",y.isPending),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(19,15,"submission.sections.describe.relationship-lookup.close"),""),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",y.isEditRelationship)}},directives:[c.O5,p.Z,f.Pz,f.nv,f.Vx,f.uN,m.s,c.sg,B.g,O.O,f.tO],pipes:[S.X$,c.Ov],styles:[".modal-footer[_ngcontent-%COMP%]{justify-content:space-between}[_nghost-%COMP%]     .modal-content{width:90%;margin:5%}[_nghost-%COMP%]   .spinner-border[_ngcontent-%COMP%]{vertical-align:middle}"]}),u})()},32272:(re,J,t)=>{t.d(J,{g:()=>oe});var e=t(5e3),E=t(14292),P=t(36872),o=t(31388),U=(t(46623),t(54004)),$=t(63900),F=t(68675),M=t(28652),W=t(4177),K=t(29635),d=t(24702),j=t(51117),T=(t(33609),t(22979),t(77467)),Y=t(68285),X=t(74202),H=t(17656),Z=t(82656),f=t(13511),R=t(98605),s=t(69808),c=t(70714),p=t(48106),m=t(41971),B=t(86956);const O=function(l,A){return{repeatable:l,listId:A}};function S(l,A){if(1&l){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-viewable-collection",8),e.\u0275\u0275listener("importObject",function(C){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext(2).import(C)}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementEnd()}if(2&l){const i=e.\u0275\u0275nextContext().ngVar,_=e.\u0275\u0275nextContext();e.\u0275\u0275property("@fadeIn",void 0)("objects",i)("selectionConfig",e.\u0275\u0275pureFunction2(10,O,_.repeatable,_.listId))("config",e.\u0275\u0275pipeBind1(1,8,_.currentPagination$))("hideGear",!0)("context",_.context)("importable",!0)("importConfig",_.importConfig)}}function Q(l,A){1&l&&(e.\u0275\u0275element(0,"ds-themed-loading",9),e.\u0275\u0275pipe(1,"translate")),2&l&&e.\u0275\u0275propertyInterpolate("message",e.\u0275\u0275pipeBind1(1,1,"loading.search-results"))}function ne(l,A){1&l&&(e.\u0275\u0275element(0,"ds-error",9),e.\u0275\u0275pipe(1,"translate")),2&l&&e.\u0275\u0275propertyInterpolate("message",e.\u0275\u0275pipeBind1(1,1,"error.search-results"))}function ae(l,A){1&l&&(e.\u0275\u0275elementStart(0,"div",10),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&l&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"search.results.empty")," "))}function ee(l,A){if(1&l&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,S,2,13,"ds-viewable-collection",5),e.\u0275\u0275template(2,Q,2,3,"ds-themed-loading",6),e.\u0275\u0275template(3,ne,2,3,"ds-error",6),e.\u0275\u0275template(4,ae,3,3,"div",7),e.\u0275\u0275elementContainerEnd()),2&l){const i=A.ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==i?null:i.hasSucceeded)&&!(null!=i&&i.isLoading)&&(null==i||null==i.payload||null==i.payload.page?null:i.payload.page.length)>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i||(null==i?null:i.isLoading)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==i?null:i.hasFailed)&&(!(null!=i&&i.errorMessage)||400!=(null==i?null:i.statusCode))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0==(null==i||null==i.payload||null==i.payload.page?null:i.payload.page.length)||400==(null==i?null:i.statusCode))}}let oe=(()=>{class l{constructor(i,_,C,w,v,u){this.router=i,this.searchConfigService=_,this.externalSourceService=C,this.modalService=w,this.selectableListService=v,this.paginationService=u,this.importedObject=new e.EventEmitter,this.initialPagination=Object.assign(new W.r,{id:"spc",pageSize:5})}ngOnInit(){this.externalSource.entityTypes.pipe((0,Y.hC)(),(0,U.U)(i=>i.hasSucceeded&&i.payload.totalElements>0?i.payload.page[0]:null)).subscribe(i=>{this.relatedEntityType=i}),this.resetRoute(),this.entriesRD$=this.searchConfigService.paginatedSearchOptions.pipe((0,$.w)(i=>this.externalSourceService.getExternalSourceEntries(this.externalSource.id,i).pipe((0,F.O)(void 0)))),this.currentPagination$=this.paginationService.getCurrentPagination(this.searchConfigService.paginationID,this.initialPagination),this.importConfig={buttonLabel:"submission.sections.describe.relationship-lookup.external-source.import-button-title."+this.label}}import(i){this.modalRef=this.modalService.open(K.D,{size:"lg",container:"ds-dynamic-lookup-relation-modal"});const _=this.modalRef.componentInstance;_.externalSourceEntry=i,_.item=this.item,_.collection=this.collection,_.relationship=this.relationship,_.label=this.label,_.relatedEntityType=this.relatedEntityType,this.importObjectSub=_.importedObject.subscribe(C=>{this.selectableListService.selectSingle(this.listId,C),this.importedObject.emit(C)})}ngOnDestroy(){(0,d.Uh)(this.importObjectSub)&&this.importObjectSub.unsubscribe()}resetRoute(){this.paginationService.updateRoute(this.searchConfigService.paginationID,{page:1,pageSize:5})}}return l.\u0275fac=function(i){return new(i||l)(e.\u0275\u0275directiveInject(X.F0),e.\u0275\u0275directiveInject(P.U),e.\u0275\u0275directiveInject(o.G),e.\u0275\u0275directiveInject(H.FF),e.\u0275\u0275directiveInject(j.w),e.\u0275\u0275directiveInject(T.N))},l.\u0275cmp=e.\u0275\u0275defineComponent({type:l,selectors:[["ds-dynamic-lookup-relation-external-source-tab"]],inputs:{label:"label",listId:"listId",item:"item",collection:"collection",relationship:"relationship",context:"context",repeatable:"repeatable",externalSource:"externalSource"},outputs:{importedObject:"importedObject"},features:[e.\u0275\u0275ProvidersFeature([{provide:E.SEARCH_CONFIG_SERVICE,useClass:P.U}])],decls:16,vars:16,consts:[[1,"row"],[1,"col-4"],[1,"col-8"],[3,"query","inPlaceSearch","searchPlaceholder"],[4,"ngVar"],[3,"objects","selectionConfig","config","hideGear","context","importable","importConfig","importObject",4,"ngIf"],[3,"message",4,"ngIf"],["id","empty-external-entry-list",4,"ngIf"],[3,"objects","selectionConfig","config","hideGear","context","importable","importConfig","importObject"],[3,"message"],["id","empty-external-entry-list"]],template:function(i,_){if(1&i&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h3"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"ds-page-size-selector"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",2),e.\u0275\u0275element(7,"ds-search-form",3),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementStart(10,"div")(11,"h3"),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,ee,5,4,"ng-container",4),e.\u0275\u0275pipe(15,"async"),e.\u0275\u0275elementEnd()()()),2&i){let C;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,6,"submission.sections.describe.relationship-lookup.selection-tab.settings")),e.\u0275\u0275advance(4),e.\u0275\u0275property("query",null==(C=e.\u0275\u0275pipeBind1(8,8,_.searchConfigService.paginatedSearchOptions))?null:C.query)("inPlaceSearch",!0)("searchPlaceholder",e.\u0275\u0275pipeBind1(9,10,"submission.sections.describe.relationship-lookup.selection-tab.search-form.placeholder")),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(13,12,"submission.sections.describe.relationship-lookup.selection-tab.title."+_.externalSource.id)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngVar",e.\u0275\u0275pipeBind1(15,14,_.entriesRD$))}},directives:[Z.k,f.o,R.g,s.O5,c.c,p.Z,m.q],pipes:[B.X$,s.Ov],styles:[""],data:{animation:[M.Ji,M.Ic]}}),l})()},29635:(re,J,t)=>{t.d(J,{D:()=>p});var e=t(5e3),E=t(94569),P=t(45715),o=t(35598),G=t(8041),U=t(84935),$=t(51117),F=t(83639),M=t(4177),W=t(68285),K=t(63900),d=t(95698),j=t(84412),D=t(82596),L=t(91320),T=t(17656),Y=t(86956),X=t(69808),H=t(64490);function Z(m,B){if(1&m&&(e.\u0275\u0275elementStart(0,"div")(1,"a",17),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()),2&m){const O=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("href",O.uri.value,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(O.uri.value)}}const f=function(m){return{repeatable:!1,listId:m}};function R(m,B){if(1&m){const O=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-search-results",18),e.\u0275\u0275listener("deselectObject",function(){return e.\u0275\u0275restoreView(O),e.\u0275\u0275nextContext().deselectEntity()})("selectObject",function(Q){return e.\u0275\u0275restoreView(O),e.\u0275\u0275nextContext().selectEntity(Q)}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementEnd()}if(2&m){const O=e.\u0275\u0275nextContext();e.\u0275\u0275property("searchResults",e.\u0275\u0275pipeBind1(1,9,O.localEntitiesRD$))("sortConfig",null==O.lookupRelationService.searchConfig?null:O.lookupRelationService.searchConfig.sort)("searchConfig",O.lookupRelationService.searchConfig)("selectable",!0)("disableHeader",!0)("hidePaginationDetail",!0)("selectionConfig",e.\u0275\u0275pureFunction1(11,f,O.entityListId))("linkType",O.linkTypes.ExternalLink)("context",O.context)}}function s(m,B){if(1&m){const O=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",19)(1,"h5",8),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",10)(5,"input",20),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(O),e.\u0275\u0275nextContext().selectNewAuthority()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"label",21),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275elementEnd()()()}if(2&m){const O=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,3,O.labelPrefix+"authority")),e.\u0275\u0275advance(3),e.\u0275\u0275property("checked",O.selectedImportType===O.importType.NewAuthority),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(8,5,O.labelPrefix+"authority.new"))}}var c=(()=>{return(m=c||(c={})).None="None",m.LocalEntity="LocalEntity",m.LocalAuthority="LocalAuthority",m.NewEntity="NewEntity",m.NewAuthority="NewAuthority",c;var m})();let p=(()=>{class m{constructor(O,S,Q,ne,ae,ee,oe){this.modal=O,this.lookupRelationService=S,this.modalService=Q,this.selectService=ne,this.itemService=ae,this.notificationsService=ee,this.translateService=oe,this.labelPrefix="submission.sections.describe.relationship-lookup.external-source.import-modal.",this.linkTypes=G.m,this.context=U._.EntitySearchModalWithNameVariants,this.entityListId="external-source-import-entity",this.authorityListId="external-source-import-authority",this.importType=c,this.selectedImportType=c.None,this.importedObject=new e.EventEmitter,this.authorityEnabled=!1}ngOnInit(){this.uri=E.S.first(this.externalSourceEntry.metadata,"dc.identifier.uri");const O=Object.assign(new M.r,{id:"external-entry-import",pageSize:5});this.searchOptions=Object.assign(new o.t({query:this.externalSourceEntry.value,pagination:O})),this.localEntitiesRD$=this.lookupRelationService.getLocalResults(this.relationship,this.searchOptions)}close(){this.modal.close()}import(){switch(this.selectedImportType){case c.LocalEntity:this.importLocalEntity();break;case c.NewEntity:this.importNewEntity();break;case c.LocalAuthority:this.importLocalAuthority();break;case c.NewAuthority:this.importNewAuthority()}this.selectedImportType=c.None,this.deselectAllLists(),this.close()}importLocalEntity(){void 0!==this.selectedEntity&&(this.notificationsService.success(this.translateService.get(this.labelPrefix+this.label+".added.local-entity")),this.importedObject.emit(this.selectedEntity))}importNewEntity(){this.modalRef=this.modalService.open(L.L,{size:"lg"}),this.modalRef.componentInstance.entityType=this.relatedEntityType.label,this.modalRef.componentInstance.selectedEvent.pipe((0,K.w)(O=>this.itemService.importExternalSourceEntry(this.externalSourceEntry,O.collection.id).pipe((0,W.xw)(),(0,W.xe)(),(0,d.q)(1)))).subscribe(O=>{this.lookupRelationService.removeLocalResultsCache();const S=Object.assign(new j.T,{indexableObject:O});this.notificationsService.success(this.translateService.get(this.labelPrefix+this.label+".added.new-entity")),this.modalRef.close(),this.importedObject.emit(S)})}importLocalAuthority(){}importNewAuthority(){}deselectEntity(){this.selectedEntity=void 0,this.selectedImportType===c.LocalEntity&&(this.selectedImportType=c.None)}selectEntity(O){this.selectedEntity=O,this.selectedImportType=c.LocalEntity}selectNewEntity(){this.selectedImportType===c.NewEntity?this.selectedImportType=c.None:(this.selectedImportType=c.NewEntity,this.deselectAllLists())}deselectAuthority(){this.selectedAuthority=void 0,this.selectedImportType===c.LocalAuthority&&(this.selectedImportType=c.None)}selectAuthority(O){this.selectedAuthority=O,this.selectedImportType=c.LocalAuthority}selectNewAuthority(){this.selectedImportType===c.NewAuthority?this.selectedImportType=c.None:(this.selectedImportType=c.NewAuthority,this.deselectAllLists())}deselectAllLists(){this.selectService.deselectAll(this.entityListId),this.selectService.deselectAll(this.authorityListId)}}return m.\u0275fac=function(O){return new(O||m)(e.\u0275\u0275directiveInject(T.Kz),e.\u0275\u0275directiveInject(P.P),e.\u0275\u0275directiveInject(T.FF),e.\u0275\u0275directiveInject($.w),e.\u0275\u0275directiveInject(F.S),e.\u0275\u0275directiveInject(D.T),e.\u0275\u0275directiveInject(Y.sK))},m.\u0275cmp=e.\u0275\u0275defineComponent({type:m,selectors:[["ds-external-source-entry-import-modal"]],decls:40,vars:29,consts:[[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Close button","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["id","external-source-entry-information",1,"mb-3"],[4,"ngIf"],["id","external-source-entry-entities",1,"mb-3"],[1,"font-weight-bold"],[3,"searchResults","sortConfig","searchConfig","selectable","disableHeader","hidePaginationDetail","selectionConfig","linkType","context","deselectObject","selectObject",4,"ngIf"],[1,"ml-4"],["type","radio","name","new-entity","id","new-entity","value","new-entity",1,"form-check-input",3,"checked","click"],["for","new-entity",1,"form-check-label"],["id","external-source-entry-authority",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[3,"href"],[3,"searchResults","sortConfig","searchConfig","selectable","disableHeader","hidePaginationDetail","selectionConfig","linkType","context","deselectObject","selectObject"],["id","external-source-entry-authority"],["type","radio","name","new-authority","id","new-authority","value","new-authority",1,"form-check-input",3,"checked","click"],["for","new-authority",1,"form-check-label"]],template:function(O,S){if(1&O&&(e.\u0275\u0275elementStart(0,"div",0)(1,"h4",1),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",2),e.\u0275\u0275listener("click",function(){return S.modal.dismiss()}),e.\u0275\u0275elementStart(5,"span",3),e.\u0275\u0275text(6,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"div",4)(8,"h4"),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",5)(12,"div")(13,"span"),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(15,Z,3,2,"div",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"h4"),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",7)(20,"h5",8),e.\u0275\u0275text(21),e.\u0275\u0275pipe(22,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(23,R,2,13,"ds-search-results",9),e.\u0275\u0275pipe(24,"async"),e.\u0275\u0275elementStart(25,"div",10)(26,"input",11),e.\u0275\u0275listener("click",function(){return S.selectNewEntity()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"label",12),e.\u0275\u0275text(28),e.\u0275\u0275pipe(29,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(30,s,9,7,"div",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",14)(32,"div")(33,"button",15),e.\u0275\u0275listener("click",function(){return S.close()}),e.\u0275\u0275text(34),e.\u0275\u0275pipe(35,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"div")(37,"button",16),e.\u0275\u0275listener("click",function(){return S.import()}),e.\u0275\u0275text(38),e.\u0275\u0275pipe(39,"translate"),e.\u0275\u0275elementEnd()()()),2&O){let Q;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,13,S.labelPrefix+S.label+".title")),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(10,15,S.labelPrefix+"head."+S.externalSourceEntry.externalSource)),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(S.externalSourceEntry.display),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",S.uri),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,17,S.labelPrefix+"select")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(22,19,S.labelPrefix+"entities")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",(null==(Q=e.\u0275\u0275pipeBind1(24,21,S.localEntitiesRD$))||null==Q.payload||null==Q.payload.page?null:Q.payload.page.length)>0),e.\u0275\u0275advance(3),e.\u0275\u0275property("checked",S.selectedImportType===S.importType.NewEntity),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(29,23,S.labelPrefix+"entities.new")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",S.authorityEnabled),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(35,25,S.labelPrefix+"cancel")),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",S.selectedImportType===S.importType.None),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(39,27,S.labelPrefix+"import"))}},directives:[X.O5,H.SearchResultsComponent],pipes:[Y.X$,X.Ov],styles:[".modal-footer[_ngcontent-%COMP%]{justify-content:space-between}"]}),m})()},64204:(re,J,t)=>{t.d(J,{s:()=>oe});var e=t(5e3),E=t(14292),P=t(36872),G=(t(33609),t(61135)),U=t(4177),$=t(5164),F=t(51117),M=t(24702),W=t(95698),K=t(54004),d=t(18505),j=t(63900),D=t(69718),L=t(68285),T=t(8041),Y=t(45715),X=t(77467),H=t(88002),f=(t(87917),t(69808)),R=t(30236),s=t(17656),c=t(98605),p=t(86956);function m(l,A){if(1&l){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",14),e.\u0275\u0275listener("change",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext(3).selectAll()}),e.\u0275\u0275elementEnd()}2&l&&e.\u0275\u0275property("indeterminate",!1)}function B(l,A){if(1&l){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",14),e.\u0275\u0275listener("change",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext(3).deselectAll()}),e.\u0275\u0275elementEnd()}2&l&&e.\u0275\u0275property("indeterminate",!0)}function O(l,A){if(1&l){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",15),e.\u0275\u0275listener("change",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext(3).deselectAll()}),e.\u0275\u0275elementEnd()}2&l&&e.\u0275\u0275property("checked",!0)}function S(l,A){1&l&&(e.\u0275\u0275elementStart(0,"button",16),e.\u0275\u0275element(1,"span",17),e.\u0275\u0275elementStart(2,"span",12),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()),2&l&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,1,"submission.sections.describe.relationship-lookup.search-tab.loading")))}function Q(l,A){if(1&l){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",18)(1,"button",19),e.\u0275\u0275listener("click",function(){const w=e.\u0275\u0275restoreView(i).ngVar;return e.\u0275\u0275nextContext(3).selectPage(null==w?null:w.page)}),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"button",19),e.\u0275\u0275listener("click",function(){const w=e.\u0275\u0275restoreView(i).ngVar;return e.\u0275\u0275nextContext(3).deselectPage(null==w?null:w.page)}),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"button",19),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext(3).selectAll()}),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"button",19),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext(3).deselectAll()}),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd()()}2&l&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,4,"submission.sections.describe.relationship-lookup.search-tab.select-page")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,6,"submission.sections.describe.relationship-lookup.search-tab.deselect-page")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,8,"submission.sections.describe.relationship-lookup.search-tab.select-all")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,10,"submission.sections.describe.relationship-lookup.search-tab.deselect-all")))}function ne(l,A){if(1&l&&(e.\u0275\u0275elementStart(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),e.\u0275\u0275template(4,m,1,1,"input",7),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275template(6,B,1,1,"input",7),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275template(8,O,1,1,"input",8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",9),e.\u0275\u0275template(10,S,5,3,"button",10),e.\u0275\u0275elementStart(11,"button",11)(12,"span",12),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(15,Q,13,12,"div",13),e.\u0275\u0275pipe(16,"async"),e.\u0275\u0275elementEnd()()()),2&l){const i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",!i.allSelected&&!e.\u0275\u0275pipeBind1(5,7,i.someSelected$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!i.allSelected&&e.\u0275\u0275pipeBind1(7,9,i.someSelected$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.allSelected),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.selectAllLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("hidden",i.selectAllLoading),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(14,11,"submission.sections.describe.relationship-lookup.toggle-dropdown")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngVar",e.\u0275\u0275pipeBind1(16,13,i.resultsRD$))}}const ae=function(l,A){return{repeatable:l,listId:A}};function ee(l,A){if(1&l){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-themed-search",1),e.\u0275\u0275listener("resultFound",function(C){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext().onResultFound(C)})("deselectObject",function(C){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext().deselectObject.emit(C)})("selectObject",function(C){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext().selectObject.emit(C)}),e.\u0275\u0275template(1,ne,17,15,"div",2),e.\u0275\u0275elementEnd()}if(2&l){const i=e.\u0275\u0275nextContext();e.\u0275\u0275property("configuration",i.relationship.searchConfiguration)("context",i.context)("fixedFilterQuery",i.relationship.filter)("inPlaceSearch",!0)("linkType",i.linkTypes.ExternalLink)("searchFormPlaceholder","submission.sections.describe.relationship-lookup.search-tab.search-form.placeholder")("selectable",!0)("selectionConfig",e.\u0275\u0275pureFunction2(11,ae,i.repeatable,i.listId))("showScopeSelector",!1)("showViewModes",!1),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.repeatable)}}let oe=(()=>{class l{constructor(i,_,C,w,v,u){this.searchService=i,this.selectableListService=_,this.searchConfigService=C,this.lookupRelationService=w,this.relationshipService=v,this.paginationService=u,this.deselectObject=new e.EventEmitter,this.selectObject=new e.EventEmitter,this.resultsRD$=new G.X(null),this.initialPagination={page:1,pageSize:5},this.linkTypes=T.m,this.resultFound=new e.EventEmitter}ngOnInit(){this.resetRoute()}resetRoute(){this.paginationService.updateRoute(this.searchConfigService.paginationID,this.initialPagination)}selectPage(i){this.selection$.pipe((0,W.q)(1)).subscribe(_=>{const C=i.filter(w=>_.findIndex(v=>v.equals(w))<0);this.selectObject.emit(...C)}),this.selectableListService.select(this.listId,i)}deselectPage(i){this.allSelected=!1,this.selection$.pipe((0,W.q)(1)).subscribe(_=>{const C=i.filter(w=>_.findIndex(v=>v.equals(w))>=0);this.deselectObject.emit(...C)}),this.selectableListService.deselect(this.listId,i)}selectAll(){this.allSelected=!0,this.selectAllLoading=!0;const i=Object.assign(new U.r,{currentPage:1,pageSize:9999}),_=Object.assign(this.lookupRelationService.searchConfig,{pagination:i});this.searchService.search(_).pipe((0,L.xw)(),(0,K.U)(w=>w.payload.page),(0,d.b)(()=>this.selectAllLoading=!1),(0,j.w)(w=>this.selection$.pipe((0,W.q)(1),(0,d.b)(v=>{const u=w.filter(V=>v.findIndex(a=>a.equals(V))<0);this.selectObject.emit(...u)}),(0,D.h)(w)))).subscribe(w=>{this.selectableListService.select(this.listId,w)})}setSelectedIds(i,_){let C=this.relationshipType.rightwardType;this.isLeft&&(C=this.relationshipType.leftwardType),this.relationshipService.searchByItemsAndType(this.relationshipType.id,this.item.uuid,C,i).pipe((0,L.xw)(),(0,L.xe)()).subscribe(w=>{let v=w.page.map(u=>{let V=[];return V=this.isLeft?u._links.rightItem.href.split("/"):u._links.leftItem.href.split("/"),this.getRelatedItem(V[V.length-1],_)});v=v.filter(u=>!this.getIfInRemove(u.indexableObject.uuid)),v.length>0&&this.selectableListService.select(this.listId,v)})}deselectAll(){this.allSelected=!1,this.selection$.pipe((0,W.q)(1)).subscribe(i=>this.deselectObject.emit(...i)),this.selectableListService.deselectAll(this.listId)}getRelatedItem(i,_){return _.find(C=>C.indexableObject.uuid===i)}getIfInRemove(i){return!!this.toRemove.find(_=>_.indexableObject.uuid===i)}ngOnDestroy(){(0,M.Uh)(this.subscription)&&this.subscription.unsubscribe()}onResultFound(i){if(this.resultsRD$.next(i),this.resultFound.emit(i),this.isEditRelationship){const _=i.page.map(C=>C.indexableObject.uuid);this.setSelectedIds(_,i.page)}}}return l.\u0275fac=function(i){return new(i||l)(e.\u0275\u0275directiveInject($.o),e.\u0275\u0275directiveInject(F.w),e.\u0275\u0275directiveInject(P.U),e.\u0275\u0275directiveInject(Y.P),e.\u0275\u0275directiveInject(H.U),e.\u0275\u0275directiveInject(X.N))},l.\u0275cmp=e.\u0275\u0275defineComponent({type:l,selectors:[["ds-dynamic-lookup-relation-search-tab"]],inputs:{relationship:"relationship",listId:"listId",query:"query",repeatable:"repeatable",selection$:"selection$",context:"context",relationshipType:"relationshipType",item:"item",isLeft:"isLeft",toRemove:"toRemove",isEditRelationship:"isEditRelationship"},outputs:{deselectObject:"deselectObject",selectObject:"selectObject",resultFound:"resultFound"},features:[e.\u0275\u0275ProvidersFeature([{provide:E.SEARCH_CONFIG_SERVICE,useClass:P.U}])],decls:1,vars:1,consts:[[3,"configuration","context","fixedFilterQuery","inPlaceSearch","linkType","searchFormPlaceholder","selectable","selectionConfig","showScopeSelector","showViewModes","resultFound","deselectObject","selectObject",4,"ngIf"],[3,"configuration","context","fixedFilterQuery","inPlaceSearch","linkType","searchFormPlaceholder","selectable","selectionConfig","showScopeSelector","showViewModes","resultFound","deselectObject","selectObject"],["additionalSearchOptions","","class","position-absolute",4,"ngIf"],["additionalSearchOptions","",1,"position-absolute"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],["type","checkbox",3,"indeterminate","change",4,"ngIf"],["type","checkbox",3,"checked","change",4,"ngIf"],["ngbDropdown","",1,"input-group-append"],["type","button","class","btn btn-outline-secondary rounded-right",4,"ngIf"],["id","resultdropdown","type","button","ngbDropdownToggle","","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-outline-secondary","dropdown-toggle-split",3,"hidden"],[1,"sr-only"],["ngbDropdownMenu","","aria-labelledby","resultdropdown",4,"ngVar"],["type","checkbox",3,"indeterminate","change"],["type","checkbox",3,"checked","change"],["type","button",1,"btn","btn-outline-secondary","rounded-right"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["ngbDropdownMenu","","aria-labelledby","resultdropdown"],[1,"dropdown-item",3,"click"]],template:function(i,_){1&i&&e.\u0275\u0275template(0,ee,2,14,"ds-themed-search",0),2&i&&e.\u0275\u0275property("ngIf",_.relationship.searchConfiguration&&_.context)},directives:[f.O5,R.l,s.jt,s.iD,c.g,s.Vi],pipes:[f.Ov,p.X$],styles:[".position-absolute[_ngcontent-%COMP%]{right:var(--bs-spacer)}"]}),l})()},53006:(re,J,t)=>{t.d(J,{O:()=>Z});var e=t(5e3),E=t(14292),P=t(36872),o=t(54004),G=t(63900),U=t(95698),$=t(4177),F=t(24789),M=t(62713),W=t(58577),K=t(77467),d=t(74202),j=t(82656),D=t(69808),L=t(70714),T=t(86956);function Y(f,R){1&f&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&f&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"submission.sections.describe.relationship-lookup.selection-tab.no-selection")," "))}const X=function(f,R){return{repeatable:f,listId:R}};function H(f,R){if(1&f){const s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"h3"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"ds-viewable-collection",4),e.\u0275\u0275listener("deselectObject",function(p){return e.\u0275\u0275restoreView(s),e.\u0275\u0275nextContext().deselectObject.emit(p)})("selectObject",function(p){return e.\u0275\u0275restoreView(s),e.\u0275\u0275nextContext().selectObject.emit(p)}),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275elementEnd()()}if(2&f){const s=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,7,"submission.sections.describe.relationship-lookup.selection-tab.title."+s.relationshipType)),e.\u0275\u0275advance(2),e.\u0275\u0275property("objects",e.\u0275\u0275pipeBind1(5,9,s.selectionRD$))("selectable",!0)("selectionConfig",e.\u0275\u0275pureFunction2(13,X,s.repeatable,s.listId))("config",e.\u0275\u0275pipeBind1(6,11,s.currentPagination$))("hideGear",!0)("context",s.context)}}let Z=(()=>{class f{constructor(s,c,p){this.router=s,this.searchConfigService=c,this.paginationService=p,this.deselectObject=new e.EventEmitter,this.selectObject=new e.EventEmitter,this.initialPagination=Object.assign(new $.r,{id:"spc",pageSize:5})}ngOnInit(){this.resetRoute(),this.selectionRD$=this.searchConfigService.paginatedSearchOptions.pipe((0,o.U)(s=>s.pagination),(0,G.w)(s=>this.selection$.pipe((0,U.q)(1),(0,o.U)(c=>{const p=(s.currentPage-1)*s.pageSize,B=c.slice(p,p+s.pageSize>c.length?c.length:p+s.pageSize),O=new M.S({elementsPerPage:s.pageSize,totalElements:c.length,currentPage:s.currentPage,totalPages:Math.ceil(c.length/s.pageSize)});return(0,W.AC)((0,F.b)(O,B))})))),this.currentPagination$=this.paginationService.getCurrentPagination(this.searchConfigService.paginationID,this.initialPagination)}resetRoute(){this.paginationService.updateRoute(this.searchConfigService.paginationID,{page:1,pageSize:5})}}return f.\u0275fac=function(s){return new(s||f)(e.\u0275\u0275directiveInject(d.F0),e.\u0275\u0275directiveInject(P.U),e.\u0275\u0275directiveInject(K.N))},f.\u0275cmp=e.\u0275\u0275defineComponent({type:f,selectors:[["ds-dynamic-lookup-relation-selection-tab"]],inputs:{relationshipType:"relationshipType",listId:"listId",repeatable:"repeatable",selection$:"selection$",selectionRD$:"selectionRD$",context:"context"},outputs:{deselectObject:"deselectObject",selectObject:"selectObject"},features:[e.\u0275\u0275ProvidersFeature([{provide:E.SEARCH_CONFIG_SERVICE,useClass:P.U}])],decls:11,vars:9,consts:[[1,"row"],[1,"col-4"],[1,"col-8"],[4,"ngIf"],[3,"objects","selectable","selectionConfig","config","hideGear","context","deselectObject","selectObject"]],template:function(s,c){if(1&s&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h3"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(5,"ds-page-size-selector"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",2),e.\u0275\u0275template(7,Y,3,3,"div",3),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275template(9,H,7,16,"div",3),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275elementEnd()()),2&s){let p,m;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,3,"submission.sections.describe.relationship-lookup.selection-tab.settings")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",(null==(p=e.\u0275\u0275pipeBind1(8,5,c.selectionRD$))?null:p.payload.page)<1),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",(null==(m=e.\u0275\u0275pipeBind1(10,7,c.selectionRD$))?null:m.payload.page.length)>=1)}},directives:[j.k,D.O5,L.c],pipes:[T.X$,D.Ov],styles:[""]}),f})()},63311:(re,J,t)=>{t.d(J,{U:()=>Z});var e=t(39300),E=t(54004),P=t(71884),o=t(5e3),G=t(17489),$=t(71022),F=t(24702),M=t(28858);function W(f,R){if(1&f){const s=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",7)(1,"button",8),o.\u0275\u0275listener("click",function(p){o.\u0275\u0275restoreView(s);const m=o.\u0275\u0275nextContext(),B=m.context,O=m.index;return o.\u0275\u0275nextContext().removeItem(p,B,O)}),o.\u0275\u0275pipe(2,"translate"),o.\u0275\u0275pipe(3,"translate"),o.\u0275\u0275elementStart(4,"span"),o.\u0275\u0275element(5,"i",9),o.\u0275\u0275elementEnd()()()}if(2&f){const s=o.\u0275\u0275nextContext(),c=s.$implicit,p=s.context,m=s.index,B=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275propertyInterpolate("title",o.\u0275\u0275pipeBind1(2,3,"form.remove")),o.\u0275\u0275property("disabled",1===c.context.groups.length||B.isItemReadOnly(p,m)),o.\u0275\u0275attribute("aria-label",o.\u0275\u0275pipeBind1(3,5,"form.remove"))}}function K(f,R){if(1&f){const s=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",10)(1,"div",11)(2,"button",12),o.\u0275\u0275listener("click",function(p){o.\u0275\u0275restoreView(s);const m=o.\u0275\u0275nextContext().$implicit;return o.\u0275\u0275nextContext().insertItem(p,m.context,m.context.groups.length)}),o.\u0275\u0275pipe(3,"translate"),o.\u0275\u0275pipe(4,"translate"),o.\u0275\u0275elementStart(5,"span"),o.\u0275\u0275element(6,"i",13),o.\u0275\u0275text(7),o.\u0275\u0275pipe(8,"translate"),o.\u0275\u0275elementEnd()()()()}if(2&f){const s=o.\u0275\u0275nextContext(),c=s.context,p=s.index,m=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275propertyInterpolate("title",o.\u0275\u0275pipeBind1(3,4,"form.add")),o.\u0275\u0275property("disabled",m.isItemReadOnly(c,p)),o.\u0275\u0275attribute("aria-label",o.\u0275\u0275pipeBind1(4,6,"form.add")),o.\u0275\u0275advance(5),o.\u0275\u0275textInterpolate1(" ",o.\u0275\u0275pipeBind1(8,8,"form.add"),"")}}function d(f,R){if(1&f){const s=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",7)(1,"div",14)(2,"button",15),o.\u0275\u0275listener("click",function(p){o.\u0275\u0275restoreView(s);const m=o.\u0275\u0275nextContext(),B=m.context,O=m.index;return o.\u0275\u0275nextContext().removeItem(p,B,O)}),o.\u0275\u0275pipe(3,"translate"),o.\u0275\u0275pipe(4,"translate"),o.\u0275\u0275elementStart(5,"span"),o.\u0275\u0275text(6),o.\u0275\u0275pipe(7,"translate"),o.\u0275\u0275elementEnd()()()()}if(2&f){const s=o.\u0275\u0275nextContext(),c=s.$implicit,p=s.context,m=s.index,B=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275propertyInterpolate("title",o.\u0275\u0275pipeBind1(3,4,"form.discard")),o.\u0275\u0275property("disabled",1===c.context.groups.length||B.isItemReadOnly(p,m)),o.\u0275\u0275attribute("aria-label",o.\u0275\u0275pipeBind1(4,6,"form.discard")),o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate(o.\u0275\u0275pipeBind1(7,8,"form.discard"))}}function j(f,R){if(1&f&&(o.\u0275\u0275template(0,W,6,7,"div",5),o.\u0275\u0275template(1,K,9,10,"div",6),o.\u0275\u0275template(2,d,8,10,"div",5)),2&f){const s=R.$implicit,c=R.index,p=R.context,m=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngIf",!p.notRepeatable&&!m.isVirtual(p,c)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!p.notRepeatable&&c===s.context.groups.length-1),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",p.notRepeatable&&p.showButtons&&s.context.groups.length>1)}}function D(f,R){1&f&&o.\u0275\u0275projection(0,1,["*ngIf","!displaySubmit && !displayCancel"])}function L(f,R){if(1&f){const s=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",20),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(s),o.\u0275\u0275nextContext(2).reset()}),o.\u0275\u0275element(1,"i",21),o.\u0275\u0275text(2),o.\u0275\u0275pipe(3,"translate"),o.\u0275\u0275elementEnd()}if(2&f){const s=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",o.\u0275\u0275pipeBind1(3,1,s.cancelLabel)," ")}}function T(f,R){if(1&f){const s=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",22),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(s),o.\u0275\u0275nextContext(2).onSubmit()}),o.\u0275\u0275pipe(1,"async"),o.\u0275\u0275element(2,"i",23),o.\u0275\u0275text(3),o.\u0275\u0275pipe(4,"translate"),o.\u0275\u0275elementEnd()}if(2&f){const s=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("disabled",!o.\u0275\u0275pipeBind1(1,2,s.isValid())),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate1(" ",o.\u0275\u0275pipeBind1(4,4,s.submitLabel)," ")}}function Y(f,R){if(1&f&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275element(1,"hr"),o.\u0275\u0275elementStart(2,"div",16)(3,"div",17),o.\u0275\u0275projection(4,2),o.\u0275\u0275template(5,L,4,3,"button",18),o.\u0275\u0275projection(6,3),o.\u0275\u0275template(7,T,5,6,"button",19),o.\u0275\u0275projection(8,4),o.\u0275\u0275elementEnd()()()),2&f){const s=o.\u0275\u0275nextContext();o.\u0275\u0275advance(5),o.\u0275\u0275property("ngIf",s.displayCancel),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",s.displaySubmit)}}const X=[[["","additional",""]],"*",[["","before",""]],[["","between",""]],[["","after",""]]],H=["[additional]","*","[before]","[between]","[after]"];let Z=(()=>{class f{constructor(s,c,p){this.formService=s,this.changeDetectorRef=c,this.formBuilderService=p,this.formErrors=[],this.displaySubmit=!0,this.displayCancel=!0,this.emitChange=!0,this.submitLabel="form.submit",this.cancelLabel="form.cancel",this.formLayout=null,this.blur=new o.EventEmitter,this.change=new o.EventEmitter,this.focus=new o.EventEmitter,this.customEvent=new o.EventEmitter,this.addArrayItem=new o.EventEmitter,this.removeArrayItem=new o.EventEmitter,this.cancel=new o.EventEmitter,this.submitForm=new o.EventEmitter,this.subs=[]}getFormGroup(){return this.parentFormModel?this.formGroup.parent:this.formGroup}getFormGroupValue(){return this.getFormGroup().value}getFormGroupValidStatus(){return this.getFormGroup().valid}ngOnInit(){this.formGroup?this.formModel.forEach(s=>{this.parentFormModel&&this.formBuilderService.addFormGroupControl(this.formGroup,this.parentFormModel,s)}):this.formGroup=this.formBuilderService.createFormGroup(this.formModel),this.formService.initForm(this.formId,this.formModel,this.getFormGroupValidStatus()),this.formValid=this.getFormGroupValidStatus(),this.subs.push(this.formGroup.statusChanges.pipe((0,e.h)(()=>this.formValid!==this.getFormGroupValidStatus())).subscribe(()=>{this.formService.setStatusChanged(this.formId,this.getFormGroupValidStatus()),this.formValid=this.getFormGroupValidStatus()})),this.subs.push(this.formService.getForm(this.formId).pipe((0,e.h)(s=>!!s&&((0,F.UE)(s.errors)||(0,F.UE)(this.formErrors))),(0,E.U)(s=>s.errors),(0,P.x)()).subscribe(s=>{const{formGroup:c,formModel:p}=this;s.filter(m=>-1===(0,G.findIndex)(this.formErrors,{fieldId:m.fieldId,fieldIndex:m.fieldIndex})).forEach(m=>{const{fieldId:B}=m,{fieldIndex:O}=m;let S;if(S=this.formBuilderService.getFormControlById(B,this.parentFormModel?c.parent:c,p,O),S){const Q=this.formBuilderService.findById(B,p);this.formService.addErrorToField(S,Q,m.message),this.changeDetectorRef.detectChanges()}}),this.formErrors.filter(m=>-1===(0,G.findIndex)(s,{fieldId:m.fieldId,fieldIndex:m.fieldIndex})).forEach(m=>{const{fieldId:B}=m,{fieldIndex:O}=m;let S;if(S=this.formBuilderService.getFormControlById(B,this.parentFormModel?c.parent:c,p,O),S){const Q=this.formBuilderService.findById(B,p);this.formService.removeErrorFromField(S,Q,m.message)}}),this.formErrors=s,this.changeDetectorRef.detectChanges()}))}ngOnDestroy(){this.subs.filter(s=>(0,F.Uh)(s)).forEach(s=>s.unsubscribe()),this.formService.removeForm(this.formId)}isValid(){return this.formService.isValid(this.formId)}keepSync(){this.subs.push(this.formService.getFormData(this.formId).subscribe(s=>{!Object.is(s,this.formGroup.value)&&this.formGroup&&this.formGroup.setValue(s)}))}onBlur(s){this.blur.emit(s);const c=s.control,p=s.context&&s.context.index?s.context.index:0;c.valid?this.formService.removeError(this.formId,s.model.name,p):this.formService.addControlErrors(c,this.formId,s.model.name,p)}onCustomEvent(s){this.customEvent.emit(s)}onFocus(s){this.formService.setTouched(this.formId,this.formModel,s),this.focus.emit(s)}onChange(s){this.formService.changeForm(this.formId,this.formModel),this.formGroup.markAsPristine(),this.emitChange&&this.change.emit(s),s.control.valid&&this.formService.removeError(this.formId,s.model.id,s.context&&s.context.index?s.context.index:0)}onSubmit(){this.getFormGroupValidStatus()?this.submitForm.emit(this.formService.getFormData(this.formId)):this.formService.validateAllFormFields(this.formGroup)}reset(){this.formGroup.reset(),this.cancel.emit()}isItemReadOnly(s,c){return s.groups[c].group[0].readOnly}removeItem(s,c,p){const m=this.formGroup.get(this.formBuilderService.getPath(c)),B=this.getEvent(s,c,p,"remove");this.formBuilderService.isQualdropGroup(B.model)&&this.removeArrayItem.emit(B),this.formBuilderService.removeFormArrayGroup(p,m,c),this.formService.changeForm(this.formId,this.formModel),this.formBuilderService.isQualdropGroup(B.model)||this.removeArrayItem.emit(B)}insertItem(s,c,p){const m=this.formGroup.get(this.formBuilderService.getPath(c));this.formBuilderService.insertFormArrayGroup(p,m,c),this.addArrayItem.emit(this.getEvent(s,c,p,"add")),this.formService.changeForm(this.formId,this.formModel)}isVirtual(s,c){const m=s.groups[c].group[0].metadataValue;return(0,F.UE)(m)&&m.isVirtual}getEvent(s,c,p,m){const B=c.groups[p],O=B.context;let S=this.formGroup.get(O.id);if((0,F.Ft)(S))for(const ae of Object.keys(this.formGroup.controls))if(S=this.formGroup.controls[ae].get(O.id),(0,F.K0)(S))break;return{$event:s,context:B,control:S.controls[p],group:S,model:B.group[0],type:m}}}return f.\u0275fac=function(s){return new(s||f)(o.\u0275\u0275directiveInject(M.o),o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject($.c))},f.\u0275cmp=o.\u0275\u0275defineComponent({type:f,selectors:[["ds-form"]],inputs:{displaySubmit:"displaySubmit",displayCancel:"displayCancel",emitChange:"emitChange",formId:"formId",submitLabel:"submitLabel",cancelLabel:"cancelLabel",formModel:"formModel",parentFormModel:"parentFormModel",formGroup:"formGroup",formLayout:"formLayout"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",customEvent:"ngbEvent",addArrayItem:"addArrayItem",removeArrayItem:"removeArrayItem",cancel:"cancel",submitForm:"submitForm"},exportAs:["formComponent"],ngContentSelectors:H,decls:7,vars:7,consts:[[1,"container-fluid"],[1,"form-horizontal",3,"formGroup"],[3,"formId","formGroup","formModel","formLayout","change","dfBlur","dfChange","dfFocus","ngbEvent"],["modelType","ARRAY"],[4,"ngIf"],["class","col-xs-2 d-flex flex-column justify-content-sm-start align-items-end",4,"ngIf"],["class","clearfix pl-4 w-100",4,"ngIf"],[1,"col-xs-2","d-flex","flex-column","justify-content-sm-start","align-items-end"],["type","button","role","button",1,"btn","btn-secondary",3,"title","disabled","click"],["aria-hidden","true",1,"fas","fa-trash"],[1,"clearfix","pl-4","w-100"],["role","group",1,"btn-group"],["type","button","role","button",1,"ds-form-add-more","btn","btn-link",3,"title","disabled","click"],[1,"fas","fa-plus"],["role","button",1,"btn-group"],["type","button",1,"btn","btn-secondary",3,"title","disabled","click"],[1,"form-group","row"],[1,"col","text-right","space-children-mr"],["type","reset","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","submit","class","btn btn-primary",3,"disabled","click",4,"ngIf"],["type","reset",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-times"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-save"]],template:function(s,c){1&s&&(o.\u0275\u0275projectionDef(X),o.\u0275\u0275elementStart(0,"div",0)(1,"form",1)(2,"ds-dynamic-form",2),o.\u0275\u0275listener("change",function(m){return m.stopPropagation()})("dfBlur",function(m){return c.onBlur(m)})("dfChange",function(m){return c.onChange(m)})("dfFocus",function(m){return c.onFocus(m)})("ngbEvent",function(m){return c.onCustomEvent(m)}),o.\u0275\u0275template(3,j,3,3,"ng-template",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275projection(4),o.\u0275\u0275template(5,D,1,0,"ng-content",4),o.\u0275\u0275template(6,Y,9,2,"div",4),o.\u0275\u0275elementEnd()()),2&s&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("formGroup",c.formGroup),o.\u0275\u0275advance(1),o.\u0275\u0275property("formId",c.formId)("formGroup",c.formGroup)("formModel",c.formModel)("formLayout",c.formLayout),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",!c.displaySubmit&&!c.displayCancel),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",c.displaySubmit||c.displayCancel))},styles:[".ds-form-input-addon[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important;border-right:0!important}.ds-form-input-btn[_ngcontent-%COMP%]{border:var(--bs-input-btn-border-width) solid var(--bs-input-border-color);border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.ds-form-input-btn[_ngcontent-%COMP%]:focus{box-shadow:none!important}button.ds-form-add-more[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none!important}.ds-form-input-value[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-bottom-left-radius:0!important}.fa-spin[_ngcontent-%COMP%]{pointer-events:none}.left-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{left:0}.right-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{right:0}.left-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:calc(var(--bs-spacer) * 2.25)}.right-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:calc(var(--bs-spacer) * 2.25)}"]}),f})()},91320:(re,J,t)=>{t.d(J,{L:()=>M});var e=t(5e3),E=t(17656),P=t(69808),o=t(48106),G=t(18285),U=t(86956);function $(W,K){1&W&&e.\u0275\u0275element(0,"ds-themed-loading")}const F=function(W){return{"d-none":W}};let M=(()=>{class W{constructor(d){this.activeModal=d,this.selectedEvent=new e.EventEmitter,this.loading=!0}selectObject(d){this.selectedEvent.emit(d)}closeCollectionModal(){this.activeModal.dismiss(!1)}theOnlySelectable(d){this.selectedEvent.emit(d)}searchComplete(){this.loading=!1}isLoading(){return!!this.loading}}return W.\u0275fac=function(d){return new(d||W)(e.\u0275\u0275directiveInject(E.Kz))},W.\u0275cmp=e.\u0275\u0275defineComponent({type:W,selectors:[["ds-submission-import-external-collection"]],outputs:{selectedEvent:"selectedEvent"},decls:10,vars:8,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngIf"],[3,"ngClass","entityType","selectionChange","searchComplete","theOnlySelectable"]],template:function(d,j){1&d&&(e.\u0275\u0275elementStart(0,"div")(1,"div",0),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementStart(4,"button",1),e.\u0275\u0275listener("click",function(){return j.closeCollectionModal()}),e.\u0275\u0275elementStart(5,"span",2),e.\u0275\u0275text(6,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"div",3),e.\u0275\u0275template(8,$,1,0,"ds-themed-loading",4),e.\u0275\u0275elementStart(9,"ds-collection-dropdown",5),e.\u0275\u0275listener("selectionChange",function(L){return j.selectObject(L)})("searchComplete",function(){return j.searchComplete()})("theOnlySelectable",function(L){return j.theOnlySelectable(L)}),e.\u0275\u0275elementEnd()()()),2&d&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(3,4,"dso-selector.select.collection.head")," "),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",j.isLoading()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(6,F,j.isLoading()))("entityType",j.entityType))},directives:[P.O5,o.Z,G.H,P.mk],pipes:[U.X$],styles:[".close[_ngcontent-%COMP%]:focus{outline:none!important}"]}),W})()},65806:(re,J,t)=>{t.d(J,{zj:()=>he,qz:()=>l,Gy:()=>A,P2:()=>i,Zu:()=>C,TE:()=>w,QB:()=>u,Sb:()=>a,XX:()=>y});var e=t(5e3),E=t(17656),P=t(8108),o=t(93075),G=t(69808),U=t(91470);const $=function(h,b){return[h,b]};function F(h,b){if(1&h){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"label",3)(1,"input",4),e.\u0275\u0275listener("blur",function(x){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().onBlur(x)})("change",function(x){const se=e.\u0275\u0275restoreView(n).$implicit;return e.\u0275\u0275nextContext().onCheckboxChange(x,se)})("focus",function(x){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().onFocus(x)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(2,"span",5),e.\u0275\u0275elementEnd()}if(2&h){const n=b.$implicit,r=e.\u0275\u0275nextContext();e.\u0275\u0275property("hidden",n.hidden)("ngClass",r.getClass("element","control",n)),e.\u0275\u0275advance(1),e.\u0275\u0275property("checked",n.checked)("formControlName",n.id)("id",r.getCheckboxId(n))("name",n.name)("required",n.required)("tabindex",n.tabIndex)("value",n.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",r.getClass("element","label",n))("innerHTML",n.label,e.\u0275\u0275sanitizeHtml)}}function K(h,b){if(1&h&&(e.\u0275\u0275elementStart(0,"div",6),e.\u0275\u0275element(1,"span",7),e.\u0275\u0275elementEnd()),2&h){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("innerHTML",n.model.prefix,e.\u0275\u0275sanitizeHtml)}}function d(h,b){if(1&h){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",8),e.\u0275\u0275listener("blur",function(x){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().onBlur(x)})("change",function(x){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().onChange(x)})("focus",function(x){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().onFocus(x)}),e.\u0275\u0275elementEnd()}if(2&h){const n=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("is-invalid",n.showErrorMessages),e.\u0275\u0275property("autocomplete",n.model.autoComplete)("autofocus",n.model.autoFocus)("dynamicList",n.model.listId)("formControlName",n.model.id)("id",n.id)("maxlength",n.model.maxLength)("minlength",n.model.minLength)("name",n.model.name)("ngClass",n.getClass("element","control"))("pattern",n.model.pattern)("placeholder",n.model.placeholder)("readonly",n.model.readOnly)("required",n.model.required)("spellcheck",n.model.spellCheck)("tabindex",n.model.tabIndex)("type",n.model.inputType),e.\u0275\u0275attribute("accept",n.model.accept)("max",n.model.max)("min",n.model.min)("multiple",n.model.multiple)("step",n.model.step)}}function j(h,b){if(1&h){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",9),e.\u0275\u0275listener("blur",function(x){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().onBlur(x)})("change",function(x){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().onChange(x)})("focus",function(x){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().onFocus(x)}),e.\u0275\u0275elementEnd()}if(2&h){const n=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("is-invalid",n.showErrorMessages),e.\u0275\u0275property("autocomplete",n.model.autoComplete)("autofocus",n.model.autoFocus)("dynamicList",n.model.listId)("formControlName",n.model.id)("id",n.id)("maxlength",n.model.maxLength)("minlength",n.model.minLength)("name",n.model.name)("ngClass",n.getClass("element","control"))("pattern",n.model.pattern)("placeholder",n.model.placeholder)("readonly",n.model.readOnly)("required",n.model.required)("spellcheck",n.model.spellCheck)("tabindex",n.model.tabIndex)("mask",n.model.mask)("specialCharacters",null==n.model.maskConfig?null:n.model.maskConfig.specialCharacters)("patterns",null==n.model.maskConfig?null:n.model.maskConfig.patterns)("prefix",null==n.model.maskConfig?null:n.model.maskConfig.prefix)("suffix",null==n.model.maskConfig?null:n.model.maskConfig.suffix)("thousandSeparator",null==n.model.maskConfig?null:n.model.maskConfig.thousandSeparator)("decimalMarker",null==n.model.maskConfig?null:n.model.maskConfig.decimalMarker)("dropSpecialCharacters",null==n.model.maskConfig?null:n.model.maskConfig.dropSpecialCharacters)("hiddenInput",null==n.model.maskConfig?null:n.model.maskConfig.hiddenInput)("showMaskTyped",null==n.model.maskConfig?null:n.model.maskConfig.showMaskTyped)("placeHolderCharacter",null==n.model.maskConfig?null:n.model.maskConfig.placeHolderCharacter)("shownMaskExpression",null==n.model.maskConfig?null:n.model.maskConfig.shownMaskExpression)("showTemplate",null==n.model.maskConfig?null:n.model.maskConfig.showTemplate)("clearIfNotMatch",n.model.maskConfig.clearIfNotMatch)("validation",n.model.maskConfig.validation)("separatorLimit",n.model.maskConfig.separatorLimit)("allowNegativeNumbers",n.model.maskConfig.allowNegativeNumbers)("leadZeroDateTime",n.model.maskConfig.leadZeroDateTime)("type",n.model.inputType),e.\u0275\u0275attribute("accept",n.model.accept)("max",n.model.max)("min",n.model.min)("multiple",n.model.multiple)("step",n.model.step)}}function D(h,b){if(1&h&&(e.\u0275\u0275elementStart(0,"div",10),e.\u0275\u0275element(1,"span",7),e.\u0275\u0275elementEnd()),2&h){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("innerHTML",n.model.suffix,e.\u0275\u0275sanitizeHtml)}}function L(h,b){1&h&&e.\u0275\u0275element(0,"option",13),2&h&&e.\u0275\u0275property("value",b.$implicit)}function T(h,b){if(1&h&&(e.\u0275\u0275elementStart(0,"datalist",11),e.\u0275\u0275template(1,L,1,1,"option",12),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()),2&h){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("id",n.model.listId),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(2,2,n.model.list$))}}function Y(h,b){if(1&h&&e.\u0275\u0275element(0,"legend",4),2&h){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("innerHTML",n.model.legend,e.\u0275\u0275sanitizeHtml)}}function X(h,b){if(1&h){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"label",5)(1,"input",6),e.\u0275\u0275listener("blur",function(x){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().onBlur(x)})("focus",function(x){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().onFocus(x)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(2,"span",4),e.\u0275\u0275elementEnd()}if(2&h){const n=b.$implicit,r=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(5,$,r.getClass("element","option"),r.getClass("grid","option"))),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",n.disabled)("name",r.model.name)("value",n.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("innerHTML",n.label,e.\u0275\u0275sanitizeHtml)}}function H(h,b){if(1&h&&(e.\u0275\u0275elementStart(0,"option",3),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&h){const n=b.$implicit;e.\u0275\u0275property("disabled",n.disabled)("ngValue",n.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.label)}}let l=(()=>{class h extends P.LvC{constructor(n,r,x){super(n,r),this.layoutService=n,this.validationService=r,this.config=x,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter}}return h.\u0275fac=function(n){return new(n||h)(e.\u0275\u0275directiveInject(P.vnf),e.\u0275\u0275directiveInject(P.fhz),e.\u0275\u0275directiveInject(E.M4))},h.\u0275cmp=e.\u0275\u0275defineComponent({type:h,selectors:[["dynamic-ng-bootstrap-calendar"]],viewQuery:function(n,r){if(1&n&&e.\u0275\u0275viewQuery(E.VL,7),2&n){let x;e.\u0275\u0275queryRefresh(x=e.\u0275\u0275loadQuery())&&(r.ngbCalendar=x.first)}},inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:13,consts:[[3,"formGroup"],[3,"displayMonths","firstDayOfWeek","formControlName","id","maxDate","minDate","navigation","ngClass","outsideDays","showWeekNumbers","weekdays","startDate","select"]],template:function(n,r){1&n&&(e.\u0275\u0275elementContainerStart(0,0),e.\u0275\u0275elementStart(1,"ngb-datepicker",1),e.\u0275\u0275listener("select",function(k){return r.onChange(k)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n&&(e.\u0275\u0275property("formGroup",r.group),e.\u0275\u0275advance(1),e.\u0275\u0275property("displayMonths",r.model.getAdditional("displayMonths",r.config.displayMonths))("firstDayOfWeek",r.model.getAdditional("firstDayOfWeek",r.config.firstDayOfWeek))("formControlName",r.model.id)("id",r.id)("maxDate",r.model.max)("minDate",r.model.min)("navigation",r.model.getAdditional("navigation",r.config.navigation))("ngClass",r.getClass("element","control"))("outsideDays",r.model.getAdditional("outsideDays",r.config.outsideDays))("showWeekNumbers",r.model.getAdditional("showWeekNumbers",r.config.showWeekNumbers))("weekdays",r.model.getAdditional("showWeekdays",r.config.weekdays))("startDate",r.model.focusedDate))},directives:[E.VL,o.JL,o.sg,o.JJ,o.u,G.mk],encapsulation:2,changeDetection:0}),h})(),A=(()=>{class h extends P.LvC{constructor(n,r){super(n,r),this.layoutService=n,this.validationService=r,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter}}return h.\u0275fac=function(n){return new(n||h)(e.\u0275\u0275directiveInject(P.vnf),e.\u0275\u0275directiveInject(P.fhz))},h.\u0275cmp=e.\u0275\u0275defineComponent({type:h,selectors:[["dynamic-ng-bootstrap-checkbox"]],inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:19,consts:[[1,"form-check",3,"formGroup"],[1,"form-check-label"],["type","checkbox",1,"form-check-input",3,"checked","formControlName","id","indeterminate","name","ngClass","required","tabindex","value","blur","change","focus"],[3,"innerHTML","ngClass"]],template:function(n,r){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"label",1)(2,"input",2),e.\u0275\u0275listener("blur",function(k){return r.onBlur(k)})("change",function(k){return r.onChange(k)})("focus",function(k){return r.onFocus(k)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"span",3),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275classProp("disabled",r.model.disabled),e.\u0275\u0275property("formGroup",r.group),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("is-invalid",r.showErrorMessages),e.\u0275\u0275property("checked",r.model.checked)("formControlName",r.model.id)("id",r.id)("indeterminate",r.model.indeterminate)("name",r.model.name)("ngClass",r.getClass("element","control"))("required",r.model.required)("tabindex",r.model.tabIndex)("value",r.model.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("innerHTML",r.model.label,e.\u0275\u0275sanitizeHtml)("ngClass",e.\u0275\u0275pureFunction2(16,$,r.getClass("element","label"),r.getClass("grid","label"))))},directives:[o.JL,o.sg,o.Wl,o.Zs,o.JJ,o.u,G.mk],encapsulation:2}),h})(),i=(()=>{class h extends P.LvC{constructor(n,r){super(n,r),this.layoutService=n,this.validationService=r,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter}getCheckboxId(n){return this.layoutService.getElementId(n)}onCheckboxChange(n,r){this.onChange(n),r.value=n.target.checked}}return h.\u0275fac=function(n){return new(n||h)(e.\u0275\u0275directiveInject(P.vnf),e.\u0275\u0275directiveInject(P.fhz))},h.\u0275cmp=e.\u0275\u0275defineComponent({type:h,selectors:[["dynamic-ng-bootstrap-checkbox-group"]],inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:5,consts:[[3,"formGroup"],["data-toggle","buttons",1,"btn-group","btn-group-toggle",3,"formGroupName","id","ngClass"],["ngbButtonLabel","",3,"hidden","ngClass",4,"ngFor","ngForOf"],["ngbButtonLabel","",3,"hidden","ngClass"],["type","checkbox","ngbButton","",3,"checked","formControlName","id","name","required","tabindex","value","blur","change","focus"],[3,"ngClass","innerHTML"]],template:function(n,r){1&n&&(e.\u0275\u0275elementContainerStart(0,0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275template(2,F,3,11,"label",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n&&(e.\u0275\u0275property("formGroup",r.group),e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroupName",r.model.id)("id",r.id)("ngClass",r.getClass("element","control")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",r.model.group))},directives:[o.JL,o.sg,o.x0,G.mk,G.sg,E.mL,o.Wl,o.Zs,E.W9,o.JJ,o.u],encapsulation:2,changeDetection:0}),h})(),C=(()=>{class h extends P.LvC{constructor(n,r){super(n,r),this.layoutService=n,this.validationService=r,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter}}return h.\u0275fac=function(n){return new(n||h)(e.\u0275\u0275directiveInject(P.vnf),e.\u0275\u0275directiveInject(P.fhz))},h.\u0275cmp=e.\u0275\u0275defineComponent({type:h,selectors:[["dynamic-ng-bootstrap-input"]],inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:7,vars:8,consts:[[3,"formGroup"],["class","input-group-prepend",4,"ngIf"],["class","form-control-file",3,"autocomplete","autofocus","is-invalid","dynamicList","formControlName","id","maxlength","minlength","name","ngClass","pattern","placeholder","readonly","required","spellcheck","tabindex","type","blur","change","focus",4,"ngIf","ngIfElse"],["maskedInput",""],["class","input-group-append",4,"ngIf"],[3,"id",4,"ngIf"],[1,"input-group-prepend"],[1,"input-group-text",3,"innerHTML"],[1,"form-control-file",3,"autocomplete","autofocus","dynamicList","formControlName","id","maxlength","minlength","name","ngClass","pattern","placeholder","readonly","required","spellcheck","tabindex","type","blur","change","focus"],[1,"form-control",3,"autocomplete","autofocus","dynamicList","formControlName","id","maxlength","minlength","name","ngClass","pattern","placeholder","readonly","required","spellcheck","tabindex","mask","specialCharacters","patterns","prefix","suffix","thousandSeparator","decimalMarker","dropSpecialCharacters","hiddenInput","showMaskTyped","placeHolderCharacter","shownMaskExpression","showTemplate","clearIfNotMatch","validation","separatorLimit","allowNegativeNumbers","leadZeroDateTime","type","blur","change","focus"],[1,"input-group-append"],[3,"id"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,K,2,1,"div",1),e.\u0275\u0275template(2,d,1,23,"input",2),e.\u0275\u0275template(3,j,1,41,"ng-template",null,3,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275template(5,D,2,1,"div",4),e.\u0275\u0275template(6,T,3,4,"datalist",5),e.\u0275\u0275elementEnd()),2&n){const x=e.\u0275\u0275reference(4);e.\u0275\u0275classProp("input-group",r.model.prefix||r.model.suffix),e.\u0275\u0275property("formGroup",r.group),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.model.prefix),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","file"===r.model.inputType)("ngIfElse",x),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",r.model.suffix),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.model.hasList)}},directives:[o.JL,o.sg,G.O5,o.Fj,P.fQg,o.JJ,o.u,o.nD,o.wO,G.mk,o.c5,o.Q7,U.hx,G.sg,o.YN,o.Kr],pipes:[G.Ov],encapsulation:2}),h})(),w=(()=>{class h extends P.LvC{constructor(n,r){super(n,r),this.layoutService=n,this.validationService=r,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter}}return h.\u0275fac=function(n){return new(n||h)(e.\u0275\u0275directiveInject(P.vnf),e.\u0275\u0275directiveInject(P.fhz))},h.\u0275cmp=e.\u0275\u0275defineComponent({type:h,selectors:[["dynamic-ng-bootstrap-radio-group"]],inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:5,vars:9,consts:[[3,"formGroup"],["ngbRadioGroup","","role","radiogroup",1,"btn-group","btn-group-toggle",3,"formControlName","id","ngClass","tabindex","change"],[3,"innerHTML",4,"ngIf"],["ngbButtonLabel","",3,"ngClass",4,"ngFor","ngForOf"],[3,"innerHTML"],["ngbButtonLabel","",3,"ngClass"],["type","radio","ngbButton","",3,"disabled","name","value","blur","focus"]],template:function(n,r){1&n&&(e.\u0275\u0275elementContainerStart(0,0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275listener("change",function(k){return r.onChange(k)}),e.\u0275\u0275template(2,Y,1,1,"legend",2),e.\u0275\u0275template(3,X,3,8,"label",3),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n&&(e.\u0275\u0275property("formGroup",r.group),e.\u0275\u0275advance(1),e.\u0275\u0275property("formControlName",r.model.id)("id",r.id)("ngClass",r.getClass("element","control"))("tabindex",r.model.tabIndex),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.model.legend),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(4,7,r.model.options$)))},directives:[o.JL,o.sg,E.py,o.JJ,o.u,G.mk,G.O5,G.sg,E.mL,E.aB],pipes:[G.Ov],encapsulation:2,changeDetection:0}),h})(),u=(()=>{class h extends P.LvC{constructor(n,r){super(n,r),this.layoutService=n,this.validationService=r,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter}}return h.\u0275fac=function(n){return new(n||h)(e.\u0275\u0275directiveInject(P.vnf),e.\u0275\u0275directiveInject(P.fhz))},h.\u0275cmp=e.\u0275\u0275defineComponent({type:h,selectors:[["dynamic-ng-bootstrap-select"]],inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:4,vars:13,consts:[[3,"formGroup"],[1,"form-control",3,"compareWith","formControlName","id","name","ngClass","required","tabindex","blur","change","focus"],[3,"disabled","ngValue",4,"ngFor","ngForOf"],[3,"disabled","ngValue"]],template:function(n,r){1&n&&(e.\u0275\u0275elementContainerStart(0,0),e.\u0275\u0275elementStart(1,"select",1),e.\u0275\u0275listener("blur",function(k){return r.onBlur(k)})("change",function(k){return r.onChange(k)})("focus",function(k){return r.onFocus(k)}),e.\u0275\u0275template(2,H,2,3,"option",2),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n&&(e.\u0275\u0275property("formGroup",r.group),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("is-invalid",r.showErrorMessages),e.\u0275\u0275property("compareWith",r.model.compareWithFn)("formControlName",r.model.id)("id",r.id)("name",r.model.name)("ngClass",r.getClass("element","control"))("required",r.model.required)("tabindex",r.model.tabIndex),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(3,11,r.model.options$)))},directives:[o.JL,o.sg,o.EJ,o.JJ,o.u,G.mk,o.Q7,G.sg,o.YN,o.Kr],pipes:[G.Ov],encapsulation:2}),h})(),a=(()=>{class h extends P.LvC{constructor(n,r){super(n,r),this.layoutService=n,this.validationService=r,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter}}return h.\u0275fac=function(n){return new(n||h)(e.\u0275\u0275directiveInject(P.vnf),e.\u0275\u0275directiveInject(P.fhz))},h.\u0275cmp=e.\u0275\u0275defineComponent({type:h,selectors:[["dynamic-ng-bootstrap-textarea"]],inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:17,consts:[[3,"formGroup"],[1,"form-control",3,"cols","formControlName","id","maxlength","minlength","name","ngClass","placeholder","readonly","required","rows","spellcheck","tabindex","wrap","blur","change","focus"]],template:function(n,r){1&n&&(e.\u0275\u0275elementContainerStart(0,0),e.\u0275\u0275elementStart(1,"textarea",1),e.\u0275\u0275listener("blur",function(k){return r.onBlur(k)})("change",function(k){return r.onChange(k)})("focus",function(k){return r.onFocus(k)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n&&(e.\u0275\u0275property("formGroup",r.group),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("is-invalid",r.showErrorMessages),e.\u0275\u0275property("cols",r.model.cols)("formControlName",r.model.id)("id",r.id)("maxlength",r.model.maxLength)("minlength",r.model.minLength)("name",r.model.name)("ngClass",r.getClass("element","control"))("placeholder",r.model.placeholder)("readonly",r.model.readOnly)("required",r.model.required)("rows",r.model.rows)("spellcheck",r.model.spellCheck)("tabindex",r.model.tabIndex)("wrap",r.model.wrap))},directives:[o.JL,o.sg,o.Fj,o.JJ,o.u,o.nD,o.wO,G.mk,o.Q7],encapsulation:2}),h})(),y=(()=>{class h extends P.LvC{constructor(n,r,x){super(n,r),this.layoutService=n,this.validationService=r,this.config=x,this.blur=new e.EventEmitter,this.change=new e.EventEmitter,this.focus=new e.EventEmitter}}return h.\u0275fac=function(n){return new(n||h)(e.\u0275\u0275directiveInject(P.vnf),e.\u0275\u0275directiveInject(P.fhz),e.\u0275\u0275directiveInject(E.Kk))},h.\u0275cmp=e.\u0275\u0275defineComponent({type:h,selectors:[["dynamic-ng-bootstrap-timepicker"]],viewQuery:function(n,r){if(1&n&&e.\u0275\u0275viewQuery(E.Pm,7),2&n){let x;e.\u0275\u0275queryRefresh(x=e.\u0275\u0275loadQuery())&&(r.ngbTimePicker=x.first)}},inputs:{formLayout:"formLayout",group:"group",layout:"layout",model:"model"},outputs:{blur:"blur",change:"change",focus:"focus"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:2,vars:11,consts:[[3,"formGroup"],[3,"id","formControlName","hourStep","meridian","minuteStep","ngClass","seconds","secondStep","size","spinners"]],template:function(n,r){1&n&&(e.\u0275\u0275elementContainerStart(0,0),e.\u0275\u0275element(1,"ngb-timepicker",1),e.\u0275\u0275elementContainerEnd()),2&n&&(e.\u0275\u0275property("formGroup",r.group),e.\u0275\u0275advance(1),e.\u0275\u0275property("id",r.id)("formControlName",r.model.id)("hourStep",r.model.getAdditional("hourStep",r.config.hourStep))("meridian",r.model.meridian)("minuteStep",r.model.getAdditional("minuteStep",r.config.minuteStep))("ngClass",r.getClass("element","control"))("seconds",r.model.showSeconds)("secondStep",r.model.getAdditional("secondStep",r.config.secondStep))("size",r.model.getAdditional("size",r.config.size))("spinners",r.model.getAdditional("spinners",r.config.spinners)))},directives:[E.Pm,o.JL,o.sg,o.JJ,o.u,G.mk],encapsulation:2,changeDetection:0}),h})(),he=(()=>{class h{}return h.\u0275fac=function(n){return new(n||h)},h.\u0275mod=e.\u0275\u0275defineNgModule({type:h}),h.\u0275inj=e.\u0275\u0275defineInjector({imports:[[G.ez,o.UX,E.xZ,E.M,E.mO,E.UL,U.yI,P.H9g],P.H9g]}),h})()}}]);