"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[7167],{37167:(ce,r,i)=>{i.r(r),i.d(r,{SiteStatisticsPageComponent:()=>ie});var v=i(12467),S=i(11262),f=i(7379),x=i(21160),h=i(28709),l=i(10210),e=i(70074),p=i(37895),o=i(78819);let u=(()=>{class n{constructor(t,s){this.http=t,this.httpBackend=s}callWithoutInterceptor7daysago(){return this.httpBackend.handle(new o.aW("GET","https://coe.repository-uecal.com/stats/ga1/7daysago"))}callWithoutInterceptor28daysago(){return this.httpBackend.handle(new o.aW("GET","https://coe.repository-uecal.com/stats/ga1/28daysago"))}callWithoutInterceptorlastmonth(){return this.httpBackend.handle(new o.aW("GET","https://coe.repository-uecal.com/stats/ga1/lastmonth"))}callWithoutInterceptorRealTime(){return this.httpBackend.handle(new o.aW("GET","https://coe.repository-uecal.com/stats/realtime/activeusers"))}callWithoutInterceptorCity(){return this.httpBackend.handle(new o.aW("GET","https://coe.repository-uecal.com/stats/ga1/city-pie"))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(o.eN),e.\u0275\u0275inject(o.jN))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var C=i(53043),I=i(41633),P=i(76924),y=i(11602),c=i(35053),w=i(955),b=i(86553);const E=function(n){return{scope:n}};function V(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"h2",7),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().ngVar,s=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("id",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,2,"statistics.header",e.\u0275\u0275pureFunction1(5,E,s.getName(t)))," ")}}function A(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,V,3,7,"h2",6),e.\u0275\u0275elementContainerEnd()),2&n){const t=a.ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t)}}function M(n,a){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"ds-themed-loading"),e.\u0275\u0275elementContainerEnd())}function L(n,a){if(1&n&&e.\u0275\u0275element(0,"ds-statistics-table",10),2&n){const t=a.$implicit;e.\u0275\u0275classMapInterpolate1("m-2 ",t.id,""),e.\u0275\u0275property("report",t)}}function T(n,a){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"statistics.page.no-data")," "))}function R(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,L,1,4,"ds-statistics-table",9),e.\u0275\u0275template(2,T,3,3,"div",8),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().ngVar,s=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(3,2,s.hasData$))}}function j(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,M,2,0,"ng-container",8),e.\u0275\u0275template(2,R,4,4,"ng-container",8),e.\u0275\u0275elementContainerEnd()),2&n){const t=a.ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t)}}function O(n,a){1&n&&e.\u0275\u0275element(0,"span",19)}function W(n,a){1&n&&e.\u0275\u0275element(0,"span",20)}function k(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",11)(1,"div",12)(2,"button",13)(3,"div",14),e.\u0275\u0275text(4," Site Dashboard "),e.\u0275\u0275elementStart(5,"div",15)(6,"div",16),e.\u0275\u0275template(7,O,1,0,"span",17),e.\u0275\u0275template(8,W,1,0,"span",18),e.\u0275\u0275elementEnd()()()()()()),2&n){const t=a.opened;e.\u0275\u0275advance(1),e.\u0275\u0275classProp("collapsed",!t),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",!t),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t)}}function B(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"strong",34),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.ActiveViewers)}}function F(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"small",35),e.\u0275\u0275element(1,"i",36),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.getPercentage(t.ActiveViewersLM,t.ActiveViewers),"%")}}function G(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"small",37),e.\u0275\u0275element(1,"i",38),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.getPercentage(t.ActiveViewersLM,t.ActiveViewers),"%")}}function $(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"h5"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.ActiveViewersLM)}}function D(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",25)(1,"div",26)(2,"div",27)(3,"p",28)(4,"strong"),e.\u0275\u0275text(5,"ACTIVE USERS"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"h5",29),e.\u0275\u0275template(7,B,2,1,"strong",30),e.\u0275\u0275template(8,F,3,1,"small",31),e.\u0275\u0275template(9,G,3,1,"small",32),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"hr"),e.\u0275\u0275elementStart(11,"p",33),e.\u0275\u0275text(12," Last Month "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,$,2,1,"h5",8),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.ActiveViewers&&t.ActiveViewersLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.ActiveViewers<t.ActiveViewersLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.ActiveViewers>=t.ActiveViewersLM),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.ActiveViewersLM)}}function N(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"strong",34),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.ScreenPageViews)}}function U(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"small",35),e.\u0275\u0275element(1,"i",36),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.getPercentage(t.ScreenPageViewsLM,t.ScreenPageViews),"%")}}function X(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"small",37),e.\u0275\u0275element(1,"i",38),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.getPercentage(t.ScreenPageViewsLM,t.ScreenPageViews),"%")}}function Y(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"h5"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.ScreenPageViewsLM)}}function z(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",25)(1,"div",26)(2,"div",27)(3,"p",28)(4,"strong"),e.\u0275\u0275text(5,"SCREEN PAGE VIEWS"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"h5",29),e.\u0275\u0275template(7,N,2,1,"strong",30),e.\u0275\u0275template(8,U,3,1,"small",31),e.\u0275\u0275template(9,X,3,1,"small",32),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"hr"),e.\u0275\u0275elementStart(11,"p",33),e.\u0275\u0275text(12," Last Month "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,Y,2,1,"h5",8),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.ScreenPageViews&&t.ScreenPageViewsLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.ScreenPageViews<t.ScreenPageViewsLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.ScreenPageViews>=t.ScreenPageViewsLM),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.ScreenPageViewsLM)}}function H(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"strong",34),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.Sessions)}}function K(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"small",35),e.\u0275\u0275element(1,"i",36),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.getPercentage(t.SessionsLM,t.Sessions),"%")}}function Z(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"small",37),e.\u0275\u0275element(1,"i",38),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.getPercentage(t.SessionsLM,t.Sessions),"%")}}function J(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"h5"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(4);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.SessionsLM)}}function Q(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",39)(1,"div",26)(2,"div",27)(3,"p",28)(4,"strong"),e.\u0275\u0275text(5,"SESSIONS"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"h5",29),e.\u0275\u0275template(7,H,2,1,"strong",30),e.\u0275\u0275template(8,K,3,1,"small",31),e.\u0275\u0275template(9,Z,3,1,"small",32),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"hr"),e.\u0275\u0275elementStart(11,"p",33),e.\u0275\u0275text(12," Last Month "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,J,2,1,"h5",8),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.Sessions&&t.SessionsLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.Sessions<t.SessionsLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.Sessions>=t.SessionsLM),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.SessionsLM)}}function q(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",22),e.\u0275\u0275template(1,D,14,4,"div",23),e.\u0275\u0275template(2,z,14,4,"div",23),e.\u0275\u0275template(3,Q,14,4,"div",24),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.ActiveViewers&&t.ActiveViewersLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.ScreenPageViews&&t.ScreenPageViewsLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.Sessions&&t.SessionsLM)}}function ee(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tbody")(2,"tr")(3,"td")(4,"p",45),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"td")(7,"p",45),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"td")(10,"p",45),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=a.$implicit;e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.dimensionValues[0].value),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.dimensionValues[1].value),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.metricValues[0].value)}}function te(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"table",42)(1,"thead",43)(2,"tr")(3,"th"),e.\u0275\u0275text(4,"Country"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"th"),e.\u0275\u0275text(6,"City"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"th"),e.\u0275\u0275text(8,"Active Users"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,ee,12,3,"ng-container",44),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(9),e.\u0275\u0275property("ngForOf",t.RealtimeRes)}}function ne(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"div",40)(2,"p",28)(3,"strong"),e.\u0275\u0275text(4,"Realtime Statistics"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(5,te,10,1,"table",41),e.\u0275\u0275element(6,"ds-pie-page"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",0!=t.RealtimeRes.length)}}function ae(n,a){if(1&n&&(e.\u0275\u0275template(0,q,4,3,"div",21),e.\u0275\u0275template(1,ne,7,1,"div",8)),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngIf",t.ActiveViewers&&t.ActiveViewersLM&&t.ScreenPageViews&&t.ScreenPageViewsLM&&t.Sessions&&t.SessionsLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!=t.RealtimeRes.length)}}let ie=(()=>{class n extends v.f{constructor(t,s,m,d,g,se,_,oe,le){super(t,m,d,g,_),this.route=t,this.gaservice=s,this.router=m,this.usageReportService=d,this.nameService=g,this.siteService=se,this.authService=_,this.http=oe,this.view=[700,400],this.showXAxis=!0,this.showYAxis=!0,this.gradient=!1,this.showLegend=!0,this.showXAxisLabel=!0,this.xAxisLabel="Country",this.showYAxisLabel=!0,this.yAxisLabel="Population",this.colorScheme={domain:["#5AA454","#A10A28","#C7B42C","#AAAAAA"]},this.ActiveViewers=void 0,this.ScreenPageViews=void 0,this.Sessions=void 0,this.ActiveViewersLM=void 0,this.ScreenPageViewsLM=void 0,this.SessionsLM=void 0,this.RealtimeResIndiv=void 0,this.RealtimeRes=[],this.RealTimeCity=void 0,this.RealTimeCountry=void 0,this.RealTimeCityUsers=void 0,this.CityUsers=[]}ngOnInit(){this.getActualData28daysAgo(),this.getActualDataLastMonth(),this.getRealtime(),super.ngOnInit()}getPercentage(t,s){return(s-t)/t*100}getRealtime(){this.gaservice.callWithoutInterceptorRealTime().subscribe(t=>{t.body.rows&&t.body.rows.forEach(s=>{this.RealtimeRes.push(s)})})}getActualDataLastMonth(){this.gaservice.callWithoutInterceptorlastmonth().subscribe(t=>{this.ActiveViewersLM=t.body[0].value,this.ScreenPageViewsLM=t.body[1].value,this.SessionsLM=t.body[2].value})}getActualData28daysAgo(){this.gaservice.callWithoutInterceptor28daysago().subscribe(t=>{this.ActiveViewers=t.body[0].value,this.ScreenPageViews=t.body[1].value,this.Sessions=t.body[2].value})}getScope$(){return this.siteService.find()}getReports$(){return this.scope$.pipe((0,x.w)(t=>this.usageReportService.searchStatistics(t._links.self.href,0,10)))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(p.gz),e.\u0275\u0275directiveInject(u),e.\u0275\u0275directiveInject(p.F0),e.\u0275\u0275directiveInject(f.f),e.\u0275\u0275directiveInject(C._),e.\u0275\u0275directiveInject(S.a),e.\u0275\u0275directiveInject(h.e8),e.\u0275\u0275directiveInject(o.eN),e.\u0275\u0275directiveInject(l.K0))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-site-statistics-page"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:10,vars:6,consts:[[1,"container"],[4,"ngVar"],["activeIds","custom-panel-1"],["a","ngbAccordion"],["ngbPanelHeader",""],["ngbPanelContent",""],["class","header",3,"id",4,"ngIf"],[1,"header",3,"id"],[4,"ngIf"],[3,"report","class",4,"ngFor","ngForOf"],[3,"report"],[1,"w-100"],[1,"accordion-button","custom-header"],["ngbPanelToggle","",1,"p-0","btn","btn-link","container-fluid","text-start","ps-0"],[1,"w-100","d-flex","justify-content-between","collapse-toggle"],[1,"text-right","d-flex"],[1,"ml-3","d-inline-block"],["class","fas fa-chevron-down fa-fw",4,"ngIf"],["class","fas fa-chevron-up fa-fw",4,"ngIf"],[1,"fas","fa-chevron-down","fa-fw"],[1,"fas","fa-chevron-up","fa-fw"],["class","row",4,"ngIf"],[1,"row"],["class","col-lg-4 col-md-6 mb-4",4,"ngIf"],["class","col-lg-4 col-md-12 mb-4",4,"ngIf"],[1,"col-lg-4","col-md-6","mb-4"],[1,"card"],[1,"card-body"],[1,"text-uppercase","small","mb-2"],[1,"mb-0"],["class","pr-2",4,"ngIf"],["class","text-danger ms-2",4,"ngIf"],["class","text-success ms-2",4,"ngIf"],[1,"text-uppercase","text-muted","small","mb-2"],[1,"pr-2"],[1,"text-danger","ms-2"],[1,"fas","fa-arrow-down","fa-sm","pe-1"],[1,"text-success","ms-2"],[1,"fas","fa-arrow-up","fa-sm","pe-1"],[1,"col-lg-4","col-md-12","mb-4"],[1,"text-center","justify-content-center"],["class","table align-middle mb-0 bg-white",4,"ngIf"],[1,"table","align-middle","mb-0","bg-white"],[1,"bg-light"],[4,"ngFor","ngForOf"],[1,"fw-normal","mb-1"]],template:function(t,s){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,A,2,1,"ng-container",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,j,3,2,"ng-container",1),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementStart(5,"ngb-accordion",2,3)(7,"ngb-panel"),e.\u0275\u0275template(8,k,9,4,"ng-template",4),e.\u0275\u0275template(9,ae,2,2,"ng-template",5),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngVar",e.\u0275\u0275pipeBind1(2,2,s.scope$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngVar",e.\u0275\u0275pipeBind1(4,4,s.reports$)))},directives:[I.g,l.O5,P.Z,l.sg,y.A,c.gY,c.Gk,c.k9,c.I_,c.gW,w.R],pipes:[l.Ov,b.X$],styles:[".btn-link[_ngcontent-%COMP%]{color:#da1212}.btn-link[_ngcontent-%COMP%]:hover, .btn-link[_ngcontent-%COMP%]:focus{color:#da1212}.btn-link[_ngcontent-%COMP%]:focus, .btn-link.focus[_ngcontent-%COMP%]{text-decoration:underline;box-shadow:none}.btn-link[_ngcontent-%COMP%]:disabled{color:#da1212}  .bg-info{background-color:#fff!important}  .btn-link{color:#da1212}  .btn-link:hover,   .btn-link:focus{color:#da1212}  .btn-link:focus,   .btn-link.focus{text-decoration:underline;box-shadow:none}  .btn-link:disabled{color:#da1212}"]}),n})()}}]);