"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[3986],{83986:(Gt,E,s)=>{s.r(E),s.d(E,{ProcessPageModule:()=>At});var H=s(66004),v=s(37895),h=s(77686),d=s(5496),f=s(48358),g=s(21160),J=s(72564),I=s(8183),e=s(70074),p=s(10210),V=s(41633),K=(s(4881),s(63762)),B=s(97965),b=s(16228),X=s(37958),O=s(67809),m=s(25839),u=s(86553);function G(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"li"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}function Y(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",12),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementStart(3,"ul"),e.\u0275\u0275template(4,G,2,1,"li",13),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,"process.new.parameter.required.missing")," "),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",t.missingParameters)}}const Z=function(){return["/processes"]};let D=(()=>{class n{constructor(t,r,i,o,c){this.scriptService=t,this.notificationsService=r,this.translationService=i,this.requestService=o,this.router=c,this.selectedScript=void 0,this.process=void 0,this.parameters=[],this.files=[],this.missingParameters=[]}ngOnInit(){this.process=new K.A}submitForm(t){if((0,m.xb)(this.parameters)&&(this.parameters=[]),!this.validateForm(t)||this.isRequiredMissing())return;const r=this.parameters.map(i=>({name:i.name,value:this.checkValue(i)}));this.scriptService.invoke(this.selectedScript.id,r,this.files).pipe((0,d.hC)()).subscribe(i=>{if(i.hasSucceeded){const o=this.translationService.get("process.new.notification.success.title"),c=this.translationService.get("process.new.notification.success.content");this.notificationsService.success(o,c),this.sendBack()}else{const o=this.translationService.get("process.new.notification.error.title"),c=this.translationService.get("process.new.notification.error.content");this.notificationsService.error(o,c)}})}checkValue(t){return"object"==typeof t.value?(this.files=[...this.files,t.value],t.value.name):t.value}validateForm(t){let r=!0;return Object.keys(t.controls).forEach(i=>{t.controls[i].invalid&&(t.controls[i].markAsDirty(),r=!1)}),r}isRequiredMissing(){this.missingParameters=[];const t=this.parameters.map(i=>i.name),r=this.selectedScript.parameters.filter(i=>i.mandatory);for(const i of r)t.includes(i.name)||this.missingParameters.push(i.name);return this.missingParameters.length>0}sendBack(){this.requestService.removeByHrefSubstring("/processes"),this.router.navigateByUrl((0,O.dz)())}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(B.UY),e.\u0275\u0275directiveInject(b.T),e.\u0275\u0275directiveInject(u.sK),e.\u0275\u0275directiveInject(X.s),e.\u0275\u0275directiveInject(v.F0))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-process-form"]],inputs:{selectedScript:"selectedScript",process:"process",parameters:"parameters",headerKey:"headerKey"},decls:19,vars:16,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"col-12","col-md-6"],[3,"ngSubmit"],["form","ngForm"],[3,"script","select"],[3,"initialParams","script","updateParameters"],[1,"btn","btn-light","float-left",3,"routerLink"],["type","submit",1,"btn","btn-light","float-right"],[3,"script"],["class","mt-3 alert alert-danger validation-error",4,"ngIf"],[1,"mt-3","alert","alert-danger","validation-error"],[4,"ngFor","ngForOf"]],template:function(t,r){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h2",2),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",3)(6,"form",4,5),e.\u0275\u0275listener("ngSubmit",function(){e.\u0275\u0275restoreView(i);const c=e.\u0275\u0275reference(7);return r.submitForm(c)}),e.\u0275\u0275elementStart(8,"ds-scripts-select",6),e.\u0275\u0275listener("select",function(c){return r.selectedScript=c,r.parameters=void 0}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"ds-process-parameters",7),e.\u0275\u0275listener("updateParameters",function(c){return r.parameters=c}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"button",8),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"button",9),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(16,"div",3),e.\u0275\u0275element(17,"ds-script-help",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(18,Y,5,4,"div",11),e.\u0275\u0275elementEnd()}2&t&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,9,r.headerKey)," "),e.\u0275\u0275advance(5),e.\u0275\u0275property("script",r.selectedScript),e.\u0275\u0275advance(1),e.\u0275\u0275property("initialParams",r.parameters)("script",r.selectedScript),e.\u0275\u0275advance(1),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction0(15,Z)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,11,"process.new.cancel")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(15,13,"process.new.submit")),e.\u0275\u0275advance(3),e.\u0275\u0275property("script",r.selectedScript),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.missingParameters.length>0))},styles:[""]}),n})();function _(n){return n}function Q(n,a){if(1&n&&(e.\u0275\u0275element(0,"ds-process-form",2),e.\u0275\u0275pipe(1,"async")),2&n){const t=a.ngVar,r=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("selectedScript",e.\u0275\u0275pipeBind1(1,2,r.script$))("parameters",t.parameters)}}function W(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Q,2,4,"ds-process-form",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngVar",e.\u0275\u0275pipeBind1(2,1,t.fromExisting$))}}function q(n,a){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"ds-process-form",3),e.\u0275\u0275elementContainerEnd())}let ee=(()=>{class n{constructor(t,r,i){this.route=t,this.processService=r,this.linkService=i}ngOnInit(){const t=this.route.snapshot.queryParams.id;t&&(this.fromExisting$=this.processService.findById(t).pipe((0,d.Gp)()),this.script$=this.fromExisting$.pipe((0,f.U)(r=>this.linkService.resolveLink(r,(0,I.l)("script"))),(0,g.w)(r=>r.script),(0,d.Gp)()))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(v.gz),e.\u0275\u0275directiveInject(h.n),e.\u0275\u0275directiveInject(J.M))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-new-process"]],decls:4,vars:6,consts:[[4,"ngIf"],["headerKey","process.new.header",3,"selectedScript","parameters",4,"ngVar"],["headerKey","process.new.header",3,"selectedScript","parameters"],["headerKey","process.new.header"]],template:function(t,r){1&t&&(e.\u0275\u0275template(0,W,3,3,"ng-container",0),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275template(2,q,2,0,"ng-container",0),e.\u0275\u0275pipe(3,"async")),2&t&&(e.\u0275\u0275property("ngIf",r.fromExisting$&&e.\u0275\u0275pipeBind1(1,2,r.fromExisting$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!r.fromExisting$||!e.\u0275\u0275pipeBind1(3,4,r.fromExisting$)))},directives:[p.O5,V.g,D],pipes:[p.Ov],styles:[""]}),n})();var te=s(98865),ne=s(53019),re=s(57854),ae=s(30292),T=s(35841),ie=s(14111),se=s(32543),le=s(27193),$=s(27303),M=s(77007);let pe=(()=>{class n{constructor(t,r,i){this.processDataService=t,this.notificationsService=r,this.translateService=i,this.processesToDelete=[],this.isProcessingBehaviorSubject=new T.X(!1)}toggleDelete(t){this.isToBeDeleted(t)?this.processesToDelete.splice(this.processesToDelete.indexOf(t),1):this.processesToDelete.push(t)}isToBeDeleted(t){return this.processesToDelete.includes(t)}clearAllProcesses(){this.processesToDelete.splice(0)}getAmountOfSelectedProcesses(){return this.processesToDelete.length}isProcessing$(){return this.isProcessingBehaviorSubject}hasSelected(){return(0,m.UE)(this.processesToDelete)}deleteSelectedProcesses(){this.isProcessingBehaviorSubject.next(!0),(0,ie.D)([...this.processesToDelete]).pipe((0,le.b)(t=>this.processDataService.delete(t).pipe((0,d.hC)(),(0,$.b)(r=>{r.hasFailed?this.notificationsService.error(this.translateService.get("process.bulk.delete.error.head"),this.translateService.get("process.bulk.delete.error.body",{processId:t})):this.toggleDelete(t)}))),(0,M.h)(t=>t.hasSucceeded),function oe(n){return(0,se.u)((a,t,r)=>!n||n(t,r)?a+1:a,0)}()).subscribe(t=>{this.notificationsService.success(this.translateService.get("process.bulk.delete.success",{count:t})),this.isProcessingBehaviorSubject.next(!1)})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(h.n),e.\u0275\u0275inject(b.T),e.\u0275\u0275inject(u.sK))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var j=s(35053),ce=s(99292);function de(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",10),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().processBulkDeleteService.clearAllProcesses()}),e.\u0275\u0275element(1,"i",11),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()}2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(3,1,"process.overview.delete.clear")," "))}const S=function(n){return{count:n}};function me(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",12),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(),o=e.\u0275\u0275reference(15);return i.openDeleteModal(o)}),e.\u0275\u0275element(1,"i",13),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind2(3,1,"process.overview.delete",e.\u0275\u0275pureFunction1(4,S,t.processBulkDeleteService.getAmountOfSelectedProcesses()))," ")}}function ue(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=a.ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t)}}const k=function(n){return["/processes/",n]};function ve(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td")(2,"a",19),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"td")(5,"a",19),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(7,ue,2,1,"td",20),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"td"),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"td")(18,"button",21),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).$implicit;return e.\u0275\u0275nextContext(2).processBulkDeleteService.toggleDelete(o.processId)}),e.\u0275\u0275element(19,"i",22),e.\u0275\u0275elementEnd()()()}if(2&n){const t=a.$implicit,r=e.\u0275\u0275nextContext(2);e.\u0275\u0275classProp("table-danger",r.processBulkDeleteService.isToBeDeleted(t.processId)),e.\u0275\u0275advance(2),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction1(20,k,t.processId)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.processId),e.\u0275\u0275advance(2),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction1(22,k,t.processId)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.scriptName),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngVar",e.\u0275\u0275pipeBind1(8,10,r.getEpersonName(t.userId))),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind3(11,12,t.startTime,r.dateFormat,"UTC")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind3(14,16,t.endTime,r.dateFormat,"UTC")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.processStatus)}}function fe(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-pagination",14),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementStart(3,"div",15)(4,"table",16)(5,"thead")(6,"tr")(7,"th",17),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th",17),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"th",17),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"th",17),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"th",17),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"th",17),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"th",17),e.\u0275\u0275text(26),e.\u0275\u0275pipe(27,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(28,"tbody"),e.\u0275\u0275template(29,ve,20,24,"tr",18),e.\u0275\u0275pipe(30,"async"),e.\u0275\u0275elementEnd()()()()),2&n){const t=e.\u0275\u0275nextContext();let r,i,o;e.\u0275\u0275property("paginationOptions",t.pageConfig)("pageInfoState",null==(r=e.\u0275\u0275pipeBind1(1,13,t.processesRD$))?null:r.payload)("collectionSize",null==(i=e.\u0275\u0275pipeBind1(2,15,t.processesRD$))||null==i.payload?null:i.payload.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,17,"process.overview.table.id")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,19,"process.overview.table.name")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(15,21,"process.overview.table.user")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,23,"process.overview.table.start")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(21,25,"process.overview.table.finish")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(24,27,"process.overview.table.status")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(27,29,"process.overview.table.actions")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",null==(o=e.\u0275\u0275pipeBind1(30,31,t.processesRD$))||null==o.payload?null:o.payload.page)}}function _e(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(2,1,"process.overview.delete.body",e.\u0275\u0275pureFunction1(4,S,t.processBulkDeleteService.getAmountOfSelectedProcesses())))}}function ge(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",32),e.\u0275\u0275element(1,"span",33),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(4,1,"process.overview.delete.processing",e.\u0275\u0275pureFunction1(4,S,t.processBulkDeleteService.getAmountOfSelectedProcesses())),"")}}function he(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",23)(2,"div")(3,"h4"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"button",24),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().closeModal()}),e.\u0275\u0275elementStart(7,"span",25),e.\u0275\u0275text(8,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(9,"div",26),e.\u0275\u0275template(10,_e,3,6,"div",27),e.\u0275\u0275pipe(11,"async"),e.\u0275\u0275template(12,ge,5,6,"div",28),e.\u0275\u0275pipe(13,"async"),e.\u0275\u0275elementStart(14,"div",29)(15,"button",30),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().closeModal()}),e.\u0275\u0275pipe(16,"async"),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"button",31),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().deleteSelected()}),e.\u0275\u0275pipe(20,"async"),e.\u0275\u0275text(21),e.\u0275\u0275pipe(22,"translate"),e.\u0275\u0275elementEnd()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,7,"process.overview.delete.header")),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(11,9,t.processBulkDeleteService.isProcessing$())),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(13,11,t.processBulkDeleteService.isProcessing$())),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(16,13,t.processBulkDeleteService.isProcessing$())),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,15,"process.detail.delete.cancel")),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",e.\u0275\u0275pipeBind1(20,17,t.processBulkDeleteService.isProcessing$())),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind2(22,19,"process.overview.delete",e.\u0275\u0275pureFunction1(22,S,t.processBulkDeleteService.getAmountOfSelectedProcesses()))," ")}}let xe=(()=>{class n{constructor(t,r,i,o,c){this.processService=t,this.paginationService=r,this.ePersonService=i,this.modalService=o,this.processBulkDeleteService=c,this.config=Object.assign(new ae.R,{elementsPerPage:20}),this.pageConfig=Object.assign(new te.r,{id:"po",pageSize:20}),this.dateFormat="yyyy-MM-dd HH:mm:ss",this.processesToDelete=[]}ngOnInit(){this.setProcesses(),this.processBulkDeleteService.clearAllProcesses()}setProcesses(){this.processesRD$=this.paginationService.getFindListOptions(this.pageConfig.id,this.config).pipe((0,g.w)(t=>this.processService.findAll(t,!0,!1)))}getEpersonName(t){return this.ePersonService.findById(t).pipe((0,d.Gp)(),(0,f.U)(r=>r.name))}ngOnDestroy(){this.paginationService.clearPagination(this.pageConfig.id),(0,m.Uh)(this.isProcessingSub)&&this.isProcessingSub.unsubscribe()}openDeleteModal(t){this.modalRef=this.modalService.open(t)}closeModal(){this.modalRef.close()}deleteSelected(){this.processBulkDeleteService.deleteSelectedProcesses(),(0,m.Uh)(this.isProcessingSub)&&this.isProcessingSub.unsubscribe(),this.isProcessingSub=this.processBulkDeleteService.isProcessing$().subscribe(t=>{t||(this.closeModal(),this.setProcesses())})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(h.n),e.\u0275\u0275directiveInject(re.N),e.\u0275\u0275directiveInject(ne.k),e.\u0275\u0275directiveInject(j.FF),e.\u0275\u0275directiveInject(pe))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-process-overview"]],decls:16,vars:11,consts:[[1,"container"],[1,"d-flex"],[1,"flex-grow-1"],[1,"d-flex","justify-content-end"],["class","btn btn-primary mr-2",3,"click",4,"ngIf"],["class","btn btn-danger mr-2",3,"click",4,"ngIf"],["routerLink","/processes/new",1,"btn","btn-success"],[1,"fas","fa-plus","pr-2"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage",4,"ngIf"],["deleteModal",""],[1,"btn","btn-primary","mr-2",3,"click"],[1,"fas","fa-undo","pr-2"],[1,"btn","btn-danger","mr-2",3,"click"],[1,"fas","fa-trash","pr-2"],[3,"paginationOptions","pageInfoState","collectionSize","hideGear","hidePagerWhenSinglePage"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],["scope","col"],[3,"table-danger",4,"ngFor","ngForOf"],[3,"routerLink"],[4,"ngVar"],[1,"btn","btn-outline-danger",3,"click"],[1,"fas","fa-trash"],[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngIf"],["class","alert alert-info",4,"ngIf"],[1,"mt-4"],[1,"btn","btn-primary","mr-2",3,"disabled","click"],["id","delete-confirm",1,"btn","btn-danger",3,"disabled","click"],[1,"alert","alert-info"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","spinner-button"]],template:function(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h2",2),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",3),e.\u0275\u0275template(6,de,4,3,"button",4),e.\u0275\u0275template(7,me,4,6,"button",5),e.\u0275\u0275elementStart(8,"button",6),e.\u0275\u0275element(9,"i",7),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(12,fe,31,33,"ds-pagination",8),e.\u0275\u0275pipe(13,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(14,he,23,24,"ng-template",null,9,e.\u0275\u0275templateRefExtractor)),2&t){let i;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,5,"process.overview.title")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",r.processBulkDeleteService.hasSelected()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.processBulkDeleteService.hasSelected()),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(11,7,"process.overview.new")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",(null==(i=e.\u0275\u0275pipeBind1(13,9,r.processesRD$))||null==i.payload?null:i.payload.totalElements)>0)}},directives:[p.O5,v.rH,ce.Q,p.sg,v.yS,V.g],pipes:[u.X$,p.Ov,p.uU],encapsulation:2}),n})(),N=(()=>{class n{constructor(t){this.processService=t}resolve(t,r){return this.processService.findById(t.params.id,!1,!0,(0,I.l)("script")).pipe((0,d.hC)())}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(h.n))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();var F=s(77176),L=s(90410),Se=s(28709),Ce=s(93132),ye=s(44661),Pe=s(69810),Ie=s(338),C=s(71716),Ve=s(59846),be=s(53043),Te=s(78819);const Fe=["*"];let we=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-process-detail-field"]],inputs:{title:"title"},ngContentSelectors:Fe,decls:4,vars:3,consts:[[1,"mt-4"]],template:function(t,r){1&t&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"h4",0),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275projection(3)),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,r.title)))},pipes:[u.X$],encapsulation:2}),n})();var Ee=s(91689),Be=s(76924),Oe=s(69748);function De(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate2("",null==t?null:t.name," ",null==t?null:t.value,"")}}function $e(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-process-detail-field",18),e.\u0275\u0275template(1,De,2,2,"div",19),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().ngVar;e.\u0275\u0275property("title","process.detail.arguments"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",null==t?null:t.parameters)}}function Me(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-file-download-link",23)(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"dsFileSize"),e.\u0275\u0275elementEnd()()),2&n){const t=a.$implicit,r=e.\u0275\u0275nextContext(4);e.\u0275\u0275property("bitstream",t),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(r.getFileName(t)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("(",e.\u0275\u0275pipeBind1(5,3,null==t?null:t.sizeBytes),")")}}function je(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-process-detail-field",21),e.\u0275\u0275template(1,Me,6,5,"ds-file-download-link",22),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().ngVar;e.\u0275\u0275property("title","process.detail.output-files"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t)}}function ke(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,je,2,2,"ds-process-detail-field",20),e.\u0275\u0275elementEnd()),2&n){const t=a.ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t&&(null==t?null:t.length)>0)}}function Ne(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-process-detail-field",24),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275elementStart(2,"div"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"date"),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().ngVar,r=e.\u0275\u0275nextContext();e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(1,2,"process.detail.start-time")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind3(4,4,t.startTime,r.dateFormat,"UTC"))}}function Le(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-process-detail-field",25),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275elementStart(2,"div"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"date"),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().ngVar,r=e.\u0275\u0275nextContext();e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(1,2,"process.detail.end-time")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind3(4,4,t.endTime,r.dateFormat,"UTC"))}}function Re(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-process-detail-field",26),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275elementStart(2,"div"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext().ngVar;e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(1,2,"process.detail.status")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.processStatus)}}function Ue(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",32),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext(3).showProcessOutputLogs()}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()}2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"process.detail.logs.button")," "))}function Ae(n,a){1&n&&(e.\u0275\u0275element(0,"ds-themed-loading",33),e.\u0275\u0275pipe(1,"translate")),2&n&&e.\u0275\u0275propertyInterpolate("message",e.\u0275\u0275pipeBind1(1,1,"process.detail.logs.loading"))}function ze(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"pre",34),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,t.outputLogs$))}}function He(n,a){1&n&&(e.\u0275\u0275elementStart(0,"p",35),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"process.detail.logs.none")," "))}function Je(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"ds-process-detail-field",27),e.\u0275\u0275template(1,Ue,3,3,"button",28),e.\u0275\u0275template(2,Ae,2,3,"ds-themed-loading",29),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275template(4,ze,3,3,"pre",30),e.\u0275\u0275pipe(5,"async"),e.\u0275\u0275template(6,He,3,3,"p",31),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275pipe(8,"async"),e.\u0275\u0275pipe(9,"async"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().ngVar,r=e.\u0275\u0275nextContext();let i,o;e.\u0275\u0275property("title","process.detail.output"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!r.showOutputLogs&&null!=(null==t||null==t._links||null==t._links.output?null:t._links.output.href)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(3,5,r.retrievingOutputLogs$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.showOutputLogs&&(null==(i=e.\u0275\u0275pipeBind1(5,7,r.outputLogs$))?null:i.length)>0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(7,9,r.retrievingOutputLogs$)&&r.showOutputLogs&&!e.\u0275\u0275pipeBind1(8,11,r.outputLogs$)||0==(null==(o=e.\u0275\u0275pipeBind1(9,13,r.outputLogs$))?null:o.length)||!t._links.output)}}function Ke(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",36),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(2),o=e.\u0275\u0275reference(3);return i.openDeleteModal(o)}),e.\u0275\u0275element(1,"i",37),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()}2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(3,1,"process.detail.delete.button")," "))}const Xe=function(n,a){return{id:n,name:a}},Ge=function(n){return{id:n}};function Ye(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",2)(1,"div",3)(2,"h2",4),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"ds-process-detail-field",5)(6,"div"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(8,$e,2,2,"ds-process-detail-field",6),e.\u0275\u0275template(9,ke,2,1,"div",7),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275template(11,Ne,5,8,"ds-process-detail-field",8),e.\u0275\u0275template(12,Le,5,8,"ds-process-detail-field",9),e.\u0275\u0275template(13,Re,4,4,"ds-process-detail-field",10),e.\u0275\u0275template(14,Je,10,15,"ds-process-detail-field",11),e.\u0275\u0275elementStart(15,"ds-process-detail-field",12)(16,"button",13),e.\u0275\u0275element(17,"i",14),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(20,Ke,4,3,"button",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",16)(22,"a",17),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"translate"),e.\u0275\u0275elementEnd()()()),2&n){const t=a.ngVar,r=e.\u0275\u0275nextContext();let i;e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(4,15,"process.detail.title",e.\u0275\u0275pureFunction2(24,Xe,null==t?null:t.processId,null==t?null:t.scriptName))),e.\u0275\u0275advance(2),e.\u0275\u0275property("title","process.detail.script"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==t?null:t.scriptName),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==t?null:t.parameters)&&(null==t||null==t.parameters?null:t.parameters.length)>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngVar",null==(i=e.\u0275\u0275pipeBind1(10,18,r.filesRD$))||null==i.payload?null:i.payload.page),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t&&t.startTime),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t&&t.endTime),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t&&t.processStatus),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.isProcessFinished(t)),e.\u0275\u0275advance(1),e.\u0275\u0275property("title","process.detail.actions"),e.\u0275\u0275advance(1),e.\u0275\u0275property("queryParams",e.\u0275\u0275pureFunction1(27,Ge,null==t?null:t.processId)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(19,20,"process.detail.create")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.isProcessFinished(t)),e.\u0275\u0275advance(2),e.\u0275\u0275property("routerLink","/processes"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(24,22,"process.detail.back"))}}function Ze(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",38)(2,"div")(3,"h4"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"button",39),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext(2).closeModal()}),e.\u0275\u0275elementStart(7,"span",40),e.\u0275\u0275text(8,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(9,"div",41)(10,"div"),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",42)(14,"button",43),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext(2).closeModal()}),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"button",44),e.\u0275\u0275listener("click",function(){const o=e.\u0275\u0275restoreView(t).ngVar;return e.\u0275\u0275nextContext(2).deleteProcess(o)}),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"translate"),e.\u0275\u0275elementEnd()()()()}2&n&&(e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,4,"process.detail.delete.header")),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(12,6,"process.detail.delete.body")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(16,8,"process.detail.delete.cancel")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(19,10,"process.detail.delete.confirm")," "))}function Qe(n,a){if(1&n&&(e.\u0275\u0275template(0,Ze,20,12,"div",7),e.\u0275\u0275pipe(1,"async")),2&n){const t=e.\u0275\u0275nextContext();let r;e.\u0275\u0275property("ngVar",null==(r=e.\u0275\u0275pipeBind1(1,1,t.processRD$))?null:r.payload)}}let We=(()=>{class n{constructor(t,r,i,o,c,P,zt,Ht,Jt,Kt,Xt){this.route=t,this.router=r,this.processService=i,this.bitstreamDataService=o,this.nameService=c,this.zone=P,this.authService=zt,this.http=Ht,this.modalService=Jt,this.notificationsService=Kt,this.translateService=Xt,this.AlertTypeEnum=Ie.N,this.outputLogs$=new T.X(void 0),this.dateFormat="yyyy-MM-dd HH:mm:ss ZZZZ"}ngOnInit(){this.showOutputLogs=!1,this.retrievingOutputLogs$=new T.X(!1),this.processRD$=this.route.data.pipe((0,f.U)(t=>t.process),(0,Ve.Gh)(this.router,this.authService)),this.filesRD$=this.processRD$.pipe((0,d.Gp)(),(0,g.w)(t=>this.processService.getFiles(t.processId)))}getFileName(t){return t instanceof ye.t?this.nameService.getName(t):"unknown"}showProcessOutputLogs(){console.log("showProcessOutputLogs"),this.retrievingOutputLogs$.next(!0),this.zone.runOutsideAngular(()=>{const t=this.processRD$.pipe((0,d.Gp)(),(0,g.w)(r=>this.bitstreamDataService.findByHref(r._links.output.href,!1)));this.outputLogFileUrl$=t.pipe((0,d.xw)(),(0,$.b)(r=>{204===r.statusCode&&(this.zone.run(()=>this.retrievingOutputLogs$.next(!1)),this.showOutputLogs=!0)}),(0,g.w)(r=>{const i=r.payload._links.content.href;return this.authService.getShortlivedToken().pipe((0,F.q)(1),(0,f.U)(o=>(0,m.Uh)(o)?new Pe.R(i,`?authentication-token=${o}`).toString():i))}))}),this.outputLogFileUrl$.pipe((0,F.q)(1),(0,g.w)(t=>this.getTextFile(t)),(0,L.x)(()=>this.zone.run(()=>this.retrievingOutputLogs$.next(!1)))).subscribe(t=>{this.outputLogs$.next(t)})}getTextFile(t){return this.http.get(t,{responseType:"text"}).pipe((0,L.x)(()=>{this.showOutputLogs=!0}))}isProcessFinished(t){return(0,m.Uh)(t)&&(0,m.Uh)(t.processStatus)&&(t.processStatus.toString()===C.N[C.N.COMPLETED].toString()||t.processStatus.toString()===C.N[C.N.FAILED].toString())}deleteProcess(t){this.processService.delete(t.processId).pipe((0,d.hC)()).subscribe(r=>{r.hasSucceeded?(this.notificationsService.success(this.translateService.get("process.detail.delete.success")),this.closeModal(),this.router.navigateByUrl((0,O.dz)())):this.notificationsService.error(this.translateService.get("process.detail.delete.error"))})}openDeleteModal(t){this.modalRef=this.modalService.open(t)}closeModal(){this.modalRef.close()}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(v.gz),e.\u0275\u0275directiveInject(v.F0),e.\u0275\u0275directiveInject(h.n),e.\u0275\u0275directiveInject(Ce.J),e.\u0275\u0275directiveInject(be._),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(Se.e8),e.\u0275\u0275directiveInject(Te.eN),e.\u0275\u0275directiveInject(j.FF),e.\u0275\u0275directiveInject(b.T),e.\u0275\u0275directiveInject(u.sK))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-process-detail"]],decls:4,vars:3,consts:[["class","container",4,"ngVar"],["deleteModal",""],[1,"container"],[1,"d-flex"],[1,"flex-grow-1"],["id","process-name",3,"title"],["id","process-arguments",3,"title",4,"ngIf"],[4,"ngVar"],["id","process-start-time",3,"title",4,"ngIf"],["id","process-end-time",3,"title",4,"ngIf"],["id","process-status",3,"title",4,"ngIf"],["id","process-output",3,"title",4,"ngIf"],["id","process-actions",3,"title"],["routerLink","/processes/new",1,"btn","btn-success","mr-2",3,"queryParams"],[1,"fas","fa-plus","pr-2"],["id","delete","class","btn btn-danger",3,"click",4,"ngIf"],[2,"text-align","right"],[1,"btn","btn-outline-secondary","mt-3",3,"routerLink"],["id","process-arguments",3,"title"],[4,"ngFor","ngForOf"],["id","process-files",3,"title",4,"ngIf"],["id","process-files",3,"title"],[3,"bitstream",4,"ngFor","ngForOf"],[3,"bitstream"],["id","process-start-time",3,"title"],["id","process-end-time",3,"title"],["id","process-status",3,"title"],["id","process-output",3,"title"],["id","showOutputButton","class","btn btn-primary",3,"click",4,"ngIf"],["class","ds-themed-loading",3,"message",4,"ngIf"],["class","font-weight-bold text-secondary bg-light p-3",4,"ngIf"],["id","no-output-logs-message",4,"ngIf"],["id","showOutputButton",1,"btn","btn-primary",3,"click"],[1,"ds-themed-loading",3,"message"],[1,"font-weight-bold","text-secondary","bg-light","p-3"],["id","no-output-logs-message"],["id","delete",1,"btn","btn-danger",3,"click"],[1,"fas","fa-trash","pr-2"],[1,"modal-header"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"mt-4"],[1,"btn","btn-primary","mr-2",3,"click"],["id","delete-confirm",1,"btn","btn-danger",3,"click"]],template:function(t,r){if(1&t&&(e.\u0275\u0275template(0,Ye,25,29,"div",0),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275template(2,Qe,2,3,"ng-template",null,1,e.\u0275\u0275templateRefExtractor)),2&t){let i;e.\u0275\u0275property("ngVar",null==(i=e.\u0275\u0275pipeBind1(1,1,r.processRD$))?null:i.payload)}},directives:[V.g,we,p.O5,p.sg,Ee.q,Be.Z,v.rH,v.yS],pipes:[p.Ov,u.X$,Oe.p,p.uU],encapsulation:2}),n})();var R=s(64561),qe=s(9237),et=s(74388);let U=(()=>{class n{getBreadcrumbs(t,r){return(0,qe.of)([new et.a(t.processId+" - "+t.scriptName,r)])}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})(),A=(()=>{class n{constructor(t,r){this.breadcrumbService=t,this.processService=r}resolve(t,r){const i=t.params.id;return this.processService.findById(t.params.id,!0,!1,(0,I.l)("script")).pipe((0,d.xw)(),(0,d.xe)(),(0,f.U)(o=>{const c=r.url,P=c.substr(0,c.indexOf(i))+i;return{provider:this.breadcrumbService,key:o,url:P}}))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(U),e.\u0275\u0275inject(h.n))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();var tt=s(54818);let nt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({providers:[N],imports:[[v.Bz.forChild([{path:"",resolve:{breadcrumb:R.t},data:{breadcrumbKey:"process.overview"},canActivate:[tt.J],children:[{path:"",component:xe,data:{title:"process.overview.title"}},{path:"new",component:ee,resolve:{breadcrumb:R.t},data:{title:"process.new.title",breadcrumbKey:"process.new"}},{path:":id",component:We,resolve:{process:N,breadcrumb:A}}]}])]]}),n})();var rt=s(49887),l=s(45028);function at(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"option",5),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=a.$implicit;e.\u0275\u0275property("ngValue",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.name," ")}}function it(n,a){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"process.new.select-script.required")," "))}function st(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",8),e.\u0275\u0275template(1,it,3,3,"div",9),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(5);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.errors.required)}}function ot(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",1)(1,"label",2),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"select",3,4),e.\u0275\u0275listener("ngModelChange",function(i){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().selectedScript=i}),e.\u0275\u0275elementStart(6,"option",5),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,at,2,2,"option",6),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(11,st,2,1,"div",7),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275reference(5),r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,6,"process.new.select-script")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",r.selectedScript),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngValue",void 0),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(8,8,"process.new.select-script.placeholder")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(10,10,r.scripts$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.invalid&&(t.dirty||t.touched))}}const z="script";let lt=(()=>{class n{constructor(t,r,i){this.scriptService=t,this.router=r,this.route=i,this.select=new e.EventEmitter}ngOnInit(){this.scripts$=this.scriptService.findAll({elementsPerPage:9999}).pipe((0,d.xw)(),(0,d.xe)(),(0,f.U)(t=>t.page)),this.routeSub=this.route.queryParams.pipe((0,M.h)(t=>(0,m.xI)(t.id)),(0,f.U)(t=>t[z]),(0,rt.x)(),(0,g.w)(t=>this.scripts$.pipe((0,F.q)(1),(0,f.U)(r=>r.find(i=>i.id===t))))).subscribe(t=>{this._selectedScript=t,this.select.emit(t)})}get selectedScript(){return this._selectedScript?this._selectedScript.id:void 0}set selectedScript(t){this.router.navigate([],{queryParams:{[z]:t}})}set script(t){this._selectedScript=t}ngOnDestroy(){(0,m.Uh)(this.routeSub)&&this.routeSub.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(B.UY),e.\u0275\u0275directiveInject(v.F0),e.\u0275\u0275directiveInject(v.gz))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-scripts-select"]],inputs:{script:"script"},outputs:{select:"select"},features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:_,deps:[[new e.Optional,l.F]]}])],decls:2,vars:3,consts:[["class","form-group",4,"ngIf"],[1,"form-group"],["for","process-script"],["required","","id","process-script","name","script",1,"form-control",3,"ngModel","ngModelChange"],["script","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["class","alert alert-danger validation-error",4,"ngIf"],[1,"alert","alert-danger","validation-error"],[4,"ngIf"]],template:function(t,r){1&t&&(e.\u0275\u0275template(0,ot,12,12,"div",0),e.\u0275\u0275pipe(1,"async")),2&t&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(1,1,r.scripts$))},directives:[p.O5,l.EJ,l.Q7,l.JJ,l.On,l.YN,l.Kr,p.sg],pipes:[p.Ov,u.X$],styles:[""]}),n})();var x=(()=>{return(n=x||(x={})).STRING="String",n.DATE="date",n.BOOLEAN="boolean",n.FILE="InputStream",n.OUTPUT="OutputStream",x;var n})();function pt(n,a){1&n&&e.\u0275\u0275elementContainer(0)}function ct(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",4),e.\u0275\u0275text(2),e.\u0275\u0275template(3,pt,1,0,"ng-container",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()()),2&n){const t=a.$implicit;e.\u0275\u0275nextContext();const r=e.\u0275\u0275reference(8);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.name," ",t.nameLong," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngTemplateOutlet",r)("ngTemplateOutletContext",t),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.description)}}function dt(n,a){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("<",e.\u0275\u0275pipeBind1(2,1,"process.new.parameter.type.value"),">"))}function mt(n,a){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("<",e.\u0275\u0275pipeBind1(2,1,"process.new.parameter.type.value"),">"))}function ut(n,a){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("<",e.\u0275\u0275pipeBind1(2,1,"process.new.parameter.type.value"),">"))}function vt(n,a){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("<",e.\u0275\u0275pipeBind1(2,1,"process.new.parameter.type.file"),">"))}function ft(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0,6),e.\u0275\u0275template(1,dt,3,3,"span",7),e.\u0275\u0275template(2,mt,3,3,"span",7),e.\u0275\u0275template(3,ut,3,3,"span",7),e.\u0275\u0275template(4,vt,3,3,"span",7),e.\u0275\u0275elementContainerEnd()),2&n){const t=a.type,r=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngSwitch",t),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.DATE),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.STRING),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.OUTPUT),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.FILE)}}let _t=(()=>{class n{constructor(){this.parameterTypes=x}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-script-help"]],inputs:{script:"script"},decls:9,vars:3,consts:[[1,"text-secondary"],[1,"table-borderless","mt-3"],[4,"ngFor","ngForOf"],["type",""],[1,"align-top","text-nowrap"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"h3"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"table",1),e.\u0275\u0275template(6,ct,6,5,"tr",2),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(7,ft,5,5,"ng-template",null,3,e.\u0275\u0275templateRefExtractor)),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==r.script?null:r.script.name),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==r.script?null:r.script.description),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",null==r.script?null:r.script.parameters))},directives:[p.sg,p.tP,p.RF,p.n9],pipes:[u.X$],styles:[""]}),n})();var w=s(85357);let y=(()=>{class n{constructor(){this.updateValue=new e.EventEmitter}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-value-input"]],inputs:{index:"index"},outputs:{updateValue:"updateValue"},decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})();function gt(n,a){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"process.new.parameter.string.required")," "))}function ht(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275template(1,gt,3,3,"div",4),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(1);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.errors.required)}}let xt=(()=>{class n extends y{ngOnInit(){this.value=this.initialValue}setValue(t){this.value=t,this.updateValue.emit(t)}}return n.\u0275fac=function(){let a;return function(r){return(a||(a=e.\u0275\u0275getInheritedFactory(n)))(r||n)}}(),n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-string-value-input"]],inputs:{initialValue:"initialValue"},features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:_,deps:[[new e.Optional,l.F]]}]),e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[["required","","type","text",1,"form-control",3,"name","id","ngModel","ngModelChange"],["string","ngModel"],["class","alert alert-danger validation-error",4,"ngIf"],[1,"alert","alert-danger","validation-error"],[4,"ngIf"]],template:function(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"input",0,1),e.\u0275\u0275listener("ngModelChange",function(o){return r.setValue(o)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,ht,2,1,"div",2)),2&t){const i=e.\u0275\u0275reference(1);e.\u0275\u0275propertyInterpolate1("name","string-value-",r.index,"")("id","string-value-",r.index,""),e.\u0275\u0275property("ngModel",r.value),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.invalid&&(i.dirty||i.touched))}},directives:[l.Fj,l.Q7,l.JJ,l.On,p.O5],pipes:[u.X$],styles:[""]}),n})();function St(n,a){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"process.new.parameter.string.required")," "))}function Ct(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",3),e.\u0275\u0275template(1,St,3,3,"div",4),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(1);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.errors.required)}}let yt=(()=>{class n extends y{ngOnInit(){this.value=this.initialValue}setValue(t){this.value=t,this.updateValue.emit(t)}}return n.\u0275fac=function(){let a;return function(r){return(a||(a=e.\u0275\u0275getInheritedFactory(n)))(r||n)}}(),n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-date-value-input"]],inputs:{initialValue:"initialValue"},features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:_,deps:[[new e.Optional,l.F]]}]),e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[["required","","type","text",1,"form-control",3,"name","id","ngModel","ngModelChange"],["string","ngModel"],["class","alert alert-danger validation-error",4,"ngIf"],[1,"alert","alert-danger","validation-error"],[4,"ngIf"]],template:function(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"input",0,1),e.\u0275\u0275listener("ngModelChange",function(o){return r.setValue(o)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,Ct,2,1,"div",2)),2&t){const i=e.\u0275\u0275reference(1);e.\u0275\u0275propertyInterpolate1("name","date-value-",r.index,"")("id","date-value-",r.index,""),e.\u0275\u0275property("ngModel",r.value),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.invalid&&(i.dirty||i.touched))}},directives:[l.Fj,l.Q7,l.JJ,l.On,p.O5],pipes:[u.X$],styles:[""]}),n})();var Pt=s(45862),It=s(10444);function Vt(n,a){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"process.new.parameter.file.required")," "))}function bt(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",6),e.\u0275\u0275template(1,Vt,3,3,"div",7),e.\u0275\u0275elementEnd()),2&n){e.\u0275\u0275nextContext();const t=e.\u0275\u0275reference(7);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.errors.required)}}let Tt=(()=>{class n extends y{setFile(t){this.fileObject=t.length>0?t[0]:void 0,this.updateValue.emit(this.fileObject)}}return n.\u0275fac=function(){let a;return function(r){return(a||(a=e.\u0275\u0275getInheritedFactory(n)))(r||n)}}(),n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-file-value-input"]],features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:_,deps:[[new e.Optional,l.F]]}]),e.\u0275\u0275InheritDefinitionFeature],decls:9,vars:9,consts:[[1,"d-flex","align-items-center","m-0",3,"for"],[1,"btn","btn-light"],[1,"file-name","ml-1"],["requireFile","","type","file",1,"form-control-file","d-none",3,"name","id","ngModel","ngModelChange"],["file","ngModel"],["class","alert alert-danger validation-error",4,"ngIf"],[1,"alert","alert-danger","validation-error"],[4,"ngIf"]],template:function(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"label",0)(1,"span",1),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span",2),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"input",3,4),e.\u0275\u0275listener("ngModelChange",function(o){return r.setFile(o)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(8,bt,2,1,"div",5)),2&t){const i=e.\u0275\u0275reference(7);e.\u0275\u0275propertyInterpolate1("for","file-upload-",r.index,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,7,"process.new.parameter.file.upload-button")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null==r.fileObject?null:r.fileObject.name),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("name","file-upload-",r.index,"")("id","file-upload-",r.index,""),e.\u0275\u0275property("ngModel",r.fileObject),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.invalid&&(i.dirty||i.touched))}},directives:[Pt.k,l.Fj,It.C,l.JJ,l.On,p.O5],pipes:[u.X$],styles:[".file-name[_ngcontent-%COMP%]{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),n})(),Ft=(()=>{class n extends y{ngOnInit(){this.updateValue.emit(!0)}}return n.\u0275fac=function(){let a;return function(r){return(a||(a=e.\u0275\u0275getInheritedFactory(n)))(r||n)}}(),n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-boolean-value-input"]],features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:_,deps:[[new e.Optional,l.F]]}]),e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[["type","hidden","value","true",3,"name","id"]],template:function(t,r){1&t&&e.\u0275\u0275element(0,"input",0),2&t&&e.\u0275\u0275propertyInterpolate1("name","boolean-value-",r.index,"")("id","boolean-value-",r.index,"")},styles:[""]}),n})();function wt(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-string-value-input",3),e.\u0275\u0275listener("updateValue",function(i){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().updateValue.emit(i)}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("initialValue",t.initialValue)("index",t.index)}}function Et(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-string-value-input",3),e.\u0275\u0275listener("updateValue",function(i){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().updateValue.emit(i)}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("initialValue",t.initialValue)("index",t.index)}}function Bt(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-date-value-input",3),e.\u0275\u0275listener("updateValue",function(i){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().updateValue.emit(i)}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("initialValue",t.initialValue)("index",t.index)}}function Ot(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-file-value-input",4),e.\u0275\u0275listener("updateValue",function(i){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().updateValue.emit(i)}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("index",t.index)}}function Dt(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-boolean-value-input",4),e.\u0275\u0275listener("updateValue",function(i){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().updateValue.emit(i)}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("index",t.index)}}let $t=(()=>{class n{constructor(){this.updateValue=new e.EventEmitter,this.parameterTypes=x}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-parameter-value-input"]],inputs:{index:"index",parameter:"parameter",initialValue:"initialValue"},outputs:{updateValue:"updateValue"},features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:_,deps:[[new e.Optional,l.F]]}])],decls:6,vars:6,consts:[[3,"ngSwitch"],[3,"initialValue","index","updateValue",4,"ngSwitchCase"],[3,"index","updateValue",4,"ngSwitchCase"],[3,"initialValue","index","updateValue"],[3,"index","updateValue"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,wt,1,2,"ds-string-value-input",1),e.\u0275\u0275template(2,Et,1,2,"ds-string-value-input",1),e.\u0275\u0275template(3,Bt,1,2,"ds-date-value-input",1),e.\u0275\u0275template(4,Ot,1,1,"ds-file-value-input",2),e.\u0275\u0275template(5,Dt,1,1,"ds-boolean-value-input",2),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("ngSwitch",null==r.parameter?null:r.parameter.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.STRING),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.OUTPUT),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.DATE),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.FILE),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",r.parameterTypes.BOOLEAN))},directives:[p.RF,p.n9,xt,yt,Tt,Ft],styles:[""]}),n})();function Mt(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"option",3),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=a.$implicit;e.\u0275\u0275property("ngValue",t.name),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.nameLong||t.name," ")}}function jt(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",8),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return i.removeParameter.emit(i.parameterValue)}),e.\u0275\u0275element(1,"span",9),e.\u0275\u0275elementEnd()}}function kt(n,a){1&n&&e.\u0275\u0275element(0,"span",10)}let Nt=(()=>{class n{constructor(){this.parameterValue=new w.N,this.removeParameter=new e.EventEmitter,this.changeParameter=new e.EventEmitter}get selectedScriptParameter(){return this.parameters.find(t=>t.name===this.selectedParameter)}get selectedParameter(){return this.parameterValue?this.parameterValue.name:void 0}set selectedParameter(t){this.parameterValue.name=t,this.selectedParameterValue=void 0,this.changeParameter.emit(this.parameterValue)}get selectedParameterValue(){return this.parameterValue?this.parameterValue.value:void 0}set selectedParameterValue(t){this.parameterValue.value=t,this.changeParameter.emit(this.parameterValue)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-parameter-select"]],inputs:{index:"index",parameterValue:"parameterValue",parameters:"parameters",removable:"removable"},outputs:{removeParameter:"removeParameter",changeParameter:"changeParameter"},features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:_,deps:[[new e.Optional,l.F]]}])],decls:9,vars:9,consts:[[1,"form-row","mb-2","mx-0"],["id","process-parameters",1,"form-control","col",3,"name","ngModel","ngModelChange"],["param","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"d-block","col",3,"initialValue","parameter","index","updateValue"],["class","btn btn-light col-1 remove-button",3,"click",4,"ngIf"],["class","col-1",4,"ngIf"],[1,"btn","btn-light","col-1","remove-button",3,"click"],[1,"fas","fa-trash"],[1,"col-1"]],template:function(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"select",1,2),e.\u0275\u0275listener("ngModelChange",function(o){return r.selectedParameter=o}),e.\u0275\u0275elementStart(3,"option",3),e.\u0275\u0275text(4,"Add a parameter..."),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,Mt,2,2,"option",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"ds-parameter-value-input",5),e.\u0275\u0275listener("updateValue",function(o){return r.selectedParameterValue=o}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(7,jt,2,0,"button",6),e.\u0275\u0275template(8,kt,1,0,"span",7),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("name","parameter-",r.index,""),e.\u0275\u0275property("ngModel",r.selectedParameter),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngValue",void 0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",r.parameters),e.\u0275\u0275advance(1),e.\u0275\u0275property("initialValue",r.parameterValue.value)("parameter",r.selectedScriptParameter)("index",r.index),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.removable),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!r.removable))},directives:[l.EJ,l.JJ,l.On,l.YN,l.Kr,p.sg,$t,p.O5],styles:[""]}),n})();function Lt(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-parameter-select",3),e.\u0275\u0275listener("removeParameter",function(){const o=e.\u0275\u0275restoreView(t).index;return e.\u0275\u0275nextContext(2).removeParameter(o)})("changeParameter",function(i){const c=e.\u0275\u0275restoreView(t).index;return e.\u0275\u0275nextContext(2).updateParameter(i,c)}),e.\u0275\u0275elementEnd()}if(2&n){const t=a.$implicit,r=a.index,i=a.last,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("parameters",o.script.parameters)("parameterValue",t)("removable",!i)("index",r)}}function Rt(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",1)(1,"label"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Lt,1,4,"ds-parameter-select",2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,2,"process.new.select-parameters")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.parameterValues)}}let Ut=(()=>{class n{constructor(){this.updateParameters=new e.EventEmitter}ngOnInit(){(0,m.Uh)(this.initialParams)&&(this.parameterValues=this.initialParams)}ngOnChanges(t){t.script&&this.initParameters()}initParameters(){(0,m.Uh)(this.initialParams)?this.parameterValues=this.initialParams:(this.parameterValues=[],this.initializeParameter())}updateParameter(t,r){this.parameterValues[r]=t,r===this.parameterValues.length-1&&this.addParameter(),this.updateParameters.emit(this.parameterValues.filter(i=>(0,m.Uh)(i.name)))}removeParameter(t){this.parameterValues=this.parameterValues.filter((r,i)=>i!==t),this.updateParameters.emit(this.parameterValues.filter(r=>(0,m.Uh)(r.name)))}initializeParameter(){(0,m.Uh)(this.script)&&(this.parameterValues=this.script.parameters.filter(t=>t.mandatory).map(t=>Object.assign(new w.N,{name:t.name}))),this.addParameter()}addParameter(){this.parameterValues=[...this.parameterValues,new w.N]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-process-parameters"]],inputs:{script:"script",initialParams:"initialParams"},outputs:{updateParameters:"updateParameters"},features:[e.\u0275\u0275ProvidersFeature([],[{provide:l.gN,useFactory:_,deps:[[new e.Optional,l.F]]}]),e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[["class","form-group",4,"ngIf"],[1,"form-group"],[3,"parameters","parameterValue","removable","index","removeParameter","changeParameter",4,"ngFor","ngForOf"],[3,"parameters","parameterValue","removable","index","removeParameter","changeParameter"]],template:function(t,r){1&t&&e.\u0275\u0275template(0,Rt,5,4,"div",0),2&t&&e.\u0275\u0275property("ngIf",r.script)},directives:[p.O5,p.sg,Nt],pipes:[u.X$],styles:[""]}),n})(),At=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({providers:[A,U],imports:[[nt,H.m]]}),n})();e.\u0275\u0275setComponentScope(D,[l._Y,l.JL,l.F,lt,Ut,v.rH,_t,p.O5,p.sg],[u.X$])}}]);