"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[8247,194,8559,2305],{25340:(W,y,o)=>{o.d(y,{M:()=>s});var e=o(5e3),p=o(61135),i=o(39841),E=o(24755),v=o(58943),n=o(31241),c=o(63881),m=o(21721),a=o(24702),M=o(82596),t=o(82703),U=o(62453),O=o(68285),f=o(8108),h=o(86956),d=o(98605),_=o(69808),x=o(38187),I=o(63311);function R(l,g){if(1&l){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",15),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275nextContext(4).deleteLogo()}),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275element(2,"i",16),e.\u0275\u0275elementEnd()}if(2&l){const r=e.\u0275\u0275nextContext(4);e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(1,1,r.type.value+".edit.logo.delete.title"))}}function F(l,g){if(1&l){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",17),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275nextContext(4).undoDeleteLogo()}),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275element(2,"i",18),e.\u0275\u0275elementEnd()}if(2&l){const r=e.\u0275\u0275nextContext(4);e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(1,1,r.type.value+".edit.logo.delete-undo.title"))}}function b(l,g){if(1&l&&(e.\u0275\u0275elementStart(0,"div",12),e.\u0275\u0275template(1,R,3,3,"button",13),e.\u0275\u0275template(2,F,3,3,"button",14),e.\u0275\u0275elementEnd()),2&l){const r=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!r.markLogoForDeletion),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.markLogoForDeletion)}}const j=function(l){return{"alert-danger":l}};function $(l,g){if(1&l&&(e.\u0275\u0275elementStart(0,"div",7)(1,"div",1)(2,"div",8),e.\u0275\u0275element(3,"ds-comcol-page-logo",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",10),e.\u0275\u0275template(5,b,3,2,"div",11),e.\u0275\u0275elementEnd()()()),2&l){const r=e.\u0275\u0275nextContext().ngVar,P=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(3,j,P.markLogoForDeletion)),e.\u0275\u0275advance(3),e.\u0275\u0275property("logo",r),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r)}}function V(l,g){if(1&l){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-uploader",20),e.\u0275\u0275listener("onCompleteItem",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275nextContext(3).onCompleteItem()})("onUploadError",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275nextContext(3).onUploadError()}),e.\u0275\u0275elementEnd()}if(2&l){const r=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("dropMsg",r.type.value+".edit.logo.upload")("dropOverDocumentMsg",r.type.value+".edit.logo.upload")("enableDragOverDocument",!0)("uploadFilesOptions",r.uploadFilesOptions)}}function H(l,g){if(1&l&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275template(1,V,1,4,"ds-uploader",19),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()),2&l){const r=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,1,r.initializedUploaderOptions))}}function u(l,g){if(1&l&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,$,6,5,"div",5),e.\u0275\u0275template(2,H,3,3,"div",6),e.\u0275\u0275elementContainerEnd()),2&l){const r=g.ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!r)}}function L(l,g){if(1&l){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-form",21),e.\u0275\u0275listener("submitForm",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275nextContext().onSubmit()}),e.\u0275\u0275elementStart(1,"button",22),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275nextContext().back.emit()}),e.\u0275\u0275element(2,"i",23),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()}if(2&l){const r=e.\u0275\u0275nextContext();e.\u0275\u0275property("formId","comcol-form-id")("formModel",r.formModel)("displayCancel",!1),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,4,r.type.value+".edit.return")," ")}}let s=(()=>{class l{constructor(r,P,B,C,S,D){this.formService=r,this.translate=P,this.notificationsService=B,this.authService=C,this.requestService=S,this.objectCache=D,this.LABEL_KEY_PREFIX=".form.",this.ERROR_KEY_PREFIX=".form.errors.",this.uploadFilesOptions=Object.assign(new t.n,{autoUpload:!1}),this.submitForm=new e.EventEmitter,this.back=new e.EventEmitter,this.finish=new e.EventEmitter,this.initializedUploaderOptions=new p.X(!1),this.markLogoForDeletion=!1,this.subs=[]}ngOnInit(){this.formModel.forEach(r=>{r.value=this.dso.firstMetadataValue(r.name)}),this.formGroup=this.formService.createFormGroup(this.formModel),this.updateFieldTranslations(),this.translate.onLangChange.subscribe(()=>{this.updateFieldTranslations()}),(0,a.Uh)(this.dso.id)?this.subs.push((0,i.a)([this.dsoService.getLogoEndpoint(this.dso.id),this.dso.logo]).subscribe(([r,P])=>{this.uploadFilesOptions.url=r,this.uploadFilesOptions.authToken=this.authService.buildAuthHeader(),(0,a.Uh)(P.payload)&&(this.uploadFilesOptions.method=c.a.PUT),this.initializedUploaderOptions.next(!0)})):(this.uploadFilesOptions.url="placeholder",this.uploadFilesOptions.authToken=this.authService.buildAuthHeader(),this.initializedUploaderOptions.next(!0))}onSubmit(){this.markLogoForDeletion&&(0,a.Uh)(this.dso.id)&&(0,a.Uh)(this.dso._links.logo)&&this.dsoService.deleteLogo(this.dso).pipe((0,O.hC)()).subscribe(C=>{C.hasSucceeded?this.notificationsService.success(this.translate.get(this.type.value+".edit.logo.notifications.delete.success.title"),this.translate.get(this.type.value+".edit.logo.notifications.delete.success.content")):this.notificationsService.error(this.translate.get(this.type.value+".edit.logo.notifications.delete.error.title"),C.errorMessage),this.dso.logo=void 0,this.uploadFilesOptions.method=c.a.POST,this.finish.emit()});const r={};this.formModel.forEach(C=>{const S={value:C.value,language:null};r.hasOwnProperty(C.name)?r[C.name].push(S):r[C.name]=[S]});const P=Object.assign({},this.dso,{metadata:Object.assign(Object.assign({},this.dso.metadata),r),type:m.S.type}),B=[];this.formModel.forEach(C=>{C.value!==this.dso.firstMetadataValue(C.name)&&B.push({op:"replace",path:`/metadata/${C.name}`,value:{value:C.value,language:null}})}),this.submitForm.emit({dso:P,uploader:(0,a.Uh)(this.uploaderComponent)?this.uploaderComponent.uploader:void 0,deleteLogo:this.markLogoForDeletion,operations:B})}updateFieldTranslations(){this.formModel.forEach(r=>{r.label=this.translate.instant(this.type.value+this.LABEL_KEY_PREFIX+r.id),(0,a.UE)(r.validators)&&(r.errorMessages={},Object.keys(r.validators).forEach(P=>{r.errorMessages[P]=this.translate.instant(this.type.value+this.ERROR_KEY_PREFIX+r.id+"."+P)}))})}deleteLogo(){this.markLogoForDeletion=!0}undoDeleteLogo(){this.markLogoForDeletion=!1}refreshCache(){this.requestService.removeByHrefSubstring(this.dso._links.self.href),this.objectCache.remove(this.dso._links.self.href)}onCompleteItem(){(0,a.Uh)(this.dso.id)&&this.refreshCache(),this.notificationsService.success(null,this.translate.get(this.type.value+".edit.logo.notifications.add.success")),this.finish.emit()}onUploadError(){this.notificationsService.error(null,this.translate.get(this.type.value+".edit.logo.notifications.add.error")),this.finish.emit()}ngOnDestroy(){this.subs.filter(r=>(0,a.Uh)(r)).forEach(r=>r.unsubscribe())}}return l.\u0275fac=function(r){return new(r||l)(e.\u0275\u0275directiveInject(f.w1X),e.\u0275\u0275directiveInject(h.sK),e.\u0275\u0275directiveInject(M.T),e.\u0275\u0275directiveInject(E.e8),e.\u0275\u0275directiveInject(n.s),e.\u0275\u0275directiveInject(v.a))},l.\u0275cmp=e.\u0275\u0275defineComponent({type:l,selectors:[["ds-comcol-form"]],viewQuery:function(r,P){if(1&r&&e.\u0275\u0275viewQuery(U.B,5),2&r){let B;e.\u0275\u0275queryRefresh(B=e.\u0275\u0275loadQuery())&&(P.uploaderComponent=B.first)}},inputs:{dso:"dso"},outputs:{submitForm:"submitForm",back:"back",finish:"finish"},decls:9,vars:7,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","d-inline-block"],[4,"ngVar"],[3,"formId","formModel","displayCancel","submitForm",4,"ngIf"],["class","col-12 d-inline-block alert","id","logo-section",3,"ngClass",4,"ngIf"],["class","col-12 d-inline-block",4,"ngIf"],["id","logo-section",1,"col-12","d-inline-block","alert",3,"ngClass"],[1,"col-8","d-inline-block"],[3,"logo"],[1,"col-4","d-inline-block"],["class","btn-group btn-group-sm float-right","role","group",4,"ngIf"],["role","group",1,"btn-group","btn-group-sm","float-right"],["type","button","class","btn btn-danger",3,"title","click",4,"ngIf"],["type","button","class","btn btn-warning",3,"title","click",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"title","click"],["aria-hidden","true",1,"fas","fa-trash"],["type","button",1,"btn","btn-warning",3,"title","click"],["aria-hidden","true",1,"fas","fa-undo"],[3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","uploadFilesOptions","onCompleteItem","onUploadError",4,"ngIf"],[3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","uploadFilesOptions","onCompleteItem","onUploadError"],[3,"formId","formModel","displayCancel","submitForm"],["before","",1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-left"]],template:function(r,P){if(1&r&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"label"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,u,3,2,"ng-container",3),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(8,L,5,6,"ds-form",4)),2&r){let B;e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,3,P.type.value+".edit.logo.label")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngVar",null==(B=e.\u0275\u0275pipeBind1(7,5,null==P.dso?null:P.dso.logo))?null:B.payload),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",P.formModel)}},directives:[d.g,_.O5,_.mk,x.e,U.B,I.U],pipes:[h.X$,_.Ov],styles:[""]}),l})()},92031:(W,y,o)=>{o.d(y,{k:()=>f});var e=o(95698),p=o(86099),i=o(86266),E=o(16422),v=o(5360),n=o(68285),c=o(24702),m=o(82596),a=o(81964),M=o(31241),t=o(5e3),U=o(74202),O=o(86956);let f=(()=>{class h{constructor(_,x,I,R,F,b,j){this.dsoDataService=_,this.parentDataService=x,this.routeService=I,this.router=R,this.notificationsService=F,this.translate=b,this.requestService=j}ngOnInit(){this.parentUUID$=this.routeService.getQueryParameterValue("parent"),this.parentUUID$.pipe((0,e.q)(1)).subscribe(_=>{(0,c.UE)(_)&&(this.parentRD$=this.parentDataService.findById(_))})}onSubmit(_){const x=_.dso,I=_.uploader;this.parentUUID$.pipe((0,e.q)(1),(0,p.z)(R=>{const F=R?[new a.g("parent",R)]:[];return this.dsoDataService.create(x,...F).pipe((0,n.Gp)())})).subscribe(R=>{(0,c.pT)(R)&&(this.newUUID=R.uuid,I.queue.length>0?this.dsoDataService.getLogoEndpoint(this.newUUID).pipe((0,e.q)(1)).subscribe(F=>{I.options.url=F,I.uploadAll()}):this.navigateToNewPage(),this.dsoDataService.refreshCache(R)),this.notificationsService.success(null,this.translate.get(this.type.value+".create.notifications.success"))})}navigateToHome(){this.router.navigate(["/home"])}navigateToNewPage(){(0,c.Uh)(this.newUUID)&&this.router.navigate([this.frontendURL+this.newUUID])}}return h.\u0275fac=function(_){return new(_||h)(t.\u0275\u0275directiveInject(i.C),t.\u0275\u0275directiveInject(E.w),t.\u0275\u0275directiveInject(v.MZ),t.\u0275\u0275directiveInject(U.F0),t.\u0275\u0275directiveInject(m.T),t.\u0275\u0275directiveInject(O.sK),t.\u0275\u0275directiveInject(M.s))},h.\u0275cmp=t.\u0275\u0275defineComponent({type:h,selectors:[["ds-create-comcol"]],decls:0,vars:0,template:function(_,x){},encapsulation:2}),h})()},80212:(W,y,o)=>{o.d(y,{M:()=>M});var e=o(61135),p=o(50590),i=o(54004),E=o(82596),v=o(68285),n=o(86266),c=o(5e3),m=o(74202),a=o(86956);let M=(()=>{class t{constructor(O,f,h,d,_){this.dsoDataService=O,this.router=f,this.route=h,this.notifications=d,this.translate=_,this.processing$=new e.X(!1)}ngOnInit(){this.dsoRD$=this.route.data.pipe((0,p.P)(),(0,i.U)(O=>O.dso))}onConfirm(O){this.processing$.next(!0),this.dsoDataService.delete(O.id).pipe((0,v.hC)()).subscribe(f=>{if(f.hasSucceeded){const h=this.translate.instant(O.type+".delete.notification.success");this.notifications.success(h)}else{const h=this.translate.instant(O.type+".delete.notification.fail");this.notifications.error(h)}this.router.navigate(["/"])})}onCancel(O){this.router.navigate([this.frontendURL+"/"+O.uuid+"/edit"])}}return t.\u0275fac=function(O){return new(O||t)(c.\u0275\u0275directiveInject(n.C),c.\u0275\u0275directiveInject(m.F0),c.\u0275\u0275directiveInject(m.gz),c.\u0275\u0275directiveInject(E.T),c.\u0275\u0275directiveInject(a.sK))},t.\u0275cmp=c.\u0275\u0275defineComponent({type:t,selectors:[["ds-delete-comcol"]],decls:0,vars:0,template:function(O,f){},encapsulation:2}),t})()},33603:(W,y,o)=>{o.d(y,{b:()=>H});var e=o(61135),p=o(43499),i=o(63900),E=o(39300),v=o(54004),n=o(68285),c=o(31241),m=o(92414),a=o(24702),M=o(82596),t=o(5e3),U=o(86956),O=o(98605),f=o(38605),h=o(69808),d=o(48106),_=o(74202);function x(u,L){1&u&&t.\u0275\u0275element(0,"ds-themed-loading")}function I(u,L){1&u&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&u&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"comcol-role.edit.no-group")," "))}function R(u,L){if(1&u&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275elementEnd()),2&u){const s=t.\u0275\u0275nextContext(2);let l;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"comcol-role.edit."+(null==(l=t.\u0275\u0275pipeBind1(3,3,s.comcolRole$))?null:l.name)+".anonymous-group")," ")}}function F(u,L){if(1&u&&(t.\u0275\u0275elementStart(0,"a",13),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()),2&u){const s=t.\u0275\u0275nextContext().ngVar,l=t.\u0275\u0275nextContext();t.\u0275\u0275propertyInterpolate("routerLink",t.\u0275\u0275pipeBind1(1,2,l.editGroupLink$)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",s.name," ")}}function b(u,L){if(1&u){const s=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",14),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(s),t.\u0275\u0275nextContext(2).create()}),t.\u0275\u0275element(1,"i",15),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}2&u&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,1,"comcol-role.edit.create")," "))}function j(u,L){if(1&u){const s=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",16),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(s),t.\u0275\u0275nextContext(2).create()}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&u&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"comcol-role.edit.restrict")," "))}function $(u,L){if(1&u){const s=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",17),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(s),t.\u0275\u0275nextContext(2).delete()}),t.\u0275\u0275element(1,"i",18),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}2&u&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,1,"comcol-role.edit.delete")," "))}function V(u,L){if(1&u&&(t.\u0275\u0275elementStart(0,"div",1)(1,"h5",2),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",3)(5,"ds-alert",4),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275pipe(8,"async"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"div",5)(10,"div",6),t.\u0275\u0275template(11,x,1,0,"ds-themed-loading",7),t.\u0275\u0275pipe(12,"async"),t.\u0275\u0275template(13,I,3,3,"div",7),t.\u0275\u0275pipe(14,"async"),t.\u0275\u0275template(15,R,4,5,"div",7),t.\u0275\u0275pipe(16,"async"),t.\u0275\u0275template(17,F,3,4,"a",8),t.\u0275\u0275pipe(18,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"div",9),t.\u0275\u0275template(20,b,4,3,"button",10),t.\u0275\u0275pipe(21,"async"),t.\u0275\u0275template(22,j,3,3,"button",11),t.\u0275\u0275pipe(23,"async"),t.\u0275\u0275template(24,$,4,3,"button",12),t.\u0275\u0275pipe(25,"async"),t.\u0275\u0275elementEnd()()()),2&u){const s=t.\u0275\u0275nextContext();let l;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,10,s.roleName$)," "),t.\u0275\u0275advance(3),t.\u0275\u0275property("type","alert-info"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(7,12,"comcol-role.edit."+(null==(l=t.\u0275\u0275pipeBind1(8,14,s.comcolRole$))?null:l.name)+".description")),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",!t.\u0275\u0275pipeBind1(12,16,s.groupRD$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(14,18,s.hasNoGroup$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(16,20,s.hasAnonymousGroup$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(18,22,s.hasCustomGroup$)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(21,24,s.hasNoGroup$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(23,26,s.hasAnonymousGroup$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(25,28,s.hasCustomGroup$))}}let H=(()=>{class u{constructor(s,l,g,r){this.requestService=s,this.groupService=l,this.notificationsService=g,this.translateService=r,this.comcolRole$=new e.X(void 0)}get groupLink(){return this.comcolRole.href}set comcolRole(s){this.comcolRole$.next(s)}get comcolRole(){return this.comcolRole$.getValue()}create(){this.groupService.createComcolGroup(this.dso,this.comcolRole.name,this.groupLink).pipe((0,n.hC)()).subscribe(s=>{s.hasSucceeded?(this.groupService.clearGroupsRequests(),this.requestService.setStaleByHrefSubstring(this.comcolRole.href)):this.notificationsService.error(this.roleName$.pipe((0,i.w)(l=>this.translateService.get("comcol-role.edit.create.error.title",{role:l}))),`${s.statusCode} ${s.errorMessage}`)})}delete(){this.groupService.deleteComcolGroup(this.groupLink).pipe((0,n.hC)()).subscribe(s=>{s.hasSucceeded?(this.groupService.clearGroupsRequests(),this.requestService.setStaleByHrefSubstring(this.comcolRole.href)):this.notificationsService.error(this.roleName$.pipe((0,i.w)(l=>this.translateService.get("comcol-role.edit.delete.error.title",{role:l}))),s.errorMessage)})}ngOnInit(){this.groupRD$=this.comcolRole$.pipe((0,E.h)(s=>(0,a.Uh)(s)),(0,i.w)(s=>this.groupService.findByHref(s.href)),(0,n.f1)()),this.group$=this.groupRD$.pipe((0,v.U)(s=>{if((0,a.Uh)(s.payload))return s.payload})),this.editGroupLink$=this.group$.pipe((0,v.U)(s=>(0,a.Uh)(s)?(0,m.EV)(s.id):void 0)),this.hasNoGroup$=this.group$.pipe((0,v.U)(s=>(0,a.xI)(s))),this.hasAnonymousGroup$=this.group$.pipe((0,v.U)(s=>(0,a.Uh)(s)&&"Anonymous"===s.name)),this.hasCustomGroup$=this.group$.pipe((0,v.U)(s=>(0,a.Uh)(s)&&"Anonymous"!==s.name)),this.roleName$=this.translateService.get(`comcol-role.edit.${this.comcolRole.name}.name`)}}return u.\u0275fac=function(s){return new(s||u)(t.\u0275\u0275directiveInject(c.s),t.\u0275\u0275directiveInject(p.O),t.\u0275\u0275directiveInject(M.T),t.\u0275\u0275directiveInject(U.sK))},u.\u0275cmp=t.\u0275\u0275defineComponent({type:u,selectors:[["ds-comcol-role"]],inputs:{dso:"dso",comcolRole:"comcolRole"},decls:4,vars:8,consts:[["class","card-body d-flex flex-column",4,"ngVar"],[1,"card-body","d-flex","flex-column"],[1,"w-100"],[1,"mt-2","mb-2"],[3,"type"],[1,"d-flex","flex-md-row","justify-content-between","flex-column"],[1,"w-100","d-flex","align-items-center"],[4,"ngIf"],[3,"routerLink",4,"ngIf"],[1,"flex-shrink-0"],["class","btn btn-primary create",3,"click",4,"ngIf"],["class","btn btn-primary restrict",3,"click",4,"ngIf"],["class","btn btn-danger delete",3,"click",4,"ngIf"],[3,"routerLink"],[1,"btn","btn-primary","create",3,"click"],["aria-hidden","true",1,"fas","fa-plus"],[1,"btn","btn-primary","restrict",3,"click"],[1,"btn","btn-danger","delete",3,"click"],["aria-hidden","true",1,"fas","fa-trash"]],template:function(s,l){if(1&s&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275template(2,V,26,30,"div",0),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275elementEnd()),2&s){let g;t.\u0275\u0275classMapInterpolate1("card p-2 m-3 ",null==(g=t.\u0275\u0275pipeBind1(1,4,l.comcolRole$))?null:g.name,""),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngVar",t.\u0275\u0275pipeBind1(3,6,l.group$))}},directives:[O.g,f.w,h.O5,d.Z,_.yS],pipes:[h.Ov,U.X$],styles:[""]}),u})()},29663:(W,y,o)=>{o.d(y,{x:()=>n});var e=o(50590),p=o(54004),i=o(24702),E=o(5e3),v=o(74202);let n=(()=>{class c{constructor(a,M){this.router=a,this.route=M,this.router.events.subscribe(()=>this.initPageParamsByRoute())}ngOnInit(){this.initPageParamsByRoute(),this.pages=this.route.routeConfig.children.map(a=>a.path).filter(a=>(0,i.UE)(a)),this.dsoRD$=this.route.data.pipe((0,e.P)(),(0,p.U)(a=>a.dso))}getPageUrl(a){return this.router.url}initPageParamsByRoute(){this.currentPage=this.route.snapshot.firstChild.routeConfig.path,this.hideReturnButton=this.route.routeConfig.children.find(a=>a.path===this.currentPage).data.hideReturnButton}}return c.\u0275fac=function(a){return new(a||c)(E.\u0275\u0275directiveInject(v.F0),E.\u0275\u0275directiveInject(v.gz))},c.\u0275cmp=E.\u0275\u0275defineComponent({type:c,selectors:[["ds-edit-comcol"]],decls:0,vars:0,template:function(a,M){},encapsulation:2}),c})()},22305:(W,y,o)=>{o.r(y),o.d(y,{ComcolPageBrowseByComponent:()=>O});var e=o(54004),p=o(43438),i=o(95376),E=o(68285),v=o(27645),n=o(5e3),c=o(74202),m=o(69808),a=o(93075),M=o(86956);function t(f,h){if(1&f&&(n.\u0275\u0275elementStart(0,"a",8),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"translate"),n.\u0275\u0275elementEnd()),2&f){const d=h.$implicit;n.\u0275\u0275property("routerLink",d.routerLink)("queryParams",d.params),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(2,3,d.label))}}function U(f,h){if(1&f&&(n.\u0275\u0275elementStart(0,"option",9),n.\u0275\u0275pipe(1,"async"),n.\u0275\u0275text(2),n.\u0275\u0275pipe(3,"translate"),n.\u0275\u0275elementEnd()),2&f){const d=h.$implicit,_=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngValue",d.id),n.\u0275\u0275attribute("selected",n.\u0275\u0275pipeBind1(1,3,_.currentOptionId$)===d.id?"selected":null),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(3,5,d.label))}}let O=(()=>{class f{constructor(d,_,x){this.route=d,this.router=_,this.browseService=x}ngOnInit(){this.browseService.getBrowseDefinitions().pipe((0,E.hC)()).subscribe(d=>{d.hasSucceeded&&(this.allOptions=d.payload.page.map(_=>({id:_.id,label:`browse.comcol.by.${_.id}`,routerLink:`/browse/${_.id}`,params:{scope:this.id}})),"collection"===this.contentType?this.allOptions=[{id:this.id,label:"collection.page.browse.recent.head",routerLink:(0,i.MI)(this.id)},...this.allOptions]:"community"===this.contentType&&(this.allOptions=[{id:this.id,label:"community.all-lists.head",routerLink:(0,p.Ke)(this.id)},...this.allOptions]))}),this.currentOptionId$=this.route.params.pipe((0,e.U)(d=>d.id))}onSelectChange(d){const _=this.allOptions.find(x=>x.id===d);this.router.navigate([_.routerLink],{queryParams:_.params})}}return f.\u0275fac=function(d){return new(d||f)(n.\u0275\u0275directiveInject(c.gz),n.\u0275\u0275directiveInject(c.F0),n.\u0275\u0275directiveInject(v.I))},f.\u0275cmp=n.\u0275\u0275defineComponent({type:f,selectors:[["ds-comcol-page-browse-by"]],inputs:{id:"id",contentType:"contentType"},decls:11,vars:8,consts:[[1,"comcol-browse-label","h5"],["aria-label","Browse Community or Collection",1,"comcol-browse","mb-4"],[1,"d-none","d-sm-block"],[1,"list-group","list-group-horizontal"],["class","list-group-item","routerLinkActive","active",3,"routerLink","queryParams",4,"ngFor","ngForOf"],[1,"d-block","d-sm-none"],["name","browse-type","aria-label","Browse Community or Collection",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["routerLinkActive","active",1,"list-group-item",3,"routerLink","queryParams"],[3,"ngValue"]],template:function(d,_){1&d&&(n.\u0275\u0275elementStart(0,"h2",0),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"nav",1)(4,"div",2)(5,"div",3),n.\u0275\u0275template(6,t,3,5,"a",4),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(7,"div",5)(8,"select",6),n.\u0275\u0275listener("ngModelChange",function(I){return _.onSelectChange(I)}),n.\u0275\u0275pipe(9,"async"),n.\u0275\u0275template(10,U,4,7,"option",7),n.\u0275\u0275elementEnd()()()),2&d&&(n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(2,4,"browse.comcol.head")),n.\u0275\u0275advance(5),n.\u0275\u0275property("ngForOf",_.allOptions),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngModel",n.\u0275\u0275pipeBind1(9,6,_.currentOptionId$)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",_.allOptions))},directives:[m.sg,c.yS,c.Od,a.EJ,a.JJ,a.On,a.YN,a.Kr],pipes:[M.X$,m.Ov],styles:[""]}),f})()},58559:(W,y,o)=>{o.r(y),o.d(y,{ComcolPageHandleComponent:()=>n});var e=o(5e3),p=o(69808),i=o(86956);function E(c,m){if(1&c&&(e.\u0275\u0275elementStart(0,"h2",5),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&c){const a=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,a.title))}}function v(c,m){if(1&c&&(e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275template(1,E,3,3,"h2",2),e.\u0275\u0275elementStart(2,"div",3)(3,"a",4),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&c){const a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.title),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("href",a.getHandle(),e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(a.getHandle())}}let n=(()=>{class c{getHandle(){return this.content}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=e.\u0275\u0275defineComponent({type:c,selectors:[["ds-comcol-page-handle"]],inputs:{title:"title",content:"content"},decls:1,vars:1,consts:[["class","content-with-optional-title mb-2",4,"ngIf"],[1,"content-with-optional-title","mb-2"],["class","d-inline-block h6",4,"ngIf"],[1,"d-inline-block","px-2"],[3,"href"],[1,"d-inline-block","h6"]],template:function(a,M){1&a&&e.\u0275\u0275template(0,v,5,3,"div",0),2&a&&e.\u0275\u0275property("ngIf",M.content)},directives:[p.O5],pipes:[i.X$],styles:["div[_ngcontent-%COMP%]{word-break:break-word;word-wrap:break-word;overflow-wrap:break-word}"]}),c.\u0275prov=e.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c})()},38187:(W,y,o)=>{o.d(y,{e:()=>v}),o(59161);var p=o(5e3),i=o(69808);function E(n,c){if(1&n){const m=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",1)(1,"img",2),p.\u0275\u0275listener("error",function(M){return p.\u0275\u0275restoreView(m),p.\u0275\u0275nextContext().errorHandler(M)}),p.\u0275\u0275elementEnd()()}if(2&n){const m=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275property("src",m.logo._links.content.href,p.\u0275\u0275sanitizeUrl),p.\u0275\u0275attribute("alt",m.alternateText?m.alternateText:null)}}let v=(()=>{class n{constructor(){this.holderSource="data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2293%22%20height%3D%22120%22%20viewBox%3D%220%200%2093%20120%22%20preserveAspectRatio%3D%22none%22%3E%3C!--%0ASource%20URL%3A%20holder.js%2F93x120%3Ftext%3DNo%20Thumbnail%0ACreated%20with%20Holder.js%202.8.2.%0ALearn%20more%20at%20http%3A%2F%2Fholderjs.com%0A(c)%202012-2015%20Ivan%20Malopinsky%20-%20http%3A%2F%2Fimsky.co%0A--%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%3C!%5BCDATA%5B%23holder_1543e460b05%20text%20%7B%20fill%3A%23AAAAAA%3Bfont-weight%3Abold%3Bfont-family%3AArial%2C%20Helvetica%2C%20Open%20Sans%2C%20sans-serif%2C%20monospace%3Bfont-size%3A10pt%20%7D%20%5D%5D%3E%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_1543e460b05%22%3E%3Crect%20width%3D%2293%22%20height%3D%22120%22%20fill%3D%22%23EEEEEE%22%2F%3E%3Cg%3E%3Ctext%20x%3D%2235.6171875%22%20y%3D%2257%22%3ENo%3C%2Ftext%3E%3Ctext%20x%3D%2210.8125%22%20y%3D%2272%22%3EThumbnail%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E"}errorHandler(m){m.currentTarget.src=this.holderSource}}return n.\u0275fac=function(m){return new(m||n)},n.\u0275cmp=p.\u0275\u0275defineComponent({type:n,selectors:[["ds-comcol-page-logo"]],inputs:{logo:"logo",alternateText:"alternateText"},decls:1,vars:1,consts:[["class","dso-logo mb-3",4,"ngIf"],[1,"dso-logo","mb-3"],[1,"img-fluid",3,"src","error"]],template:function(m,a){1&m&&p.\u0275\u0275template(0,E,2,2,"div",0),2&m&&p.\u0275\u0275property("ngIf",a.logo)},directives:[i.O5],styles:[""]}),n})()},18247:(W,y,o)=>{o.d(y,{H:()=>x});var e=o(69808),f=(o(75838),o(58559),o(38934),o(62512),o(38187),o(25340),o(92031),o(29663),o(80212),o(22305),o(56572),o(33603),o(57981)),h=o(10194),d=o(5e3);let x=(()=>{class I{}return I.\u0275fac=function(F){return new(F||I)},I.\u0275mod=d.\u0275\u0275defineNgModule({type:I}),I.\u0275inj=d.\u0275\u0275defineInjector({imports:[[e.ez,h.e,f.m]]}),I})()},10194:(W,y,o)=>{o.d(y,{e:()=>B});var e=o(69808),p=o(63311),i=o(5e3),E=o(8108),v=o(66212);function n(C,S){if(1&C){const D=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"ds-dynamic-form-control-container",1),i.\u0275\u0275listener("dfBlur",function(K){i.\u0275\u0275restoreView(D);const A=i.\u0275\u0275nextContext();return A.onCustomEvent(K,A.blur)})("dfChange",function(K){i.\u0275\u0275restoreView(D);const A=i.\u0275\u0275nextContext();return A.onCustomEvent(K,A.change)})("dfFocus",function(K){i.\u0275\u0275restoreView(D);const A=i.\u0275\u0275nextContext();return A.onCustomEvent(K,A.focus)})("ngbEvent",function(K){i.\u0275\u0275restoreView(D);const A=i.\u0275\u0275nextContext();return A.onCustomEvent(K,A.ngbEvent)}),i.\u0275\u0275elementEnd()}if(2&C){const D=S.$implicit,T=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("d-none",D.hidden),i.\u0275\u0275property("formId",T.formId)("group",T.formGroup)("hasErrorMessaging",D.hasErrorMessages)("hidden",D.hidden)("layout",T.formLayout)("model",D)("templates",T.templates)("asBootstrapFormGroup",!0)}}let c=(()=>{class C extends E.rmD{constructor(D,T){super(D,T),this.blur=new i.EventEmitter,this.change=new i.EventEmitter,this.focus=new i.EventEmitter,this.ngbEvent=new i.EventEmitter}}return C.\u0275fac=function(D){return new(D||C)(i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(E.rJA))},C.\u0275cmp=i.\u0275\u0275defineComponent({type:C,selectors:[["ds-dynamic-form"]],contentQueries:function(D,T,K){if(1&D&&i.\u0275\u0275contentQuery(K,E.ATj,4),2&D){let A;i.\u0275\u0275queryRefresh(A=i.\u0275\u0275loadQuery())&&(T.templates=A)}},viewQuery:function(D,T){if(1&D&&i.\u0275\u0275viewQuery(v.B,5),2&D){let K;i.\u0275\u0275queryRefresh(K=i.\u0275\u0275loadQuery())&&(T.components=K)}},inputs:{formId:"formId",formGroup:"formGroup",formModel:"formModel",formLayout:"formLayout"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",ngbEvent:"ngbEvent"},features:[i.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[[3,"formId","group","hasErrorMessaging","hidden","d-none","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent",4,"ngFor","ngForOf","ngForTrackBy"],[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent"]],template:function(D,T){1&D&&i.\u0275\u0275template(0,n,1,10,"ds-dynamic-form-control-container",0),2&D&&i.\u0275\u0275property("ngForOf",T.formModel)("ngForTrackBy",T.trackByFn)},directives:[e.sg,v.B],encapsulation:2}),C})();o(88766),o(21650),o(8671),o(55648),o(42803),o(28554),o(86471),o(22280),o(74043);var _=o(66319),x=o(79001),j=(o(19869),o(64204),o(53006),o(32272),o(57981)),$=o(86956),V=o(24440),l=(o(93571),o(77410),o(29635),o(13457),o(65806)),g=o(93075),r=o(21283);let B=(()=>{class C{}return C.\u0275fac=function(D){return new(D||C)},C.\u0275mod=i.\u0275\u0275defineNgModule({type:C}),C.\u0275inj=i.\u0275\u0275defineInjector({providers:[{provide:E.y8$,useValue:v._}],imports:[[e.ez,E.H9g,l.zj,V.t,j.m,$.aw]]}),C})();i.\u0275\u0275setComponentScope(_.i,[g.JL,g.sg,g.x0,e.mk,e.sg,v.B],[]),i.\u0275\u0275setComponentScope(x.s,[g.JL,g.sg,g.CE,e.mk,r.Wj,e.sg,r.Zt,r.Bh,g.x0,e.tP,v.B],[]),i.\u0275\u0275setComponentScope(p.U,[g._Y,g.JL,g.sg,c,E.ATj,e.O5],[$.X$,e.Ov])}}]);