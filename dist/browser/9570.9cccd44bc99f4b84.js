"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[9570,8304,8496],{7987:(L,f,o)=>{o.d(f,{M:()=>a});var e=o(70074),m=o(35841),O=o(53426),P=o(28709),h=o(50939),n=o(37958),l=o(44826),_=o(70920),r=o(25839),D=o(16228),t=o(46316),y=o(53858),E=o(5496),C=o(59492),u=o(86553),p=o(41633),c=o(10210),x=o(26616),M=o(61792);function B(s,v){if(1&s){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",15),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext(4).deleteLogo()}),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275element(2,"i",16),e.\u0275\u0275elementEnd()}if(2&s){const i=e.\u0275\u0275nextContext(4);e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(1,1,i.type.value+".edit.logo.delete.title"))}}function R(s,v){if(1&s){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",17),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext(4).undoDeleteLogo()}),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275element(2,"i",18),e.\u0275\u0275elementEnd()}if(2&s){const i=e.\u0275\u0275nextContext(4);e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(1,1,i.type.value+".edit.logo.delete-undo.title"))}}function A(s,v){if(1&s&&(e.\u0275\u0275elementStart(0,"div",12),e.\u0275\u0275template(1,B,3,3,"button",13),e.\u0275\u0275template(2,R,3,3,"button",14),e.\u0275\u0275elementEnd()),2&s){const i=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i.markLogoForDeletion),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.markLogoForDeletion)}}const K=function(s){return{"alert-danger":s}};function b(s,v){if(1&s&&(e.\u0275\u0275elementStart(0,"div",7)(1,"div",1)(2,"div",8),e.\u0275\u0275element(3,"ds-comcol-page-logo",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",10),e.\u0275\u0275template(5,A,3,2,"div",11),e.\u0275\u0275elementEnd()()()),2&s){const i=e.\u0275\u0275nextContext().ngVar,g=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(3,K,g.markLogoForDeletion)),e.\u0275\u0275advance(3),e.\u0275\u0275property("logo",i),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i)}}function W(s,v){if(1&s){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-uploader",20),e.\u0275\u0275listener("onCompleteItem",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext(3).onCompleteItem()})("onUploadError",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext(3).onUploadError()}),e.\u0275\u0275elementEnd()}if(2&s){const i=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("dropMsg",i.type.value+".edit.logo.upload")("dropOverDocumentMsg",i.type.value+".edit.logo.upload")("enableDragOverDocument",!0)("uploadFilesOptions",i.uploadFilesOptions)}}function F(s,v){if(1&s&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275template(1,W,1,4,"ds-uploader",19),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementEnd()),2&s){const i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,1,i.initializedUploaderOptions))}}function d(s,v){if(1&s&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,b,6,5,"div",5),e.\u0275\u0275template(2,F,3,3,"div",6),e.\u0275\u0275elementContainerEnd()),2&s){const i=v.ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!i)}}function U(s,v){if(1&s){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-form",21),e.\u0275\u0275listener("submitForm",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext().onSubmit()}),e.\u0275\u0275elementStart(1,"button",22),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(i),e.\u0275\u0275nextContext().back.emit()}),e.\u0275\u0275element(2,"i",23),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()}if(2&s){const i=e.\u0275\u0275nextContext();e.\u0275\u0275property("formId","comcol-form-id")("formModel",i.formModel)("displayCancel",!1),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,4,i.type.value+".edit.return")," ")}}let a=(()=>{class s{constructor(i,g,I,T,S,j){this.formService=i,this.translate=g,this.notificationsService=I,this.authService=T,this.requestService=S,this.objectCache=j,this.LABEL_KEY_PREFIX=".form.",this.ERROR_KEY_PREFIX=".form.errors.",this.uploadFilesOptions=Object.assign(new t.n,{autoUpload:!1}),this.submitForm=new e.EventEmitter,this.back=new e.EventEmitter,this.finish=new e.EventEmitter,this.initializedUploaderOptions=new m.X(!1),this.markLogoForDeletion=!1,this.subs=[]}ngOnInit(){this.formModel.forEach(i=>{i.value=this.dso.firstMetadataValue(i.name)}),this.formGroup=this.formService.createFormGroup(this.formModel),this.updateFieldTranslations(),this.translate.onLangChange.subscribe(()=>{this.updateFieldTranslations()}),(0,r.Uh)(this.dso.id)?this.subs.push((0,O.a)([this.dsoService.getLogoEndpoint(this.dso.id),this.dso.logo]).subscribe(([i,g])=>{this.uploadFilesOptions.url=i,this.uploadFilesOptions.authToken=this.authService.buildAuthHeader(),(0,r.Uh)(g.payload)&&(this.uploadFilesOptions.method=l.a.PUT),this.initializedUploaderOptions.next(!0)})):(this.uploadFilesOptions.url="placeholder",this.uploadFilesOptions.authToken=this.authService.buildAuthHeader(),this.initializedUploaderOptions.next(!0))}onSubmit(){this.markLogoForDeletion&&(0,r.Uh)(this.dso.id)&&(0,r.Uh)(this.dso._links.logo)&&this.dsoService.deleteLogo(this.dso).pipe((0,E.hC)()).subscribe(T=>{T.hasSucceeded?this.notificationsService.success(this.translate.get(this.type.value+".edit.logo.notifications.delete.success.title"),this.translate.get(this.type.value+".edit.logo.notifications.delete.success.content")):this.notificationsService.error(this.translate.get(this.type.value+".edit.logo.notifications.delete.error.title"),T.errorMessage),this.dso.logo=void 0,this.uploadFilesOptions.method=l.a.POST,this.finish.emit()});const i={};this.formModel.forEach(T=>{const S={value:T.value,language:null};i.hasOwnProperty(T.name)?i[T.name].push(S):i[T.name]=[S]});const g=Object.assign({},this.dso,{metadata:Object.assign(Object.assign({},this.dso.metadata),i),type:_.S.type}),I=[];this.formModel.forEach(T=>{T.value!==this.dso.firstMetadataValue(T.name)&&I.push({op:"replace",path:`/metadata/${T.name}`,value:{value:T.value,language:null}})}),this.submitForm.emit({dso:g,uploader:(0,r.Uh)(this.uploaderComponent)?this.uploaderComponent.uploader:void 0,deleteLogo:this.markLogoForDeletion,operations:I})}updateFieldTranslations(){this.formModel.forEach(i=>{i.label=this.translate.instant(this.type.value+this.LABEL_KEY_PREFIX+i.id),(0,r.UE)(i.validators)&&(i.errorMessages={},Object.keys(i.validators).forEach(g=>{i.errorMessages[g]=this.translate.instant(this.type.value+this.ERROR_KEY_PREFIX+i.id+"."+g)}))})}deleteLogo(){this.markLogoForDeletion=!0}undoDeleteLogo(){this.markLogoForDeletion=!1}refreshCache(){this.requestService.removeByHrefSubstring(this.dso._links.self.href),this.objectCache.remove(this.dso._links.self.href)}onCompleteItem(){(0,r.Uh)(this.dso.id)&&this.refreshCache(),this.notificationsService.success(null,this.translate.get(this.type.value+".edit.logo.notifications.add.success")),this.finish.emit()}onUploadError(){this.notificationsService.error(null,this.translate.get(this.type.value+".edit.logo.notifications.add.error")),this.finish.emit()}ngOnDestroy(){this.subs.filter(i=>(0,r.Uh)(i)).forEach(i=>i.unsubscribe())}}return s.\u0275fac=function(i){return new(i||s)(e.\u0275\u0275directiveInject(C.w1X),e.\u0275\u0275directiveInject(u.sK),e.\u0275\u0275directiveInject(D.T),e.\u0275\u0275directiveInject(P.e8),e.\u0275\u0275directiveInject(n.s),e.\u0275\u0275directiveInject(h.a))},s.\u0275cmp=e.\u0275\u0275defineComponent({type:s,selectors:[["ds-comcol-form"]],viewQuery:function(i,g){if(1&i&&e.\u0275\u0275viewQuery(y.B,5),2&i){let I;e.\u0275\u0275queryRefresh(I=e.\u0275\u0275loadQuery())&&(g.uploaderComponent=I.first)}},inputs:{dso:"dso"},outputs:{submitForm:"submitForm",back:"back",finish:"finish"},decls:9,vars:7,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","d-inline-block"],[4,"ngVar"],[3,"formId","formModel","displayCancel","submitForm",4,"ngIf"],["class","col-12 d-inline-block alert","id","logo-section",3,"ngClass",4,"ngIf"],["class","col-12 d-inline-block",4,"ngIf"],["id","logo-section",1,"col-12","d-inline-block","alert",3,"ngClass"],[1,"col-8","d-inline-block"],[3,"logo"],[1,"col-4","d-inline-block"],["class","btn-group btn-group-sm float-right","role","group",4,"ngIf"],["role","group",1,"btn-group","btn-group-sm","float-right"],["type","button","class","btn btn-danger",3,"title","click",4,"ngIf"],["type","button","class","btn btn-warning",3,"title","click",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"title","click"],["aria-hidden","true",1,"fas","fa-trash"],["type","button",1,"btn","btn-warning",3,"title","click"],["aria-hidden","true",1,"fas","fa-undo"],[3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","uploadFilesOptions","onCompleteItem","onUploadError",4,"ngIf"],[3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","uploadFilesOptions","onCompleteItem","onUploadError"],[3,"formId","formModel","displayCancel","submitForm"],["before","",1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-left"]],template:function(i,g){if(1&i&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"label"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(6,d,3,2,"ng-container",3),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(8,U,5,6,"ds-form",4)),2&i){let I;e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,3,g.type.value+".edit.logo.label")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngVar",null==(I=e.\u0275\u0275pipeBind1(7,5,null==g.dso?null:g.dso.logo))?null:I.payload),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",g.formModel)}},directives:[p.g,c.O5,c.mk,x.e,y.B,M.U],pipes:[u.X$,c.Ov],styles:[""]}),s})()},81175:(L,f,o)=>{o.d(f,{k:()=>C});var e=o(77176),m=o(69637),O=o(92322),P=o(63749),h=o(43685),n=o(5496),l=o(25839),_=o(16228),r=o(68862),D=o(37958),t=o(70074),y=o(37895),E=o(86553);let C=(()=>{class u{constructor(c,x,M,B,R,A,K){this.dsoDataService=c,this.parentDataService=x,this.routeService=M,this.router=B,this.notificationsService=R,this.translate=A,this.requestService=K}ngOnInit(){this.parentUUID$=this.routeService.getQueryParameterValue("parent"),this.parentUUID$.pipe((0,e.q)(1)).subscribe(c=>{(0,l.UE)(c)&&(this.parentRD$=this.parentDataService.findById(c))})}onSubmit(c){const x=c.dso,M=c.uploader;this.parentUUID$.pipe((0,e.q)(1),(0,m.z)(B=>{const R=B?[new r.g("parent",B)]:[];return this.dsoDataService.create(x,...R).pipe((0,n.Gp)())})).subscribe(B=>{(0,l.pT)(B)&&(this.newUUID=B.uuid,M.queue.length>0?this.dsoDataService.getLogoEndpoint(this.newUUID).pipe((0,e.q)(1)).subscribe(R=>{M.options.url=R,M.uploadAll()}):this.navigateToNewPage(),this.dsoDataService.refreshCache(B)),this.notificationsService.success(null,this.translate.get(this.type.value+".create.notifications.success"))})}navigateToHome(){this.router.navigate(["/home"])}navigateToNewPage(){(0,l.Uh)(this.newUUID)&&this.router.navigate([this.frontendURL+this.newUUID])}}return u.\u0275fac=function(c){return new(c||u)(t.\u0275\u0275directiveInject(O.C),t.\u0275\u0275directiveInject(P.w),t.\u0275\u0275directiveInject(h.MZ),t.\u0275\u0275directiveInject(y.F0),t.\u0275\u0275directiveInject(_.T),t.\u0275\u0275directiveInject(E.sK),t.\u0275\u0275directiveInject(D.s))},u.\u0275cmp=t.\u0275\u0275defineComponent({type:u,selectors:[["ds-create-comcol"]],decls:0,vars:0,template:function(c,x){},encapsulation:2}),u})()},6781:(L,f,o)=>{o.d(f,{M:()=>D});var e=o(35841),m=o(76215),O=o(48358),P=o(16228),h=o(5496),n=o(92322),l=o(70074),_=o(37895),r=o(86553);let D=(()=>{class t{constructor(E,C,u,p,c){this.dsoDataService=E,this.router=C,this.route=u,this.notifications=p,this.translate=c,this.processing$=new e.X(!1)}ngOnInit(){this.dsoRD$=this.route.data.pipe((0,m.P)(),(0,O.U)(E=>E.dso))}onConfirm(E){this.processing$.next(!0),this.dsoDataService.delete(E.id).pipe((0,h.hC)()).subscribe(C=>{if(C.hasSucceeded){const u=this.translate.instant(E.type+".delete.notification.success");this.notifications.success(u)}else{const u=this.translate.instant(E.type+".delete.notification.fail");this.notifications.error(u)}this.router.navigate(["/"])})}onCancel(E){this.router.navigate([this.frontendURL+"/"+E.uuid+"/edit"])}}return t.\u0275fac=function(E){return new(E||t)(l.\u0275\u0275directiveInject(n.C),l.\u0275\u0275directiveInject(_.F0),l.\u0275\u0275directiveInject(_.gz),l.\u0275\u0275directiveInject(P.T),l.\u0275\u0275directiveInject(r.sK))},t.\u0275cmp=l.\u0275\u0275defineComponent({type:t,selectors:[["ds-delete-comcol"]],decls:0,vars:0,template:function(E,C){},encapsulation:2}),t})()},1808:(L,f,o)=>{o.d(f,{b:()=>F});var e=o(35841),m=o(96652),O=o(21160),P=o(77007),h=o(48358),n=o(5496),l=o(37958),_=o(12838),r=o(25839),D=o(16228),t=o(70074),y=o(86553),E=o(41633),C=o(7519),u=o(10210),p=o(76924),c=o(37895);function x(d,U){1&d&&t.\u0275\u0275element(0,"ds-themed-loading")}function M(d,U){1&d&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&d&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"comcol-role.edit.no-group")," "))}function B(d,U){if(1&d&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275elementEnd()),2&d){const a=t.\u0275\u0275nextContext(2);let s;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"comcol-role.edit."+(null==(s=t.\u0275\u0275pipeBind1(3,3,a.comcolRole$))?null:s.name)+".anonymous-group")," ")}}function R(d,U){if(1&d&&(t.\u0275\u0275elementStart(0,"a",13),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()),2&d){const a=t.\u0275\u0275nextContext().ngVar,s=t.\u0275\u0275nextContext();t.\u0275\u0275propertyInterpolate("routerLink",t.\u0275\u0275pipeBind1(1,2,s.editGroupLink$)),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",a.name," ")}}function A(d,U){if(1&d){const a=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",14),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(a),t.\u0275\u0275nextContext(2).create()}),t.\u0275\u0275element(1,"i",15),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}2&d&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,1,"comcol-role.edit.create")," "))}function K(d,U){if(1&d){const a=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",16),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(a),t.\u0275\u0275nextContext(2).create()}),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()}2&d&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(2,1,"comcol-role.edit.restrict")," "))}function b(d,U){if(1&d){const a=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"button",17),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(a),t.\u0275\u0275nextContext(2).delete()}),t.\u0275\u0275element(1,"i",18),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd()}2&d&&(t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,1,"comcol-role.edit.delete")," "))}function W(d,U){if(1&d&&(t.\u0275\u0275elementStart(0,"div",1)(1,"h5",2),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",3)(5,"ds-alert",4),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275pipe(8,"async"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(9,"div",5)(10,"div",6),t.\u0275\u0275template(11,x,1,0,"ds-themed-loading",7),t.\u0275\u0275pipe(12,"async"),t.\u0275\u0275template(13,M,3,3,"div",7),t.\u0275\u0275pipe(14,"async"),t.\u0275\u0275template(15,B,4,5,"div",7),t.\u0275\u0275pipe(16,"async"),t.\u0275\u0275template(17,R,3,4,"a",8),t.\u0275\u0275pipe(18,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"div",9),t.\u0275\u0275template(20,A,4,3,"button",10),t.\u0275\u0275pipe(21,"async"),t.\u0275\u0275template(22,K,3,3,"button",11),t.\u0275\u0275pipe(23,"async"),t.\u0275\u0275template(24,b,4,3,"button",12),t.\u0275\u0275pipe(25,"async"),t.\u0275\u0275elementEnd()()()),2&d){const a=t.\u0275\u0275nextContext();let s;t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(3,10,a.roleName$)," "),t.\u0275\u0275advance(3),t.\u0275\u0275property("type","alert-info"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(7,12,"comcol-role.edit."+(null==(s=t.\u0275\u0275pipeBind1(8,14,a.comcolRole$))?null:s.name)+".description")),t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf",!t.\u0275\u0275pipeBind1(12,16,a.groupRD$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(14,18,a.hasNoGroup$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(16,20,a.hasAnonymousGroup$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(18,22,a.hasCustomGroup$)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(21,24,a.hasNoGroup$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(23,26,a.hasAnonymousGroup$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(25,28,a.hasCustomGroup$))}}let F=(()=>{class d{constructor(a,s,v,i){this.requestService=a,this.groupService=s,this.notificationsService=v,this.translateService=i,this.comcolRole$=new e.X(void 0)}get groupLink(){return this.comcolRole.href}set comcolRole(a){this.comcolRole$.next(a)}get comcolRole(){return this.comcolRole$.getValue()}create(){this.groupService.createComcolGroup(this.dso,this.comcolRole.name,this.groupLink).pipe((0,n.hC)()).subscribe(a=>{a.hasSucceeded?(this.groupService.clearGroupsRequests(),this.requestService.setStaleByHrefSubstring(this.comcolRole.href)):this.notificationsService.error(this.roleName$.pipe((0,O.w)(s=>this.translateService.get("comcol-role.edit.create.error.title",{role:s}))),`${a.statusCode} ${a.errorMessage}`)})}delete(){this.groupService.deleteComcolGroup(this.groupLink).pipe((0,n.hC)()).subscribe(a=>{a.hasSucceeded?(this.groupService.clearGroupsRequests(),this.requestService.setStaleByHrefSubstring(this.comcolRole.href)):this.notificationsService.error(this.roleName$.pipe((0,O.w)(s=>this.translateService.get("comcol-role.edit.delete.error.title",{role:s}))),a.errorMessage)})}ngOnInit(){this.groupRD$=this.comcolRole$.pipe((0,P.h)(a=>(0,r.Uh)(a)),(0,O.w)(a=>this.groupService.findByHref(a.href)),(0,n.f1)()),this.group$=this.groupRD$.pipe((0,h.U)(a=>{if((0,r.Uh)(a.payload))return a.payload})),this.editGroupLink$=this.group$.pipe((0,h.U)(a=>(0,r.Uh)(a)?(0,_.EV)(a.id):void 0)),this.hasNoGroup$=this.group$.pipe((0,h.U)(a=>(0,r.xI)(a))),this.hasAnonymousGroup$=this.group$.pipe((0,h.U)(a=>(0,r.Uh)(a)&&"Anonymous"===a.name)),this.hasCustomGroup$=this.group$.pipe((0,h.U)(a=>(0,r.Uh)(a)&&"Anonymous"!==a.name)),this.roleName$=this.translateService.get(`comcol-role.edit.${this.comcolRole.name}.name`)}}return d.\u0275fac=function(a){return new(a||d)(t.\u0275\u0275directiveInject(l.s),t.\u0275\u0275directiveInject(m.O),t.\u0275\u0275directiveInject(D.T),t.\u0275\u0275directiveInject(y.sK))},d.\u0275cmp=t.\u0275\u0275defineComponent({type:d,selectors:[["ds-comcol-role"]],inputs:{dso:"dso",comcolRole:"comcolRole"},decls:4,vars:8,consts:[["class","card-body d-flex flex-column",4,"ngVar"],[1,"card-body","d-flex","flex-column"],[1,"w-100"],[1,"mt-2","mb-2"],[3,"type"],[1,"d-flex","flex-md-row","justify-content-between","flex-column"],[1,"w-100","d-flex","align-items-center"],[4,"ngIf"],[3,"routerLink",4,"ngIf"],[1,"flex-shrink-0"],["class","btn btn-primary create",3,"click",4,"ngIf"],["class","btn btn-primary restrict",3,"click",4,"ngIf"],["class","btn btn-danger delete",3,"click",4,"ngIf"],[3,"routerLink"],[1,"btn","btn-primary","create",3,"click"],["aria-hidden","true",1,"fas","fa-plus"],[1,"btn","btn-primary","restrict",3,"click"],[1,"btn","btn-danger","delete",3,"click"],["aria-hidden","true",1,"fas","fa-trash"]],template:function(a,s){if(1&a&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275template(2,W,26,30,"div",0),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275elementEnd()),2&a){let v;t.\u0275\u0275classMapInterpolate1("card p-2 m-3 ",null==(v=t.\u0275\u0275pipeBind1(1,4,s.comcolRole$))?null:v.name,""),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngVar",t.\u0275\u0275pipeBind1(3,6,s.group$))}},directives:[E.g,C.w,u.O5,p.Z,c.yS],pipes:[u.Ov,y.X$],styles:[""]}),d})()},31583:(L,f,o)=>{o.d(f,{x:()=>n});var e=o(76215),m=o(48358),O=o(25839),P=o(70074),h=o(37895);let n=(()=>{class l{constructor(r,D){this.router=r,this.route=D,this.router.events.subscribe(()=>this.initPageParamsByRoute())}ngOnInit(){this.initPageParamsByRoute(),this.pages=this.route.routeConfig.children.map(r=>r.path).filter(r=>(0,O.UE)(r)),this.dsoRD$=this.route.data.pipe((0,e.P)(),(0,m.U)(r=>r.dso))}getPageUrl(r){return this.router.url}initPageParamsByRoute(){this.currentPage=this.route.snapshot.firstChild.routeConfig.path,this.hideReturnButton=this.route.routeConfig.children.find(r=>r.path===this.currentPage).data.hideReturnButton}}return l.\u0275fac=function(r){return new(r||l)(P.\u0275\u0275directiveInject(h.F0),P.\u0275\u0275directiveInject(h.gz))},l.\u0275cmp=P.\u0275\u0275defineComponent({type:l,selectors:[["ds-edit-comcol"]],decls:0,vars:0,template:function(r,D){},encapsulation:2}),l})()},98496:(L,f,o)=>{o.r(f),o.d(f,{ComcolPageBrowseByComponent:()=>E});var e=o(48358),m=o(18595),O=o(10954),P=o(5496),h=o(17373),n=o(70074),l=o(37895),_=o(10210),r=o(45028),D=o(86553);function t(C,u){if(1&C&&(n.\u0275\u0275elementStart(0,"a",8),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"translate"),n.\u0275\u0275elementEnd()),2&C){const p=u.$implicit;n.\u0275\u0275property("routerLink",p.routerLink)("queryParams",p.params),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(2,3,p.label))}}function y(C,u){if(1&C&&(n.\u0275\u0275elementStart(0,"option",9),n.\u0275\u0275pipe(1,"async"),n.\u0275\u0275text(2),n.\u0275\u0275pipe(3,"translate"),n.\u0275\u0275elementEnd()),2&C){const p=u.$implicit,c=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngValue",p.id),n.\u0275\u0275attribute("selected",n.\u0275\u0275pipeBind1(1,3,c.currentOptionId$)===p.id?"selected":null),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(3,5,p.label))}}let E=(()=>{class C{constructor(p,c,x){this.route=p,this.router=c,this.browseService=x}ngOnInit(){this.browseService.getBrowseDefinitions().pipe((0,P.hC)()).subscribe(p=>{p.hasSucceeded&&(this.allOptions=p.payload.page.map(c=>({id:c.id,label:`browse.comcol.by.${c.id}`,routerLink:`/browse/${c.id}`,params:{scope:this.id}})),"collection"===this.contentType?this.allOptions=[{id:this.id,label:"collection.page.browse.recent.head",routerLink:(0,O.MI)(this.id)},...this.allOptions]:"community"===this.contentType&&(this.allOptions=[{id:this.id,label:"community.all-lists.head",routerLink:(0,m.Ke)(this.id)},...this.allOptions]))}),this.currentOptionId$=this.route.params.pipe((0,e.U)(p=>p.id))}onSelectChange(p){const c=this.allOptions.find(x=>x.id===p);this.router.navigate([c.routerLink],{queryParams:c.params})}}return C.\u0275fac=function(p){return new(p||C)(n.\u0275\u0275directiveInject(l.gz),n.\u0275\u0275directiveInject(l.F0),n.\u0275\u0275directiveInject(h.I))},C.\u0275cmp=n.\u0275\u0275defineComponent({type:C,selectors:[["ds-comcol-page-browse-by"]],inputs:{id:"id",contentType:"contentType"},decls:11,vars:8,consts:[[1,"comcol-browse-label","h5"],["aria-label","Browse Community or Collection",1,"comcol-browse","mb-4"],[1,"d-none","d-sm-block"],[1,"list-group","list-group-horizontal"],["class","list-group-item","routerLinkActive","active",3,"routerLink","queryParams",4,"ngFor","ngForOf"],[1,"d-block","d-sm-none"],["name","browse-type","aria-label","Browse Community or Collection",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["routerLinkActive","active",1,"list-group-item",3,"routerLink","queryParams"],[3,"ngValue"]],template:function(p,c){1&p&&(n.\u0275\u0275elementStart(0,"h2",0),n.\u0275\u0275text(1),n.\u0275\u0275pipe(2,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(3,"nav",1)(4,"div",2)(5,"div",3),n.\u0275\u0275template(6,t,3,5,"a",4),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(7,"div",5)(8,"select",6),n.\u0275\u0275listener("ngModelChange",function(M){return c.onSelectChange(M)}),n.\u0275\u0275pipe(9,"async"),n.\u0275\u0275template(10,y,4,7,"option",7),n.\u0275\u0275elementEnd()()()),2&p&&(n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(2,4,"browse.comcol.head")),n.\u0275\u0275advance(5),n.\u0275\u0275property("ngForOf",c.allOptions),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngModel",n.\u0275\u0275pipeBind1(9,6,c.currentOptionId$)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",c.allOptions))},directives:[_.sg,l.yS,l.Od,r.EJ,r.JJ,r.On,r.YN,r.Kr],pipes:[D.X$,_.Ov],styles:["a[_ngcontent-%COMP%]{color:#da1212}a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:focus{color:#da1212}a[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:focus{text-decoration:underline;box-shadow:none}a[_ngcontent-%COMP%]:disabled{color:#da1212}.list-group-item.active[_ngcontent-%COMP%]{color:#fff!important;background-color:#da1212!important;border-color:#da1212!important}"]}),C})()},8304:(L,f,o)=>{o.r(f),o.d(f,{ComcolPageHandleComponent:()=>n});var e=o(70074),m=o(10210),O=o(86553);function P(l,_){if(1&l&&(e.\u0275\u0275elementStart(0,"h2",5),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&l){const r=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,r.title))}}function h(l,_){if(1&l&&(e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275template(1,P,3,3,"h2",2),e.\u0275\u0275elementStart(2,"div",3)(3,"a",4),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&l){const r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",r.title),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("href",r.getHandle(),e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(r.getHandle())}}let n=(()=>{class l{getHandle(){return this.content}}return l.\u0275fac=function(r){return new(r||l)},l.\u0275cmp=e.\u0275\u0275defineComponent({type:l,selectors:[["ds-comcol-page-handle"]],inputs:{title:"title",content:"content"},decls:1,vars:1,consts:[["class","content-with-optional-title mb-2",4,"ngIf"],[1,"content-with-optional-title","mb-2"],["class","d-inline-block h6",4,"ngIf"],[1,"d-inline-block","px-2"],[3,"href"],[1,"d-inline-block","h6"]],template:function(r,D){1&r&&e.\u0275\u0275template(0,h,5,3,"div",0),2&r&&e.\u0275\u0275property("ngIf",D.content)},directives:[m.O5],pipes:[O.X$],styles:["div[_ngcontent-%COMP%]{word-break:break-word;word-wrap:break-word;overflow-wrap:break-word}"]}),l.\u0275prov=e.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})()},26616:(L,f,o)=>{o.d(f,{e:()=>h}),o(87844);var m=o(70074),O=o(10210);function P(n,l){if(1&n){const _=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"div",1)(1,"img",2),m.\u0275\u0275listener("error",function(D){return m.\u0275\u0275restoreView(_),m.\u0275\u0275nextContext().errorHandler(D)}),m.\u0275\u0275elementEnd()()}if(2&n){const _=m.\u0275\u0275nextContext();m.\u0275\u0275advance(1),m.\u0275\u0275property("src",_.logo._links.content.href,m.\u0275\u0275sanitizeUrl),m.\u0275\u0275attribute("alt",_.alternateText?_.alternateText:null)}}let h=(()=>{class n{constructor(){this.holderSource="data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2293%22%20height%3D%22120%22%20viewBox%3D%220%200%2093%20120%22%20preserveAspectRatio%3D%22none%22%3E%3C!--%0ASource%20URL%3A%20holder.js%2F93x120%3Ftext%3DNo%20Thumbnail%0ACreated%20with%20Holder.js%202.8.2.%0ALearn%20more%20at%20http%3A%2F%2Fholderjs.com%0A(c)%202012-2015%20Ivan%20Malopinsky%20-%20http%3A%2F%2Fimsky.co%0A--%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%3C!%5BCDATA%5B%23holder_1543e460b05%20text%20%7B%20fill%3A%23AAAAAA%3Bfont-weight%3Abold%3Bfont-family%3AArial%2C%20Helvetica%2C%20Open%20Sans%2C%20sans-serif%2C%20monospace%3Bfont-size%3A10pt%20%7D%20%5D%5D%3E%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_1543e460b05%22%3E%3Crect%20width%3D%2293%22%20height%3D%22120%22%20fill%3D%22%23EEEEEE%22%2F%3E%3Cg%3E%3Ctext%20x%3D%2235.6171875%22%20y%3D%2257%22%3ENo%3C%2Ftext%3E%3Ctext%20x%3D%2210.8125%22%20y%3D%2272%22%3EThumbnail%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E"}errorHandler(_){_.currentTarget.src=this.holderSource}}return n.\u0275fac=function(_){return new(_||n)},n.\u0275cmp=m.\u0275\u0275defineComponent({type:n,selectors:[["ds-comcol-page-logo"]],inputs:{logo:"logo",alternateText:"alternateText"},decls:1,vars:1,consts:[["class","dso-logo mb-3",4,"ngIf"],[1,"dso-logo","mb-3"],[1,"img-fluid",3,"src","error"]],template:function(_,r){1&_&&m.\u0275\u0275template(0,P,2,2,"div",0),2&_&&m.\u0275\u0275property("ngIf",r.logo)},directives:[O.O5],styles:[""]}),n})()},39570:(L,f,o)=>{o.d(f,{H:()=>x});var e=o(10210),C=(o(88908),o(8304),o(81588),o(10957),o(26616),o(7987),o(81175),o(31583),o(6781),o(98496),o(82104),o(1808),o(66004)),u=o(48197),p=o(70074);let x=(()=>{class M{}return M.\u0275fac=function(R){return new(R||M)},M.\u0275mod=p.\u0275\u0275defineNgModule({type:M}),M.\u0275inj=p.\u0275\u0275defineInjector({imports:[[e.ez,u.e,C.m]]}),M})()}}]);