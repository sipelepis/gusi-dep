"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[3e3,194],{92414:(W,B,i)=>{i.d(B,{CH:()=>r,EV:()=>h});var m=i(23631),D=i(50503);const r="groups";function h(S){return new m.R((0,D.sr)(),r,S).toString()}},99529:(W,B,i)=>{i.r(B),i.d(B,{BitstreamPageModule:()=>Bt});var m=i(69808),D=i(57981),r=i(74202),c=i(54004),h=i(63900),S=i(86099),L=i(39841),E=i(39646),I=i(8108),_=i(45014),O=i(17489),T=i(48532),s=i(68285),U=i(82596),F=i(9367),N=i(70178),u=i(24702),A=i(94569),j=i(40747),C=i(19260),H=i(67779),e=i(5e3),G=i(86956),K=i(83616),X=i(98605),Y=i(4775),J=i(63311),z=i(93075),Q=i(41971),Z=i(48106),x=i(54202);const $=function(n){return["/bitstreams",n,"authorizations"]};function rt(n,l){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ds-form",12),e.\u0275\u0275listener("submitForm",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext(4).onSubmit()})("cancel",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext(4).onCancel()})("dfChange",function(a){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext(4).onChange(a)}),e.\u0275\u0275elementStart(1,"div",13)(2,"a",14),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext(3).ngVar,o=e.\u0275\u0275nextContext();e.\u0275\u0275property("formId","edit-bitstream-form-id")("formGroup",o.formGroup)("formModel",o.formModel)("formLayout",o.formLayout)("submitLabel","form.save"),e.\u0275\u0275advance(2),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction1(9,$,null==t||null==t.payload?null:t.payload.id)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,7,"bitstream.edit.authorizations.link"))}}function k(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",5)(1,"div",6),e.\u0275\u0275element(2,"ds-thumbnail",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",8)(4,"div",2)(5,"div",5)(6,"div",9)(7,"h3"),e.\u0275\u0275text(8),e.\u0275\u0275elementStart(9,"span",10),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"dsFileSize"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275template(12,rt,5,11,"ds-form",11),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2).ngVar,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("thumbnail",null==t?null:t.payload),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1("",null==t||null==t.payload?null:t.payload.name," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("(",e.\u0275\u0275pipeBind1(11,4,null==t||null==t.payload?null:t.payload.sizeBytes),")"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.formGroup)}}function p(n,l){1&n&&(e.\u0275\u0275element(0,"ds-error",15),e.\u0275\u0275pipe(1,"translate")),2&n&&e.\u0275\u0275propertyInterpolate("message",e.\u0275\u0275pipeBind1(1,1,"error.bitstream"))}function P(n,l){1&n&&(e.\u0275\u0275element(0,"ds-themed-loading",15),e.\u0275\u0275pipe(1,"translate")),2&n&&e.\u0275\u0275propertyInterpolate("message",e.\u0275\u0275pipeBind1(1,1,"loading.bitstream"))}function d(n,l){if(1&n&&(e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275template(1,k,13,6,"div",3),e.\u0275\u0275template(2,p,2,3,"ds-error",4),e.\u0275\u0275template(3,P,2,3,"ds-themed-loading",4),e.\u0275\u0275elementEnd()),2&n){const t=l.ngVar,o=e.\u0275\u0275nextContext().ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==o?null:o.hasSucceeded)&&(null==t?null:t.hasSucceeded)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==o?null:o.hasFailed),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!o||!t||(null==o?null:o.isLoading)||(null==t?null:t.isLoading))}}function f(n,l){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,d,4,3,"div",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngVar",e.\u0275\u0275pipeBind1(2,1,t.bitstreamFormatsRD$))}}let b=(()=>{class n{constructor(t,o,a,v,M,g,nt,R,V,ot){this.route=t,this.router=o,this.changeDetectorRef=a,this.location=v,this.formService=M,this.translate=g,this.bitstreamService=nt,this.dsoNameService=R,this.notificationsService=V,this.bitstreamFormatService=ot,this.KEY_PREFIX="bitstream.edit.form.",this.LABEL_KEY_SUFFIX=".label",this.HINT_KEY_SUFFIX=".hint",this.NOTIFICATIONS_PREFIX="bitstream.edit.notifications.",this.IMAGE_WIDTH_METADATA="iiif.image.width",this.IMAGE_HEIGHT_METADATA="iiif.image.height",this.IIIF_TOC_METADATA="iiif.toc",this.IIIF_LABEL_METADATA="iiif.label",this.findAllOptions={elementsPerPage:9999},this.fileNameModel=new C.u({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"fileName",name:"fileName",required:!0,validators:{required:null},errorMessages:{required:"You must provide a file name for the bitstream"}}),this.primaryBitstreamModel=new _.p({id:"primaryBitstream",name:"primaryBitstream"}),this.descriptionModel=new H.D({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"description",name:"description",rows:10}),this.selectedFormatModel=new I.nMt({id:"selectedFormat",name:"selectedFormat"}),this.newFormatModel=new I.b1u({id:"newFormat",name:"newFormat"}),this.iiifLabelModel=new C.u({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"iiifLabel",name:"iiifLabel"},{grid:{host:"col col-lg-6 d-inline-block"}}),this.iiifLabelContainer=new I.S_O({id:"iiifLabelContainer",group:[this.iiifLabelModel]},{grid:{host:"form-row"}}),this.iiifTocModel=new C.u({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"iiifToc",name:"iiifToc"},{grid:{host:"col col-lg-6 d-inline-block"}}),this.iiifTocContainer=new I.S_O({id:"iiifTocContainer",group:[this.iiifTocModel]},{grid:{host:"form-row"}}),this.iiifWidthModel=new C.u({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"iiifWidth",name:"iiifWidth"},{grid:{host:"col col-lg-6 d-inline-block"}}),this.iiifWidthContainer=new I.S_O({id:"iiifWidthContainer",group:[this.iiifWidthModel]},{grid:{host:"form-row"}}),this.iiifHeightModel=new C.u({hasSelectableMetadata:!1,metadataFields:[],repeatable:!1,submissionId:"",id:"iiifHeight",name:"iiifHeight"},{grid:{host:"col col-lg-6 d-inline-block"}}),this.iiifHeightContainer=new I.S_O({id:"iiifHeightContainer",group:[this.iiifHeightModel]},{grid:{host:"form-row"}}),this.inputModels=[this.fileNameModel,this.primaryBitstreamModel,this.descriptionModel,this.selectedFormatModel,this.newFormatModel],this.formModel=[new I.S_O({id:"fileNamePrimaryContainer",group:[this.fileNameModel,this.primaryBitstreamModel]},{grid:{host:"form-row"}}),new I.S_O({id:"descriptionContainer",group:[this.descriptionModel]}),new I.S_O({id:"formatContainer",group:[this.selectedFormatModel,this.newFormatModel]})],this.newFormatBaseLayout="col col-sm-6 d-inline-block",this.formLayout={fileName:{grid:{host:"col col-sm-8 d-inline-block"}},primaryBitstream:{grid:{host:"col col-sm-4 d-inline-block switch"}},description:{grid:{host:"col-12 d-inline-block"}},embargo:{grid:{host:"col-12 d-inline-block"}},selectedFormat:{grid:{host:"col col-sm-6 d-inline-block"}},newFormat:{grid:{host:this.newFormatBaseLayout+" invisible"}},fileNamePrimaryContainer:{grid:{host:"row position-relative"}},descriptionContainer:{grid:{host:"row"}},formatContainer:{grid:{host:"row"}}},this.isIIIF=!1,this.subs=[]}ngOnInit(){this.itemId=this.route.snapshot.queryParams.itemId,this.entityType=this.route.snapshot.queryParams.entityType,this.bitstreamRD$=this.route.data.pipe((0,c.U)(a=>a.bitstream)),this.bitstreamFormatsRD$=this.bitstreamFormatService.findAll(this.findAllOptions);const t=this.bitstreamRD$.pipe((0,s.xw)(),(0,s.xe)()),o=this.bitstreamFormatsRD$.pipe((0,s.xw)(),(0,s.xe)());this.subs.push((0,L.a)(t,o).subscribe(([a,v])=>{this.bitstream=a,this.formats=v.page,this.setIiifStatus(this.bitstream)})),this.subs.push(this.translate.onLangChange.subscribe(()=>{this.updateFieldTranslations()}))}setForm(){this.formGroup=this.formService.createFormGroup(this.formModel),this.updateFormatModel(),this.updateForm(this.bitstream),this.updateFieldTranslations()}updateForm(t){this.formGroup.patchValue({fileNamePrimaryContainer:{fileName:t.name,primaryBitstream:!1},descriptionContainer:{description:t.firstMetadataValue("dc.description")},formatContainer:{newFormat:(0,u.Uh)(t.firstMetadata("dc.format"))?t.firstMetadata("dc.format").value:void 0}}),this.isIIIF&&this.formGroup.patchValue({iiifLabelContainer:{iiifLabel:t.firstMetadataValue(this.IIIF_LABEL_METADATA)},iiifTocContainer:{iiifToc:t.firstMetadataValue(this.IIIF_TOC_METADATA)},iiifWidthContainer:{iiifWidth:t.firstMetadataValue(this.IMAGE_WIDTH_METADATA)},iiifHeightContainer:{iiifHeight:t.firstMetadataValue(this.IMAGE_HEIGHT_METADATA)}}),this.bitstream.format.pipe((0,s.mc)()).subscribe(o=>{this.originalFormat=o,this.formGroup.patchValue({formatContainer:{selectedFormat:o.id}}),this.updateNewFormatLayout(o.id)})}updateFormatModel(){this.selectedFormatModel.options=this.formats.map(t=>Object.assign({value:t.id,label:this.isUnknownFormat(t.id)?this.translate.instant(this.KEY_PREFIX+"selectedFormat.unknown"):t.shortDescription}))}updateNewFormatLayout(t){this.formLayout.newFormat.grid.host=this.isUnknownFormat(t)?this.newFormatBaseLayout:this.newFormatBaseLayout+" invisible"}isUnknownFormat(t){const o=this.formats.find(a=>a.id===t);return(0,u.Uh)(o)&&o.supportLevel===N.o.Unknown}updateFieldTranslations(){this.inputModels.forEach(t=>{this.updateFieldTranslation(t)})}updateFieldTranslation(t){t.label=this.translate.instant(this.KEY_PREFIX+t.id+this.LABEL_KEY_SUFFIX),t.id!==this.primaryBitstreamModel.id&&(t.hint=this.translate.instant(this.KEY_PREFIX+t.id+this.HINT_KEY_SUFFIX))}onChange(t){const o=t.model;o.id===this.selectedFormatModel.id&&this.updateNewFormatLayout(o.value)}onSubmit(){const t=this.formGroup.getRawValue(),o=this.formToBitstream(t),a=this.formats.find(g=>g.id===t.formatContainer.selectedFormat);let M;M=a.id!==this.originalFormat.id?this.bitstreamService.updateFormat(this.bitstream,a).pipe((0,s.hC)(),(0,c.U)(g=>{if(!(0,u.Uh)(g)||!g.hasFailed)return g.payload;this.notificationsService.error(this.translate.instant(this.NOTIFICATIONS_PREFIX+"error.format.title"),g.errorMessage)})):(0,E.of)(this.bitstream),M.pipe((0,h.w)(()=>this.bitstreamService.update(o).pipe((0,s.Gp)()))).subscribe(()=>{this.bitstreamService.commitUpdates(),this.notificationsService.success(this.translate.instant(this.NOTIFICATIONS_PREFIX+"saved.title"),this.translate.instant(this.NOTIFICATIONS_PREFIX+"saved.content")),this.navigateToItemEditBitstreams()})}formToBitstream(t){const o=(0,O.cloneDeep)(this.bitstream),a=o.metadata;return A.S.setFirstValue(a,"dc.title",t.fileNamePrimaryContainer.fileName),A.S.setFirstValue(a,"dc.description",t.descriptionContainer.description),this.isIIIF&&((0,u.xb)(t.iiifLabelContainer.iiifLabel)?delete a[this.IIIF_LABEL_METADATA]:A.S.setFirstValue(a,this.IIIF_LABEL_METADATA,t.iiifLabelContainer.iiifLabel),(0,u.xb)(t.iiifTocContainer.iiifToc)?delete a[this.IIIF_TOC_METADATA]:A.S.setFirstValue(a,this.IIIF_TOC_METADATA,t.iiifTocContainer.iiifToc),(0,u.xb)(t.iiifWidthContainer.iiifWidth)?delete a[this.IMAGE_WIDTH_METADATA]:A.S.setFirstValue(a,this.IMAGE_WIDTH_METADATA,t.iiifWidthContainer.iiifWidth),(0,u.xb)(t.iiifHeightContainer.iiifHeight)?delete a[this.IMAGE_HEIGHT_METADATA]:A.S.setFirstValue(a,this.IMAGE_HEIGHT_METADATA,t.iiifHeightContainer.iiifHeight)),(0,u.UE)(t.formatContainer.newFormat)&&A.S.setFirstValue(a,"dc.format",t.formatContainer.newFormat),o.metadata=a,o}onCancel(){this.navigateToItemEditBitstreams()}navigateToItemEditBitstreams(){(0,u.Uh)(this.itemId)?this.router.navigate([(0,j.dZ)(this.entityType,this.itemId),"bitstreams"]):this.bitstream.bundle.pipe((0,s.Gp)(),(0,S.z)(t=>t.item.pipe((0,s.Gp)()))).subscribe(t=>{this.router.navigate([(0,j.tn)(t),"bitstreams"])})}setIiifStatus(t){const o=/OTHERCONTENT|THUMBNAIL|LICENSE/,a=/true|yes/i,v=this.bitstream.format.pipe((0,s.xw)(),(0,c.U)(R=>R.payload.mimetype.includes("image/"))),M=this.bitstream.bundle.pipe((0,s.xw)(),(0,c.U)(R=>null==this.dsoNameService.getName(R.payload).match(o))),g=this.bitstream.bundle.pipe((0,s.xw)(),(0,c.U)(R=>R.payload.item.pipe((0,s.xw)(),(0,c.U)(V=>V.payload.firstMetadataValue("dspace.iiif.enabled")&&null!==V.payload.firstMetadataValue("dspace.iiif.enabled").match(a))))),nt=(0,L.a)(v,M,g).subscribe(([R,V,ot])=>{R&&V&&ot&&(this.isIIIF=!0,this.inputModels.push(this.iiifLabelModel),this.formModel.push(this.iiifLabelContainer),this.inputModels.push(this.iiifTocModel),this.formModel.push(this.iiifTocContainer),this.inputModels.push(this.iiifWidthModel),this.formModel.push(this.iiifWidthContainer),this.inputModels.push(this.iiifHeightModel),this.formModel.push(this.iiifHeightContainer)),this.setForm(),this.changeDetectorRef.detectChanges()});this.subs.push(nt)}ngOnDestroy(){this.subs.filter(t=>(0,u.Uh)(t)).forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(r.gz),e.\u0275\u0275directiveInject(r.F0),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(m.Ye),e.\u0275\u0275directiveInject(I.w1X),e.\u0275\u0275directiveInject(G.sK),e.\u0275\u0275directiveInject(T.J),e.\u0275\u0275directiveInject(K._),e.\u0275\u0275directiveInject(U.T),e.\u0275\u0275directiveInject(F.O))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-edit-bitstream-page"]],decls:2,vars:3,consts:[[4,"ngVar"],["class","container",4,"ngVar"],[1,"container"],["class","row",4,"ngIf"],[3,"message",4,"ngIf"],[1,"row"],[1,"col-md-2"],[3,"thumbnail"],[1,"col-md-10"],[1,"col-12"],[1,"text-muted"],[3,"formId","formGroup","formModel","formLayout","submitLabel","submitForm","cancel","dfChange",4,"ngIf"],[3,"formId","formGroup","formModel","formLayout","submitLabel","submitForm","cancel","dfChange"],["additional","",1,"container","py-3"],[3,"routerLink"],[3,"message"]],template:function(t,o){1&t&&(e.\u0275\u0275template(0,f,3,3,"ng-container",0),e.\u0275\u0275pipe(1,"async")),2&t&&e.\u0275\u0275property("ngVar",e.\u0275\u0275pipeBind1(1,1,o.bitstreamRD$))},directives:[X.g,m.O5,Y.Z,J.U,z.JL,z.sg,r.yS,Q.q,Z.Z],pipes:[m.Ov,x.p,G.X$],styles:["[_nghost-%COMP%]     .switch{position:absolute;top:calc(var(--bs-spacer) * 2.5)}[_nghost-%COMP%]     ds-dynamic-form-control-container>div>label{margin-top:1.75rem}"],changeDetection:0}),n})();var y=i(74851),q=i(93369);const tt=[(0,q.l)("bundle",{},(0,q.l)("item")),(0,q.l)("format")];let w=(()=>{class n{constructor(t){this.bitstreamService=t}resolve(t,o){return this.bitstreamService.findById(t.params.id,!0,!1,...this.followLinks).pipe((0,s.hC)())}get followLinks(){return tt}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(T.J))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();var et=i(62615),dt=i(66765),lt=i(34981),mt=i(48739),ct=i(86527),ut=i(50590),ft=i(40195);const ht=function(n){return["/bitstreams",n,"edit"]};let pt=(()=>{class n{constructor(t){this.route=t}ngOnInit(){this.dsoRD$=this.route.data.pipe((0,ut.P)(),(0,c.U)(t=>t.bitstream))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(r.gz))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-collection-authorizations"]],decls:10,vars:12,consts:[[1,"container"],[3,"resourceType","resourceUUID"],[1,"button-row","bottom"],[1,"text-right"],["role","button",1,"btn","btn-outline-secondary","mr-1",3,"routerLink"],[1,"fas","fa-arrow-left"]],template:function(t,o){if(1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"ds-resource-policies",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275elementStart(3,"div",2)(4,"div",3)(5,"a",4),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275element(7,"i",5),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementEnd()()()()),2&t){let a,v;e.\u0275\u0275advance(1),e.\u0275\u0275property("resourceType","bitstream")("resourceUUID",null==(a=e.\u0275\u0275pipeBind1(2,4,o.dsoRD$))||null==a.payload?null:a.payload.id),e.\u0275\u0275advance(4),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction1(10,ht,null==(v=e.\u0275\u0275pipeBind1(6,6,o.dsoRD$))||null==v.payload?null:v.payload.id)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(9,8,"bitstream.edit.return")," ")}},directives:[ft.F,r.yS],pipes:[m.Ov,G.X$],encapsulation:2}),n})(),at=(()=>{class n{constructor(t){this.bitstreamDataService=t}resolve(t,o){const a=t.params.prefix,v=t.params.suffix,M=t.params.filename;let g=t.params.sequence_id;return(0,u.xI)(g)&&(g=t.queryParams.sequenceId),this.bitstreamDataService.findByItemHandle(`${a}/${v}`,g,M).pipe((0,s.hC)())}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(T.J))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var vt=i(77284),gt=i(83772),It=i(94476),yt=i(50503),Et=i(86362);let st=(()=>{class n extends Et.B{constructor(t,o,a){super(o,a),this.bitstreamService=t,this.linkService=o,this.dsoNameService=a}getBreadcrumbs(t,o){const a=this.dsoNameService.getName(t),v=new gt.a(a,o);return this.getOwningItem(t.uuid).pipe((0,h.w)(M=>{if((0,u.UE)(M)&&(0,u.Uh)(M.payload)){const g=M.payload;return super.getBreadcrumbs(g,(0,yt.Y4)(g))}return(0,E.of)([])}),(0,c.U)(M=>[...M,v]))}getOwningItem(t){return this.bitstreamService.findById(t,!0,!0,...tt).pipe((0,s.hC)(),(0,s.xe)(),(0,h.w)(o=>(0,u.Uh)(o)?o.bundle.pipe((0,s.hC)(),(0,s.xe)(),(0,h.w)(a=>(0,u.Uh)(a)?a.item.pipe((0,s.hC)()):(0,E.of)(void 0))):(0,E.of)(void 0)))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(T.J),e.\u0275\u0275inject(It.M),e.\u0275\u0275inject(K._))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),it=(()=>{class n extends vt.t{constructor(t,o){super(t,o),this.breadcrumbService=t,this.dataService=o}get followLinks(){return tt}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(st),e.\u0275\u0275inject(T.J))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Ct=i(98655);let _t=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({providers:[w,it,st],imports:[[r.Bz.forChild([{path:"handle/:prefix/:suffix/:filename",component:et.h,resolve:{bitstream:at}},{path:":prefix/:suffix/:sequence_id/:filename",component:et.h,resolve:{bitstream:at}},{path:":id/download",component:et.h,resolve:{bitstream:w}},{path:":id/edit",component:b,resolve:{bitstream:w,breadcrumb:it},canActivate:[y.J]},{path:":id/authorizations",children:[{path:"create",resolve:{resourcePolicyTarget:dt.a},component:lt.v,data:{title:"resource-policies.create.page.title",showBreadcrumbs:!0}},{path:"edit",resolve:{breadcrumb:Ct.t,resourcePolicy:mt.b},component:ct.x,data:{breadcrumbKey:"item.edit",title:"resource-policies.edit.page.title",showBreadcrumbs:!0}},{path:"",resolve:{bitstream:w,breadcrumb:it},component:pt,data:{title:"bitstream.edit.authorizations.title",showBreadcrumbs:!0}}]}])]]}),n})();var Tt=i(10194),Ft=i(94337);let Bt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[m.ez,D.m,_t,Tt.e,Ft.q]]}),n})()},83772:(W,B,i)=>{i.d(B,{a:()=>m});class m{constructor(r,c){this.text=r,this.url=c}}},77284:(W,B,i)=>{i.d(B,{t:()=>L});var m=i(86362),D=i(68285),r=i(54004),c=i(24702),h=i(72839),S=i(5e3);let L=(()=>{class E{constructor(_,O){this.breadcrumbService=_,this.dataService=O}resolve(_,O){const T=_.params.id;return this.dataService.findById(T,!0,!1,...this.followLinks).pipe((0,D.hC)(),(0,D.xe)(),(0,r.U)(s=>{if((0,c.Uh)(s)){const U=O.url,F=U.substr(0,U.indexOf(T))+T;return{provider:this.breadcrumbService,key:s,url:F}}}))}}return E.\u0275fac=function(_){return new(_||E)(S.\u0275\u0275inject(m.B),S.\u0275\u0275inject(h.t))},E.\u0275prov=S.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac,providedIn:"root"}),E})()},86362:(W,B,i)=>{i.d(B,{B:()=>T});var m=i(83772),D=i(39646),r=i(94476),c=i(93369),h=i(40367),S=i(63900),L=i(54004),E=i(24702),I=i(50503),_=i(5e3),O=i(83616);let T=(()=>{class s{constructor(F,N){this.linkService=F,this.dsoNameService=N}getBreadcrumbs(F,N){const u=this.dsoNameService.getName(F),A=new m.a(u,N),j=F.getParentLinkKey();return this.linkService.resolveLink(F,(0,c.l)(j))[j].pipe((0,h.s)(C=>C.hasSucceeded||204===C.statusCode),(0,S.w)(C=>{if((0,E.Uh)(C.payload)){const H=C.payload;return this.getBreadcrumbs(H,(0,I.Y4)(H))}return(0,D.of)([])}),(0,L.U)(C=>[...C,A]))}}return s.\u0275fac=function(F){return new(F||s)(_.\u0275\u0275inject(r.M),_.\u0275\u0275inject(O._))},s.\u0275prov=_.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},10194:(W,B,i)=>{i.d(B,{e:()=>k});var m=i(69808),D=i(63311),r=i(5e3),c=i(8108),h=i(66212);function S(p,P){if(1&p){const d=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"ds-dynamic-form-control-container",1),r.\u0275\u0275listener("dfBlur",function(b){r.\u0275\u0275restoreView(d);const y=r.\u0275\u0275nextContext();return y.onCustomEvent(b,y.blur)})("dfChange",function(b){r.\u0275\u0275restoreView(d);const y=r.\u0275\u0275nextContext();return y.onCustomEvent(b,y.change)})("dfFocus",function(b){r.\u0275\u0275restoreView(d);const y=r.\u0275\u0275nextContext();return y.onCustomEvent(b,y.focus)})("ngbEvent",function(b){r.\u0275\u0275restoreView(d);const y=r.\u0275\u0275nextContext();return y.onCustomEvent(b,y.ngbEvent)}),r.\u0275\u0275elementEnd()}if(2&p){const d=P.$implicit,f=r.\u0275\u0275nextContext();r.\u0275\u0275classProp("d-none",d.hidden),r.\u0275\u0275property("formId",f.formId)("group",f.formGroup)("hasErrorMessaging",d.hasErrorMessages)("hidden",d.hidden)("layout",f.formLayout)("model",d)("templates",f.templates)("asBootstrapFormGroup",!0)}}let L=(()=>{class p extends c.rmD{constructor(d,f){super(d,f),this.blur=new r.EventEmitter,this.change=new r.EventEmitter,this.focus=new r.EventEmitter,this.ngbEvent=new r.EventEmitter}}return p.\u0275fac=function(d){return new(d||p)(r.\u0275\u0275directiveInject(r.ChangeDetectorRef),r.\u0275\u0275directiveInject(c.rJA))},p.\u0275cmp=r.\u0275\u0275defineComponent({type:p,selectors:[["ds-dynamic-form"]],contentQueries:function(d,f,b){if(1&d&&r.\u0275\u0275contentQuery(b,c.ATj,4),2&d){let y;r.\u0275\u0275queryRefresh(y=r.\u0275\u0275loadQuery())&&(f.templates=y)}},viewQuery:function(d,f){if(1&d&&r.\u0275\u0275viewQuery(h.B,5),2&d){let b;r.\u0275\u0275queryRefresh(b=r.\u0275\u0275loadQuery())&&(f.components=b)}},inputs:{formId:"formId",formGroup:"formGroup",formModel:"formModel",formLayout:"formLayout"},outputs:{blur:"dfBlur",change:"dfChange",focus:"dfFocus",ngbEvent:"ngbEvent"},features:[r.\u0275\u0275InheritDefinitionFeature],decls:1,vars:2,consts:[[3,"formId","group","hasErrorMessaging","hidden","d-none","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent",4,"ngFor","ngForOf","ngForTrackBy"],[3,"formId","group","hasErrorMessaging","hidden","layout","model","templates","asBootstrapFormGroup","dfBlur","dfChange","dfFocus","ngbEvent"]],template:function(d,f){1&d&&r.\u0275\u0275template(0,S,1,10,"ds-dynamic-form-control-container",0),2&d&&r.\u0275\u0275property("ngForOf",f.formModel)("ngForTrackBy",f.trackByFn)},directives:[m.sg,h.B],encapsulation:2}),p})();i(88766),i(21650),i(8671),i(55648),i(42803),i(28554),i(86471),i(22280),i(74043);var u=i(66319),A=i(79001),G=(i(19869),i(64204),i(53006),i(32272),i(57981)),K=i(86956),X=i(24440),Z=(i(93571),i(77410),i(29635),i(13457),i(65806)),x=i(93075),$=i(21283);let k=(()=>{class p{}return p.\u0275fac=function(d){return new(d||p)},p.\u0275mod=r.\u0275\u0275defineNgModule({type:p}),p.\u0275inj=r.\u0275\u0275defineInjector({providers:[{provide:c.y8$,useValue:h._}],imports:[[m.ez,c.H9g,Z.zj,X.t,G.m,K.aw]]}),p})();r.\u0275\u0275setComponentScope(u.i,[x.JL,x.sg,x.x0,m.mk,m.sg,h.B],[]),r.\u0275\u0275setComponentScope(A.s,[x.JL,x.sg,x.CE,m.mk,$.Wj,m.sg,$.Zt,$.Bh,x.x0,m.tP,h.B],[]),r.\u0275\u0275setComponentScope(D.U,[x._Y,x.JL,x.sg,L,c.ATj,m.O5],[K.X$,m.Ov])}}]);