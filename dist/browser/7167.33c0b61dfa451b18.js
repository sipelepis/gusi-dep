"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[7167],{37167:(q,r,s)=>{s.r(r),s.d(r,{SiteStatisticsPageComponent:()=>Q});var S=s(12467),v=s(11262),x=s(7379),f=s(21160),h=s(28709),c=s(10210),e=s(70074),l=s(37895),o=s(78819);let _=(()=>{class n{constructor(t,i){this.http=t,this.httpBackend=i}callWithoutInterceptor7daysago(){return this.httpBackend.handle(new o.aW("GET","https://coe.repository-uecal.com/stats/ga1/7daysago"))}callWithoutInterceptor28daysago(){return this.httpBackend.handle(new o.aW("GET","https://coe.repository-uecal.com/stats/ga1/28daysago"))}callWithoutInterceptorlastmonth(){return this.httpBackend.handle(new o.aW("GET","https://coe.repository-uecal.com/stats/ga1/lastmonth"))}callWithoutInterceptorRealTime(){return this.httpBackend.handle(new o.aW("GET","https://coe.repository-uecal.com/stats/realtime/activeusers"))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(o.eN),e.\u0275\u0275inject(o.jN))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var u=s(53043),I=s(41633),C=s(76924),y=s(11602),P=s(86553);const E=function(n){return{scope:n}};function V(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"h2",7),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().ngVar,i=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("id",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,2,"statistics.header",e.\u0275\u0275pureFunction1(5,E,i.getName(t)))," ")}}function w(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,V,3,7,"h2",6),e.\u0275\u0275elementContainerEnd()),2&n){const t=a.ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t)}}function M(n,a){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"ds-themed-loading"),e.\u0275\u0275elementContainerEnd())}function L(n,a){if(1&n&&e.\u0275\u0275element(0,"ds-statistics-table",10),2&n){const t=a.$implicit;e.\u0275\u0275classMapInterpolate1("m-2 ",t.id,""),e.\u0275\u0275property("report",t)}}function T(n,a){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"statistics.page.no-data")," "))}function A(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,L,1,4,"ds-statistics-table",9),e.\u0275\u0275template(2,T,3,3,"div",8),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().ngVar,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(3,2,i.hasData$))}}function b(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,M,2,0,"ng-container",8),e.\u0275\u0275template(2,A,4,4,"ng-container",8),e.\u0275\u0275elementContainerEnd()),2&n){const t=a.ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t)}}function R(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"strong",20),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.ActiveViewers)}}function j(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"small",21),e.\u0275\u0275element(1,"i",22),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.getPercentage(t.ActiveViewersLM,t.ActiveViewers),"%")}}function W(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"small",23),e.\u0275\u0275element(1,"i",24),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.getPercentage(t.ActiveViewersLM,t.ActiveViewers),"%")}}function F(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"h5"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.ActiveViewersLM)}}function B(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",11)(1,"div",12)(2,"div",13)(3,"p",14)(4,"strong"),e.\u0275\u0275text(5,"ACTIVE USERS"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"h5",15),e.\u0275\u0275template(7,R,2,1,"strong",16),e.\u0275\u0275template(8,j,3,1,"small",17),e.\u0275\u0275template(9,W,3,1,"small",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"hr"),e.\u0275\u0275elementStart(11,"p",19),e.\u0275\u0275text(12," Last Month "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,F,2,1,"h5",8),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.ActiveViewers&&t.ActiveViewersLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.ActiveViewers<t.ActiveViewersLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.ActiveViewers>=t.ActiveViewersLM),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.ActiveViewersLM)}}function O(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"strong",20),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.ScreenPageViews)}}function $(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"small",21),e.\u0275\u0275element(1,"i",22),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.getPercentage(t.ScreenPageViewsLM,t.ScreenPageViews),"%")}}function G(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"small",23),e.\u0275\u0275element(1,"i",24),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.getPercentage(t.ScreenPageViewsLM,t.ScreenPageViews),"%")}}function D(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"h5"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.ScreenPageViewsLM)}}function N(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",11)(1,"div",12)(2,"div",13)(3,"p",14)(4,"strong"),e.\u0275\u0275text(5,"SCREEN PAGE VIEWS"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"h5",15),e.\u0275\u0275template(7,O,2,1,"strong",16),e.\u0275\u0275template(8,$,3,1,"small",17),e.\u0275\u0275template(9,G,3,1,"small",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"hr"),e.\u0275\u0275elementStart(11,"p",19),e.\u0275\u0275text(12," Last Month "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,D,2,1,"h5",8),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.ScreenPageViews&&t.ScreenPageViewsLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.ScreenPageViews<t.ScreenPageViewsLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.ScreenPageViews>=t.ScreenPageViewsLM),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.ScreenPageViewsLM)}}function U(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"strong",20),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.Sessions)}}function z(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"small",21),e.\u0275\u0275element(1,"i",22),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.getPercentage(t.SessionsLM,t.Sessions),"%")}}function K(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"small",23),e.\u0275\u0275element(1,"i",24),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.getPercentage(t.SessionsLM,t.Sessions),"%")}}function X(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"h5"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.SessionsLM)}}function Z(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",25)(1,"div",12)(2,"div",13)(3,"p",14)(4,"strong"),e.\u0275\u0275text(5,"SESSIONS"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"h5",15),e.\u0275\u0275template(7,U,2,1,"strong",16),e.\u0275\u0275template(8,z,3,1,"small",17),e.\u0275\u0275template(9,K,3,1,"small",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"hr"),e.\u0275\u0275elementStart(11,"p",19),e.\u0275\u0275text(12," Last Month "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,X,2,1,"h5",8),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.Sessions&&t.SessionsLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.Sessions<t.SessionsLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.Sessions>=t.SessionsLM),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.SessionsLM)}}function H(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tbody")(2,"tr")(3,"td")(4,"p",29),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"td")(7,"p",29),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"td")(10,"p",29),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd()),2&n){const t=a.$implicit;e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.dimensionValues[0].value),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.dimensionValues[1].value),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.metricValues[0].value)}}function J(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"table",26)(1,"thead",27)(2,"tr")(3,"th"),e.\u0275\u0275text(4,"Country"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"th"),e.\u0275\u0275text(6,"City"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"th"),e.\u0275\u0275text(8,"Active Users"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(9,H,12,3,"ng-container",28),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(9),e.\u0275\u0275property("ngForOf",t.RealtimeRes)}}let Q=(()=>{class n extends S.f{constructor(t,i,m,p,d,Y,g,k,ee){super(t,m,p,d,g),this.route=t,this.gaservice=i,this.router=m,this.usageReportService=p,this.nameService=d,this.siteService=Y,this.authService=g,this.http=k,this.ActiveViewers=void 0,this.ScreenPageViews=void 0,this.Sessions=void 0,this.ActiveViewersLM=void 0,this.ScreenPageViewsLM=void 0,this.SessionsLM=void 0,this.RealtimeResIndiv=void 0,this.RealtimeRes=[],this.RealTimeCity=void 0,this.RealTimeCountry=void 0,this.RealTimeCityUsers=void 0}ngOnInit(){this.getActualData28daysAgo(),this.getActualDataLastMonth(),this.getRealtime(),super.ngOnInit()}getPercentage(t,i){return(i-t)/t*100}getRealtime(){this.gaservice.callWithoutInterceptorRealTime().subscribe(t=>{console.log(t.body),t.body.rows&&t.body.rows.forEach(i=>{this.RealtimeRes.push(i),console.log(this.RealtimeRes)})})}getActualDataLastMonth(){this.gaservice.callWithoutInterceptorlastmonth().subscribe(t=>{this.ActiveViewersLM=t.body[0].value,this.ScreenPageViewsLM=t.body[1].value,this.SessionsLM=t.body[2].value})}getActualData28daysAgo(){this.gaservice.callWithoutInterceptor28daysago().subscribe(t=>{this.ActiveViewers=t.body[0].value,this.ScreenPageViews=t.body[1].value,this.Sessions=t.body[2].value})}getScope$(){return this.siteService.find()}getReports$(){return this.scope$.pipe((0,f.w)(t=>this.usageReportService.searchStatistics(t._links.self.href,0,10)))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(l.gz),e.\u0275\u0275directiveInject(_),e.\u0275\u0275directiveInject(l.F0),e.\u0275\u0275directiveInject(x.f),e.\u0275\u0275directiveInject(u._),e.\u0275\u0275directiveInject(v.a),e.\u0275\u0275directiveInject(h.e8),e.\u0275\u0275directiveInject(o.eN),e.\u0275\u0275directiveInject(c.K0))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-site-statistics-page"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:10,vars:10,consts:[[1,"container"],[4,"ngVar"],[1,"row"],["class","col-lg-4 col-md-6 mb-4",4,"ngIf"],["class","col-lg-4 col-md-12 mb-4",4,"ngIf"],["class","table align-middle mb-0 bg-white",4,"ngIf"],["class","header",3,"id",4,"ngIf"],[1,"header",3,"id"],[4,"ngIf"],[3,"report","class",4,"ngFor","ngForOf"],[3,"report"],[1,"col-lg-4","col-md-6","mb-4"],[1,"card"],[1,"card-body"],[1,"text-uppercase","small","mb-2"],[1,"mb-0"],["class","pr-2",4,"ngIf"],["class","text-danger ms-2",4,"ngIf"],["class","text-success ms-2",4,"ngIf"],[1,"text-uppercase","text-muted","small","mb-2"],[1,"pr-2"],[1,"text-danger","ms-2"],[1,"fas","fa-arrow-down","fa-sm","pe-1"],[1,"text-success","ms-2"],[1,"fas","fa-arrow-up","fa-sm","pe-1"],[1,"col-lg-4","col-md-12","mb-4"],[1,"table","align-middle","mb-0","bg-white"],[1,"bg-light"],[4,"ngFor","ngForOf"],[1,"fw-normal","mb-1"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,w,2,1,"ng-container",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,b,3,2,"ng-container",1),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementStart(5,"div",2),e.\u0275\u0275template(6,B,14,4,"div",3),e.\u0275\u0275template(7,N,14,4,"div",3),e.\u0275\u0275template(8,Z,14,4,"div",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,J,10,1,"table",5),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngVar",e.\u0275\u0275pipeBind1(2,6,i.scope$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngVar",e.\u0275\u0275pipeBind1(4,8,i.reports$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.ActiveViewers&&i.ActiveViewersLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.ScreenPageViews&&i.ScreenPageViewsLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.Sessions&&i.SessionsLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0!=i.RealtimeRes.length))},directives:[I.g,c.O5,C.Z,c.sg,y.A],pipes:[c.Ov,P.X$],styles:[""]}),n})()}}]);