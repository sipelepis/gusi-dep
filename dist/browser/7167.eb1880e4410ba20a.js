"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[7167],{37167:(Y,r,s)=>{s.r(r),s.d(r,{SiteStatisticsPageComponent:()=>Z});var S=s(12467),v=s(11262),x=s(7379),f=s(21160),h=s(28709),o=s(10210),e=s(70074),l=s(37895),c=s(78819);let _=(()=>{class n{constructor(t,i){this.http=t,this.httpBackend=i}callWithoutInterceptor7daysago(){return this.httpBackend.handle(new c.aW("GET","https://coe.repository-uecal.com/stats/ga1/7daysago"))}callWithoutInterceptor28daysago(){return this.httpBackend.handle(new c.aW("GET","https://coe.repository-uecal.com/stats/ga1/28daysago"))}callWithoutInterceptorlastmonth(){return this.httpBackend.handle(new c.aW("GET","https://coe.repository-uecal.com/stats/ga1/lastmonth"))}test(){return this.http.get("http://localhost:1337/stats/ga1")}getData(){return this.http.get("http://localhost:3000/stats",{withCredentials:!0})}getRunreport(){}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(c.eN),e.\u0275\u0275inject(c.jN))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var u=s(53043),I=s(41633),C=s(76924),P=s(11602),y=s(86553);const V=function(n){return{scope:n}};function E(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"h2",6),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext().ngVar,i=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("id",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(2,2,"statistics.header",e.\u0275\u0275pureFunction1(5,V,i.getName(t)))," ")}}function w(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,E,3,7,"h2",5),e.\u0275\u0275elementContainerEnd()),2&n){const t=a.ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t)}}function M(n,a){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"ds-themed-loading"),e.\u0275\u0275elementContainerEnd())}function L(n,a){if(1&n&&e.\u0275\u0275element(0,"ds-statistics-table",9),2&n){const t=a.$implicit;e.\u0275\u0275classMapInterpolate1("m-2 ",t.id,""),e.\u0275\u0275property("report",t)}}function A(n,a){1&n&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"statistics.page.no-data")," "))}function T(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,L,1,4,"ds-statistics-table",8),e.\u0275\u0275template(2,A,3,3,"div",7),e.\u0275\u0275pipe(3,"async"),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext().ngVar,i=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!e.\u0275\u0275pipeBind1(3,2,i.hasData$))}}function j(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,M,2,0,"ng-container",7),e.\u0275\u0275template(2,T,4,4,"ng-container",7),e.\u0275\u0275elementContainerEnd()),2&n){const t=a.ngVar;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t)}}function b(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"strong",19),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.ActiveViewers)}}function B(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"small",20),e.\u0275\u0275element(1,"i",21),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.getPercentage(t.ActiveViewersLM,t.ActiveViewers),"%")}}function W(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"small",22),e.\u0275\u0275element(1,"i",23),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.getPercentage(t.ActiveViewersLM,t.ActiveViewers),"%")}}function F(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"h5"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.ActiveViewersLM)}}function $(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",10)(1,"div",11)(2,"div",12)(3,"p",13)(4,"strong"),e.\u0275\u0275text(5,"ACTIVE USERS"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"h5",14),e.\u0275\u0275template(7,b,2,1,"strong",15),e.\u0275\u0275template(8,B,3,1,"small",16),e.\u0275\u0275template(9,W,3,1,"small",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"hr"),e.\u0275\u0275elementStart(11,"p",18),e.\u0275\u0275text(12," Last Month "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,F,2,1,"h5",7),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.ActiveViewers&&t.ActiveViewersLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.ActiveViewers<t.ActiveViewersLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.ActiveViewers>=t.ActiveViewersLM),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.ActiveViewersLM)}}function D(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"strong",19),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.ScreenPageViews)}}function G(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"small",20),e.\u0275\u0275element(1,"i",21),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.getPercentage(t.ScreenPageViewsLM,t.ScreenPageViews),"%")}}function O(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"small",22),e.\u0275\u0275element(1,"i",23),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.getPercentage(t.ScreenPageViewsLM,t.ScreenPageViews),"%")}}function N(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"h5"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.ScreenPageViewsLM)}}function R(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",10)(1,"div",11)(2,"div",12)(3,"p",13)(4,"strong"),e.\u0275\u0275text(5,"SCREEN PAGE VIEWS"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"h5",14),e.\u0275\u0275template(7,D,2,1,"strong",15),e.\u0275\u0275template(8,G,3,1,"small",16),e.\u0275\u0275template(9,O,3,1,"small",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"hr"),e.\u0275\u0275elementStart(11,"p",18),e.\u0275\u0275text(12," Last Month "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,N,2,1,"h5",7),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.ScreenPageViews&&t.ScreenPageViewsLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.ScreenPageViews<t.ScreenPageViewsLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.ScreenPageViews>=t.ScreenPageViewsLM),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.ScreenPageViewsLM)}}function z(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"strong",19),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.Sessions)}}function J(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"small",20),e.\u0275\u0275element(1,"i",21),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.getPercentage(t.SessionsLM,t.Sessions),"%")}}function K(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"small",22),e.\u0275\u0275element(1,"i",23),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",t.getPercentage(t.SessionsLM,t.Sessions),"%")}}function U(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"h5"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.SessionsLM)}}function X(n,a){if(1&n&&(e.\u0275\u0275elementStart(0,"div",24)(1,"div",11)(2,"div",12)(3,"p",13)(4,"strong"),e.\u0275\u0275text(5,"SESSIONS"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"h5",14),e.\u0275\u0275template(7,z,2,1,"strong",15),e.\u0275\u0275template(8,J,3,1,"small",16),e.\u0275\u0275template(9,K,3,1,"small",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"hr"),e.\u0275\u0275elementStart(11,"p",18),e.\u0275\u0275text(12," Last Month "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,U,2,1,"h5",7),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.Sessions&&t.SessionsLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.Sessions<t.SessionsLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.Sessions>=t.SessionsLM),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.SessionsLM)}}let Z=(()=>{class n extends S.f{constructor(t,i,p,m,d,H,g,Q,k){super(t,p,m,d,g),this.route=t,this.gaservice=i,this.router=p,this.usageReportService=m,this.nameService=d,this.siteService=H,this.authService=g,this.http=Q,this.ActiveViewers=void 0,this.ScreenPageViews=void 0,this.Sessions=void 0,this.ActiveViewersPer=void 0,this.ScreenPageViewsPer=void 0,this.SessionsPer=void 0,this.ActiveViewersLM=void 0,this.ScreenPageViewsLM=void 0,this.SessionsLM=void 0,this.dataInvalid='{ "type": 0 }',this.isJson=!1}ngOnInit(){super.ngOnInit(),this.getActualData28daysAgo(),this.getActualDataLastMonth()}getPercentage(t,i){return(i-t)/t*100}getActualDataLastMonth(){this.gaservice.callWithoutInterceptorlastmonth().subscribe(t=>{this.ActiveViewersLM=t.body[0].value,this.ScreenPageViewsLM=t.body[1].value,this.SessionsLM=t.body[2].value})}getActualData28daysAgo(){this.gaservice.callWithoutInterceptor28daysago().subscribe(t=>{this.ActiveViewers=t.body[0].value,this.ScreenPageViews=t.body[1].value,this.Sessions=t.body[2].value})}getScope$(){return this.siteService.find()}getReports$(){return this.scope$.pipe((0,f.w)(t=>this.usageReportService.searchStatistics(t._links.self.href,0,10)))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(l.gz),e.\u0275\u0275directiveInject(_),e.\u0275\u0275directiveInject(l.F0),e.\u0275\u0275directiveInject(x.f),e.\u0275\u0275directiveInject(u._),e.\u0275\u0275directiveInject(v.a),e.\u0275\u0275directiveInject(h.e8),e.\u0275\u0275directiveInject(c.eN),e.\u0275\u0275directiveInject(o.K0))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ds-site-statistics-page"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:9,vars:9,consts:[[1,"container"],[4,"ngVar"],[1,"row"],["class","col-lg-4 col-md-6 mb-4",4,"ngIf"],["class","col-lg-4 col-md-12 mb-4",4,"ngIf"],["class","header",3,"id",4,"ngIf"],[1,"header",3,"id"],[4,"ngIf"],[3,"report","class",4,"ngFor","ngForOf"],[3,"report"],[1,"col-lg-4","col-md-6","mb-4"],[1,"card"],[1,"card-body"],[1,"text-uppercase","small","mb-2"],[1,"mb-0"],["class","pr-2",4,"ngIf"],["class","text-danger ms-2",4,"ngIf"],["class","text-success ms-2",4,"ngIf"],[1,"text-uppercase","text-muted","small","mb-2"],[1,"pr-2"],[1,"text-danger","ms-2"],[1,"fas","fa-arrow-down","fa-sm","pe-1"],[1,"text-success","ms-2"],[1,"fas","fa-arrow-up","fa-sm","pe-1"],[1,"col-lg-4","col-md-12","mb-4"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,w,2,1,"ng-container",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,j,3,2,"ng-container",1),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275elementStart(5,"div",2),e.\u0275\u0275template(6,$,14,4,"div",3),e.\u0275\u0275template(7,R,14,4,"div",3),e.\u0275\u0275template(8,X,14,4,"div",4),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngVar",e.\u0275\u0275pipeBind1(2,5,i.scope$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngVar",e.\u0275\u0275pipeBind1(4,7,i.reports$)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",i.ActiveViewers&&i.ActiveViewersLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.ScreenPageViews&&i.ScreenPageViewsLM),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",i.Sessions&&i.SessionsLM))},directives:[I.g,o.O5,C.Z,o.sg,P.A],pipes:[o.Ov,y.X$],styles:[""]}),n})()}}]);